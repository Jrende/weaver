{"version":3,"file":"bundle.js","sources":["../../node_modules/tinycolor2/tinycolor.js","../../node_modules/svelte/internal/index.mjs","../../node_modules/svelte-navigator/src/utils.js","../../node_modules/svelte/store/index.mjs","../../node_modules/svelte-navigator/src/contexts.js","../../node_modules/svelte-navigator/src/paths.js","../../node_modules/svelte-navigator/src/warning.js","../../node_modules/svelte-navigator/src/routes.js","../../node_modules/svelte-navigator/src/history.js","../../node_modules/svelte-navigator/src/a11y.js","../../node_modules/svelte-navigator/src/Router.svelte","../../node_modules/svelte-navigator/src/hooks.js","../../node_modules/svelte-navigator/src/Route.svelte","../../node_modules/svelte-navigator/src/actions.js","../../node_modules/immutable/dist/immutable.es.js","../../src/stores/UI.js","../../src/components/Grid/Grid.svelte","../../src/stores/Draft.js","../../src/util/DraftUtil.js","../../src/components/Sidebar/pages/WeaveSettings.svelte","../../src/components/WeaveDisplay/gfx/VertexArray.js","../../src/components/WeaveDisplay/gfx/shader/Shader.js","../../node_modules/gl-matrix/esm/common.js","../../node_modules/gl-matrix/esm/mat4.js","../../node_modules/gl-matrix/esm/vec3.js","../../node_modules/gl-matrix/esm/vec4.js","../../node_modules/gl-matrix/esm/quat.js","../../node_modules/gl-matrix/esm/mat3.js","../../node_modules/gl-matrix/esm/vec2.js","../../src/components/ColorPicker/ColorPicker.svelte","../../src/components/ColorPicker/Ring.js","../../src/components/WeaveDisplay/gfx/geometry/Geometry.js","../../src/components/ColorPicker/util.js","../../src/components/Sidebar/pages/YarnSettings.svelte","../../src/util/MathUtil.js","../../src/components/Sidebar/pages/PatternFill.svelte","../../src/components/Sidebar/Sidebar.svelte","../../src/components/WeaveDisplay/gfx/shader/index.js","../../src/components/WeaveDisplay/gfx/Texture.js","../../src/components/WeaveDisplay/gfx/renderers/RendererEventTarget.js","../../src/components/WeaveDisplay/gfx/renderers/TieupRenderer.js","../../src/components/WeaveDisplay/gfx/renderers/GridRenderer.js","../../src/components/WeaveDisplay/gfx/renderers/WeaveRenderer.js","../../src/components/WeaveDisplay/gfx/renderers/ColorRowRenderer.js","../../src/components/WeaveDisplay/gfx/TextureUtil.js","../../src/components/WeaveDisplay/gfx/Renderer.js","../../src/components/ScrollPane/ScrollPane.svelte","../../src/components/WeaveDisplay/WeaveDisplay.svelte","../../src/components/YarnSelector/YarnSelector.svelte","../../src/pages/Editor.svelte","../../src/pages/Help.svelte","../../src/App.svelte","../../src/main.js"],"sourcesContent":["// TinyColor v1.4.2\n// https://github.com/bgrins/TinyColor\n// Brian Grinstead, MIT License\n\n(function(Math) {\n\nvar trimLeft = /^\\s+/,\n    trimRight = /\\s+$/,\n    tinyCounter = 0,\n    mathRound = Math.round,\n    mathMin = Math.min,\n    mathMax = Math.max,\n    mathRandom = Math.random;\n\nfunction tinycolor (color, opts) {\n\n    color = (color) ? color : '';\n    opts = opts || { };\n\n    // If input is already a tinycolor, return itself\n    if (color instanceof tinycolor) {\n       return color;\n    }\n    // If we are called as a function, call using new instead\n    if (!(this instanceof tinycolor)) {\n        return new tinycolor(color, opts);\n    }\n\n    var rgb = inputToRGB(color);\n    this._originalInput = color,\n    this._r = rgb.r,\n    this._g = rgb.g,\n    this._b = rgb.b,\n    this._a = rgb.a,\n    this._roundA = mathRound(100*this._a) / 100,\n    this._format = opts.format || rgb.format;\n    this._gradientType = opts.gradientType;\n\n    // Don't let the range of [0,255] come back in [0,1].\n    // Potentially lose a little bit of precision here, but will fix issues where\n    // .5 gets interpreted as half of the total, instead of half of 1\n    // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n    if (this._r < 1) { this._r = mathRound(this._r); }\n    if (this._g < 1) { this._g = mathRound(this._g); }\n    if (this._b < 1) { this._b = mathRound(this._b); }\n\n    this._ok = rgb.ok;\n    this._tc_id = tinyCounter++;\n}\n\ntinycolor.prototype = {\n    isDark: function() {\n        return this.getBrightness() < 128;\n    },\n    isLight: function() {\n        return !this.isDark();\n    },\n    isValid: function() {\n        return this._ok;\n    },\n    getOriginalInput: function() {\n      return this._originalInput;\n    },\n    getFormat: function() {\n        return this._format;\n    },\n    getAlpha: function() {\n        return this._a;\n    },\n    getBrightness: function() {\n        //http://www.w3.org/TR/AERT#color-contrast\n        var rgb = this.toRgb();\n        return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n    },\n    getLuminance: function() {\n        //http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n        var rgb = this.toRgb();\n        var RsRGB, GsRGB, BsRGB, R, G, B;\n        RsRGB = rgb.r/255;\n        GsRGB = rgb.g/255;\n        BsRGB = rgb.b/255;\n\n        if (RsRGB <= 0.03928) {R = RsRGB / 12.92;} else {R = Math.pow(((RsRGB + 0.055) / 1.055), 2.4);}\n        if (GsRGB <= 0.03928) {G = GsRGB / 12.92;} else {G = Math.pow(((GsRGB + 0.055) / 1.055), 2.4);}\n        if (BsRGB <= 0.03928) {B = BsRGB / 12.92;} else {B = Math.pow(((BsRGB + 0.055) / 1.055), 2.4);}\n        return (0.2126 * R) + (0.7152 * G) + (0.0722 * B);\n    },\n    setAlpha: function(value) {\n        this._a = boundAlpha(value);\n        this._roundA = mathRound(100*this._a) / 100;\n        return this;\n    },\n    toHsv: function() {\n        var hsv = rgbToHsv(this._r, this._g, this._b);\n        return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this._a };\n    },\n    toHsvString: function() {\n        var hsv = rgbToHsv(this._r, this._g, this._b);\n        var h = mathRound(hsv.h * 360), s = mathRound(hsv.s * 100), v = mathRound(hsv.v * 100);\n        return (this._a == 1) ?\n          \"hsv(\"  + h + \", \" + s + \"%, \" + v + \"%)\" :\n          \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \"+ this._roundA + \")\";\n    },\n    toHsl: function() {\n        var hsl = rgbToHsl(this._r, this._g, this._b);\n        return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this._a };\n    },\n    toHslString: function() {\n        var hsl = rgbToHsl(this._r, this._g, this._b);\n        var h = mathRound(hsl.h * 360), s = mathRound(hsl.s * 100), l = mathRound(hsl.l * 100);\n        return (this._a == 1) ?\n          \"hsl(\"  + h + \", \" + s + \"%, \" + l + \"%)\" :\n          \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \"+ this._roundA + \")\";\n    },\n    toHex: function(allow3Char) {\n        return rgbToHex(this._r, this._g, this._b, allow3Char);\n    },\n    toHexString: function(allow3Char) {\n        return '#' + this.toHex(allow3Char);\n    },\n    toHex8: function(allow4Char) {\n        return rgbaToHex(this._r, this._g, this._b, this._a, allow4Char);\n    },\n    toHex8String: function(allow4Char) {\n        return '#' + this.toHex8(allow4Char);\n    },\n    toRgb: function() {\n        return { r: mathRound(this._r), g: mathRound(this._g), b: mathRound(this._b), a: this._a };\n    },\n    toRgbString: function() {\n        return (this._a == 1) ?\n          \"rgb(\"  + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \")\" :\n          \"rgba(\" + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \", \" + this._roundA + \")\";\n    },\n    toPercentageRgb: function() {\n        return { r: mathRound(bound01(this._r, 255) * 100) + \"%\", g: mathRound(bound01(this._g, 255) * 100) + \"%\", b: mathRound(bound01(this._b, 255) * 100) + \"%\", a: this._a };\n    },\n    toPercentageRgbString: function() {\n        return (this._a == 1) ?\n          \"rgb(\"  + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%)\" :\n          \"rgba(\" + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%, \" + this._roundA + \")\";\n    },\n    toName: function() {\n        if (this._a === 0) {\n            return \"transparent\";\n        }\n\n        if (this._a < 1) {\n            return false;\n        }\n\n        return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n    },\n    toFilter: function(secondColor) {\n        var hex8String = '#' + rgbaToArgbHex(this._r, this._g, this._b, this._a);\n        var secondHex8String = hex8String;\n        var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n\n        if (secondColor) {\n            var s = tinycolor(secondColor);\n            secondHex8String = '#' + rgbaToArgbHex(s._r, s._g, s._b, s._a);\n        }\n\n        return \"progid:DXImageTransform.Microsoft.gradient(\"+gradientType+\"startColorstr=\"+hex8String+\",endColorstr=\"+secondHex8String+\")\";\n    },\n    toString: function(format) {\n        var formatSet = !!format;\n        format = format || this._format;\n\n        var formattedString = false;\n        var hasAlpha = this._a < 1 && this._a >= 0;\n        var needsAlphaFormat = !formatSet && hasAlpha && (format === \"hex\" || format === \"hex6\" || format === \"hex3\" || format === \"hex4\" || format === \"hex8\" || format === \"name\");\n\n        if (needsAlphaFormat) {\n            // Special case for \"transparent\", all other non-alpha formats\n            // will return rgba when there is transparency.\n            if (format === \"name\" && this._a === 0) {\n                return this.toName();\n            }\n            return this.toRgbString();\n        }\n        if (format === \"rgb\") {\n            formattedString = this.toRgbString();\n        }\n        if (format === \"prgb\") {\n            formattedString = this.toPercentageRgbString();\n        }\n        if (format === \"hex\" || format === \"hex6\") {\n            formattedString = this.toHexString();\n        }\n        if (format === \"hex3\") {\n            formattedString = this.toHexString(true);\n        }\n        if (format === \"hex4\") {\n            formattedString = this.toHex8String(true);\n        }\n        if (format === \"hex8\") {\n            formattedString = this.toHex8String();\n        }\n        if (format === \"name\") {\n            formattedString = this.toName();\n        }\n        if (format === \"hsl\") {\n            formattedString = this.toHslString();\n        }\n        if (format === \"hsv\") {\n            formattedString = this.toHsvString();\n        }\n\n        return formattedString || this.toHexString();\n    },\n    clone: function() {\n        return tinycolor(this.toString());\n    },\n\n    _applyModification: function(fn, args) {\n        var color = fn.apply(null, [this].concat([].slice.call(args)));\n        this._r = color._r;\n        this._g = color._g;\n        this._b = color._b;\n        this.setAlpha(color._a);\n        return this;\n    },\n    lighten: function() {\n        return this._applyModification(lighten, arguments);\n    },\n    brighten: function() {\n        return this._applyModification(brighten, arguments);\n    },\n    darken: function() {\n        return this._applyModification(darken, arguments);\n    },\n    desaturate: function() {\n        return this._applyModification(desaturate, arguments);\n    },\n    saturate: function() {\n        return this._applyModification(saturate, arguments);\n    },\n    greyscale: function() {\n        return this._applyModification(greyscale, arguments);\n    },\n    spin: function() {\n        return this._applyModification(spin, arguments);\n    },\n\n    _applyCombination: function(fn, args) {\n        return fn.apply(null, [this].concat([].slice.call(args)));\n    },\n    analogous: function() {\n        return this._applyCombination(analogous, arguments);\n    },\n    complement: function() {\n        return this._applyCombination(complement, arguments);\n    },\n    monochromatic: function() {\n        return this._applyCombination(monochromatic, arguments);\n    },\n    splitcomplement: function() {\n        return this._applyCombination(splitcomplement, arguments);\n    },\n    triad: function() {\n        return this._applyCombination(triad, arguments);\n    },\n    tetrad: function() {\n        return this._applyCombination(tetrad, arguments);\n    }\n};\n\n// If input is an object, force 1 into \"1.0\" to handle ratios properly\n// String input requires \"1.0\" as input, so 1 will be treated as 1\ntinycolor.fromRatio = function(color, opts) {\n    if (typeof color == \"object\") {\n        var newColor = {};\n        for (var i in color) {\n            if (color.hasOwnProperty(i)) {\n                if (i === \"a\") {\n                    newColor[i] = color[i];\n                }\n                else {\n                    newColor[i] = convertToPercentage(color[i]);\n                }\n            }\n        }\n        color = newColor;\n    }\n\n    return tinycolor(color, opts);\n};\n\n// Given a string or object, convert that input to RGB\n// Possible string inputs:\n//\n//     \"red\"\n//     \"#f00\" or \"f00\"\n//     \"#ff0000\" or \"ff0000\"\n//     \"#ff000000\" or \"ff000000\"\n//     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n//     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n//     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n//     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n//     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n//     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n//     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n//\nfunction inputToRGB(color) {\n\n    var rgb = { r: 0, g: 0, b: 0 };\n    var a = 1;\n    var s = null;\n    var v = null;\n    var l = null;\n    var ok = false;\n    var format = false;\n\n    if (typeof color == \"string\") {\n        color = stringInputToObject(color);\n    }\n\n    if (typeof color == \"object\") {\n        if (isValidCSSUnit(color.r) && isValidCSSUnit(color.g) && isValidCSSUnit(color.b)) {\n            rgb = rgbToRgb(color.r, color.g, color.b);\n            ok = true;\n            format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.v)) {\n            s = convertToPercentage(color.s);\n            v = convertToPercentage(color.v);\n            rgb = hsvToRgb(color.h, s, v);\n            ok = true;\n            format = \"hsv\";\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.l)) {\n            s = convertToPercentage(color.s);\n            l = convertToPercentage(color.l);\n            rgb = hslToRgb(color.h, s, l);\n            ok = true;\n            format = \"hsl\";\n        }\n\n        if (color.hasOwnProperty(\"a\")) {\n            a = color.a;\n        }\n    }\n\n    a = boundAlpha(a);\n\n    return {\n        ok: ok,\n        format: color.format || format,\n        r: mathMin(255, mathMax(rgb.r, 0)),\n        g: mathMin(255, mathMax(rgb.g, 0)),\n        b: mathMin(255, mathMax(rgb.b, 0)),\n        a: a\n    };\n}\n\n\n// Conversion Functions\n// --------------------\n\n// `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n// <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n// `rgbToRgb`\n// Handle bounds / percentage checking to conform to CSS color spec\n// <http://www.w3.org/TR/css3-color/>\n// *Assumes:* r, g, b in [0, 255] or [0, 1]\n// *Returns:* { r, g, b } in [0, 255]\nfunction rgbToRgb(r, g, b){\n    return {\n        r: bound01(r, 255) * 255,\n        g: bound01(g, 255) * 255,\n        b: bound01(b, 255) * 255\n    };\n}\n\n// `rgbToHsl`\n// Converts an RGB color value to HSL.\n// *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n// *Returns:* { h, s, l } in [0,1]\nfunction rgbToHsl(r, g, b) {\n\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n\n    var max = mathMax(r, g, b), min = mathMin(r, g, b);\n    var h, s, l = (max + min) / 2;\n\n    if(max == min) {\n        h = s = 0; // achromatic\n    }\n    else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch(max) {\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n            case g: h = (b - r) / d + 2; break;\n            case b: h = (r - g) / d + 4; break;\n        }\n\n        h /= 6;\n    }\n\n    return { h: h, s: s, l: l };\n}\n\n// `hslToRgb`\n// Converts an HSL color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hslToRgb(h, s, l) {\n    var r, g, b;\n\n    h = bound01(h, 360);\n    s = bound01(s, 100);\n    l = bound01(l, 100);\n\n    function hue2rgb(p, q, t) {\n        if(t < 0) t += 1;\n        if(t > 1) t -= 1;\n        if(t < 1/6) return p + (q - p) * 6 * t;\n        if(t < 1/2) return q;\n        if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n        return p;\n    }\n\n    if(s === 0) {\n        r = g = b = l; // achromatic\n    }\n    else {\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1/3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1/3);\n    }\n\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHsv`\n// Converts an RGB color value to HSV\n// *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n// *Returns:* { h, s, v } in [0,1]\nfunction rgbToHsv(r, g, b) {\n\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n\n    var max = mathMax(r, g, b), min = mathMin(r, g, b);\n    var h, s, v = max;\n\n    var d = max - min;\n    s = max === 0 ? 0 : d / max;\n\n    if(max == min) {\n        h = 0; // achromatic\n    }\n    else {\n        switch(max) {\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n            case g: h = (b - r) / d + 2; break;\n            case b: h = (r - g) / d + 4; break;\n        }\n        h /= 6;\n    }\n    return { h: h, s: s, v: v };\n}\n\n// `hsvToRgb`\n// Converts an HSV color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\n function hsvToRgb(h, s, v) {\n\n    h = bound01(h, 360) * 6;\n    s = bound01(s, 100);\n    v = bound01(v, 100);\n\n    var i = Math.floor(h),\n        f = h - i,\n        p = v * (1 - s),\n        q = v * (1 - f * s),\n        t = v * (1 - (1 - f) * s),\n        mod = i % 6,\n        r = [v, q, p, p, t, v][mod],\n        g = [t, v, v, q, p, p][mod],\n        b = [p, p, t, v, v, q][mod];\n\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHex`\n// Converts an RGB color to hex\n// Assumes r, g, and b are contained in the set [0, 255]\n// Returns a 3 or 6 character hex\nfunction rgbToHex(r, g, b, allow3Char) {\n\n    var hex = [\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16))\n    ];\n\n    // Return a 3 character hex if possible\n    if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n    }\n\n    return hex.join(\"\");\n}\n\n// `rgbaToHex`\n// Converts an RGBA color plus alpha transparency to hex\n// Assumes r, g, b are contained in the set [0, 255] and\n// a in [0, 1]. Returns a 4 or 8 character rgba hex\nfunction rgbaToHex(r, g, b, a, allow4Char) {\n\n    var hex = [\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16)),\n        pad2(convertDecimalToHex(a))\n    ];\n\n    // Return a 4 character hex if possible\n    if (allow4Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1) && hex[3].charAt(0) == hex[3].charAt(1)) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0);\n    }\n\n    return hex.join(\"\");\n}\n\n// `rgbaToArgbHex`\n// Converts an RGBA color to an ARGB Hex8 string\n// Rarely used, but required for \"toFilter()\"\nfunction rgbaToArgbHex(r, g, b, a) {\n\n    var hex = [\n        pad2(convertDecimalToHex(a)),\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16))\n    ];\n\n    return hex.join(\"\");\n}\n\n// `equals`\n// Can be called with any tinycolor input\ntinycolor.equals = function (color1, color2) {\n    if (!color1 || !color2) { return false; }\n    return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n};\n\ntinycolor.random = function() {\n    return tinycolor.fromRatio({\n        r: mathRandom(),\n        g: mathRandom(),\n        b: mathRandom()\n    });\n};\n\n\n// Modification Functions\n// ----------------------\n// Thanks to less.js for some of the basics here\n// <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\nfunction desaturate(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.s -= amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n}\n\nfunction saturate(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.s += amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n}\n\nfunction greyscale(color) {\n    return tinycolor(color).desaturate(100);\n}\n\nfunction lighten (color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.l += amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n}\n\nfunction brighten(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var rgb = tinycolor(color).toRgb();\n    rgb.r = mathMax(0, mathMin(255, rgb.r - mathRound(255 * - (amount / 100))));\n    rgb.g = mathMax(0, mathMin(255, rgb.g - mathRound(255 * - (amount / 100))));\n    rgb.b = mathMax(0, mathMin(255, rgb.b - mathRound(255 * - (amount / 100))));\n    return tinycolor(rgb);\n}\n\nfunction darken (color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.l -= amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n}\n\n// Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n// Values outside of this range will be wrapped into this range.\nfunction spin(color, amount) {\n    var hsl = tinycolor(color).toHsl();\n    var hue = (hsl.h + amount) % 360;\n    hsl.h = hue < 0 ? 360 + hue : hue;\n    return tinycolor(hsl);\n}\n\n// Combination Functions\n// ---------------------\n// Thanks to jQuery xColor for some of the ideas behind these\n// <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\nfunction complement(color) {\n    var hsl = tinycolor(color).toHsl();\n    hsl.h = (hsl.h + 180) % 360;\n    return tinycolor(hsl);\n}\n\nfunction triad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 120) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 240) % 360, s: hsl.s, l: hsl.l })\n    ];\n}\n\nfunction tetrad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 90) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 180) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 270) % 360, s: hsl.s, l: hsl.l })\n    ];\n}\n\nfunction splitcomplement(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l}),\n        tinycolor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l})\n    ];\n}\n\nfunction analogous(color, results, slices) {\n    results = results || 6;\n    slices = slices || 30;\n\n    var hsl = tinycolor(color).toHsl();\n    var part = 360 / slices;\n    var ret = [tinycolor(color)];\n\n    for (hsl.h = ((hsl.h - (part * results >> 1)) + 720) % 360; --results; ) {\n        hsl.h = (hsl.h + part) % 360;\n        ret.push(tinycolor(hsl));\n    }\n    return ret;\n}\n\nfunction monochromatic(color, results) {\n    results = results || 6;\n    var hsv = tinycolor(color).toHsv();\n    var h = hsv.h, s = hsv.s, v = hsv.v;\n    var ret = [];\n    var modification = 1 / results;\n\n    while (results--) {\n        ret.push(tinycolor({ h: h, s: s, v: v}));\n        v = (v + modification) % 1;\n    }\n\n    return ret;\n}\n\n// Utility Functions\n// ---------------------\n\ntinycolor.mix = function(color1, color2, amount) {\n    amount = (amount === 0) ? 0 : (amount || 50);\n\n    var rgb1 = tinycolor(color1).toRgb();\n    var rgb2 = tinycolor(color2).toRgb();\n\n    var p = amount / 100;\n\n    var rgba = {\n        r: ((rgb2.r - rgb1.r) * p) + rgb1.r,\n        g: ((rgb2.g - rgb1.g) * p) + rgb1.g,\n        b: ((rgb2.b - rgb1.b) * p) + rgb1.b,\n        a: ((rgb2.a - rgb1.a) * p) + rgb1.a\n    };\n\n    return tinycolor(rgba);\n};\n\n\n// Readability Functions\n// ---------------------\n// <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)\n\n// `contrast`\n// Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)\ntinycolor.readability = function(color1, color2) {\n    var c1 = tinycolor(color1);\n    var c2 = tinycolor(color2);\n    return (Math.max(c1.getLuminance(),c2.getLuminance())+0.05) / (Math.min(c1.getLuminance(),c2.getLuminance())+0.05);\n};\n\n// `isReadable`\n// Ensure that foreground and background color combinations meet WCAG2 guidelines.\n// The third argument is an optional Object.\n//      the 'level' property states 'AA' or 'AAA' - if missing or invalid, it defaults to 'AA';\n//      the 'size' property states 'large' or 'small' - if missing or invalid, it defaults to 'small'.\n// If the entire object is absent, isReadable defaults to {level:\"AA\",size:\"small\"}.\n\n// *Example*\n//    tinycolor.isReadable(\"#000\", \"#111\") => false\n//    tinycolor.isReadable(\"#000\", \"#111\",{level:\"AA\",size:\"large\"}) => false\ntinycolor.isReadable = function(color1, color2, wcag2) {\n    var readability = tinycolor.readability(color1, color2);\n    var wcag2Parms, out;\n\n    out = false;\n\n    wcag2Parms = validateWCAG2Parms(wcag2);\n    switch (wcag2Parms.level + wcag2Parms.size) {\n        case \"AAsmall\":\n        case \"AAAlarge\":\n            out = readability >= 4.5;\n            break;\n        case \"AAlarge\":\n            out = readability >= 3;\n            break;\n        case \"AAAsmall\":\n            out = readability >= 7;\n            break;\n    }\n    return out;\n\n};\n\n// `mostReadable`\n// Given a base color and a list of possible foreground or background\n// colors for that base, returns the most readable color.\n// Optionally returns Black or White if the most readable color is unreadable.\n// *Example*\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:false}).toHexString(); // \"#112255\"\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:true}).toHexString();  // \"#ffffff\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"large\"}).toHexString(); // \"#faf3f3\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"small\"}).toHexString(); // \"#ffffff\"\ntinycolor.mostReadable = function(baseColor, colorList, args) {\n    var bestColor = null;\n    var bestScore = 0;\n    var readability;\n    var includeFallbackColors, level, size ;\n    args = args || {};\n    includeFallbackColors = args.includeFallbackColors ;\n    level = args.level;\n    size = args.size;\n\n    for (var i= 0; i < colorList.length ; i++) {\n        readability = tinycolor.readability(baseColor, colorList[i]);\n        if (readability > bestScore) {\n            bestScore = readability;\n            bestColor = tinycolor(colorList[i]);\n        }\n    }\n\n    if (tinycolor.isReadable(baseColor, bestColor, {\"level\":level,\"size\":size}) || !includeFallbackColors) {\n        return bestColor;\n    }\n    else {\n        args.includeFallbackColors=false;\n        return tinycolor.mostReadable(baseColor,[\"#fff\", \"#000\"],args);\n    }\n};\n\n\n// Big List of Colors\n// ------------------\n// <http://www.w3.org/TR/css3-color/#svg-color>\nvar names = tinycolor.names = {\n    aliceblue: \"f0f8ff\",\n    antiquewhite: \"faebd7\",\n    aqua: \"0ff\",\n    aquamarine: \"7fffd4\",\n    azure: \"f0ffff\",\n    beige: \"f5f5dc\",\n    bisque: \"ffe4c4\",\n    black: \"000\",\n    blanchedalmond: \"ffebcd\",\n    blue: \"00f\",\n    blueviolet: \"8a2be2\",\n    brown: \"a52a2a\",\n    burlywood: \"deb887\",\n    burntsienna: \"ea7e5d\",\n    cadetblue: \"5f9ea0\",\n    chartreuse: \"7fff00\",\n    chocolate: \"d2691e\",\n    coral: \"ff7f50\",\n    cornflowerblue: \"6495ed\",\n    cornsilk: \"fff8dc\",\n    crimson: \"dc143c\",\n    cyan: \"0ff\",\n    darkblue: \"00008b\",\n    darkcyan: \"008b8b\",\n    darkgoldenrod: \"b8860b\",\n    darkgray: \"a9a9a9\",\n    darkgreen: \"006400\",\n    darkgrey: \"a9a9a9\",\n    darkkhaki: \"bdb76b\",\n    darkmagenta: \"8b008b\",\n    darkolivegreen: \"556b2f\",\n    darkorange: \"ff8c00\",\n    darkorchid: \"9932cc\",\n    darkred: \"8b0000\",\n    darksalmon: \"e9967a\",\n    darkseagreen: \"8fbc8f\",\n    darkslateblue: \"483d8b\",\n    darkslategray: \"2f4f4f\",\n    darkslategrey: \"2f4f4f\",\n    darkturquoise: \"00ced1\",\n    darkviolet: \"9400d3\",\n    deeppink: \"ff1493\",\n    deepskyblue: \"00bfff\",\n    dimgray: \"696969\",\n    dimgrey: \"696969\",\n    dodgerblue: \"1e90ff\",\n    firebrick: \"b22222\",\n    floralwhite: \"fffaf0\",\n    forestgreen: \"228b22\",\n    fuchsia: \"f0f\",\n    gainsboro: \"dcdcdc\",\n    ghostwhite: \"f8f8ff\",\n    gold: \"ffd700\",\n    goldenrod: \"daa520\",\n    gray: \"808080\",\n    green: \"008000\",\n    greenyellow: \"adff2f\",\n    grey: \"808080\",\n    honeydew: \"f0fff0\",\n    hotpink: \"ff69b4\",\n    indianred: \"cd5c5c\",\n    indigo: \"4b0082\",\n    ivory: \"fffff0\",\n    khaki: \"f0e68c\",\n    lavender: \"e6e6fa\",\n    lavenderblush: \"fff0f5\",\n    lawngreen: \"7cfc00\",\n    lemonchiffon: \"fffacd\",\n    lightblue: \"add8e6\",\n    lightcoral: \"f08080\",\n    lightcyan: \"e0ffff\",\n    lightgoldenrodyellow: \"fafad2\",\n    lightgray: \"d3d3d3\",\n    lightgreen: \"90ee90\",\n    lightgrey: \"d3d3d3\",\n    lightpink: \"ffb6c1\",\n    lightsalmon: \"ffa07a\",\n    lightseagreen: \"20b2aa\",\n    lightskyblue: \"87cefa\",\n    lightslategray: \"789\",\n    lightslategrey: \"789\",\n    lightsteelblue: \"b0c4de\",\n    lightyellow: \"ffffe0\",\n    lime: \"0f0\",\n    limegreen: \"32cd32\",\n    linen: \"faf0e6\",\n    magenta: \"f0f\",\n    maroon: \"800000\",\n    mediumaquamarine: \"66cdaa\",\n    mediumblue: \"0000cd\",\n    mediumorchid: \"ba55d3\",\n    mediumpurple: \"9370db\",\n    mediumseagreen: \"3cb371\",\n    mediumslateblue: \"7b68ee\",\n    mediumspringgreen: \"00fa9a\",\n    mediumturquoise: \"48d1cc\",\n    mediumvioletred: \"c71585\",\n    midnightblue: \"191970\",\n    mintcream: \"f5fffa\",\n    mistyrose: \"ffe4e1\",\n    moccasin: \"ffe4b5\",\n    navajowhite: \"ffdead\",\n    navy: \"000080\",\n    oldlace: \"fdf5e6\",\n    olive: \"808000\",\n    olivedrab: \"6b8e23\",\n    orange: \"ffa500\",\n    orangered: \"ff4500\",\n    orchid: \"da70d6\",\n    palegoldenrod: \"eee8aa\",\n    palegreen: \"98fb98\",\n    paleturquoise: \"afeeee\",\n    palevioletred: \"db7093\",\n    papayawhip: \"ffefd5\",\n    peachpuff: \"ffdab9\",\n    peru: \"cd853f\",\n    pink: \"ffc0cb\",\n    plum: \"dda0dd\",\n    powderblue: \"b0e0e6\",\n    purple: \"800080\",\n    rebeccapurple: \"663399\",\n    red: \"f00\",\n    rosybrown: \"bc8f8f\",\n    royalblue: \"4169e1\",\n    saddlebrown: \"8b4513\",\n    salmon: \"fa8072\",\n    sandybrown: \"f4a460\",\n    seagreen: \"2e8b57\",\n    seashell: \"fff5ee\",\n    sienna: \"a0522d\",\n    silver: \"c0c0c0\",\n    skyblue: \"87ceeb\",\n    slateblue: \"6a5acd\",\n    slategray: \"708090\",\n    slategrey: \"708090\",\n    snow: \"fffafa\",\n    springgreen: \"00ff7f\",\n    steelblue: \"4682b4\",\n    tan: \"d2b48c\",\n    teal: \"008080\",\n    thistle: \"d8bfd8\",\n    tomato: \"ff6347\",\n    turquoise: \"40e0d0\",\n    violet: \"ee82ee\",\n    wheat: \"f5deb3\",\n    white: \"fff\",\n    whitesmoke: \"f5f5f5\",\n    yellow: \"ff0\",\n    yellowgreen: \"9acd32\"\n};\n\n// Make it easy to access colors via `hexNames[hex]`\nvar hexNames = tinycolor.hexNames = flip(names);\n\n\n// Utilities\n// ---------\n\n// `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\nfunction flip(o) {\n    var flipped = { };\n    for (var i in o) {\n        if (o.hasOwnProperty(i)) {\n            flipped[o[i]] = i;\n        }\n    }\n    return flipped;\n}\n\n// Return a valid alpha value [0,1] with all invalid values being set to 1\nfunction boundAlpha(a) {\n    a = parseFloat(a);\n\n    if (isNaN(a) || a < 0 || a > 1) {\n        a = 1;\n    }\n\n    return a;\n}\n\n// Take input from [0, n] and return it as [0, 1]\nfunction bound01(n, max) {\n    if (isOnePointZero(n)) { n = \"100%\"; }\n\n    var processPercent = isPercentage(n);\n    n = mathMin(max, mathMax(0, parseFloat(n)));\n\n    // Automatically convert percentage into number\n    if (processPercent) {\n        n = parseInt(n * max, 10) / 100;\n    }\n\n    // Handle floating point rounding errors\n    if ((Math.abs(n - max) < 0.000001)) {\n        return 1;\n    }\n\n    // Convert into [0, 1] range if it isn't already\n    return (n % max) / parseFloat(max);\n}\n\n// Force a number between 0 and 1\nfunction clamp01(val) {\n    return mathMin(1, mathMax(0, val));\n}\n\n// Parse a base-16 hex value into a base-10 integer\nfunction parseIntFromHex(val) {\n    return parseInt(val, 16);\n}\n\n// Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n// <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\nfunction isOnePointZero(n) {\n    return typeof n == \"string\" && n.indexOf('.') != -1 && parseFloat(n) === 1;\n}\n\n// Check to see if string passed in is a percentage\nfunction isPercentage(n) {\n    return typeof n === \"string\" && n.indexOf('%') != -1;\n}\n\n// Force a hex value to have 2 characters\nfunction pad2(c) {\n    return c.length == 1 ? '0' + c : '' + c;\n}\n\n// Replace a decimal with it's percentage value\nfunction convertToPercentage(n) {\n    if (n <= 1) {\n        n = (n * 100) + \"%\";\n    }\n\n    return n;\n}\n\n// Converts a decimal to a hex value\nfunction convertDecimalToHex(d) {\n    return Math.round(parseFloat(d) * 255).toString(16);\n}\n// Converts a hex value to a decimal\nfunction convertHexToDecimal(h) {\n    return (parseIntFromHex(h) / 255);\n}\n\nvar matchers = (function() {\n\n    // <http://www.w3.org/TR/css3-values/#integers>\n    var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\n\n    // <http://www.w3.org/TR/css3-values/#number-value>\n    var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\n\n    // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n    var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\n\n    // Actual matching.\n    // Parentheses and commas are optional, but not required.\n    // Whitespace can take the place of commas or opening paren\n    var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n    var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n\n    return {\n        CSS_UNIT: new RegExp(CSS_UNIT),\n        rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n        rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n        hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n        hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n        hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n        hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n        hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n        hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n        hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n        hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\n    };\n})();\n\n// `isValidCSSUnit`\n// Take in a single string / number and check to see if it looks like a CSS unit\n// (see `matchers` above for definition).\nfunction isValidCSSUnit(color) {\n    return !!matchers.CSS_UNIT.exec(color);\n}\n\n// `stringInputToObject`\n// Permissive string parsing.  Take in a number of formats, and output an object\n// based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\nfunction stringInputToObject(color) {\n\n    color = color.replace(trimLeft,'').replace(trimRight, '').toLowerCase();\n    var named = false;\n    if (names[color]) {\n        color = names[color];\n        named = true;\n    }\n    else if (color == 'transparent') {\n        return { r: 0, g: 0, b: 0, a: 0, format: \"name\" };\n    }\n\n    // Try to match string input using regular expressions.\n    // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n    // Just return an object and let the conversion functions handle that.\n    // This way the result will be the same whether the tinycolor is initialized with string or object.\n    var match;\n    if ((match = matchers.rgb.exec(color))) {\n        return { r: match[1], g: match[2], b: match[3] };\n    }\n    if ((match = matchers.rgba.exec(color))) {\n        return { r: match[1], g: match[2], b: match[3], a: match[4] };\n    }\n    if ((match = matchers.hsl.exec(color))) {\n        return { h: match[1], s: match[2], l: match[3] };\n    }\n    if ((match = matchers.hsla.exec(color))) {\n        return { h: match[1], s: match[2], l: match[3], a: match[4] };\n    }\n    if ((match = matchers.hsv.exec(color))) {\n        return { h: match[1], s: match[2], v: match[3] };\n    }\n    if ((match = matchers.hsva.exec(color))) {\n        return { h: match[1], s: match[2], v: match[3], a: match[4] };\n    }\n    if ((match = matchers.hex8.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            a: convertHexToDecimal(match[4]),\n            format: named ? \"name\" : \"hex8\"\n        };\n    }\n    if ((match = matchers.hex6.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            format: named ? \"name\" : \"hex\"\n        };\n    }\n    if ((match = matchers.hex4.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1] + '' + match[1]),\n            g: parseIntFromHex(match[2] + '' + match[2]),\n            b: parseIntFromHex(match[3] + '' + match[3]),\n            a: convertHexToDecimal(match[4] + '' + match[4]),\n            format: named ? \"name\" : \"hex8\"\n        };\n    }\n    if ((match = matchers.hex3.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1] + '' + match[1]),\n            g: parseIntFromHex(match[2] + '' + match[2]),\n            b: parseIntFromHex(match[3] + '' + match[3]),\n            format: named ? \"name\" : \"hex\"\n        };\n    }\n\n    return false;\n}\n\nfunction validateWCAG2Parms(parms) {\n    // return valid WCAG2 parms for isReadable.\n    // If input parms are invalid, return {\"level\":\"AA\", \"size\":\"small\"}\n    var level, size;\n    parms = parms || {\"level\":\"AA\", \"size\":\"small\"};\n    level = (parms.level || \"AA\").toUpperCase();\n    size = (parms.size || \"small\").toLowerCase();\n    if (level !== \"AA\" && level !== \"AAA\") {\n        level = \"AA\";\n    }\n    if (size !== \"small\" && size !== \"large\") {\n        size = \"small\";\n    }\n    return {\"level\":level, \"size\":size};\n}\n\n// Node: Export function\nif (typeof module !== \"undefined\" && module.exports) {\n    module.exports = tinycolor;\n}\n// AMD/requirejs: Define the module\nelse if (typeof define === 'function' && define.amd) {\n    define(function () {return tinycolor;});\n}\n// Browser: Expose to window\nelse {\n    window.tinycolor = tinycolor;\n}\n\n})(Math);\n","function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot_spread(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_spread_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_spread_changes_fn(dirty) | get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            let j = 0;\n            const remove = [];\n            while (j < node.attributes.length) {\n                const attribute = node.attributes[j++];\n                if (!attributes[attribute.name]) {\n                    remove.push(attribute.name);\n                }\n            }\n            for (let k = 0; k < remove.length; k++) {\n                node.removeAttribute(remove[k]);\n            }\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor(anchor = null) {\n        this.a = anchor;\n        this.e = this.n = null;\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.h(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = node.ownerDocument;\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = doc.head.appendChild(element('style')).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro  we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro  needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${String(value).replace(/\"/g, '&#34;').replace(/'/g, '&#39;')}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, options = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, options);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    // onMount happens before the initial afterUpdate\n    add_render_callback(() => {\n        const new_on_destroy = on_mount.map(run).filter(is_function);\n        if (on_destroy) {\n            on_destroy.push(...new_on_destroy);\n        }\n        else {\n            // Edge case - component was destroyed immediately,\n            // most likely as a result of a binding initialising\n            run_all(new_on_destroy);\n        }\n        component.$$.on_mount = [];\n    });\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const prop_values = options.props || {};\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : []),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, prop_values, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.31.2' }, detail)));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to seperate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_space, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_custom_elements_slots, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, update_slot, update_slot_spread, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","/*\n * Adapted from https://github.com/reach/router/blob/b60e6dd781d5d3a4bdaaf4de665649c0f6a7e78d/src/lib/utils.js\n *\n * https://github.com/reach/router/blob/master/LICENSE\n */\n\nexport const isUndefined = value => typeof value === \"undefined\";\n\nexport const isFunction = value => typeof value === \"function\";\n\nexport const isNumber = value => typeof value === \"number\";\n\n/**\n * Decides whether a given `event` should result in a navigation or not.\n * @param {object} event\n */\nexport function shouldNavigate(event) {\n\treturn (\n\t\t!event.defaultPrevented &&\n\t\tevent.button === 0 &&\n\t\t!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey)\n\t);\n}\n\nexport function createCounter() {\n\tlet i = 0;\n\t/**\n\t * Returns an id and increments the internal state\n\t * @returns {number}\n\t */\n\treturn () => i++;\n}\n\n/**\n * Create a globally unique id\n *\n * @returns {string} An id\n */\nexport function createGlobalId() {\n\treturn Math.random().toString(36).substring(2);\n}\n\nexport function findClosest(tagName, element) {\n\twhile (element && element.tagName !== tagName) {\n\t\t// eslint-disable-next-line no-param-reassign\n\t\telement = element.parentNode;\n\t}\n\treturn element;\n}\n\nexport const isSSR = typeof window === \"undefined\";\n\nexport function addListener(target, type, handler) {\n\ttarget.addEventListener(type, handler);\n\treturn () => target.removeEventListener(type, handler);\n}\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal/index.mjs';\nexport { get_store_value as get } from '../internal/index.mjs';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = [];\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (let i = 0; i < subscribers.length; i += 1) {\n                    const s = subscribers[i];\n                    s[1]();\n                    subscriber_queue.push(s, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.push(subscriber);\n        if (subscribers.length === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            const index = subscribers.indexOf(subscriber);\n            if (index !== -1) {\n                subscribers.splice(index, 1);\n            }\n            if (subscribers.length === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","/*\n * Adapted from https://github.com/EmilTholin/svelte-routing\n *\n * https://github.com/EmilTholin/svelte-routing/blob/master/LICENSE\n */\n\nconst createKey = ctxName => `@@svnav-ctx__${ctxName}`;\n\n// Use strings instead of objects, so different versions of\n// svelte-navigator can potentially still work together\nexport const LOCATION = createKey(\"LOCATION\");\nexport const ROUTER = createKey(\"ROUTER\");\nexport const ROUTE = createKey(\"ROUTE\");\nexport const ROUTE_PARAMS = createKey(\"ROUTE_PARAMS\");\nexport const FOCUS_ELEM = createKey(\"FOCUS_ELEM\");\n","export const paramRegex = /^:(.+)/;\n\n/**\n * Check if `string` starts with `search`\n * @param {string} string\n * @param {string} search\n * @return {boolean}\n */\nexport const startsWith = (string, search) =>\n\tstring.substr(0, search.length) === search;\n\n/**\n * Check if `segment` is a root segment\n * @param {string} segment\n * @return {boolean}\n */\nexport const isRootSegment = segment => segment === \"\";\n\n/**\n * Check if `segment` is a dynamic segment\n * @param {string} segment\n * @return {boolean}\n */\nexport const isDynamic = segment => paramRegex.test(segment);\n\n/**\n * Check if `segment` is a splat\n * @param {string} segment\n * @return {boolean}\n */\nexport const isSplat = segment => segment[0] === \"*\";\n\n/**\n * Strip potention splat and splatname of the end of a path\n * @param {string} str\n * @return {string}\n */\nexport const stripSplat = str => str.replace(/\\*.*$/, \"\");\n\n/**\n * Strip `str` of potential start and end `/`\n * @param {string} str\n * @return {string}\n */\nexport const stripSlashes = str => str.replace(/(^\\/+|\\/+$)/g, \"\");\n\n/**\n * Split up the URI into segments delimited by `/`\n * @param {string} uri\n * @return {string[]}\n */\nexport function segmentize(uri, filterFalsy = false) {\n\tconst segments = stripSlashes(uri).split(\"/\");\n\treturn filterFalsy ? segments.filter(Boolean) : segments;\n}\n\n/**\n * Add the query to the pathname if a query is given\n * @param {string} pathname\n * @param {string} [query]\n * @return {string}\n */\nexport const addQuery = (pathname, query) =>\n\tpathname + (query ? `?${query}` : \"\");\n\n/**\n * Combines the `basepath` and the `path` into one path.\n * @param {string} basepath\n * @param {string} path\n */\nexport function combinePaths(basepath, path) {\n\tconst barePath =\n\t\tpath === \"/\" ? basepath : `${stripSlashes(basepath)}/${stripSlashes(path)}`;\n\treturn `${stripSlashes(barePath)}/`;\n}\n\n/**\n * Normalizes a basepath\n *\n * @param {string} path\n * @returns {string}\n *\n * @example\n * normalizePath(\"base/path/\") // -> \"/base/path\"\n */\nexport const normalizePath = path => `/${stripSlashes(path)}`;\n\n/**\n * Joins and normalizes multiple path fragments\n *\n * @param {...string} pathFragments\n * @returns {string}\n */\nexport function join(...pathFragments) {\n\tconst joinFragment = fragment => segmentize(fragment, true).join(\"/\");\n\tconst joinedSegments = pathFragments.map(joinFragment).join(\"/\");\n\treturn normalizePath(joinedSegments);\n}\n","import { isFunction } from \"./utils\";\n\n// We start from 1 here, so we can check if an origin id has been passed\n// by using `originId || <fallback>`\nexport const LINK_ID = 1;\nexport const ROUTE_ID = 2;\nexport const ROUTER_ID = 3;\nexport const USE_FOCUS_ID = 4;\nexport const USE_LOCATION_ID = 5;\nexport const USE_MATCH_ID = 6;\nexport const USE_NAVIGATE_ID = 7;\nexport const USE_PARAMS_ID = 8;\nexport const USE_RESOLVABLE_ID = 9;\nexport const USE_RESOLVE_ID = 10;\nexport const NAVIGATE_ID = 11;\n\nconst labels = {\n\t[LINK_ID]: \"Link\",\n\t[ROUTE_ID]: \"Route\",\n\t[ROUTER_ID]: \"Router\",\n\t[USE_FOCUS_ID]: \"useFocus\",\n\t[USE_LOCATION_ID]: \"useLocation\",\n\t[USE_MATCH_ID]: \"useMatch\",\n\t[USE_NAVIGATE_ID]: \"useNavigate\",\n\t[USE_PARAMS_ID]: \"useParams\",\n\t[USE_RESOLVABLE_ID]: \"useResolvable\",\n\t[USE_RESOLVE_ID]: \"useResolve\",\n\t[NAVIGATE_ID]: \"navigate\",\n};\n\nexport const createLabel = labelId => labels[labelId];\n\nexport function createIdentifier(labelId, props) {\n\tlet attr;\n\tif (labelId === ROUTE_ID) {\n\t\tattr = props.path ? `path=\"${props.path}\"` : \"default\";\n\t} else if (labelId === LINK_ID) {\n\t\tattr = `to=\"${props.to}\"`;\n\t} else if (labelId === ROUTER_ID) {\n\t\tattr = `basepath=\"${props.basepath || \"\"}\"`;\n\t}\n\treturn `<${createLabel(labelId)} ${attr || \"\"} />`;\n}\n\nexport function createMessage(labelId, message, props, originId) {\n\tconst origin = props && createIdentifier(originId || labelId, props);\n\tconst originMsg = origin ? `\\n\\nOccurred in: ${origin}` : \"\";\n\tconst label = createLabel(labelId);\n\tconst msg = isFunction(message) ? message(label) : message;\n\treturn `<${label}> ${msg}${originMsg}`;\n}\n\nexport const createMessageHandler = handler => (...args) =>\n\thandler(createMessage(...args));\n\nexport const fail = createMessageHandler(message => {\n\tthrow new Error(message);\n});\n\n// eslint-disable-next-line no-console\nexport const warn = createMessageHandler(console.warn);\n","import {\n\tsegmentize,\n\tjoin,\n\taddQuery,\n\tstartsWith,\n\tparamRegex,\n\tisSplat,\n\tisRootSegment,\n\tisDynamic,\n\tstripSplat,\n\tnormalizePath,\n} from \"./paths\";\nimport { ROUTER_ID, fail } from \"./warning\";\nimport { isUndefined } from \"./utils\";\n\nconst SEGMENT_POINTS = 4;\nconst STATIC_POINTS = 3;\nconst DYNAMIC_POINTS = 2;\nconst SPLAT_PENALTY = 1;\nconst ROOT_POINTS = 1;\n\n/**\n * Score a route depending on how its individual segments look\n * @param {object} route\n * @param {number} index\n * @return {object}\n */\nexport function rankRoute(route, index) {\n\tconst score = route.default\n\t\t? 0\n\t\t: segmentize(route.fullPath).reduce((acc, segment) => {\n\t\t\t\tlet nextScore = acc;\n\t\t\t\tnextScore += SEGMENT_POINTS;\n\n\t\t\t\tif (isRootSegment(segment)) {\n\t\t\t\t\tnextScore += ROOT_POINTS;\n\t\t\t\t} else if (isDynamic(segment)) {\n\t\t\t\t\tnextScore += DYNAMIC_POINTS;\n\t\t\t\t} else if (isSplat(segment)) {\n\t\t\t\t\tnextScore -= SEGMENT_POINTS + SPLAT_PENALTY;\n\t\t\t\t} else {\n\t\t\t\t\tnextScore += STATIC_POINTS;\n\t\t\t\t}\n\n\t\t\t\treturn nextScore;\n\t\t  }, 0);\n\n\treturn { route, score, index };\n}\n\n/**\n * Give a score to all routes and sort them on that\n * @param {object[]} routes\n * @return {object[]}\n */\nexport function rankRoutes(routes) {\n\treturn (\n\t\troutes\n\t\t\t.map(rankRoute)\n\t\t\t// If two routes have the exact same score, we go by index instead\n\t\t\t.sort((a, b) => {\n\t\t\t\tif (a.score < b.score) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\tif (a.score > b.score) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\treturn a.index - b.index;\n\t\t\t})\n\t);\n}\n\n/**\n * Ranks and picks the best route to match. Each segment gets the highest\n * amount of points, then the type of segment gets an additional amount of\n * points where\n *\n *  static > dynamic > splat > root\n *\n * This way we don't have to worry about the order of our routes, let the\n * computers do it.\n *\n * A route looks like this\n *\n *  { fullPath, default, value }\n *\n * And a returned match looks like:\n *\n *  { route, params, uri }\n *\n * @param {object[]} routes\n * @param {string} uri\n * @return {?object}\n */\nexport function pick(routes, uri) {\n\tlet bestMatch;\n\tlet defaultMatch;\n\n\tconst [uriPathname] = uri.split(\"?\");\n\tconst uriSegments = segmentize(uriPathname);\n\tconst isRootUri = uriSegments[0] === \"\";\n\tconst ranked = rankRoutes(routes);\n\n\tfor (let i = 0, l = ranked.length; i < l; i++) {\n\t\tconst { route } = ranked[i];\n\t\tlet missed = false;\n\t\tconst params = {};\n\n\t\t// eslint-disable-next-line no-shadow\n\t\tconst createMatch = uri => ({ ...route, params, uri });\n\n\t\tif (route.default) {\n\t\t\tdefaultMatch = createMatch(uri);\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst routeSegments = segmentize(route.fullPath);\n\t\tconst max = Math.max(uriSegments.length, routeSegments.length);\n\t\tlet index = 0;\n\n\t\tfor (; index < max; index++) {\n\t\t\tconst routeSegment = routeSegments[index];\n\t\t\tconst uriSegment = uriSegments[index];\n\n\t\t\tif (!isUndefined(routeSegment) && isSplat(routeSegment)) {\n\t\t\t\t// Hit a splat, just grab the rest, and return a match\n\t\t\t\t// uri:   /files/documents/work\n\t\t\t\t// route: /files/* or /files/*splatname\n\t\t\t\tconst splatName = routeSegment === \"*\" ? \"*\" : routeSegment.slice(1);\n\n\t\t\t\tparams[splatName] = uriSegments\n\t\t\t\t\t.slice(index)\n\t\t\t\t\t.map(decodeURIComponent)\n\t\t\t\t\t.join(\"/\");\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (isUndefined(uriSegment)) {\n\t\t\t\t// URI is shorter than the route, no match\n\t\t\t\t// uri:   /users\n\t\t\t\t// route: /users/:userId\n\t\t\t\tmissed = true;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst dynamicMatch = paramRegex.exec(routeSegment);\n\n\t\t\tif (dynamicMatch && !isRootUri) {\n\t\t\t\tconst value = decodeURIComponent(uriSegment);\n\t\t\t\tparams[dynamicMatch[1]] = value;\n\t\t\t} else if (routeSegment !== uriSegment) {\n\t\t\t\t// Current segments don't match, not dynamic, not splat, so no match\n\t\t\t\t// uri:   /users/123/settings\n\t\t\t\t// route: /users/:id/profile\n\t\t\t\tmissed = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (!missed) {\n\t\t\tbestMatch = createMatch(join(...uriSegments.slice(0, index)));\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn bestMatch || defaultMatch || null;\n}\n\n/**\n * Check if the `route.fullPath` matches the `uri`.\n * @param {Object} route\n * @param {string} uri\n * @return {?object}\n */\nexport function match(route, uri) {\n\treturn pick([route], uri);\n}\n\n/**\n * Resolve URIs as though every path is a directory, no files. Relative URIs\n * in the browser can feel awkward because not only can you be \"in a directory\",\n * you can be \"at a file\", too. For example:\n *\n *  browserSpecResolve('foo', '/bar/') => /bar/foo\n *  browserSpecResolve('foo', '/bar') => /foo\n *\n * But on the command line of a file system, it's not as complicated. You can't\n * `cd` from a file, only directories. This way, links have to know less about\n * their current path. To go deeper you can do this:\n *\n *  <Link to=\"deeper\"/>\n *  // instead of\n *  <Link to=`{${props.uri}/deeper}`/>\n *\n * Just like `cd`, if you want to go deeper from the command line, you do this:\n *\n *  cd deeper\n *  # not\n *  cd $(pwd)/deeper\n *\n * By treating every path as a directory, linking to relative paths should\n * require less contextual information and (fingers crossed) be more intuitive.\n * @param {string} to\n * @param {string} base\n * @return {string}\n */\nexport function resolve(to, base) {\n\t// /foo/bar, /baz/qux => /foo/bar\n\tif (startsWith(to, \"/\")) {\n\t\treturn to;\n\t}\n\n\tconst [toPathname, toQuery] = to.split(\"?\");\n\tconst [basePathname] = base.split(\"?\");\n\tconst toSegments = segmentize(toPathname);\n\tconst baseSegments = segmentize(basePathname);\n\n\t// ?a=b, /users?b=c => /users?a=b\n\tif (toSegments[0] === \"\") {\n\t\treturn addQuery(basePathname, toQuery);\n\t}\n\n\t// profile, /users/789 => /users/789/profile\n\tif (!startsWith(toSegments[0], \".\")) {\n\t\tconst pathname = baseSegments.concat(toSegments).join(\"/\");\n\t\treturn addQuery((basePathname === \"/\" ? \"\" : \"/\") + pathname, toQuery);\n\t}\n\n\t// ./       , /users/123 => /users/123\n\t// ../      , /users/123 => /users\n\t// ../..    , /users/123 => /\n\t// ../../one, /a/b/c/d   => /a/b/one\n\t// .././one , /a/b/c/d   => /a/b/c/one\n\tconst allSegments = baseSegments.concat(toSegments);\n\tconst segments = [];\n\n\tallSegments.forEach(segment => {\n\t\tif (segment === \"..\") {\n\t\t\tsegments.pop();\n\t\t} else if (segment !== \".\") {\n\t\t\tsegments.push(segment);\n\t\t}\n\t});\n\n\treturn addQuery(`/${segments.join(\"/\")}`, toQuery);\n}\n\n/**\n * Normalizes a location for consumption by `Route` children and the `Router`.\n * It removes the apps basepath from the pathname\n * and sets default values for `search` and `hash` properties.\n *\n * @param {Object} location The current global location supplied by the history component\n * @param {string} basepath The applications basepath (i.e. when serving from a subdirectory)\n *\n * @returns The normalized location\n */\nexport function normalizeLocation(location, basepath) {\n\tconst { pathname, hash = \"\", search = \"\", state } = location;\n\tconst baseSegments = segmentize(basepath, true);\n\tconst pathSegments = segmentize(pathname, true);\n\twhile (baseSegments.length) {\n\t\tif (baseSegments[0] !== pathSegments[0]) {\n\t\t\tfail(\n\t\t\t\tROUTER_ID,\n\t\t\t\t`Invalid state: All locations must begin with the basepath \"${basepath}\", found \"${pathname}\"`,\n\t\t\t);\n\t\t}\n\t\tbaseSegments.shift();\n\t\tpathSegments.shift();\n\t}\n\treturn {\n\t\tpathname: join(...pathSegments),\n\t\thash,\n\t\tsearch,\n\t\tstate,\n\t};\n}\n\nconst normalizeUrlFragment = frag => (frag.length === 1 ? \"\" : frag);\n\n/**\n * Creates a location object from an url.\n * It is used to create a location from the url prop used in SSR\n *\n * @param {string} url The url string (e.g. \"/path/to/somewhere\")\n *\n * @returns {{ pathname: string; search: string; hash: string }} The location\n */\nexport function createLocation(url) {\n\tconst searchIndex = url.indexOf(\"?\");\n\tconst hashIndex = url.indexOf(\"#\");\n\tconst hasSearchIndex = searchIndex !== -1;\n\tconst hasHashIndex = hashIndex !== -1;\n\tconst hash = hasHashIndex ? normalizeUrlFragment(url.substr(hashIndex)) : \"\";\n\tconst pathnameAndSearch = hasHashIndex ? url.substr(0, hashIndex) : url;\n\tconst search = hasSearchIndex\n\t\t? normalizeUrlFragment(pathnameAndSearch.substr(searchIndex))\n\t\t: \"\";\n\tconst pathname = hasSearchIndex\n\t\t? pathnameAndSearch.substr(0, searchIndex)\n\t\t: pathnameAndSearch;\n\treturn { pathname, search, hash };\n}\n\n/**\n * Resolves a link relative to the parent Route and the Routers basepath.\n *\n * @param {string} path The given path, that will be resolved\n * @param {string} routeBase The current Routes base path\n * @param {string} appBase The basepath of the app. Used, when serving from a subdirectory\n * @returns {string} The resolved path\n *\n * @example\n * resolveLink(\"relative\", \"/routeBase\", \"/\") // -> \"/routeBase/relative\"\n * resolveLink(\"/absolute\", \"/routeBase\", \"/\") // -> \"/absolute\"\n * resolveLink(\"relative\", \"/routeBase\", \"/base\") // -> \"/base/routeBase/relative\"\n * resolveLink(\"/absolute\", \"/routeBase\", \"/base\") // -> \"/base/absolute\"\n */\nexport function resolveLink(path, routeBase, appBase) {\n\treturn join(appBase, resolve(path, routeBase));\n}\n\n/**\n * Get the uri for a Route, by matching it against the current location.\n *\n * @param {string} routePath The Routes resolved path\n * @param {string} pathname The current locations pathname\n */\nexport function extractBaseUri(routePath, pathname) {\n\tconst fullPath = normalizePath(stripSplat(routePath));\n\tconst baseSegments = segmentize(fullPath, true);\n\tconst pathSegments = segmentize(pathname, true).slice(0, baseSegments.length);\n\tconst routeMatch = match({ fullPath }, join(...pathSegments));\n\treturn routeMatch && routeMatch.uri;\n}\n","/*\n * Adapted from https://github.com/reach/router/blob/b60e6dd781d5d3a4bdaaf4de665649c0f6a7e78d/src/lib/history.js\n *\n * https://github.com/reach/router/blob/master/LICENSE\n */\n\nimport { createLocation } from \"./routes\";\nimport { createGlobalId, isSSR, isNumber, addListener } from \"./utils\";\nimport { warn, NAVIGATE_ID } from \"./warning\";\n\nconst POP = \"POP\";\nconst PUSH = \"PUSH\";\nconst REPLACE = \"REPLACE\";\n\nfunction getLocation(source) {\n\treturn {\n\t\t...source.location,\n\t\tpathname: encodeURI(decodeURI(source.location.pathname)),\n\t\tstate: source.history.state,\n\t\t_key: (source.history.state && source.history.state._key) || \"initial\",\n\t};\n}\n\nfunction createHistory(source) {\n\tlet listeners = [];\n\tlet location = getLocation(source);\n\tlet action = POP;\n\n\tconst notifyListeners = (listenerFns = listeners) =>\n\t\tlistenerFns.forEach(listener => listener({ location, action }));\n\n\treturn {\n\t\tget location() {\n\t\t\treturn location;\n\t\t},\n\t\tlisten(listener) {\n\t\t\tlisteners.push(listener);\n\n\t\t\tconst popstateListener = () => {\n\t\t\t\tlocation = getLocation(source);\n\t\t\t\taction = POP;\n\t\t\t\tnotifyListeners([listener]);\n\t\t\t};\n\n\t\t\t// Call listener when it is registered\n\t\t\tnotifyListeners([listener]);\n\n\t\t\tconst unlisten = addListener(source, \"popstate\", popstateListener);\n\t\t\treturn () => {\n\t\t\t\tunlisten();\n\t\t\t\tlisteners = listeners.filter(fn => fn !== listener);\n\t\t\t};\n\t\t},\n\t\t/**\n\t\t * Navigate to a new absolute route.\n\t\t *\n\t\t * @param {string|number} to The path to navigate to.\n\t\t *\n\t\t * If `to` is a number we will navigate to the stack entry index + `to`\n\t\t * (-> `navigate(-1)`, is equivalent to hitting the back button of the browser)\n\t\t * @param {Object} options\n\t\t * @param {*} [options.state] The state will be accessible through `location.state`\n\t\t * @param {boolean} [options.replace=false] Replace the current entry in the history\n\t\t * stack, instead of pushing on a new one\n\t\t */\n\t\tnavigate(to, options) {\n\t\t\tconst { state = {}, replace = false } = options || {};\n\t\t\taction = replace ? REPLACE : PUSH;\n\t\t\tif (isNumber(to)) {\n\t\t\t\tif (options) {\n\t\t\t\t\twarn(\n\t\t\t\t\t\tNAVIGATE_ID,\n\t\t\t\t\t\t\"Navigation options (state or replace) are not supported, \" +\n\t\t\t\t\t\t\t\"when passing a number as the first argument to navigate. \" +\n\t\t\t\t\t\t\t\"They are ignored.\",\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\taction = POP;\n\t\t\t\tsource.history.go(to);\n\t\t\t} else {\n\t\t\t\tconst keyedState = { ...state, _key: createGlobalId() };\n\t\t\t\t// try...catch iOS Safari limits to 100 pushState calls\n\t\t\t\ttry {\n\t\t\t\t\tsource.history[replace ? \"replaceState\" : \"pushState\"](\n\t\t\t\t\t\tkeyedState,\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\tto,\n\t\t\t\t\t);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tsource.location[replace ? \"replace\" : \"assign\"](to);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlocation = getLocation(source);\n\t\t\tnotifyListeners();\n\t\t},\n\t};\n}\n\nfunction createStackFrame(state, uri) {\n\treturn { ...createLocation(uri), state };\n}\n\n// Stores history entries in memory for testing or other platforms like Native\nfunction createMemorySource(initialPathname = \"/\") {\n\tlet index = 0;\n\tlet stack = [createStackFrame(null, initialPathname)];\n\n\treturn {\n\t\t// This is just for testing...\n\t\tget entries() {\n\t\t\treturn stack;\n\t\t},\n\t\tget location() {\n\t\t\treturn stack[index];\n\t\t},\n\t\taddEventListener() {},\n\t\tremoveEventListener() {},\n\t\thistory: {\n\t\t\tget state() {\n\t\t\t\treturn stack[index].state;\n\t\t\t},\n\t\t\tpushState(state, title, uri) {\n\t\t\t\tindex++;\n\t\t\t\t// Throw away anything in the stack with an index greater than the current index.\n\t\t\t\t// This happens, when we go back using `go(-n)`. The index is now less than `stack.length`.\n\t\t\t\t// If we call `go(+n)` the stack entries with an index greater than the current index can\n\t\t\t\t// be reused.\n\t\t\t\t// However, if we navigate to a path, instead of a number, we want to create a new branch\n\t\t\t\t// of navigation.\n\t\t\t\tstack = stack.slice(0, index);\n\t\t\t\tstack.push(createStackFrame(state, uri));\n\t\t\t},\n\t\t\treplaceState(state, title, uri) {\n\t\t\t\tstack[index] = createStackFrame(state, uri);\n\t\t\t},\n\t\t\tgo(to) {\n\t\t\t\tconst newIndex = index + to;\n\t\t\t\tif (newIndex < 0 || newIndex > stack.length - 1) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tindex = newIndex;\n\t\t\t},\n\t\t},\n\t};\n}\n\n// Global history uses window.history as the source if available,\n// otherwise a memory history\nconst canUseDOM = !!(\n\t!isSSR &&\n\twindow.document &&\n\twindow.document.createElement\n);\n// Use memory history in iframes (for example in Svelte REPL)\nconst isEmbeddedPage = !isSSR && window.location.origin === \"null\";\nconst globalHistory = createHistory(\n\tcanUseDOM && !isEmbeddedPage ? window : createMemorySource(),\n);\nconst { navigate } = globalHistory;\n\nexport { globalHistory, navigate, createHistory, createMemorySource };\n","import { get } from \"svelte/store\";\nimport { tick } from \"svelte\";\nimport { warn, ROUTER_ID, ROUTE_ID } from \"./warning\";\nimport { addListener } from \"./utils\";\n\n// We need to keep the focus candidate in a separate file, so svelte does\n// not update, when we mutate it.\n// Also, we need a single global reference, because taking focus needs to\n// work globally, even if we have multiple top level routers\n// eslint-disable-next-line import/no-mutable-exports\nexport let focusCandidate = null;\n\n// eslint-disable-next-line import/no-mutable-exports\nexport let initialNavigation = true;\n\n/**\n * Check if RouterA is above RouterB in the document\n * @param {number} routerIdA The first Routers id\n * @param {number} routerIdB The second Routers id\n */\nfunction isAbove(routerIdA, routerIdB) {\n\tconst routerMarkers = document.querySelectorAll(\"[data-svnav-router]\");\n\tfor (let i = 0; i < routerMarkers.length; i++) {\n\t\tconst node = routerMarkers[i];\n\t\tconst currentId = Number(node.dataset.svnavRouter);\n\t\tif (currentId === routerIdA) return true;\n\t\tif (currentId === routerIdB) return false;\n\t}\n\treturn false;\n}\n\n/**\n * Check if a Route candidate is the best choice to move focus to,\n * and store the best match.\n * @param {{\n     level: number;\n     routerId: number;\n     route: {\n       id: number;\n       focusElement: import(\"svelte/store\").Readable<Promise<Element>|null>;\n     }\n   }} item A Route candidate, that updated and is visible after a navigation\n */\nexport function pushFocusCandidate(item) {\n\tif (\n\t\t// Best candidate if it's the only candidate...\n\t\t!focusCandidate ||\n\t\t// Route is nested deeper, than previous candidate\n\t\t// -> Route change was triggered in the deepest affected\n\t\t// Route, so that's were focus should move to\n\t\titem.level > focusCandidate.level ||\n\t\t// If the level is identical, we want to focus the first Route in the document,\n\t\t// so we pick the first Router lookin from page top to page bottom.\n\t\t(item.level === focusCandidate.level &&\n\t\t\tisAbove(item.routerId, focusCandidate.routerId))\n\t) {\n\t\tfocusCandidate = item;\n\t}\n}\n\n/**\n * Reset the focus candidate.\n */\nexport function clearFocusCandidate() {\n\tfocusCandidate = null;\n}\n\nexport function initialNavigationOccurred() {\n\tinitialNavigation = false;\n}\n\n/*\n * `focus` Adapted from https://github.com/oaf-project/oaf-side-effects/blob/master/src/index.ts\n *\n * https://github.com/oaf-project/oaf-side-effects/blob/master/LICENSE\n */\nexport function focus(elem) {\n\tif (!elem) return false;\n\tconst TABINDEX = \"tabindex\";\n\ttry {\n\t\tif (!elem.hasAttribute(TABINDEX)) {\n\t\t\telem.setAttribute(TABINDEX, \"-1\");\n\t\t\tlet unlisten;\n\t\t\t// We remove tabindex after blur to avoid weird browser behavior\n\t\t\t// where a mouse click can activate elements with tabindex=\"-1\".\n\t\t\tconst blurListener = () => {\n\t\t\t\telem.removeAttribute(TABINDEX);\n\t\t\t\tunlisten();\n\t\t\t};\n\t\t\tunlisten = addListener(elem, \"blur\", blurListener);\n\t\t}\n\t\telem.focus();\n\t\treturn document.activeElement === elem;\n\t} catch (e) {\n\t\t// Apparently trying to focus a disabled element in IE can throw.\n\t\t// See https://stackoverflow.com/a/1600194/2476884\n\t\treturn false;\n\t}\n}\n\nexport function isEndMarker(elem, id) {\n\treturn Number(elem.dataset.svnavRouteEnd) === id;\n}\n\nexport function isHeading(elem) {\n\treturn /^H[1-6]$/i.test(elem.tagName);\n}\n\nfunction query(selector, parent = document) {\n\treturn parent.querySelector(selector);\n}\n\nexport function queryHeading(id) {\n\tconst marker = query(`[data-svnav-route-start=\"${id}\"]`);\n\tlet current = marker.nextElementSibling;\n\twhile (!isEndMarker(current, id)) {\n\t\tif (isHeading(current)) {\n\t\t\treturn current;\n\t\t}\n\t\tconst heading = query(\"h1,h2,h3,h4,h5,h6\", current);\n\t\tif (heading) {\n\t\t\treturn heading;\n\t\t}\n\t\tcurrent = current.nextElementSibling;\n\t}\n\treturn null;\n}\n\nexport function handleFocus(route) {\n\tPromise.resolve(get(route.focusElement)).then(elem => {\n\t\tconst focusElement = elem || queryHeading(route.id);\n\t\tif (!focusElement) {\n\t\t\twarn(\n\t\t\t\tROUTER_ID,\n\t\t\t\t\"Could not find an element to focus. \" +\n\t\t\t\t\t\"You should always render a header for accessibility reasons, \" +\n\t\t\t\t\t'or set a custom focus element via the \"useFocus\" hook. ' +\n\t\t\t\t\t\"If you don't want this Route or Router to manage focus, \" +\n\t\t\t\t\t'pass \"primary={false}\" to it.',\n\t\t\t\troute,\n\t\t\t\tROUTE_ID,\n\t\t\t);\n\t\t}\n\t\tconst headingFocused = focus(focusElement);\n\t\tif (headingFocused) return;\n\t\tfocus(document.documentElement);\n\t});\n}\n\nexport const createTriggerFocus = (a11yConfig, announcementText, location) => (\n\tmanageFocus,\n\tannounceNavigation,\n) =>\n\t// Wait until the dom is updated, so we can look for headings\n\ttick().then(() => {\n\t\tif (!focusCandidate || initialNavigation) {\n\t\t\tinitialNavigationOccurred();\n\t\t\treturn;\n\t\t}\n\t\tif (manageFocus) {\n\t\t\thandleFocus(focusCandidate.route);\n\t\t}\n\t\tif (a11yConfig.announcements && announceNavigation) {\n\t\t\tconst { path, fullPath, meta, params, uri } = focusCandidate.route;\n\t\t\tconst announcementMessage = a11yConfig.createAnnouncement(\n\t\t\t\t{ path, fullPath, meta, params, uri },\n\t\t\t\tget(location),\n\t\t\t);\n\t\t\tPromise.resolve(announcementMessage).then(message => {\n\t\t\t\tannouncementText.set(message);\n\t\t\t});\n\t\t}\n\t\tclearFocusCandidate();\n\t});\n\nexport const visuallyHiddenStyle =\n\t\"position:absolute;\" +\n\t\"width:1px;\" +\n\t\"height:1px;\" +\n\t\"padding:0;\" +\n\t\"overflow:hidden;\" +\n\t\"clip:rect(0,0,0,0);\" +\n\t\"white-space:nowrap;\" +\n\t\"border:0;\";\n","<script context=\"module\">\n\t// eslint-disable-next-line import/order\n\timport { createCounter } from \"./utils\";\n\n\tconst createId = createCounter();\n</script>\n\n<script>\n\t/*\n\t * Adapted from https://github.com/EmilTholin/svelte-routing\n\t *\n\t * https://github.com/EmilTholin/svelte-routing/blob/master/LICENSE\n\t */\n\n\timport { getContext, setContext, onMount } from \"svelte\";\n\timport { writable } from \"svelte/store\";\n\timport { LOCATION, ROUTER } from \"./contexts\";\n\timport { globalHistory } from \"./history\";\n\timport { normalizePath } from \"./paths\";\n\timport { pick, match, normalizeLocation, createLocation } from \"./routes\";\n\timport { isSSR } from \"./utils\";\n\timport { warn, ROUTER_ID } from \"./warning\";\n\timport {\n\t\tpushFocusCandidate,\n\t\tvisuallyHiddenStyle,\n\t\tcreateTriggerFocus,\n\t} from \"./a11y\";\n\n\tconst defaultBasepath = \"/\";\n\n\texport let basepath = defaultBasepath;\n\texport let url = null;\n\texport let history = globalHistory;\n\texport let primary = true;\n\texport let a11y = {};\n\n\tconst a11yConfig = {\n\t\tcreateAnnouncement: route => `Navigated to ${route.uri}`,\n\t\tannouncements: true,\n\t\t...a11y,\n\t};\n\n\t// Remember the initial `basepath`, so we can fire a warning\n\t// when the user changes it later\n\tconst initialBasepath = basepath;\n\tconst normalizedBasepath = normalizePath(basepath);\n\n\tconst locationContext = getContext(LOCATION);\n\tconst routerContext = getContext(ROUTER);\n\n\tconst isTopLevelRouter = !locationContext;\n\tconst routerId = createId();\n\n\tconst manageFocus = primary && !(routerContext && !routerContext.manageFocus);\n\tconst announcementText = writable(\"\");\n\n\tconst routes = writable([]);\n\tconst activeRoute = writable(null);\n\t// Used in SSR to synchronously set that a Route is active.\n\tlet hasActiveRoute = false;\n\n\t// Nesting level of router.\n\t// We will need this to identify sibling routers, when moving\n\t// focus on navigation, so we can focus the first possible router\n\tconst level = isTopLevelRouter ? 0 : routerContext.level + 1;\n\n\t// If we're running an SSR we force the location to the `url` prop\n\tconst getInitialLocation = () =>\n\t\tnormalizeLocation(\n\t\t\tisSSR ? createLocation(url) : history.location,\n\t\t\tnormalizedBasepath,\n\t\t);\n\tconst location = isTopLevelRouter\n\t\t? writable(getInitialLocation())\n\t\t: locationContext;\n\tconst prevLocation = writable($location);\n\n\tconst triggerFocus = createTriggerFocus(\n\t\ta11yConfig,\n\t\tannouncementText,\n\t\tlocation,\n\t);\n\n\tconst createRouteFilter = routeId => routeList =>\n\t\trouteList.filter(routeItem => routeItem.id !== routeId);\n\n\tfunction registerRoute(route) {\n\t\tif (isSSR) {\n\t\t\t// In SSR we should set the activeRoute immediately if it is a match.\n\t\t\t// If there are more Routes being registered after a match is found,\n\t\t\t// we just skip them.\n\t\t\tif (hasActiveRoute) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst matchingRoute = match(route, $location.pathname);\n\t\t\tif (matchingRoute) {\n\t\t\t\thasActiveRoute = true;\n\t\t\t\t// Return the match in SSR mode, so the matched Route can use it immediatly.\n\t\t\t\t// Waiting for activeRoute to update does not work, because it updates\n\t\t\t\t// after the Route is initialized\n\t\t\t\treturn matchingRoute; // eslint-disable-line consistent-return\n\t\t\t}\n\t\t} else {\n\t\t\troutes.update(prevRoutes => {\n\t\t\t\t// Remove an old version of the updated route,\n\t\t\t\t// before pushing the new version\n\t\t\t\tconst nextRoutes = createRouteFilter(route.id)(prevRoutes);\n\t\t\t\tnextRoutes.push(route);\n\t\t\t\treturn nextRoutes;\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction unregisterRoute(routeId) {\n\t\troutes.update(createRouteFilter(routeId));\n\t}\n\n\tif (!isTopLevelRouter && basepath !== defaultBasepath) {\n\t\twarn(\n\t\t\tROUTER_ID,\n\t\t\t'Only top-level Routers can have a \"basepath\" prop. It is ignored.',\n\t\t\t{ basepath },\n\t\t);\n\t}\n\t$: if (basepath !== initialBasepath) {\n\t\twarn(ROUTER_ID, 'You cannot change the \"basepath\" prop. It is ignored.');\n\t}\n\n\t// This reactive statement will be run when the Router is created\n\t// when there are no Routes and then again the following tick, so it\n\t// will not find an active Route in SSR and in the browser it will only\n\t// pick an active Route after all Routes have been registered.\n\t$: {\n\t\tconst bestMatch = pick($routes, $location.pathname);\n\t\tactiveRoute.set(bestMatch);\n\t}\n\n\t// Manage focus and announce navigation to screen reader users\n\t$: {\n\t\tif (isTopLevelRouter) {\n\t\t\tconst hasHash = !!$location.hash;\n\t\t\t// When a hash is present in the url, we skip focus management, because\n\t\t\t// focusing a different element will prevent in-page jumps (See #3)\n\t\t\tconst shouldManageFocus = !hasHash && manageFocus;\n\t\t\t// We don't want to make an announcement, when the hash changes,\n\t\t\t// but the active route stays the same\n\t\t\tconst announceNavigation =\n\t\t\t\t!hasHash || $location.pathname !== $prevLocation.pathname;\n\t\t\ttriggerFocus(shouldManageFocus, announceNavigation);\n\t\t}\n\t}\n\n\t// Queue matched Route, so top level Router can decide which Route to focus.\n\t// Non primary Routers should just be ignored\n\t$: if (manageFocus && $activeRoute && $activeRoute.primary) {\n\t\tpushFocusCandidate({ level, routerId, route: $activeRoute });\n\t}\n\n\tif (isTopLevelRouter) {\n\t\t// The topmost Router in the tree is responsible for updating\n\t\t// the location store and supplying it through context.\n\t\tonMount(() => {\n\t\t\tconst unlisten = history.listen(changedHistory => {\n\t\t\t\tconst normalizedLocation = normalizeLocation(\n\t\t\t\t\tchangedHistory.location,\n\t\t\t\t\tnormalizedBasepath,\n\t\t\t\t);\n\t\t\t\tprevLocation.set($location);\n\t\t\t\tlocation.set(normalizedLocation);\n\t\t\t});\n\n\t\t\treturn unlisten;\n\t\t});\n\n\t\tsetContext(LOCATION, location);\n\t}\n\n\tsetContext(ROUTER, {\n\t\tactiveRoute,\n\t\tregisterRoute,\n\t\tunregisterRoute,\n\t\tmanageFocus,\n\t\tlevel,\n\t\tid: routerId,\n\t\thistory: isTopLevelRouter ? history : routerContext.history,\n\t\tbasepath: isTopLevelRouter ? normalizedBasepath : routerContext.basepath,\n\t});\n</script>\n\n<div style=\"display:none;\" aria-hidden=\"true\" data-svnav-router={routerId} />\n\n<slot />\n\n{#if isTopLevelRouter && manageFocus && a11yConfig.announcements}\n\t<div\n\t\trole=\"status\"\n\t\taria-atomic=\"true\"\n\t\taria-live=\"polite\"\n\t\tstyle={visuallyHiddenStyle}\n\t>\n\t\t{$announcementText}\n\t</div>\n{/if}\n","import { getContext, onDestroy, tick } from \"svelte\";\nimport { derived, get, writable } from \"svelte/store\";\nimport { LOCATION, ROUTER, ROUTE, ROUTE_PARAMS, FOCUS_ELEM } from \"./contexts\";\nimport { resolveLink, match, normalizeLocation } from \"./routes\";\nimport { isNumber } from \"./utils\";\nimport {\n\tfail,\n\tcreateLabel,\n\tUSE_FOCUS_ID,\n\tROUTER_ID,\n\tUSE_LOCATION_ID,\n\tROUTE_ID,\n\tUSE_RESOLVE_ID,\n\tUSE_RESOLVABLE_ID,\n\tUSE_NAVIGATE_ID,\n\tUSE_MATCH_ID,\n\tUSE_PARAMS_ID,\n} from \"./warning\";\n\n/**\n * Check if a component or hook have been created outside of a\n * context providing component\n * @param {number} componentId\n * @param {*} props\n * @param {string?} ctxKey\n * @param {number?} ctxProviderId\n */\nexport function usePreflightCheck(\n\tcomponentId,\n\tprops,\n\tctxKey = ROUTER,\n\tctxProviderId = ROUTER_ID,\n) {\n\tconst ctx = getContext(ctxKey);\n\tif (!ctx) {\n\t\tfail(\n\t\t\tcomponentId,\n\t\t\tlabel =>\n\t\t\t\t`You cannot use ${label} outside of a ${createLabel(ctxProviderId)}.`,\n\t\t\tprops,\n\t\t);\n\t}\n}\n\nconst toReadonly = ctx => {\n\tconst { subscribe } = getContext(ctx);\n\treturn { subscribe };\n};\n\n/**\n * Access the current location via a readable store.\n * @returns {import(\"svelte/store\").Readable<{\n    pathname: string;\n    search: string;\n    hash: string;\n    state: {};\n  }>}\n *\n * @example\n  ```html\n  <script>\n    import { useLocation } from \"svelte-navigator\";\n\n    const location = useLocation();\n\n    $: console.log($location);\n    // {\n    //   pathname: \"/blog\",\n    //   search: \"?id=123\",\n    //   hash: \"#comments\",\n    //   state: {}\n    // }\n  </script>\n  ```\n */\nexport function useLocation() {\n\tusePreflightCheck(USE_LOCATION_ID);\n\treturn toReadonly(LOCATION);\n}\n\n/**\n * @typedef {{\n    path: string;\n    fullPath: string;\n    uri: string;\n    params: {};\n  }} RouteMatch\n */\n\n/**\n * @typedef {import(\"svelte/store\").Readable<RouteMatch|null>} RouteMatchStore\n */\n\n/**\n * Access the history of top level Router.\n */\nexport function useHistory() {\n\tconst { history } = getContext(ROUTER);\n\treturn history;\n}\n\n/**\n * Access the base of the parent Route.\n */\nexport function useRouteBase() {\n\tconst route = getContext(ROUTE);\n\treturn route ? derived(route, _route => _route.base) : writable(\"/\");\n}\n\n/**\n * Resolve a given link relative to the current `Route` and the `Router`s `basepath`.\n * It is used under the hood in `Link` and `useNavigate`.\n * You can use it to manually resolve links, when using the `link` or `links` actions.\n *\n * @returns {(path: string) => string}\n *\n * @example\n  ```html\n  <script>\n    import { link, useResolve } from \"svelte-navigator\";\n\n    const resolve = useResolve();\n    // `resolvedLink` will be resolved relative to its parent Route\n    // and the Routers `basepath`\n    const resolvedLink = resolve(\"relativePath\");\n  </script>\n\n  <a href={resolvedLink} use:link>Relative link</a>\n  ```\n */\nexport function useResolve() {\n\tusePreflightCheck(USE_RESOLVE_ID);\n\tconst routeBase = useRouteBase();\n\tconst { basepath: appBase } = getContext(ROUTER);\n\t/**\n\t * Resolves the path relative to the current route and basepath.\n\t *\n\t * @param {string} path The path to resolve\n\t * @returns {string} The resolved path\n\t */\n\tconst resolve = path => resolveLink(path, get(routeBase), appBase);\n\treturn resolve;\n}\n\n/**\n * Resolve a given link relative to the current `Route` and the `Router`s `basepath`.\n * It is used under the hood in `Link` and `useNavigate`.\n * You can use it to manually resolve links, when using the `link` or `links` actions.\n *\n * @returns {import(\"svelte/store\").Readable<string>}\n *\n * @example\n  ```html\n  <script>\n    import { link, useResolvable } from \"svelte-navigator\";\n\n    // `resolvedLink` will be resolved relative to its parent Route\n    // and the Routers `basepath`.\n    const resolvedLink = useResolvable(\"relativePath\");\n  </script>\n\n  <a href={$resolvedLink} use:link>Relative link</a>\n  ```\n */\nexport function useResolvable(path) {\n\tusePreflightCheck(USE_RESOLVABLE_ID);\n\tconst routeBase = useRouteBase();\n\tconst { basepath: appBase } = getContext(ROUTER);\n\treturn derived(routeBase, _routeBase =>\n\t\tresolveLink(path, _routeBase, appBase),\n\t);\n}\n\n/**\n * A hook, that returns a context-aware version of `navigate`.\n * It will automatically resolve the given link relative to the current Route.\n * It will also resolve a link against the `basepath` of the Router.\n *\n * @example\n  ```html\n  <!-- App.svelte -->\n  <script>\n    import { link, Route } from \"svelte-navigator\";\n    import RouteComponent from \"./RouteComponent.svelte\";\n  </script>\n\n  <Router>\n    <Route path=\"route1\">\n      <RouteComponent />\n    </Route>\n    <!-- ... -->\n  </Router>\n\n  <!-- RouteComponent.svelte -->\n  <script>\n    import { useNavigate } from \"svelte-navigator\";\n\n    const navigate = useNavigate();\n  </script>\n\n  <button on:click=\"{() => navigate('relativePath')}\">\n    go to /route1/relativePath\n  </button>\n  <button on:click=\"{() => navigate('/absolutePath')}\">\n    go to /absolutePath\n  </button>\n  ```\n  *\n  * @example\n  ```html\n  <!-- App.svelte -->\n  <script>\n    import { link, Route } from \"svelte-navigator\";\n    import RouteComponent from \"./RouteComponent.svelte\";\n  </script>\n\n  <Router basepath=\"/base\">\n    <Route path=\"route1\">\n      <RouteComponent />\n    </Route>\n    <!-- ... -->\n  </Router>\n\n  <!-- RouteComponent.svelte -->\n  <script>\n    import { useNavigate } from \"svelte-navigator\";\n\n    const navigate = useNavigate();\n  </script>\n\n  <button on:click=\"{() => navigate('relativePath')}\">\n    go to /base/route1/relativePath\n  </button>\n  <button on:click=\"{() => navigate('/absolutePath')}\">\n    go to /base/absolutePath\n  </button>\n  ```\n */\nexport function useNavigate() {\n\tusePreflightCheck(USE_NAVIGATE_ID);\n\tconst resolve = useResolve();\n\tconst { navigate } = useHistory();\n\t/**\n\t * Navigate to a new route.\n\t * Resolves the link relative to the current route and basepath.\n\t *\n\t * @param {string|number} to The path to navigate to.\n\t *\n\t * If `to` is a number we will navigate to the stack entry index + `to`\n\t * (-> `navigate(-1)`, is equivalent to hitting the back button of the browser)\n\t * @param {Object} options\n\t * @param {*} [options.state]\n\t * @param {boolean} [options.replace=false]\n\t */\n\tconst navigateRelative = (to, options) => {\n\t\t// If to is a number, we navigate to the target stack entry via `history.go`.\n\t\t// Otherwise resolve the link\n\t\tconst target = isNumber(to) ? to : resolve(to);\n\t\treturn navigate(target, options);\n\t};\n\treturn navigateRelative;\n}\n\n/**\n * Use Svelte Navigators matching without needing to use a Route.\n * Returns a readable store with the potential match,\n * that changes, when the location changes.\n *\n * The provided path will be resolved relatively,\n * as you're used to with all paths in Svelte Navigator\n *\n * @param {string} path The path, to match against.\n * It works just like a Route path\n * @returns {RouteMatchStore} The matched route.\n * Returns `null`, when nothing could be matched\n *\n * @example\n  ```html\n  <script>\n    import { useMatch } from \"svelte-navigator\";\n\n    const relativeMatch = useMatch(\"relative/path/:to/*somewhere\");\n    const absoluteMatch = useMatch(\"/absolute/path/:to/*somewhere\");\n\n    $: console.log($relativeMatch.params.to);\n    $: console.log($absoluteMatch.params.somewhere);\n  </script>\n  ```\n */\nexport function useMatch(path) {\n\tusePreflightCheck(USE_MATCH_ID);\n\tconst location = useLocation();\n\tconst resolve = useResolve();\n\tconst { basepath: appBase } = getContext(ROUTER);\n\tconst resolvedPath = resolve(path);\n\tconst { pathname: fullPath } = normalizeLocation(\n\t\t{ pathname: resolvedPath },\n\t\tappBase,\n\t);\n\treturn derived(location, loc => match({ fullPath, path }, loc.pathname));\n}\n\n/**\n * Access the parent Routes matched params and wildcards\n * @returns {import(\"svelte/store\").Readable<{\n     [param: string]: any;\n   }>} A readable store containing the matched parameters and wildcards\n *\n * @example\n  ```html\n  <!--\n    Somewhere inside <Route path=\"user/:id/*splat\" />\n    with a current url of \"/myApp/user/123/pauls-profile\"\n  -->\n  <script>\n    import { useParams } from \"svelte-navigator\";\n\n    const params = useParams();\n\n    $: console.log($params); // -> { id: \"123\", splat: \"pauls-profile\" }\n  </script>\n\n  <h3>Welcome user {$params.id}! bleep bloop...</h3>\n  ```\n */\nexport function useParams() {\n\tusePreflightCheck(USE_PARAMS_ID, null, ROUTE, ROUTE_ID);\n\treturn toReadonly(ROUTE_PARAMS);\n}\n\n/**\n * Provide a custom element to focus, when the parent route is visited.\n * It returns the `registerFocus` function you can call manually with an\n * Element or use as a Svelte action via the `use` directive.\n *\n * @example\n  ```html\n  <!-- Using `registerFocus` as a Svelte action: -->\n  <!-- Somewhere inside a Route -->\n  <script>\n    import { useFocus } from \"svelte-navigator\";\n\n    const registerFocus = useFocus();\n  </script>\n\n  <h1>Don't worry about me...</h1>\n  <p use:registerFocus>Here, look at me!</p>\n  ```\n  * @example\n  ```html\n  <!-- Calling `registerFocus` manually: -->\n  <!-- Somewhere inside a Route -->\n  <script>\n    import { onMount } from \"svelte\";\n    import { useFocus } from \"svelte-navigator\";\n\n    const registerFocus = useFocus();\n\n    let focusElement;\n\n    onMount(() => registerFocus(focusElement))\n  </script>\n\n  <h1>Don't worry about me...</h1>\n  <p bind:this={focusElement}>Here, look at me!</p>\n  ```\n  * @example\n  ```html\n  <!-- Using `registerFocus` asyncronously: -->\n  <!-- Somewhere inside a Route -->\n  <script>\n    import { onMount } from \"svelte\";\n    import { useFocus } from \"svelte-navigator\";\n\n    const registerFocus = useFocus();\n\n    const lazyImport = import(\"./MyComponent.svelte\").then(module => module.default);\n  </script>\n\n  {#await lazyImport then MyComponent}\n    <MyComponent {registerFocus} />\n  {/await}\n\n  <!-- MyComponent.svelte -->\n  <script>\n    export let registerFocus;\n  </script>\n\n  <h1 use:registerFocus>Hi there!</h1>\n  ```\n */\nexport function useFocus() {\n\tusePreflightCheck(USE_FOCUS_ID, null, ROUTE, ROUTE_ID);\n\tconst location = useLocation();\n\tconst focusElement = getContext(FOCUS_ELEM);\n\n\tlet resolve;\n\tconst unsubscribe = location.subscribe(() => {\n\t\tconst lazyElement = new Promise(_resolve => {\n\t\t\tresolve = _resolve;\n\t\t});\n\t\tfocusElement.set(lazyElement);\n\t});\n\n\tonDestroy(unsubscribe);\n\n\treturn node => {\n\t\tlet unmounted = false;\n\t\tconst innerUnsubscribe = location.subscribe(() => {\n\t\t\ttick().then(() => {\n\t\t\t\tif (!unmounted) {\n\t\t\t\t\tresolve(node);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn {\n\t\t\tdestroy() {\n\t\t\t\tunmounted = true;\n\t\t\t\tinnerUnsubscribe();\n\t\t\t},\n\t\t};\n\t};\n}\n","<script context=\"module\">\n\t// eslint-disable-next-line import/order\n\timport { createCounter } from \"./utils\";\n\n\tconst createId = createCounter();\n</script>\n\n<script>\n\t/*\n\t * Adapted from https://github.com/EmilTholin/svelte-routing\n\t *\n\t * https://github.com/EmilTholin/svelte-routing/blob/master/LICENSE\n\t */\n\n\timport { getContext, onDestroy, setContext } from \"svelte\";\n\timport { writable, get } from \"svelte/store\";\n\timport Router from \"./Router.svelte\";\n\timport { ROUTER, ROUTE, ROUTE_PARAMS, FOCUS_ELEM } from \"./contexts\";\n\timport {\n\t\tuseLocation,\n\t\tuseNavigate,\n\t\tuseRouteBase,\n\t\tusePreflightCheck,\n\t} from \"./hooks\";\n\timport { isSSR } from \"./utils\";\n\timport { extractBaseUri } from \"./routes\";\n\timport { join } from \"./paths\";\n\timport { ROUTE_ID } from \"./warning\";\n\n\texport let path = \"\";\n\texport let component = null;\n\texport let meta = {};\n\texport let primary = true;\n\n\tusePreflightCheck(ROUTE_ID, $$props);\n\n\tconst id = createId();\n\n\tconst { registerRoute, unregisterRoute, activeRoute } = getContext(ROUTER);\n\tconst parentBase = useRouteBase();\n\tconst location = useLocation();\n\tconst focusElement = writable(null);\n\n\t// In SSR we cannot wait for $activeRoute to update,\n\t// so we use the match returned from `registerRoute` instead\n\tlet ssrMatch;\n\n\tconst route = writable();\n\t$: {\n\t\t// The route store will be re-computed whenever props, location or parentBase change\n\t\tconst isDefault = path === \"\";\n\t\tconst rawBase = join($parentBase, path);\n\t\tconst updatedRoute = {\n\t\t\tid,\n\t\t\tpath,\n\t\t\tmeta,\n\t\t\t// If no path prop is given, this Route will act as the default Route\n\t\t\t// that is rendered if no other Route in the Router is a match\n\t\t\tdefault: isDefault,\n\t\t\tfullPath: isDefault ? \"\" : rawBase,\n\t\t\tbase: isDefault\n\t\t\t\t? $parentBase\n\t\t\t\t: extractBaseUri(rawBase, $location.pathname),\n\t\t\tprimary,\n\t\t\tfocusElement,\n\t\t};\n\t\troute.set(updatedRoute);\n\t\t// If we're in SSR mode and the Route matches,\n\t\t// `registerRoute` will return the match\n\t\tssrMatch = registerRoute(updatedRoute);\n\t}\n\n\t$: isActive = !!(ssrMatch || ($activeRoute && $activeRoute.id === id));\n\n\tconst params = writable({});\n\t$: if (isActive) {\n\t\tconst { params: activeParams } = ssrMatch || $activeRoute;\n\t\tparams.set(activeParams);\n\t}\n\n\tsetContext(ROUTE, route);\n\tsetContext(ROUTE_PARAMS, params);\n\tsetContext(FOCUS_ELEM, focusElement);\n\n\t// We need to call useNavigate after the route is set,\n\t// so we can use the routes path for link resolution\n\tconst navigate = useNavigate();\n\n\t// There is no need to unregister Routes in SSR since it will all be\n\t// thrown away anyway\n\tif (!isSSR) {\n\t\tonDestroy(() => unregisterRoute(id));\n\t}\n</script>\n\n<div style=\"display:none;\" aria-hidden=\"true\" data-svnav-route-start={id} />\n{#if isActive}\n\t<Router {primary}>\n\t\t<!--\n      `$params` always returns `{}` in SSR in Route, because it will\n      update after component initialisation has already happend.\n      `get(params)` always works, but is not reactive, so we can't\n      use it in client rendered mode\n    -->\n\t\t{#if component !== null}\n\t\t\t<svelte:component\n\t\t\t\tthis={component}\n\t\t\t\tlocation={$location}\n\t\t\t\t{navigate}\n\t\t\t\t{...isSSR ? get(params) : $params}\n\t\t\t\t{...$$restProps}\n\t\t\t/>\n\t\t{:else}\n\t\t\t<slot\n\t\t\t\tparams={isSSR ? get(params) : $params}\n\t\t\t\tlocation={$location}\n\t\t\t\t{navigate}\n\t\t\t/>\n\t\t{/if}\n\t</Router>\n{/if}\n<div style=\"display:none;\" aria-hidden=\"true\" data-svnav-route-end={id} />\n","/*\n * Adapted from https://github.com/EmilTholin/svelte-routing\n *\n * https://github.com/EmilTholin/svelte-routing/blob/master/LICENSE\n */\n\nimport { navigate as defaultNavigate } from \"./history\";\nimport { shouldNavigate, findClosest, addListener, isFunction } from \"./utils\";\n\nconst createAction = getAnchor => (node, navigate = defaultNavigate) => {\n\tconst handleClick = event => {\n\t\tconst anchor = getAnchor(event);\n\t\tif (anchor && anchor.target === \"\" && shouldNavigate(event)) {\n\t\t\tevent.preventDefault();\n\t\t\tconst to = anchor.pathname + anchor.search + anchor.hash;\n\t\t\tnavigate(to, { replace: anchor.hasAttribute(\"replace\") });\n\t\t}\n\t};\n\tconst unlisten = addListener(node, \"click\", handleClick);\n\treturn { destroy: unlisten };\n};\n\n// prettier-ignore\n/**\n * A link action that can be added to <a href=\"\"> tags rather\n * than using the <Link> component.\n *\n * Example:\n * ```html\n * <a href=\"/post/{postId}\" use:link>{post.title}</a>\n * ```\n */\nexport const link = /*#__PURE__*/createAction(event => event.currentTarget); // eslint-disable-line spaced-comment, max-len\n\n// prettier-ignore\n/**\n * An action to be added at a root element of your application to\n * capture all relative links and push them onto the history stack.\n *\n * Example:\n * ```html\n * <div use:links>\n *   <Router>\n *     <Route path=\"/\" component={Home} />\n *     <Route path=\"/p/:projectId/:docId\" component={ProjectScreen} />\n *     {#each projects as project}\n *       <a href=\"/p/{project.id}\">{project.title}</a>\n *     {/each}\n *   </Router>\n * </div>\n * ```\n */\nexport const links = /*#__PURE__*/createAction(event => { // eslint-disable-line spaced-comment\n  const anchor = findClosest(\"A\", event.target);\n  if (\n    anchor &&\n    isFunction(anchor.hasAttribute) &&\n    !anchor.hasAttribute(\"noroute\")\n  ) {\n    return anchor;\n  }\n  return null;\n});\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// Used for setting prototype methods that IE8 chokes on.\nvar DELETE = 'delete';\n\n// Constants describing the size of trie nodes.\nvar SHIFT = 5; // Resulted in best performance after ______?\nvar SIZE = 1 << SHIFT;\nvar MASK = SIZE - 1;\n\n// A consistent shared value representing \"not set\" which equals nothing other\n// than itself, and nothing that could be provided externally.\nvar NOT_SET = {};\n\n// Boolean references, Rough equivalent of `bool &`.\nfunction MakeRef() {\n  return { value: false };\n}\n\nfunction SetRef(ref) {\n  if (ref) {\n    ref.value = true;\n  }\n}\n\n// A function which returns a value representing an \"owner\" for transient writes\n// to tries. The return value will only ever equal itself, and will not equal\n// the return of any subsequent call of this function.\nfunction OwnerID() {}\n\nfunction ensureSize(iter) {\n  if (iter.size === undefined) {\n    iter.size = iter.__iterate(returnTrue);\n  }\n  return iter.size;\n}\n\nfunction wrapIndex(iter, index) {\n  // This implements \"is array index\" which the ECMAString spec defines as:\n  //\n  //     A String property name P is an array index if and only if\n  //     ToString(ToUint32(P)) is equal to P and ToUint32(P) is not equal\n  //     to 2^321.\n  //\n  // http://www.ecma-international.org/ecma-262/6.0/#sec-array-exotic-objects\n  if (typeof index !== 'number') {\n    var uint32Index = index >>> 0; // N >>> 0 is shorthand for ToUint32\n    if ('' + uint32Index !== index || uint32Index === 4294967295) {\n      return NaN;\n    }\n    index = uint32Index;\n  }\n  return index < 0 ? ensureSize(iter) + index : index;\n}\n\nfunction returnTrue() {\n  return true;\n}\n\nfunction wholeSlice(begin, end, size) {\n  return (\n    ((begin === 0 && !isNeg(begin)) ||\n      (size !== undefined && begin <= -size)) &&\n    (end === undefined || (size !== undefined && end >= size))\n  );\n}\n\nfunction resolveBegin(begin, size) {\n  return resolveIndex(begin, size, 0);\n}\n\nfunction resolveEnd(end, size) {\n  return resolveIndex(end, size, size);\n}\n\nfunction resolveIndex(index, size, defaultIndex) {\n  // Sanitize indices using this shorthand for ToInt32(argument)\n  // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n  return index === undefined\n    ? defaultIndex\n    : isNeg(index)\n      ? size === Infinity\n        ? size\n        : Math.max(0, size + index) | 0\n      : size === undefined || size === index\n        ? index\n        : Math.min(size, index) | 0;\n}\n\nfunction isNeg(value) {\n  // Account for -0 which is negative, but not less than 0.\n  return value < 0 || (value === 0 && 1 / value === -Infinity);\n}\n\n// Note: value is unchanged to not break immutable-devtools.\nvar IS_COLLECTION_SYMBOL = '@@__IMMUTABLE_ITERABLE__@@';\n\nfunction isCollection(maybeCollection) {\n  return Boolean(maybeCollection && maybeCollection[IS_COLLECTION_SYMBOL]);\n}\n\nvar IS_KEYED_SYMBOL = '@@__IMMUTABLE_KEYED__@@';\n\nfunction isKeyed(maybeKeyed) {\n  return Boolean(maybeKeyed && maybeKeyed[IS_KEYED_SYMBOL]);\n}\n\nvar IS_INDEXED_SYMBOL = '@@__IMMUTABLE_INDEXED__@@';\n\nfunction isIndexed(maybeIndexed) {\n  return Boolean(maybeIndexed && maybeIndexed[IS_INDEXED_SYMBOL]);\n}\n\nfunction isAssociative(maybeAssociative) {\n  return isKeyed(maybeAssociative) || isIndexed(maybeAssociative);\n}\n\nvar Collection = function Collection(value) {\n  return isCollection(value) ? value : Seq(value);\n};\n\nvar KeyedCollection = /*@__PURE__*/(function (Collection) {\n  function KeyedCollection(value) {\n    return isKeyed(value) ? value : KeyedSeq(value);\n  }\n\n  if ( Collection ) KeyedCollection.__proto__ = Collection;\n  KeyedCollection.prototype = Object.create( Collection && Collection.prototype );\n  KeyedCollection.prototype.constructor = KeyedCollection;\n\n  return KeyedCollection;\n}(Collection));\n\nvar IndexedCollection = /*@__PURE__*/(function (Collection) {\n  function IndexedCollection(value) {\n    return isIndexed(value) ? value : IndexedSeq(value);\n  }\n\n  if ( Collection ) IndexedCollection.__proto__ = Collection;\n  IndexedCollection.prototype = Object.create( Collection && Collection.prototype );\n  IndexedCollection.prototype.constructor = IndexedCollection;\n\n  return IndexedCollection;\n}(Collection));\n\nvar SetCollection = /*@__PURE__*/(function (Collection) {\n  function SetCollection(value) {\n    return isCollection(value) && !isAssociative(value) ? value : SetSeq(value);\n  }\n\n  if ( Collection ) SetCollection.__proto__ = Collection;\n  SetCollection.prototype = Object.create( Collection && Collection.prototype );\n  SetCollection.prototype.constructor = SetCollection;\n\n  return SetCollection;\n}(Collection));\n\nCollection.Keyed = KeyedCollection;\nCollection.Indexed = IndexedCollection;\nCollection.Set = SetCollection;\n\nvar IS_SEQ_SYMBOL = '@@__IMMUTABLE_SEQ__@@';\n\nfunction isSeq(maybeSeq) {\n  return Boolean(maybeSeq && maybeSeq[IS_SEQ_SYMBOL]);\n}\n\nvar IS_RECORD_SYMBOL = '@@__IMMUTABLE_RECORD__@@';\n\nfunction isRecord(maybeRecord) {\n  return Boolean(maybeRecord && maybeRecord[IS_RECORD_SYMBOL]);\n}\n\nfunction isImmutable(maybeImmutable) {\n  return isCollection(maybeImmutable) || isRecord(maybeImmutable);\n}\n\nvar IS_ORDERED_SYMBOL = '@@__IMMUTABLE_ORDERED__@@';\n\nfunction isOrdered(maybeOrdered) {\n  return Boolean(maybeOrdered && maybeOrdered[IS_ORDERED_SYMBOL]);\n}\n\nvar ITERATE_KEYS = 0;\nvar ITERATE_VALUES = 1;\nvar ITERATE_ENTRIES = 2;\n\nvar REAL_ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\nvar FAUX_ITERATOR_SYMBOL = '@@iterator';\n\nvar ITERATOR_SYMBOL = REAL_ITERATOR_SYMBOL || FAUX_ITERATOR_SYMBOL;\n\nvar Iterator = function Iterator(next) {\n  this.next = next;\n};\n\nIterator.prototype.toString = function toString () {\n  return '[Iterator]';\n};\n\nIterator.KEYS = ITERATE_KEYS;\nIterator.VALUES = ITERATE_VALUES;\nIterator.ENTRIES = ITERATE_ENTRIES;\n\nIterator.prototype.inspect = Iterator.prototype.toSource = function() {\n  return this.toString();\n};\nIterator.prototype[ITERATOR_SYMBOL] = function() {\n  return this;\n};\n\nfunction iteratorValue(type, k, v, iteratorResult) {\n  var value = type === 0 ? k : type === 1 ? v : [k, v];\n  iteratorResult\n    ? (iteratorResult.value = value)\n    : (iteratorResult = {\n        value: value,\n        done: false,\n      });\n  return iteratorResult;\n}\n\nfunction iteratorDone() {\n  return { value: undefined, done: true };\n}\n\nfunction hasIterator(maybeIterable) {\n  return !!getIteratorFn(maybeIterable);\n}\n\nfunction isIterator(maybeIterator) {\n  return maybeIterator && typeof maybeIterator.next === 'function';\n}\n\nfunction getIterator(iterable) {\n  var iteratorFn = getIteratorFn(iterable);\n  return iteratorFn && iteratorFn.call(iterable);\n}\n\nfunction getIteratorFn(iterable) {\n  var iteratorFn =\n    iterable &&\n    ((REAL_ITERATOR_SYMBOL && iterable[REAL_ITERATOR_SYMBOL]) ||\n      iterable[FAUX_ITERATOR_SYMBOL]);\n  if (typeof iteratorFn === 'function') {\n    return iteratorFn;\n  }\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction isArrayLike(value) {\n  if (Array.isArray(value) || typeof value === 'string') {\n    return true;\n  }\n\n  return (\n    value &&\n    typeof value === 'object' &&\n    Number.isInteger(value.length) &&\n    value.length >= 0 &&\n    (value.length === 0\n      ? // Only {length: 0} is considered Array-like.\n        Object.keys(value).length === 1\n      : // An object is only Array-like if it has a property where the last value\n        // in the array-like may be found (which could be undefined).\n        value.hasOwnProperty(value.length - 1))\n  );\n}\n\nvar Seq = /*@__PURE__*/(function (Collection$$1) {\n  function Seq(value) {\n    return value === null || value === undefined\n      ? emptySequence()\n      : isImmutable(value)\n        ? value.toSeq()\n        : seqFromValue(value);\n  }\n\n  if ( Collection$$1 ) Seq.__proto__ = Collection$$1;\n  Seq.prototype = Object.create( Collection$$1 && Collection$$1.prototype );\n  Seq.prototype.constructor = Seq;\n\n  Seq.prototype.toSeq = function toSeq () {\n    return this;\n  };\n\n  Seq.prototype.toString = function toString () {\n    return this.__toString('Seq {', '}');\n  };\n\n  Seq.prototype.cacheResult = function cacheResult () {\n    if (!this._cache && this.__iterateUncached) {\n      this._cache = this.entrySeq().toArray();\n      this.size = this._cache.length;\n    }\n    return this;\n  };\n\n  // abstract __iterateUncached(fn, reverse)\n\n  Seq.prototype.__iterate = function __iterate (fn, reverse) {\n    var cache = this._cache;\n    if (cache) {\n      var size = cache.length;\n      var i = 0;\n      while (i !== size) {\n        var entry = cache[reverse ? size - ++i : i++];\n        if (fn(entry[1], entry[0], this) === false) {\n          break;\n        }\n      }\n      return i;\n    }\n    return this.__iterateUncached(fn, reverse);\n  };\n\n  // abstract __iteratorUncached(type, reverse)\n\n  Seq.prototype.__iterator = function __iterator (type, reverse) {\n    var cache = this._cache;\n    if (cache) {\n      var size = cache.length;\n      var i = 0;\n      return new Iterator(function () {\n        if (i === size) {\n          return iteratorDone();\n        }\n        var entry = cache[reverse ? size - ++i : i++];\n        return iteratorValue(type, entry[0], entry[1]);\n      });\n    }\n    return this.__iteratorUncached(type, reverse);\n  };\n\n  return Seq;\n}(Collection));\n\nvar KeyedSeq = /*@__PURE__*/(function (Seq) {\n  function KeyedSeq(value) {\n    return value === null || value === undefined\n      ? emptySequence().toKeyedSeq()\n      : isCollection(value)\n        ? isKeyed(value)\n          ? value.toSeq()\n          : value.fromEntrySeq()\n        : isRecord(value)\n          ? value.toSeq()\n          : keyedSeqFromValue(value);\n  }\n\n  if ( Seq ) KeyedSeq.__proto__ = Seq;\n  KeyedSeq.prototype = Object.create( Seq && Seq.prototype );\n  KeyedSeq.prototype.constructor = KeyedSeq;\n\n  KeyedSeq.prototype.toKeyedSeq = function toKeyedSeq () {\n    return this;\n  };\n\n  return KeyedSeq;\n}(Seq));\n\nvar IndexedSeq = /*@__PURE__*/(function (Seq) {\n  function IndexedSeq(value) {\n    return value === null || value === undefined\n      ? emptySequence()\n      : isCollection(value)\n        ? isKeyed(value)\n          ? value.entrySeq()\n          : value.toIndexedSeq()\n        : isRecord(value)\n          ? value.toSeq().entrySeq()\n          : indexedSeqFromValue(value);\n  }\n\n  if ( Seq ) IndexedSeq.__proto__ = Seq;\n  IndexedSeq.prototype = Object.create( Seq && Seq.prototype );\n  IndexedSeq.prototype.constructor = IndexedSeq;\n\n  IndexedSeq.of = function of (/*...values*/) {\n    return IndexedSeq(arguments);\n  };\n\n  IndexedSeq.prototype.toIndexedSeq = function toIndexedSeq () {\n    return this;\n  };\n\n  IndexedSeq.prototype.toString = function toString () {\n    return this.__toString('Seq [', ']');\n  };\n\n  return IndexedSeq;\n}(Seq));\n\nvar SetSeq = /*@__PURE__*/(function (Seq) {\n  function SetSeq(value) {\n    return (isCollection(value) && !isAssociative(value)\n      ? value\n      : IndexedSeq(value)\n    ).toSetSeq();\n  }\n\n  if ( Seq ) SetSeq.__proto__ = Seq;\n  SetSeq.prototype = Object.create( Seq && Seq.prototype );\n  SetSeq.prototype.constructor = SetSeq;\n\n  SetSeq.of = function of (/*...values*/) {\n    return SetSeq(arguments);\n  };\n\n  SetSeq.prototype.toSetSeq = function toSetSeq () {\n    return this;\n  };\n\n  return SetSeq;\n}(Seq));\n\nSeq.isSeq = isSeq;\nSeq.Keyed = KeyedSeq;\nSeq.Set = SetSeq;\nSeq.Indexed = IndexedSeq;\n\nSeq.prototype[IS_SEQ_SYMBOL] = true;\n\n// #pragma Root Sequences\n\nvar ArraySeq = /*@__PURE__*/(function (IndexedSeq) {\n  function ArraySeq(array) {\n    this._array = array;\n    this.size = array.length;\n  }\n\n  if ( IndexedSeq ) ArraySeq.__proto__ = IndexedSeq;\n  ArraySeq.prototype = Object.create( IndexedSeq && IndexedSeq.prototype );\n  ArraySeq.prototype.constructor = ArraySeq;\n\n  ArraySeq.prototype.get = function get (index, notSetValue) {\n    return this.has(index) ? this._array[wrapIndex(this, index)] : notSetValue;\n  };\n\n  ArraySeq.prototype.__iterate = function __iterate (fn, reverse) {\n    var array = this._array;\n    var size = array.length;\n    var i = 0;\n    while (i !== size) {\n      var ii = reverse ? size - ++i : i++;\n      if (fn(array[ii], ii, this) === false) {\n        break;\n      }\n    }\n    return i;\n  };\n\n  ArraySeq.prototype.__iterator = function __iterator (type, reverse) {\n    var array = this._array;\n    var size = array.length;\n    var i = 0;\n    return new Iterator(function () {\n      if (i === size) {\n        return iteratorDone();\n      }\n      var ii = reverse ? size - ++i : i++;\n      return iteratorValue(type, ii, array[ii]);\n    });\n  };\n\n  return ArraySeq;\n}(IndexedSeq));\n\nvar ObjectSeq = /*@__PURE__*/(function (KeyedSeq) {\n  function ObjectSeq(object) {\n    var keys = Object.keys(object);\n    this._object = object;\n    this._keys = keys;\n    this.size = keys.length;\n  }\n\n  if ( KeyedSeq ) ObjectSeq.__proto__ = KeyedSeq;\n  ObjectSeq.prototype = Object.create( KeyedSeq && KeyedSeq.prototype );\n  ObjectSeq.prototype.constructor = ObjectSeq;\n\n  ObjectSeq.prototype.get = function get (key, notSetValue) {\n    if (notSetValue !== undefined && !this.has(key)) {\n      return notSetValue;\n    }\n    return this._object[key];\n  };\n\n  ObjectSeq.prototype.has = function has (key) {\n    return hasOwnProperty.call(this._object, key);\n  };\n\n  ObjectSeq.prototype.__iterate = function __iterate (fn, reverse) {\n    var object = this._object;\n    var keys = this._keys;\n    var size = keys.length;\n    var i = 0;\n    while (i !== size) {\n      var key = keys[reverse ? size - ++i : i++];\n      if (fn(object[key], key, this) === false) {\n        break;\n      }\n    }\n    return i;\n  };\n\n  ObjectSeq.prototype.__iterator = function __iterator (type, reverse) {\n    var object = this._object;\n    var keys = this._keys;\n    var size = keys.length;\n    var i = 0;\n    return new Iterator(function () {\n      if (i === size) {\n        return iteratorDone();\n      }\n      var key = keys[reverse ? size - ++i : i++];\n      return iteratorValue(type, key, object[key]);\n    });\n  };\n\n  return ObjectSeq;\n}(KeyedSeq));\nObjectSeq.prototype[IS_ORDERED_SYMBOL] = true;\n\nvar CollectionSeq = /*@__PURE__*/(function (IndexedSeq) {\n  function CollectionSeq(collection) {\n    this._collection = collection;\n    this.size = collection.length || collection.size;\n  }\n\n  if ( IndexedSeq ) CollectionSeq.__proto__ = IndexedSeq;\n  CollectionSeq.prototype = Object.create( IndexedSeq && IndexedSeq.prototype );\n  CollectionSeq.prototype.constructor = CollectionSeq;\n\n  CollectionSeq.prototype.__iterateUncached = function __iterateUncached (fn, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var collection = this._collection;\n    var iterator = getIterator(collection);\n    var iterations = 0;\n    if (isIterator(iterator)) {\n      var step;\n      while (!(step = iterator.next()).done) {\n        if (fn(step.value, iterations++, this) === false) {\n          break;\n        }\n      }\n    }\n    return iterations;\n  };\n\n  CollectionSeq.prototype.__iteratorUncached = function __iteratorUncached (type, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var collection = this._collection;\n    var iterator = getIterator(collection);\n    if (!isIterator(iterator)) {\n      return new Iterator(iteratorDone);\n    }\n    var iterations = 0;\n    return new Iterator(function () {\n      var step = iterator.next();\n      return step.done ? step : iteratorValue(type, iterations++, step.value);\n    });\n  };\n\n  return CollectionSeq;\n}(IndexedSeq));\n\n// # pragma Helper functions\n\nvar EMPTY_SEQ;\n\nfunction emptySequence() {\n  return EMPTY_SEQ || (EMPTY_SEQ = new ArraySeq([]));\n}\n\nfunction keyedSeqFromValue(value) {\n  var seq = Array.isArray(value)\n    ? new ArraySeq(value)\n    : hasIterator(value)\n      ? new CollectionSeq(value)\n      : undefined;\n  if (seq) {\n    return seq.fromEntrySeq();\n  }\n  if (typeof value === 'object') {\n    return new ObjectSeq(value);\n  }\n  throw new TypeError(\n    'Expected Array or collection object of [k, v] entries, or keyed object: ' +\n      value\n  );\n}\n\nfunction indexedSeqFromValue(value) {\n  var seq = maybeIndexedSeqFromValue(value);\n  if (seq) {\n    return seq;\n  }\n  throw new TypeError(\n    'Expected Array or collection object of values: ' + value\n  );\n}\n\nfunction seqFromValue(value) {\n  var seq = maybeIndexedSeqFromValue(value);\n  if (seq) {\n    return seq;\n  }\n  if (typeof value === 'object') {\n    return new ObjectSeq(value);\n  }\n  throw new TypeError(\n    'Expected Array or collection object of values, or keyed object: ' + value\n  );\n}\n\nfunction maybeIndexedSeqFromValue(value) {\n  return isArrayLike(value)\n    ? new ArraySeq(value)\n    : hasIterator(value)\n      ? new CollectionSeq(value)\n      : undefined;\n}\n\nvar IS_MAP_SYMBOL = '@@__IMMUTABLE_MAP__@@';\n\nfunction isMap(maybeMap) {\n  return Boolean(maybeMap && maybeMap[IS_MAP_SYMBOL]);\n}\n\nfunction isOrderedMap(maybeOrderedMap) {\n  return isMap(maybeOrderedMap) && isOrdered(maybeOrderedMap);\n}\n\nfunction isValueObject(maybeValue) {\n  return Boolean(\n    maybeValue &&\n      typeof maybeValue.equals === 'function' &&\n      typeof maybeValue.hashCode === 'function'\n  );\n}\n\n/**\n * An extension of the \"same-value\" algorithm as [described for use by ES6 Map\n * and Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map#Key_equality)\n *\n * NaN is considered the same as NaN, however -0 and 0 are considered the same\n * value, which is different from the algorithm described by\n * [`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is).\n *\n * This is extended further to allow Objects to describe the values they\n * represent, by way of `valueOf` or `equals` (and `hashCode`).\n *\n * Note: because of this extension, the key equality of Immutable.Map and the\n * value equality of Immutable.Set will differ from ES6 Map and Set.\n *\n * ### Defining custom values\n *\n * The easiest way to describe the value an object represents is by implementing\n * `valueOf`. For example, `Date` represents a value by returning a unix\n * timestamp for `valueOf`:\n *\n *     var date1 = new Date(1234567890000); // Fri Feb 13 2009 ...\n *     var date2 = new Date(1234567890000);\n *     date1.valueOf(); // 1234567890000\n *     assert( date1 !== date2 );\n *     assert( Immutable.is( date1, date2 ) );\n *\n * Note: overriding `valueOf` may have other implications if you use this object\n * where JavaScript expects a primitive, such as implicit string coercion.\n *\n * For more complex types, especially collections, implementing `valueOf` may\n * not be performant. An alternative is to implement `equals` and `hashCode`.\n *\n * `equals` takes another object, presumably of similar type, and returns true\n * if it is equal. Equality is symmetrical, so the same result should be\n * returned if this and the argument are flipped.\n *\n *     assert( a.equals(b) === b.equals(a) );\n *\n * `hashCode` returns a 32bit integer number representing the object which will\n * be used to determine how to store the value object in a Map or Set. You must\n * provide both or neither methods, one must not exist without the other.\n *\n * Also, an important relationship between these methods must be upheld: if two\n * values are equal, they *must* return the same hashCode. If the values are not\n * equal, they might have the same hashCode; this is called a hash collision,\n * and while undesirable for performance reasons, it is acceptable.\n *\n *     if (a.equals(b)) {\n *       assert( a.hashCode() === b.hashCode() );\n *     }\n *\n * All Immutable collections are Value Objects: they implement `equals()`\n * and `hashCode()`.\n */\nfunction is(valueA, valueB) {\n  if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n    return true;\n  }\n  if (!valueA || !valueB) {\n    return false;\n  }\n  if (\n    typeof valueA.valueOf === 'function' &&\n    typeof valueB.valueOf === 'function'\n  ) {\n    valueA = valueA.valueOf();\n    valueB = valueB.valueOf();\n    if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n      return true;\n    }\n    if (!valueA || !valueB) {\n      return false;\n    }\n  }\n  return !!(\n    isValueObject(valueA) &&\n    isValueObject(valueB) &&\n    valueA.equals(valueB)\n  );\n}\n\nvar imul =\n  typeof Math.imul === 'function' && Math.imul(0xffffffff, 2) === -2\n    ? Math.imul\n    : function imul(a, b) {\n        a |= 0; // int\n        b |= 0; // int\n        var c = a & 0xffff;\n        var d = b & 0xffff;\n        // Shift by 0 fixes the sign on the high part.\n        return (c * d + ((((a >>> 16) * d + c * (b >>> 16)) << 16) >>> 0)) | 0; // int\n      };\n\n// v8 has an optimization for storing 31-bit signed numbers.\n// Values which have either 00 or 11 as the high order bits qualify.\n// This function drops the highest order bit in a signed number, maintaining\n// the sign bit.\nfunction smi(i32) {\n  return ((i32 >>> 1) & 0x40000000) | (i32 & 0xbfffffff);\n}\n\nvar defaultValueOf = Object.prototype.valueOf;\n\nfunction hash(o) {\n  switch (typeof o) {\n    case 'boolean':\n      // The hash values for built-in constants are a 1 value for each 5-byte\n      // shift region expect for the first, which encodes the value. This\n      // reduces the odds of a hash collision for these common values.\n      return o ? 0x42108421 : 0x42108420;\n    case 'number':\n      return hashNumber(o);\n    case 'string':\n      return o.length > STRING_HASH_CACHE_MIN_STRLEN\n        ? cachedHashString(o)\n        : hashString(o);\n    case 'object':\n    case 'function':\n      if (o === null) {\n        return 0x42108422;\n      }\n      if (typeof o.hashCode === 'function') {\n        // Drop any high bits from accidentally long hash codes.\n        return smi(o.hashCode(o));\n      }\n      if (o.valueOf !== defaultValueOf && typeof o.valueOf === 'function') {\n        o = o.valueOf(o);\n      }\n      return hashJSObj(o);\n    case 'undefined':\n      return 0x42108423;\n    default:\n      if (typeof o.toString === 'function') {\n        return hashString(o.toString());\n      }\n      throw new Error('Value type ' + typeof o + ' cannot be hashed.');\n  }\n}\n\n// Compress arbitrarily large numbers into smi hashes.\nfunction hashNumber(n) {\n  if (n !== n || n === Infinity) {\n    return 0;\n  }\n  var hash = n | 0;\n  if (hash !== n) {\n    hash ^= n * 0xffffffff;\n  }\n  while (n > 0xffffffff) {\n    n /= 0xffffffff;\n    hash ^= n;\n  }\n  return smi(hash);\n}\n\nfunction cachedHashString(string) {\n  var hashed = stringHashCache[string];\n  if (hashed === undefined) {\n    hashed = hashString(string);\n    if (STRING_HASH_CACHE_SIZE === STRING_HASH_CACHE_MAX_SIZE) {\n      STRING_HASH_CACHE_SIZE = 0;\n      stringHashCache = {};\n    }\n    STRING_HASH_CACHE_SIZE++;\n    stringHashCache[string] = hashed;\n  }\n  return hashed;\n}\n\n// http://jsperf.com/hashing-strings\nfunction hashString(string) {\n  // This is the hash from JVM\n  // The hash code for a string is computed as\n  // s[0] * 31 ^ (n - 1) + s[1] * 31 ^ (n - 2) + ... + s[n - 1],\n  // where s[i] is the ith character of the string and n is the length of\n  // the string. We \"mod\" the result to make it between 0 (inclusive) and 2^31\n  // (exclusive) by dropping high bits.\n  var hashed = 0;\n  for (var ii = 0; ii < string.length; ii++) {\n    hashed = (31 * hashed + string.charCodeAt(ii)) | 0;\n  }\n  return smi(hashed);\n}\n\nfunction hashJSObj(obj) {\n  var hashed;\n  if (usingWeakMap) {\n    hashed = weakMap.get(obj);\n    if (hashed !== undefined) {\n      return hashed;\n    }\n  }\n\n  hashed = obj[UID_HASH_KEY];\n  if (hashed !== undefined) {\n    return hashed;\n  }\n\n  if (!canDefineProperty) {\n    hashed = obj.propertyIsEnumerable && obj.propertyIsEnumerable[UID_HASH_KEY];\n    if (hashed !== undefined) {\n      return hashed;\n    }\n\n    hashed = getIENodeHash(obj);\n    if (hashed !== undefined) {\n      return hashed;\n    }\n  }\n\n  hashed = ++objHashUID;\n  if (objHashUID & 0x40000000) {\n    objHashUID = 0;\n  }\n\n  if (usingWeakMap) {\n    weakMap.set(obj, hashed);\n  } else if (isExtensible !== undefined && isExtensible(obj) === false) {\n    throw new Error('Non-extensible objects are not allowed as keys.');\n  } else if (canDefineProperty) {\n    Object.defineProperty(obj, UID_HASH_KEY, {\n      enumerable: false,\n      configurable: false,\n      writable: false,\n      value: hashed,\n    });\n  } else if (\n    obj.propertyIsEnumerable !== undefined &&\n    obj.propertyIsEnumerable === obj.constructor.prototype.propertyIsEnumerable\n  ) {\n    // Since we can't define a non-enumerable property on the object\n    // we'll hijack one of the less-used non-enumerable properties to\n    // save our hash on it. Since this is a function it will not show up in\n    // `JSON.stringify` which is what we want.\n    obj.propertyIsEnumerable = function() {\n      return this.constructor.prototype.propertyIsEnumerable.apply(\n        this,\n        arguments\n      );\n    };\n    obj.propertyIsEnumerable[UID_HASH_KEY] = hashed;\n  } else if (obj.nodeType !== undefined) {\n    // At this point we couldn't get the IE `uniqueID` to use as a hash\n    // and we couldn't use a non-enumerable property to exploit the\n    // dontEnum bug so we simply add the `UID_HASH_KEY` on the node\n    // itself.\n    obj[UID_HASH_KEY] = hashed;\n  } else {\n    throw new Error('Unable to set a non-enumerable property on object.');\n  }\n\n  return hashed;\n}\n\n// Get references to ES5 object methods.\nvar isExtensible = Object.isExtensible;\n\n// True if Object.defineProperty works as expected. IE8 fails this test.\nvar canDefineProperty = (function() {\n  try {\n    Object.defineProperty({}, '@', {});\n    return true;\n  } catch (e) {\n    return false;\n  }\n})();\n\n// IE has a `uniqueID` property on DOM nodes. We can construct the hash from it\n// and avoid memory leaks from the IE cloneNode bug.\nfunction getIENodeHash(node) {\n  if (node && node.nodeType > 0) {\n    switch (node.nodeType) {\n      case 1: // Element\n        return node.uniqueID;\n      case 9: // Document\n        return node.documentElement && node.documentElement.uniqueID;\n    }\n  }\n}\n\n// If possible, use a WeakMap.\nvar usingWeakMap = typeof WeakMap === 'function';\nvar weakMap;\nif (usingWeakMap) {\n  weakMap = new WeakMap();\n}\n\nvar objHashUID = 0;\n\nvar UID_HASH_KEY = '__immutablehash__';\nif (typeof Symbol === 'function') {\n  UID_HASH_KEY = Symbol(UID_HASH_KEY);\n}\n\nvar STRING_HASH_CACHE_MIN_STRLEN = 16;\nvar STRING_HASH_CACHE_MAX_SIZE = 255;\nvar STRING_HASH_CACHE_SIZE = 0;\nvar stringHashCache = {};\n\nvar ToKeyedSequence = /*@__PURE__*/(function (KeyedSeq$$1) {\n  function ToKeyedSequence(indexed, useKeys) {\n    this._iter = indexed;\n    this._useKeys = useKeys;\n    this.size = indexed.size;\n  }\n\n  if ( KeyedSeq$$1 ) ToKeyedSequence.__proto__ = KeyedSeq$$1;\n  ToKeyedSequence.prototype = Object.create( KeyedSeq$$1 && KeyedSeq$$1.prototype );\n  ToKeyedSequence.prototype.constructor = ToKeyedSequence;\n\n  ToKeyedSequence.prototype.get = function get (key, notSetValue) {\n    return this._iter.get(key, notSetValue);\n  };\n\n  ToKeyedSequence.prototype.has = function has (key) {\n    return this._iter.has(key);\n  };\n\n  ToKeyedSequence.prototype.valueSeq = function valueSeq () {\n    return this._iter.valueSeq();\n  };\n\n  ToKeyedSequence.prototype.reverse = function reverse () {\n    var this$1 = this;\n\n    var reversedSequence = reverseFactory(this, true);\n    if (!this._useKeys) {\n      reversedSequence.valueSeq = function () { return this$1._iter.toSeq().reverse(); };\n    }\n    return reversedSequence;\n  };\n\n  ToKeyedSequence.prototype.map = function map (mapper, context) {\n    var this$1 = this;\n\n    var mappedSequence = mapFactory(this, mapper, context);\n    if (!this._useKeys) {\n      mappedSequence.valueSeq = function () { return this$1._iter.toSeq().map(mapper, context); };\n    }\n    return mappedSequence;\n  };\n\n  ToKeyedSequence.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1 = this;\n\n    return this._iter.__iterate(function (v, k) { return fn(v, k, this$1); }, reverse);\n  };\n\n  ToKeyedSequence.prototype.__iterator = function __iterator (type, reverse) {\n    return this._iter.__iterator(type, reverse);\n  };\n\n  return ToKeyedSequence;\n}(KeyedSeq));\nToKeyedSequence.prototype[IS_ORDERED_SYMBOL] = true;\n\nvar ToIndexedSequence = /*@__PURE__*/(function (IndexedSeq$$1) {\n  function ToIndexedSequence(iter) {\n    this._iter = iter;\n    this.size = iter.size;\n  }\n\n  if ( IndexedSeq$$1 ) ToIndexedSequence.__proto__ = IndexedSeq$$1;\n  ToIndexedSequence.prototype = Object.create( IndexedSeq$$1 && IndexedSeq$$1.prototype );\n  ToIndexedSequence.prototype.constructor = ToIndexedSequence;\n\n  ToIndexedSequence.prototype.includes = function includes (value) {\n    return this._iter.includes(value);\n  };\n\n  ToIndexedSequence.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1 = this;\n\n    var i = 0;\n    reverse && ensureSize(this);\n    return this._iter.__iterate(\n      function (v) { return fn(v, reverse ? this$1.size - ++i : i++, this$1); },\n      reverse\n    );\n  };\n\n  ToIndexedSequence.prototype.__iterator = function __iterator (type, reverse) {\n    var this$1 = this;\n\n    var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n    var i = 0;\n    reverse && ensureSize(this);\n    return new Iterator(function () {\n      var step = iterator.next();\n      return step.done\n        ? step\n        : iteratorValue(\n            type,\n            reverse ? this$1.size - ++i : i++,\n            step.value,\n            step\n          );\n    });\n  };\n\n  return ToIndexedSequence;\n}(IndexedSeq));\n\nvar ToSetSequence = /*@__PURE__*/(function (SetSeq$$1) {\n  function ToSetSequence(iter) {\n    this._iter = iter;\n    this.size = iter.size;\n  }\n\n  if ( SetSeq$$1 ) ToSetSequence.__proto__ = SetSeq$$1;\n  ToSetSequence.prototype = Object.create( SetSeq$$1 && SetSeq$$1.prototype );\n  ToSetSequence.prototype.constructor = ToSetSequence;\n\n  ToSetSequence.prototype.has = function has (key) {\n    return this._iter.includes(key);\n  };\n\n  ToSetSequence.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1 = this;\n\n    return this._iter.__iterate(function (v) { return fn(v, v, this$1); }, reverse);\n  };\n\n  ToSetSequence.prototype.__iterator = function __iterator (type, reverse) {\n    var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n    return new Iterator(function () {\n      var step = iterator.next();\n      return step.done\n        ? step\n        : iteratorValue(type, step.value, step.value, step);\n    });\n  };\n\n  return ToSetSequence;\n}(SetSeq));\n\nvar FromEntriesSequence = /*@__PURE__*/(function (KeyedSeq$$1) {\n  function FromEntriesSequence(entries) {\n    this._iter = entries;\n    this.size = entries.size;\n  }\n\n  if ( KeyedSeq$$1 ) FromEntriesSequence.__proto__ = KeyedSeq$$1;\n  FromEntriesSequence.prototype = Object.create( KeyedSeq$$1 && KeyedSeq$$1.prototype );\n  FromEntriesSequence.prototype.constructor = FromEntriesSequence;\n\n  FromEntriesSequence.prototype.entrySeq = function entrySeq () {\n    return this._iter.toSeq();\n  };\n\n  FromEntriesSequence.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1 = this;\n\n    return this._iter.__iterate(function (entry) {\n      // Check if entry exists first so array access doesn't throw for holes\n      // in the parent iteration.\n      if (entry) {\n        validateEntry(entry);\n        var indexedCollection = isCollection(entry);\n        return fn(\n          indexedCollection ? entry.get(1) : entry[1],\n          indexedCollection ? entry.get(0) : entry[0],\n          this$1\n        );\n      }\n    }, reverse);\n  };\n\n  FromEntriesSequence.prototype.__iterator = function __iterator (type, reverse) {\n    var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n    return new Iterator(function () {\n      while (true) {\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        // Check if entry exists first so array access doesn't throw for holes\n        // in the parent iteration.\n        if (entry) {\n          validateEntry(entry);\n          var indexedCollection = isCollection(entry);\n          return iteratorValue(\n            type,\n            indexedCollection ? entry.get(0) : entry[0],\n            indexedCollection ? entry.get(1) : entry[1],\n            step\n          );\n        }\n      }\n    });\n  };\n\n  return FromEntriesSequence;\n}(KeyedSeq));\n\nToIndexedSequence.prototype.cacheResult = ToKeyedSequence.prototype.cacheResult = ToSetSequence.prototype.cacheResult = FromEntriesSequence.prototype.cacheResult = cacheResultThrough;\n\nfunction flipFactory(collection) {\n  var flipSequence = makeSequence(collection);\n  flipSequence._iter = collection;\n  flipSequence.size = collection.size;\n  flipSequence.flip = function () { return collection; };\n  flipSequence.reverse = function() {\n    var reversedSequence = collection.reverse.apply(this); // super.reverse()\n    reversedSequence.flip = function () { return collection.reverse(); };\n    return reversedSequence;\n  };\n  flipSequence.has = function (key) { return collection.includes(key); };\n  flipSequence.includes = function (key) { return collection.has(key); };\n  flipSequence.cacheResult = cacheResultThrough;\n  flipSequence.__iterateUncached = function(fn, reverse) {\n    var this$1 = this;\n\n    return collection.__iterate(function (v, k) { return fn(k, v, this$1) !== false; }, reverse);\n  };\n  flipSequence.__iteratorUncached = function(type, reverse) {\n    if (type === ITERATE_ENTRIES) {\n      var iterator = collection.__iterator(type, reverse);\n      return new Iterator(function () {\n        var step = iterator.next();\n        if (!step.done) {\n          var k = step.value[0];\n          step.value[0] = step.value[1];\n          step.value[1] = k;\n        }\n        return step;\n      });\n    }\n    return collection.__iterator(\n      type === ITERATE_VALUES ? ITERATE_KEYS : ITERATE_VALUES,\n      reverse\n    );\n  };\n  return flipSequence;\n}\n\nfunction mapFactory(collection, mapper, context) {\n  var mappedSequence = makeSequence(collection);\n  mappedSequence.size = collection.size;\n  mappedSequence.has = function (key) { return collection.has(key); };\n  mappedSequence.get = function (key, notSetValue) {\n    var v = collection.get(key, NOT_SET);\n    return v === NOT_SET\n      ? notSetValue\n      : mapper.call(context, v, key, collection);\n  };\n  mappedSequence.__iterateUncached = function(fn, reverse) {\n    var this$1 = this;\n\n    return collection.__iterate(\n      function (v, k, c) { return fn(mapper.call(context, v, k, c), k, this$1) !== false; },\n      reverse\n    );\n  };\n  mappedSequence.__iteratorUncached = function(type, reverse) {\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    return new Iterator(function () {\n      var step = iterator.next();\n      if (step.done) {\n        return step;\n      }\n      var entry = step.value;\n      var key = entry[0];\n      return iteratorValue(\n        type,\n        key,\n        mapper.call(context, entry[1], key, collection),\n        step\n      );\n    });\n  };\n  return mappedSequence;\n}\n\nfunction reverseFactory(collection, useKeys) {\n  var this$1 = this;\n\n  var reversedSequence = makeSequence(collection);\n  reversedSequence._iter = collection;\n  reversedSequence.size = collection.size;\n  reversedSequence.reverse = function () { return collection; };\n  if (collection.flip) {\n    reversedSequence.flip = function() {\n      var flipSequence = flipFactory(collection);\n      flipSequence.reverse = function () { return collection.flip(); };\n      return flipSequence;\n    };\n  }\n  reversedSequence.get = function (key, notSetValue) { return collection.get(useKeys ? key : -1 - key, notSetValue); };\n  reversedSequence.has = function (key) { return collection.has(useKeys ? key : -1 - key); };\n  reversedSequence.includes = function (value) { return collection.includes(value); };\n  reversedSequence.cacheResult = cacheResultThrough;\n  reversedSequence.__iterate = function(fn, reverse) {\n    var this$1 = this;\n\n    var i = 0;\n    reverse && ensureSize(collection);\n    return collection.__iterate(\n      function (v, k) { return fn(v, useKeys ? k : reverse ? this$1.size - ++i : i++, this$1); },\n      !reverse\n    );\n  };\n  reversedSequence.__iterator = function (type, reverse) {\n    var i = 0;\n    reverse && ensureSize(collection);\n    var iterator = collection.__iterator(ITERATE_ENTRIES, !reverse);\n    return new Iterator(function () {\n      var step = iterator.next();\n      if (step.done) {\n        return step;\n      }\n      var entry = step.value;\n      return iteratorValue(\n        type,\n        useKeys ? entry[0] : reverse ? this$1.size - ++i : i++,\n        entry[1],\n        step\n      );\n    });\n  };\n  return reversedSequence;\n}\n\nfunction filterFactory(collection, predicate, context, useKeys) {\n  var filterSequence = makeSequence(collection);\n  if (useKeys) {\n    filterSequence.has = function (key) {\n      var v = collection.get(key, NOT_SET);\n      return v !== NOT_SET && !!predicate.call(context, v, key, collection);\n    };\n    filterSequence.get = function (key, notSetValue) {\n      var v = collection.get(key, NOT_SET);\n      return v !== NOT_SET && predicate.call(context, v, key, collection)\n        ? v\n        : notSetValue;\n    };\n  }\n  filterSequence.__iterateUncached = function(fn, reverse) {\n    var this$1 = this;\n\n    var iterations = 0;\n    collection.__iterate(function (v, k, c) {\n      if (predicate.call(context, v, k, c)) {\n        iterations++;\n        return fn(v, useKeys ? k : iterations - 1, this$1);\n      }\n    }, reverse);\n    return iterations;\n  };\n  filterSequence.__iteratorUncached = function(type, reverse) {\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    var iterations = 0;\n    return new Iterator(function () {\n      while (true) {\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        var key = entry[0];\n        var value = entry[1];\n        if (predicate.call(context, value, key, collection)) {\n          return iteratorValue(type, useKeys ? key : iterations++, value, step);\n        }\n      }\n    });\n  };\n  return filterSequence;\n}\n\nfunction countByFactory(collection, grouper, context) {\n  var groups = Map().asMutable();\n  collection.__iterate(function (v, k) {\n    groups.update(grouper.call(context, v, k, collection), 0, function (a) { return a + 1; });\n  });\n  return groups.asImmutable();\n}\n\nfunction groupByFactory(collection, grouper, context) {\n  var isKeyedIter = isKeyed(collection);\n  var groups = (isOrdered(collection) ? OrderedMap() : Map()).asMutable();\n  collection.__iterate(function (v, k) {\n    groups.update(\n      grouper.call(context, v, k, collection),\n      function (a) { return ((a = a || []), a.push(isKeyedIter ? [k, v] : v), a); }\n    );\n  });\n  var coerce = collectionClass(collection);\n  return groups.map(function (arr) { return reify(collection, coerce(arr)); }).asImmutable();\n}\n\nfunction sliceFactory(collection, begin, end, useKeys) {\n  var originalSize = collection.size;\n\n  if (wholeSlice(begin, end, originalSize)) {\n    return collection;\n  }\n\n  var resolvedBegin = resolveBegin(begin, originalSize);\n  var resolvedEnd = resolveEnd(end, originalSize);\n\n  // begin or end will be NaN if they were provided as negative numbers and\n  // this collection's size is unknown. In that case, cache first so there is\n  // a known size and these do not resolve to NaN.\n  if (resolvedBegin !== resolvedBegin || resolvedEnd !== resolvedEnd) {\n    return sliceFactory(collection.toSeq().cacheResult(), begin, end, useKeys);\n  }\n\n  // Note: resolvedEnd is undefined when the original sequence's length is\n  // unknown and this slice did not supply an end and should contain all\n  // elements after resolvedBegin.\n  // In that case, resolvedSize will be NaN and sliceSize will remain undefined.\n  var resolvedSize = resolvedEnd - resolvedBegin;\n  var sliceSize;\n  if (resolvedSize === resolvedSize) {\n    sliceSize = resolvedSize < 0 ? 0 : resolvedSize;\n  }\n\n  var sliceSeq = makeSequence(collection);\n\n  // If collection.size is undefined, the size of the realized sliceSeq is\n  // unknown at this point unless the number of items to slice is 0\n  sliceSeq.size =\n    sliceSize === 0 ? sliceSize : (collection.size && sliceSize) || undefined;\n\n  if (!useKeys && isSeq(collection) && sliceSize >= 0) {\n    sliceSeq.get = function(index, notSetValue) {\n      index = wrapIndex(this, index);\n      return index >= 0 && index < sliceSize\n        ? collection.get(index + resolvedBegin, notSetValue)\n        : notSetValue;\n    };\n  }\n\n  sliceSeq.__iterateUncached = function(fn, reverse) {\n    var this$1 = this;\n\n    if (sliceSize === 0) {\n      return 0;\n    }\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var skipped = 0;\n    var isSkipping = true;\n    var iterations = 0;\n    collection.__iterate(function (v, k) {\n      if (!(isSkipping && (isSkipping = skipped++ < resolvedBegin))) {\n        iterations++;\n        return (\n          fn(v, useKeys ? k : iterations - 1, this$1) !== false &&\n          iterations !== sliceSize\n        );\n      }\n    });\n    return iterations;\n  };\n\n  sliceSeq.__iteratorUncached = function(type, reverse) {\n    if (sliceSize !== 0 && reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    // Don't bother instantiating parent iterator if taking 0.\n    if (sliceSize === 0) {\n      return new Iterator(iteratorDone);\n    }\n    var iterator = collection.__iterator(type, reverse);\n    var skipped = 0;\n    var iterations = 0;\n    return new Iterator(function () {\n      while (skipped++ < resolvedBegin) {\n        iterator.next();\n      }\n      if (++iterations > sliceSize) {\n        return iteratorDone();\n      }\n      var step = iterator.next();\n      if (useKeys || type === ITERATE_VALUES || step.done) {\n        return step;\n      }\n      if (type === ITERATE_KEYS) {\n        return iteratorValue(type, iterations - 1, undefined, step);\n      }\n      return iteratorValue(type, iterations - 1, step.value[1], step);\n    });\n  };\n\n  return sliceSeq;\n}\n\nfunction takeWhileFactory(collection, predicate, context) {\n  var takeSequence = makeSequence(collection);\n  takeSequence.__iterateUncached = function(fn, reverse) {\n    var this$1 = this;\n\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var iterations = 0;\n    collection.__iterate(\n      function (v, k, c) { return predicate.call(context, v, k, c) && ++iterations && fn(v, k, this$1); }\n    );\n    return iterations;\n  };\n  takeSequence.__iteratorUncached = function(type, reverse) {\n    var this$1 = this;\n\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    var iterating = true;\n    return new Iterator(function () {\n      if (!iterating) {\n        return iteratorDone();\n      }\n      var step = iterator.next();\n      if (step.done) {\n        return step;\n      }\n      var entry = step.value;\n      var k = entry[0];\n      var v = entry[1];\n      if (!predicate.call(context, v, k, this$1)) {\n        iterating = false;\n        return iteratorDone();\n      }\n      return type === ITERATE_ENTRIES ? step : iteratorValue(type, k, v, step);\n    });\n  };\n  return takeSequence;\n}\n\nfunction skipWhileFactory(collection, predicate, context, useKeys) {\n  var skipSequence = makeSequence(collection);\n  skipSequence.__iterateUncached = function(fn, reverse) {\n    var this$1 = this;\n\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var isSkipping = true;\n    var iterations = 0;\n    collection.__iterate(function (v, k, c) {\n      if (!(isSkipping && (isSkipping = predicate.call(context, v, k, c)))) {\n        iterations++;\n        return fn(v, useKeys ? k : iterations - 1, this$1);\n      }\n    });\n    return iterations;\n  };\n  skipSequence.__iteratorUncached = function(type, reverse) {\n    var this$1 = this;\n\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    var skipping = true;\n    var iterations = 0;\n    return new Iterator(function () {\n      var step;\n      var k;\n      var v;\n      do {\n        step = iterator.next();\n        if (step.done) {\n          if (useKeys || type === ITERATE_VALUES) {\n            return step;\n          }\n          if (type === ITERATE_KEYS) {\n            return iteratorValue(type, iterations++, undefined, step);\n          }\n          return iteratorValue(type, iterations++, step.value[1], step);\n        }\n        var entry = step.value;\n        k = entry[0];\n        v = entry[1];\n        skipping && (skipping = predicate.call(context, v, k, this$1));\n      } while (skipping);\n      return type === ITERATE_ENTRIES ? step : iteratorValue(type, k, v, step);\n    });\n  };\n  return skipSequence;\n}\n\nfunction concatFactory(collection, values) {\n  var isKeyedCollection = isKeyed(collection);\n  var iters = [collection]\n    .concat(values)\n    .map(function (v) {\n      if (!isCollection(v)) {\n        v = isKeyedCollection\n          ? keyedSeqFromValue(v)\n          : indexedSeqFromValue(Array.isArray(v) ? v : [v]);\n      } else if (isKeyedCollection) {\n        v = KeyedCollection(v);\n      }\n      return v;\n    })\n    .filter(function (v) { return v.size !== 0; });\n\n  if (iters.length === 0) {\n    return collection;\n  }\n\n  if (iters.length === 1) {\n    var singleton = iters[0];\n    if (\n      singleton === collection ||\n      (isKeyedCollection && isKeyed(singleton)) ||\n      (isIndexed(collection) && isIndexed(singleton))\n    ) {\n      return singleton;\n    }\n  }\n\n  var concatSeq = new ArraySeq(iters);\n  if (isKeyedCollection) {\n    concatSeq = concatSeq.toKeyedSeq();\n  } else if (!isIndexed(collection)) {\n    concatSeq = concatSeq.toSetSeq();\n  }\n  concatSeq = concatSeq.flatten(true);\n  concatSeq.size = iters.reduce(function (sum, seq) {\n    if (sum !== undefined) {\n      var size = seq.size;\n      if (size !== undefined) {\n        return sum + size;\n      }\n    }\n  }, 0);\n  return concatSeq;\n}\n\nfunction flattenFactory(collection, depth, useKeys) {\n  var flatSequence = makeSequence(collection);\n  flatSequence.__iterateUncached = function(fn, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var iterations = 0;\n    var stopped = false;\n    function flatDeep(iter, currentDepth) {\n      iter.__iterate(function (v, k) {\n        if ((!depth || currentDepth < depth) && isCollection(v)) {\n          flatDeep(v, currentDepth + 1);\n        } else {\n          iterations++;\n          if (fn(v, useKeys ? k : iterations - 1, flatSequence) === false) {\n            stopped = true;\n          }\n        }\n        return !stopped;\n      }, reverse);\n    }\n    flatDeep(collection, 0);\n    return iterations;\n  };\n  flatSequence.__iteratorUncached = function(type, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var iterator = collection.__iterator(type, reverse);\n    var stack = [];\n    var iterations = 0;\n    return new Iterator(function () {\n      while (iterator) {\n        var step = iterator.next();\n        if (step.done !== false) {\n          iterator = stack.pop();\n          continue;\n        }\n        var v = step.value;\n        if (type === ITERATE_ENTRIES) {\n          v = v[1];\n        }\n        if ((!depth || stack.length < depth) && isCollection(v)) {\n          stack.push(iterator);\n          iterator = v.__iterator(type, reverse);\n        } else {\n          return useKeys ? step : iteratorValue(type, iterations++, v, step);\n        }\n      }\n      return iteratorDone();\n    });\n  };\n  return flatSequence;\n}\n\nfunction flatMapFactory(collection, mapper, context) {\n  var coerce = collectionClass(collection);\n  return collection\n    .toSeq()\n    .map(function (v, k) { return coerce(mapper.call(context, v, k, collection)); })\n    .flatten(true);\n}\n\nfunction interposeFactory(collection, separator) {\n  var interposedSequence = makeSequence(collection);\n  interposedSequence.size = collection.size && collection.size * 2 - 1;\n  interposedSequence.__iterateUncached = function(fn, reverse) {\n    var this$1 = this;\n\n    var iterations = 0;\n    collection.__iterate(\n      function (v) { return (!iterations || fn(separator, iterations++, this$1) !== false) &&\n        fn(v, iterations++, this$1) !== false; },\n      reverse\n    );\n    return iterations;\n  };\n  interposedSequence.__iteratorUncached = function(type, reverse) {\n    var iterator = collection.__iterator(ITERATE_VALUES, reverse);\n    var iterations = 0;\n    var step;\n    return new Iterator(function () {\n      if (!step || iterations % 2) {\n        step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n      }\n      return iterations % 2\n        ? iteratorValue(type, iterations++, separator)\n        : iteratorValue(type, iterations++, step.value, step);\n    });\n  };\n  return interposedSequence;\n}\n\nfunction sortFactory(collection, comparator, mapper) {\n  if (!comparator) {\n    comparator = defaultComparator;\n  }\n  var isKeyedCollection = isKeyed(collection);\n  var index = 0;\n  var entries = collection\n    .toSeq()\n    .map(function (v, k) { return [k, v, index++, mapper ? mapper(v, k, collection) : v]; })\n    .valueSeq()\n    .toArray();\n  entries.sort(function (a, b) { return comparator(a[3], b[3]) || a[2] - b[2]; }).forEach(\n    isKeyedCollection\n      ? function (v, i) {\n          entries[i].length = 2;\n        }\n      : function (v, i) {\n          entries[i] = v[1];\n        }\n  );\n  return isKeyedCollection\n    ? KeyedSeq(entries)\n    : isIndexed(collection)\n      ? IndexedSeq(entries)\n      : SetSeq(entries);\n}\n\nfunction maxFactory(collection, comparator, mapper) {\n  if (!comparator) {\n    comparator = defaultComparator;\n  }\n  if (mapper) {\n    var entry = collection\n      .toSeq()\n      .map(function (v, k) { return [v, mapper(v, k, collection)]; })\n      .reduce(function (a, b) { return (maxCompare(comparator, a[1], b[1]) ? b : a); });\n    return entry && entry[0];\n  }\n  return collection.reduce(function (a, b) { return (maxCompare(comparator, a, b) ? b : a); });\n}\n\nfunction maxCompare(comparator, a, b) {\n  var comp = comparator(b, a);\n  // b is considered the new max if the comparator declares them equal, but\n  // they are not equal and b is in fact a nullish value.\n  return (\n    (comp === 0 && b !== a && (b === undefined || b === null || b !== b)) ||\n    comp > 0\n  );\n}\n\nfunction zipWithFactory(keyIter, zipper, iters, zipAll) {\n  var zipSequence = makeSequence(keyIter);\n  var sizes = new ArraySeq(iters).map(function (i) { return i.size; });\n  zipSequence.size = zipAll ? sizes.max() : sizes.min();\n  // Note: this a generic base implementation of __iterate in terms of\n  // __iterator which may be more generically useful in the future.\n  zipSequence.__iterate = function(fn, reverse) {\n    /* generic:\n    var iterator = this.__iterator(ITERATE_ENTRIES, reverse);\n    var step;\n    var iterations = 0;\n    while (!(step = iterator.next()).done) {\n      iterations++;\n      if (fn(step.value[1], step.value[0], this) === false) {\n        break;\n      }\n    }\n    return iterations;\n    */\n    // indexed:\n    var iterator = this.__iterator(ITERATE_VALUES, reverse);\n    var step;\n    var iterations = 0;\n    while (!(step = iterator.next()).done) {\n      if (fn(step.value, iterations++, this) === false) {\n        break;\n      }\n    }\n    return iterations;\n  };\n  zipSequence.__iteratorUncached = function(type, reverse) {\n    var iterators = iters.map(\n      function (i) { return ((i = Collection(i)), getIterator(reverse ? i.reverse() : i)); }\n    );\n    var iterations = 0;\n    var isDone = false;\n    return new Iterator(function () {\n      var steps;\n      if (!isDone) {\n        steps = iterators.map(function (i) { return i.next(); });\n        isDone = zipAll ? steps.every(function (s) { return s.done; }) : steps.some(function (s) { return s.done; });\n      }\n      if (isDone) {\n        return iteratorDone();\n      }\n      return iteratorValue(\n        type,\n        iterations++,\n        zipper.apply(null, steps.map(function (s) { return s.value; }))\n      );\n    });\n  };\n  return zipSequence;\n}\n\n// #pragma Helper Functions\n\nfunction reify(iter, seq) {\n  return iter === seq ? iter : isSeq(iter) ? seq : iter.constructor(seq);\n}\n\nfunction validateEntry(entry) {\n  if (entry !== Object(entry)) {\n    throw new TypeError('Expected [K, V] tuple: ' + entry);\n  }\n}\n\nfunction collectionClass(collection) {\n  return isKeyed(collection)\n    ? KeyedCollection\n    : isIndexed(collection)\n      ? IndexedCollection\n      : SetCollection;\n}\n\nfunction makeSequence(collection) {\n  return Object.create(\n    (isKeyed(collection)\n      ? KeyedSeq\n      : isIndexed(collection)\n        ? IndexedSeq\n        : SetSeq\n    ).prototype\n  );\n}\n\nfunction cacheResultThrough() {\n  if (this._iter.cacheResult) {\n    this._iter.cacheResult();\n    this.size = this._iter.size;\n    return this;\n  }\n  return Seq.prototype.cacheResult.call(this);\n}\n\nfunction defaultComparator(a, b) {\n  if (a === undefined && b === undefined) {\n    return 0;\n  }\n\n  if (a === undefined) {\n    return 1;\n  }\n\n  if (b === undefined) {\n    return -1;\n  }\n\n  return a > b ? 1 : a < b ? -1 : 0;\n}\n\n// http://jsperf.com/copy-array-inline\nfunction arrCopy(arr, offset) {\n  offset = offset || 0;\n  var len = Math.max(0, arr.length - offset);\n  var newArr = new Array(len);\n  for (var ii = 0; ii < len; ii++) {\n    newArr[ii] = arr[ii + offset];\n  }\n  return newArr;\n}\n\nfunction invariant(condition, error) {\n  if (!condition) { throw new Error(error); }\n}\n\nfunction assertNotInfinite(size) {\n  invariant(\n    size !== Infinity,\n    'Cannot perform this action with an infinite size.'\n  );\n}\n\nfunction coerceKeyPath(keyPath) {\n  if (isArrayLike(keyPath) && typeof keyPath !== 'string') {\n    return keyPath;\n  }\n  if (isOrdered(keyPath)) {\n    return keyPath.toArray();\n  }\n  throw new TypeError(\n    'Invalid keyPath: expected Ordered Collection or Array: ' + keyPath\n  );\n}\n\nfunction isPlainObj(value) {\n  return (\n    value &&\n    (typeof value.constructor !== 'function' ||\n      value.constructor.name === 'Object')\n  );\n}\n\n/**\n * Returns true if the value is a potentially-persistent data structure, either\n * provided by Immutable.js or a plain Array or Object.\n */\nfunction isDataStructure(value) {\n  return (\n    typeof value === 'object' &&\n    (isImmutable(value) || Array.isArray(value) || isPlainObj(value))\n  );\n}\n\n/**\n * Converts a value to a string, adding quotes if a string was provided.\n */\nfunction quoteString(value) {\n  try {\n    return typeof value === 'string' ? JSON.stringify(value) : String(value);\n  } catch (_ignoreError) {\n    return JSON.stringify(value);\n  }\n}\n\nfunction has(collection, key) {\n  return isImmutable(collection)\n    ? collection.has(key)\n    : isDataStructure(collection) && hasOwnProperty.call(collection, key);\n}\n\nfunction get(collection, key, notSetValue) {\n  return isImmutable(collection)\n    ? collection.get(key, notSetValue)\n    : !has(collection, key)\n      ? notSetValue\n      : typeof collection.get === 'function'\n        ? collection.get(key)\n        : collection[key];\n}\n\nfunction shallowCopy(from) {\n  if (Array.isArray(from)) {\n    return arrCopy(from);\n  }\n  var to = {};\n  for (var key in from) {\n    if (hasOwnProperty.call(from, key)) {\n      to[key] = from[key];\n    }\n  }\n  return to;\n}\n\nfunction remove(collection, key) {\n  if (!isDataStructure(collection)) {\n    throw new TypeError(\n      'Cannot update non-data-structure value: ' + collection\n    );\n  }\n  if (isImmutable(collection)) {\n    if (!collection.remove) {\n      throw new TypeError(\n        'Cannot update immutable value without .remove() method: ' + collection\n      );\n    }\n    return collection.remove(key);\n  }\n  if (!hasOwnProperty.call(collection, key)) {\n    return collection;\n  }\n  var collectionCopy = shallowCopy(collection);\n  if (Array.isArray(collectionCopy)) {\n    collectionCopy.splice(key, 1);\n  } else {\n    delete collectionCopy[key];\n  }\n  return collectionCopy;\n}\n\nfunction set(collection, key, value) {\n  if (!isDataStructure(collection)) {\n    throw new TypeError(\n      'Cannot update non-data-structure value: ' + collection\n    );\n  }\n  if (isImmutable(collection)) {\n    if (!collection.set) {\n      throw new TypeError(\n        'Cannot update immutable value without .set() method: ' + collection\n      );\n    }\n    return collection.set(key, value);\n  }\n  if (hasOwnProperty.call(collection, key) && value === collection[key]) {\n    return collection;\n  }\n  var collectionCopy = shallowCopy(collection);\n  collectionCopy[key] = value;\n  return collectionCopy;\n}\n\nfunction updateIn(collection, keyPath, notSetValue, updater) {\n  if (!updater) {\n    updater = notSetValue;\n    notSetValue = undefined;\n  }\n  var updatedValue = updateInDeeply(\n    isImmutable(collection),\n    collection,\n    coerceKeyPath(keyPath),\n    0,\n    notSetValue,\n    updater\n  );\n  return updatedValue === NOT_SET ? notSetValue : updatedValue;\n}\n\nfunction updateInDeeply(\n  inImmutable,\n  existing,\n  keyPath,\n  i,\n  notSetValue,\n  updater\n) {\n  var wasNotSet = existing === NOT_SET;\n  if (i === keyPath.length) {\n    var existingValue = wasNotSet ? notSetValue : existing;\n    var newValue = updater(existingValue);\n    return newValue === existingValue ? existing : newValue;\n  }\n  if (!wasNotSet && !isDataStructure(existing)) {\n    throw new TypeError(\n      'Cannot update within non-data-structure value in path [' +\n        keyPath.slice(0, i).map(quoteString) +\n        ']: ' +\n        existing\n    );\n  }\n  var key = keyPath[i];\n  var nextExisting = wasNotSet ? NOT_SET : get(existing, key, NOT_SET);\n  var nextUpdated = updateInDeeply(\n    nextExisting === NOT_SET ? inImmutable : isImmutable(nextExisting),\n    nextExisting,\n    keyPath,\n    i + 1,\n    notSetValue,\n    updater\n  );\n  return nextUpdated === nextExisting\n    ? existing\n    : nextUpdated === NOT_SET\n      ? remove(existing, key)\n      : set(\n          wasNotSet ? (inImmutable ? emptyMap() : {}) : existing,\n          key,\n          nextUpdated\n        );\n}\n\nfunction setIn(collection, keyPath, value) {\n  return updateIn(collection, keyPath, NOT_SET, function () { return value; });\n}\n\nfunction setIn$1(keyPath, v) {\n  return setIn(this, keyPath, v);\n}\n\nfunction removeIn(collection, keyPath) {\n  return updateIn(collection, keyPath, function () { return NOT_SET; });\n}\n\nfunction deleteIn(keyPath) {\n  return removeIn(this, keyPath);\n}\n\nfunction update(collection, key, notSetValue, updater) {\n  return updateIn(collection, [key], notSetValue, updater);\n}\n\nfunction update$1(key, notSetValue, updater) {\n  return arguments.length === 1\n    ? key(this)\n    : update(this, key, notSetValue, updater);\n}\n\nfunction updateIn$1(keyPath, notSetValue, updater) {\n  return updateIn(this, keyPath, notSetValue, updater);\n}\n\nfunction merge() {\n  var iters = [], len = arguments.length;\n  while ( len-- ) iters[ len ] = arguments[ len ];\n\n  return mergeIntoKeyedWith(this, iters);\n}\n\nfunction mergeWith(merger) {\n  var iters = [], len = arguments.length - 1;\n  while ( len-- > 0 ) iters[ len ] = arguments[ len + 1 ];\n\n  if (typeof merger !== 'function') {\n    throw new TypeError('Invalid merger function: ' + merger);\n  }\n  return mergeIntoKeyedWith(this, iters, merger);\n}\n\nfunction mergeIntoKeyedWith(collection, collections, merger) {\n  var iters = [];\n  for (var ii = 0; ii < collections.length; ii++) {\n    var collection$1 = KeyedCollection(collections[ii]);\n    if (collection$1.size !== 0) {\n      iters.push(collection$1);\n    }\n  }\n  if (iters.length === 0) {\n    return collection;\n  }\n  if (\n    collection.toSeq().size === 0 &&\n    !collection.__ownerID &&\n    iters.length === 1\n  ) {\n    return collection.constructor(iters[0]);\n  }\n  return collection.withMutations(function (collection) {\n    var mergeIntoCollection = merger\n      ? function (value, key) {\n          update(\n            collection,\n            key,\n            NOT_SET,\n            function (oldVal) { return (oldVal === NOT_SET ? value : merger(oldVal, value, key)); }\n          );\n        }\n      : function (value, key) {\n          collection.set(key, value);\n        };\n    for (var ii = 0; ii < iters.length; ii++) {\n      iters[ii].forEach(mergeIntoCollection);\n    }\n  });\n}\n\nfunction merge$1(collection) {\n  var sources = [], len = arguments.length - 1;\n  while ( len-- > 0 ) sources[ len ] = arguments[ len + 1 ];\n\n  return mergeWithSources(collection, sources);\n}\n\nfunction mergeWith$1(merger, collection) {\n  var sources = [], len = arguments.length - 2;\n  while ( len-- > 0 ) sources[ len ] = arguments[ len + 2 ];\n\n  return mergeWithSources(collection, sources, merger);\n}\n\nfunction mergeDeep(collection) {\n  var sources = [], len = arguments.length - 1;\n  while ( len-- > 0 ) sources[ len ] = arguments[ len + 1 ];\n\n  return mergeDeepWithSources(collection, sources);\n}\n\nfunction mergeDeepWith(merger, collection) {\n  var sources = [], len = arguments.length - 2;\n  while ( len-- > 0 ) sources[ len ] = arguments[ len + 2 ];\n\n  return mergeDeepWithSources(collection, sources, merger);\n}\n\nfunction mergeDeepWithSources(collection, sources, merger) {\n  return mergeWithSources(collection, sources, deepMergerWith(merger));\n}\n\nfunction mergeWithSources(collection, sources, merger) {\n  if (!isDataStructure(collection)) {\n    throw new TypeError(\n      'Cannot merge into non-data-structure value: ' + collection\n    );\n  }\n  if (isImmutable(collection)) {\n    return typeof merger === 'function' && collection.mergeWith\n      ? collection.mergeWith.apply(collection, [ merger ].concat( sources ))\n      : collection.merge\n        ? collection.merge.apply(collection, sources)\n        : collection.concat.apply(collection, sources);\n  }\n  var isArray = Array.isArray(collection);\n  var merged = collection;\n  var Collection$$1 = isArray ? IndexedCollection : KeyedCollection;\n  var mergeItem = isArray\n    ? function (value) {\n        // Copy on write\n        if (merged === collection) {\n          merged = shallowCopy(merged);\n        }\n        merged.push(value);\n      }\n    : function (value, key) {\n        var hasVal = hasOwnProperty.call(merged, key);\n        var nextVal =\n          hasVal && merger ? merger(merged[key], value, key) : value;\n        if (!hasVal || nextVal !== merged[key]) {\n          // Copy on write\n          if (merged === collection) {\n            merged = shallowCopy(merged);\n          }\n          merged[key] = nextVal;\n        }\n      };\n  for (var i = 0; i < sources.length; i++) {\n    Collection$$1(sources[i]).forEach(mergeItem);\n  }\n  return merged;\n}\n\nfunction deepMergerWith(merger) {\n  function deepMerger(oldValue, newValue, key) {\n    return isDataStructure(oldValue) && isDataStructure(newValue)\n      ? mergeWithSources(oldValue, [newValue], deepMerger)\n      : merger\n        ? merger(oldValue, newValue, key)\n        : newValue;\n  }\n  return deepMerger;\n}\n\nfunction mergeDeep$1() {\n  var iters = [], len = arguments.length;\n  while ( len-- ) iters[ len ] = arguments[ len ];\n\n  return mergeDeepWithSources(this, iters);\n}\n\nfunction mergeDeepWith$1(merger) {\n  var iters = [], len = arguments.length - 1;\n  while ( len-- > 0 ) iters[ len ] = arguments[ len + 1 ];\n\n  return mergeDeepWithSources(this, iters, merger);\n}\n\nfunction mergeIn(keyPath) {\n  var iters = [], len = arguments.length - 1;\n  while ( len-- > 0 ) iters[ len ] = arguments[ len + 1 ];\n\n  return updateIn(this, keyPath, emptyMap(), function (m) { return mergeWithSources(m, iters); });\n}\n\nfunction mergeDeepIn(keyPath) {\n  var iters = [], len = arguments.length - 1;\n  while ( len-- > 0 ) iters[ len ] = arguments[ len + 1 ];\n\n  return updateIn(this, keyPath, emptyMap(), function (m) { return mergeDeepWithSources(m, iters); }\n  );\n}\n\nfunction withMutations(fn) {\n  var mutable = this.asMutable();\n  fn(mutable);\n  return mutable.wasAltered() ? mutable.__ensureOwner(this.__ownerID) : this;\n}\n\nfunction asMutable() {\n  return this.__ownerID ? this : this.__ensureOwner(new OwnerID());\n}\n\nfunction asImmutable() {\n  return this.__ensureOwner();\n}\n\nfunction wasAltered() {\n  return this.__altered;\n}\n\nvar Map = /*@__PURE__*/(function (KeyedCollection$$1) {\n  function Map(value) {\n    return value === null || value === undefined\n      ? emptyMap()\n      : isMap(value) && !isOrdered(value)\n        ? value\n        : emptyMap().withMutations(function (map) {\n            var iter = KeyedCollection$$1(value);\n            assertNotInfinite(iter.size);\n            iter.forEach(function (v, k) { return map.set(k, v); });\n          });\n  }\n\n  if ( KeyedCollection$$1 ) Map.__proto__ = KeyedCollection$$1;\n  Map.prototype = Object.create( KeyedCollection$$1 && KeyedCollection$$1.prototype );\n  Map.prototype.constructor = Map;\n\n  Map.of = function of () {\n    var keyValues = [], len = arguments.length;\n    while ( len-- ) keyValues[ len ] = arguments[ len ];\n\n    return emptyMap().withMutations(function (map) {\n      for (var i = 0; i < keyValues.length; i += 2) {\n        if (i + 1 >= keyValues.length) {\n          throw new Error('Missing value for key: ' + keyValues[i]);\n        }\n        map.set(keyValues[i], keyValues[i + 1]);\n      }\n    });\n  };\n\n  Map.prototype.toString = function toString () {\n    return this.__toString('Map {', '}');\n  };\n\n  // @pragma Access\n\n  Map.prototype.get = function get (k, notSetValue) {\n    return this._root\n      ? this._root.get(0, undefined, k, notSetValue)\n      : notSetValue;\n  };\n\n  // @pragma Modification\n\n  Map.prototype.set = function set (k, v) {\n    return updateMap(this, k, v);\n  };\n\n  Map.prototype.remove = function remove (k) {\n    return updateMap(this, k, NOT_SET);\n  };\n\n  Map.prototype.deleteAll = function deleteAll (keys) {\n    var collection = Collection(keys);\n\n    if (collection.size === 0) {\n      return this;\n    }\n\n    return this.withMutations(function (map) {\n      collection.forEach(function (key) { return map.remove(key); });\n    });\n  };\n\n  Map.prototype.clear = function clear () {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = 0;\n      this._root = null;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return emptyMap();\n  };\n\n  // @pragma Composition\n\n  Map.prototype.sort = function sort (comparator) {\n    // Late binding\n    return OrderedMap(sortFactory(this, comparator));\n  };\n\n  Map.prototype.sortBy = function sortBy (mapper, comparator) {\n    // Late binding\n    return OrderedMap(sortFactory(this, comparator, mapper));\n  };\n\n  Map.prototype.map = function map (mapper, context) {\n    return this.withMutations(function (map) {\n      map.forEach(function (value, key) {\n        map.set(key, mapper.call(context, value, key, map));\n      });\n    });\n  };\n\n  // @pragma Mutability\n\n  Map.prototype.__iterator = function __iterator (type, reverse) {\n    return new MapIterator(this, type, reverse);\n  };\n\n  Map.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1 = this;\n\n    var iterations = 0;\n    this._root &&\n      this._root.iterate(function (entry) {\n        iterations++;\n        return fn(entry[1], entry[0], this$1);\n      }, reverse);\n    return iterations;\n  };\n\n  Map.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyMap();\n      }\n      this.__ownerID = ownerID;\n      this.__altered = false;\n      return this;\n    }\n    return makeMap(this.size, this._root, ownerID, this.__hash);\n  };\n\n  return Map;\n}(KeyedCollection));\n\nMap.isMap = isMap;\n\nvar MapPrototype = Map.prototype;\nMapPrototype[IS_MAP_SYMBOL] = true;\nMapPrototype[DELETE] = MapPrototype.remove;\nMapPrototype.removeAll = MapPrototype.deleteAll;\nMapPrototype.setIn = setIn$1;\nMapPrototype.removeIn = MapPrototype.deleteIn = deleteIn;\nMapPrototype.update = update$1;\nMapPrototype.updateIn = updateIn$1;\nMapPrototype.merge = MapPrototype.concat = merge;\nMapPrototype.mergeWith = mergeWith;\nMapPrototype.mergeDeep = mergeDeep$1;\nMapPrototype.mergeDeepWith = mergeDeepWith$1;\nMapPrototype.mergeIn = mergeIn;\nMapPrototype.mergeDeepIn = mergeDeepIn;\nMapPrototype.withMutations = withMutations;\nMapPrototype.wasAltered = wasAltered;\nMapPrototype.asImmutable = asImmutable;\nMapPrototype['@@transducer/init'] = MapPrototype.asMutable = asMutable;\nMapPrototype['@@transducer/step'] = function(result, arr) {\n  return result.set(arr[0], arr[1]);\n};\nMapPrototype['@@transducer/result'] = function(obj) {\n  return obj.asImmutable();\n};\n\n// #pragma Trie Nodes\n\nvar ArrayMapNode = function ArrayMapNode(ownerID, entries) {\n  this.ownerID = ownerID;\n  this.entries = entries;\n};\n\nArrayMapNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  var entries = this.entries;\n  for (var ii = 0, len = entries.length; ii < len; ii++) {\n    if (is(key, entries[ii][0])) {\n      return entries[ii][1];\n    }\n  }\n  return notSetValue;\n};\n\nArrayMapNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  var removed = value === NOT_SET;\n\n  var entries = this.entries;\n  var idx = 0;\n  var len = entries.length;\n  for (; idx < len; idx++) {\n    if (is(key, entries[idx][0])) {\n      break;\n    }\n  }\n  var exists = idx < len;\n\n  if (exists ? entries[idx][1] === value : removed) {\n    return this;\n  }\n\n  SetRef(didAlter);\n  (removed || !exists) && SetRef(didChangeSize);\n\n  if (removed && entries.length === 1) {\n    return; // undefined\n  }\n\n  if (!exists && !removed && entries.length >= MAX_ARRAY_MAP_SIZE) {\n    return createNodes(ownerID, entries, key, value);\n  }\n\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newEntries = isEditable ? entries : arrCopy(entries);\n\n  if (exists) {\n    if (removed) {\n      idx === len - 1\n        ? newEntries.pop()\n        : (newEntries[idx] = newEntries.pop());\n    } else {\n      newEntries[idx] = [key, value];\n    }\n  } else {\n    newEntries.push([key, value]);\n  }\n\n  if (isEditable) {\n    this.entries = newEntries;\n    return this;\n  }\n\n  return new ArrayMapNode(ownerID, newEntries);\n};\n\nvar BitmapIndexedNode = function BitmapIndexedNode(ownerID, bitmap, nodes) {\n  this.ownerID = ownerID;\n  this.bitmap = bitmap;\n  this.nodes = nodes;\n};\n\nBitmapIndexedNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var bit = 1 << ((shift === 0 ? keyHash : keyHash >>> shift) & MASK);\n  var bitmap = this.bitmap;\n  return (bitmap & bit) === 0\n    ? notSetValue\n    : this.nodes[popCount(bitmap & (bit - 1))].get(\n        shift + SHIFT,\n        keyHash,\n        key,\n        notSetValue\n      );\n};\n\nBitmapIndexedNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var keyHashFrag = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n  var bit = 1 << keyHashFrag;\n  var bitmap = this.bitmap;\n  var exists = (bitmap & bit) !== 0;\n\n  if (!exists && value === NOT_SET) {\n    return this;\n  }\n\n  var idx = popCount(bitmap & (bit - 1));\n  var nodes = this.nodes;\n  var node = exists ? nodes[idx] : undefined;\n  var newNode = updateNode(\n    node,\n    ownerID,\n    shift + SHIFT,\n    keyHash,\n    key,\n    value,\n    didChangeSize,\n    didAlter\n  );\n\n  if (newNode === node) {\n    return this;\n  }\n\n  if (!exists && newNode && nodes.length >= MAX_BITMAP_INDEXED_SIZE) {\n    return expandNodes(ownerID, nodes, bitmap, keyHashFrag, newNode);\n  }\n\n  if (\n    exists &&\n    !newNode &&\n    nodes.length === 2 &&\n    isLeafNode(nodes[idx ^ 1])\n  ) {\n    return nodes[idx ^ 1];\n  }\n\n  if (exists && newNode && nodes.length === 1 && isLeafNode(newNode)) {\n    return newNode;\n  }\n\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newBitmap = exists ? (newNode ? bitmap : bitmap ^ bit) : bitmap | bit;\n  var newNodes = exists\n    ? newNode\n      ? setAt(nodes, idx, newNode, isEditable)\n      : spliceOut(nodes, idx, isEditable)\n    : spliceIn(nodes, idx, newNode, isEditable);\n\n  if (isEditable) {\n    this.bitmap = newBitmap;\n    this.nodes = newNodes;\n    return this;\n  }\n\n  return new BitmapIndexedNode(ownerID, newBitmap, newNodes);\n};\n\nvar HashArrayMapNode = function HashArrayMapNode(ownerID, count, nodes) {\n  this.ownerID = ownerID;\n  this.count = count;\n  this.nodes = nodes;\n};\n\nHashArrayMapNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n  var node = this.nodes[idx];\n  return node\n    ? node.get(shift + SHIFT, keyHash, key, notSetValue)\n    : notSetValue;\n};\n\nHashArrayMapNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n  var removed = value === NOT_SET;\n  var nodes = this.nodes;\n  var node = nodes[idx];\n\n  if (removed && !node) {\n    return this;\n  }\n\n  var newNode = updateNode(\n    node,\n    ownerID,\n    shift + SHIFT,\n    keyHash,\n    key,\n    value,\n    didChangeSize,\n    didAlter\n  );\n  if (newNode === node) {\n    return this;\n  }\n\n  var newCount = this.count;\n  if (!node) {\n    newCount++;\n  } else if (!newNode) {\n    newCount--;\n    if (newCount < MIN_HASH_ARRAY_MAP_SIZE) {\n      return packNodes(ownerID, nodes, newCount, idx);\n    }\n  }\n\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newNodes = setAt(nodes, idx, newNode, isEditable);\n\n  if (isEditable) {\n    this.count = newCount;\n    this.nodes = newNodes;\n    return this;\n  }\n\n  return new HashArrayMapNode(ownerID, newCount, newNodes);\n};\n\nvar HashCollisionNode = function HashCollisionNode(ownerID, keyHash, entries) {\n  this.ownerID = ownerID;\n  this.keyHash = keyHash;\n  this.entries = entries;\n};\n\nHashCollisionNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  var entries = this.entries;\n  for (var ii = 0, len = entries.length; ii < len; ii++) {\n    if (is(key, entries[ii][0])) {\n      return entries[ii][1];\n    }\n  }\n  return notSetValue;\n};\n\nHashCollisionNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n\n  var removed = value === NOT_SET;\n\n  if (keyHash !== this.keyHash) {\n    if (removed) {\n      return this;\n    }\n    SetRef(didAlter);\n    SetRef(didChangeSize);\n    return mergeIntoNode(this, ownerID, shift, keyHash, [key, value]);\n  }\n\n  var entries = this.entries;\n  var idx = 0;\n  var len = entries.length;\n  for (; idx < len; idx++) {\n    if (is(key, entries[idx][0])) {\n      break;\n    }\n  }\n  var exists = idx < len;\n\n  if (exists ? entries[idx][1] === value : removed) {\n    return this;\n  }\n\n  SetRef(didAlter);\n  (removed || !exists) && SetRef(didChangeSize);\n\n  if (removed && len === 2) {\n    return new ValueNode(ownerID, this.keyHash, entries[idx ^ 1]);\n  }\n\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newEntries = isEditable ? entries : arrCopy(entries);\n\n  if (exists) {\n    if (removed) {\n      idx === len - 1\n        ? newEntries.pop()\n        : (newEntries[idx] = newEntries.pop());\n    } else {\n      newEntries[idx] = [key, value];\n    }\n  } else {\n    newEntries.push([key, value]);\n  }\n\n  if (isEditable) {\n    this.entries = newEntries;\n    return this;\n  }\n\n  return new HashCollisionNode(ownerID, this.keyHash, newEntries);\n};\n\nvar ValueNode = function ValueNode(ownerID, keyHash, entry) {\n  this.ownerID = ownerID;\n  this.keyHash = keyHash;\n  this.entry = entry;\n};\n\nValueNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  return is(key, this.entry[0]) ? this.entry[1] : notSetValue;\n};\n\nValueNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  var removed = value === NOT_SET;\n  var keyMatch = is(key, this.entry[0]);\n  if (keyMatch ? value === this.entry[1] : removed) {\n    return this;\n  }\n\n  SetRef(didAlter);\n\n  if (removed) {\n    SetRef(didChangeSize);\n    return; // undefined\n  }\n\n  if (keyMatch) {\n    if (ownerID && ownerID === this.ownerID) {\n      this.entry[1] = value;\n      return this;\n    }\n    return new ValueNode(ownerID, this.keyHash, [key, value]);\n  }\n\n  SetRef(didChangeSize);\n  return mergeIntoNode(this, ownerID, shift, hash(key), [key, value]);\n};\n\n// #pragma Iterators\n\nArrayMapNode.prototype.iterate = HashCollisionNode.prototype.iterate = function(\n  fn,\n  reverse\n) {\n  var entries = this.entries;\n  for (var ii = 0, maxIndex = entries.length - 1; ii <= maxIndex; ii++) {\n    if (fn(entries[reverse ? maxIndex - ii : ii]) === false) {\n      return false;\n    }\n  }\n};\n\nBitmapIndexedNode.prototype.iterate = HashArrayMapNode.prototype.iterate = function(\n  fn,\n  reverse\n) {\n  var nodes = this.nodes;\n  for (var ii = 0, maxIndex = nodes.length - 1; ii <= maxIndex; ii++) {\n    var node = nodes[reverse ? maxIndex - ii : ii];\n    if (node && node.iterate(fn, reverse) === false) {\n      return false;\n    }\n  }\n};\n\n// eslint-disable-next-line no-unused-vars\nValueNode.prototype.iterate = function(fn, reverse) {\n  return fn(this.entry);\n};\n\nvar MapIterator = /*@__PURE__*/(function (Iterator$$1) {\n  function MapIterator(map, type, reverse) {\n    this._type = type;\n    this._reverse = reverse;\n    this._stack = map._root && mapIteratorFrame(map._root);\n  }\n\n  if ( Iterator$$1 ) MapIterator.__proto__ = Iterator$$1;\n  MapIterator.prototype = Object.create( Iterator$$1 && Iterator$$1.prototype );\n  MapIterator.prototype.constructor = MapIterator;\n\n  MapIterator.prototype.next = function next () {\n    var type = this._type;\n    var stack = this._stack;\n    while (stack) {\n      var node = stack.node;\n      var index = stack.index++;\n      var maxIndex = (void 0);\n      if (node.entry) {\n        if (index === 0) {\n          return mapIteratorValue(type, node.entry);\n        }\n      } else if (node.entries) {\n        maxIndex = node.entries.length - 1;\n        if (index <= maxIndex) {\n          return mapIteratorValue(\n            type,\n            node.entries[this._reverse ? maxIndex - index : index]\n          );\n        }\n      } else {\n        maxIndex = node.nodes.length - 1;\n        if (index <= maxIndex) {\n          var subNode = node.nodes[this._reverse ? maxIndex - index : index];\n          if (subNode) {\n            if (subNode.entry) {\n              return mapIteratorValue(type, subNode.entry);\n            }\n            stack = this._stack = mapIteratorFrame(subNode, stack);\n          }\n          continue;\n        }\n      }\n      stack = this._stack = this._stack.__prev;\n    }\n    return iteratorDone();\n  };\n\n  return MapIterator;\n}(Iterator));\n\nfunction mapIteratorValue(type, entry) {\n  return iteratorValue(type, entry[0], entry[1]);\n}\n\nfunction mapIteratorFrame(node, prev) {\n  return {\n    node: node,\n    index: 0,\n    __prev: prev,\n  };\n}\n\nfunction makeMap(size, root, ownerID, hash$$1) {\n  var map = Object.create(MapPrototype);\n  map.size = size;\n  map._root = root;\n  map.__ownerID = ownerID;\n  map.__hash = hash$$1;\n  map.__altered = false;\n  return map;\n}\n\nvar EMPTY_MAP;\nfunction emptyMap() {\n  return EMPTY_MAP || (EMPTY_MAP = makeMap(0));\n}\n\nfunction updateMap(map, k, v) {\n  var newRoot;\n  var newSize;\n  if (!map._root) {\n    if (v === NOT_SET) {\n      return map;\n    }\n    newSize = 1;\n    newRoot = new ArrayMapNode(map.__ownerID, [[k, v]]);\n  } else {\n    var didChangeSize = MakeRef();\n    var didAlter = MakeRef();\n    newRoot = updateNode(\n      map._root,\n      map.__ownerID,\n      0,\n      undefined,\n      k,\n      v,\n      didChangeSize,\n      didAlter\n    );\n    if (!didAlter.value) {\n      return map;\n    }\n    newSize = map.size + (didChangeSize.value ? (v === NOT_SET ? -1 : 1) : 0);\n  }\n  if (map.__ownerID) {\n    map.size = newSize;\n    map._root = newRoot;\n    map.__hash = undefined;\n    map.__altered = true;\n    return map;\n  }\n  return newRoot ? makeMap(newSize, newRoot) : emptyMap();\n}\n\nfunction updateNode(\n  node,\n  ownerID,\n  shift,\n  keyHash,\n  key,\n  value,\n  didChangeSize,\n  didAlter\n) {\n  if (!node) {\n    if (value === NOT_SET) {\n      return node;\n    }\n    SetRef(didAlter);\n    SetRef(didChangeSize);\n    return new ValueNode(ownerID, keyHash, [key, value]);\n  }\n  return node.update(\n    ownerID,\n    shift,\n    keyHash,\n    key,\n    value,\n    didChangeSize,\n    didAlter\n  );\n}\n\nfunction isLeafNode(node) {\n  return (\n    node.constructor === ValueNode || node.constructor === HashCollisionNode\n  );\n}\n\nfunction mergeIntoNode(node, ownerID, shift, keyHash, entry) {\n  if (node.keyHash === keyHash) {\n    return new HashCollisionNode(ownerID, keyHash, [node.entry, entry]);\n  }\n\n  var idx1 = (shift === 0 ? node.keyHash : node.keyHash >>> shift) & MASK;\n  var idx2 = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n\n  var newNode;\n  var nodes =\n    idx1 === idx2\n      ? [mergeIntoNode(node, ownerID, shift + SHIFT, keyHash, entry)]\n      : ((newNode = new ValueNode(ownerID, keyHash, entry)),\n        idx1 < idx2 ? [node, newNode] : [newNode, node]);\n\n  return new BitmapIndexedNode(ownerID, (1 << idx1) | (1 << idx2), nodes);\n}\n\nfunction createNodes(ownerID, entries, key, value) {\n  if (!ownerID) {\n    ownerID = new OwnerID();\n  }\n  var node = new ValueNode(ownerID, hash(key), [key, value]);\n  for (var ii = 0; ii < entries.length; ii++) {\n    var entry = entries[ii];\n    node = node.update(ownerID, 0, undefined, entry[0], entry[1]);\n  }\n  return node;\n}\n\nfunction packNodes(ownerID, nodes, count, excluding) {\n  var bitmap = 0;\n  var packedII = 0;\n  var packedNodes = new Array(count);\n  for (var ii = 0, bit = 1, len = nodes.length; ii < len; ii++, bit <<= 1) {\n    var node = nodes[ii];\n    if (node !== undefined && ii !== excluding) {\n      bitmap |= bit;\n      packedNodes[packedII++] = node;\n    }\n  }\n  return new BitmapIndexedNode(ownerID, bitmap, packedNodes);\n}\n\nfunction expandNodes(ownerID, nodes, bitmap, including, node) {\n  var count = 0;\n  var expandedNodes = new Array(SIZE);\n  for (var ii = 0; bitmap !== 0; ii++, bitmap >>>= 1) {\n    expandedNodes[ii] = bitmap & 1 ? nodes[count++] : undefined;\n  }\n  expandedNodes[including] = node;\n  return new HashArrayMapNode(ownerID, count + 1, expandedNodes);\n}\n\nfunction popCount(x) {\n  x -= (x >> 1) & 0x55555555;\n  x = (x & 0x33333333) + ((x >> 2) & 0x33333333);\n  x = (x + (x >> 4)) & 0x0f0f0f0f;\n  x += x >> 8;\n  x += x >> 16;\n  return x & 0x7f;\n}\n\nfunction setAt(array, idx, val, canEdit) {\n  var newArray = canEdit ? array : arrCopy(array);\n  newArray[idx] = val;\n  return newArray;\n}\n\nfunction spliceIn(array, idx, val, canEdit) {\n  var newLen = array.length + 1;\n  if (canEdit && idx + 1 === newLen) {\n    array[idx] = val;\n    return array;\n  }\n  var newArray = new Array(newLen);\n  var after = 0;\n  for (var ii = 0; ii < newLen; ii++) {\n    if (ii === idx) {\n      newArray[ii] = val;\n      after = -1;\n    } else {\n      newArray[ii] = array[ii + after];\n    }\n  }\n  return newArray;\n}\n\nfunction spliceOut(array, idx, canEdit) {\n  var newLen = array.length - 1;\n  if (canEdit && idx === newLen) {\n    array.pop();\n    return array;\n  }\n  var newArray = new Array(newLen);\n  var after = 0;\n  for (var ii = 0; ii < newLen; ii++) {\n    if (ii === idx) {\n      after = 1;\n    }\n    newArray[ii] = array[ii + after];\n  }\n  return newArray;\n}\n\nvar MAX_ARRAY_MAP_SIZE = SIZE / 4;\nvar MAX_BITMAP_INDEXED_SIZE = SIZE / 2;\nvar MIN_HASH_ARRAY_MAP_SIZE = SIZE / 4;\n\nvar IS_LIST_SYMBOL = '@@__IMMUTABLE_LIST__@@';\n\nfunction isList(maybeList) {\n  return Boolean(maybeList && maybeList[IS_LIST_SYMBOL]);\n}\n\nvar List = /*@__PURE__*/(function (IndexedCollection$$1) {\n  function List(value) {\n    var empty = emptyList();\n    if (value === null || value === undefined) {\n      return empty;\n    }\n    if (isList(value)) {\n      return value;\n    }\n    var iter = IndexedCollection$$1(value);\n    var size = iter.size;\n    if (size === 0) {\n      return empty;\n    }\n    assertNotInfinite(size);\n    if (size > 0 && size < SIZE) {\n      return makeList(0, size, SHIFT, null, new VNode(iter.toArray()));\n    }\n    return empty.withMutations(function (list) {\n      list.setSize(size);\n      iter.forEach(function (v, i) { return list.set(i, v); });\n    });\n  }\n\n  if ( IndexedCollection$$1 ) List.__proto__ = IndexedCollection$$1;\n  List.prototype = Object.create( IndexedCollection$$1 && IndexedCollection$$1.prototype );\n  List.prototype.constructor = List;\n\n  List.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  List.prototype.toString = function toString () {\n    return this.__toString('List [', ']');\n  };\n\n  // @pragma Access\n\n  List.prototype.get = function get (index, notSetValue) {\n    index = wrapIndex(this, index);\n    if (index >= 0 && index < this.size) {\n      index += this._origin;\n      var node = listNodeFor(this, index);\n      return node && node.array[index & MASK];\n    }\n    return notSetValue;\n  };\n\n  // @pragma Modification\n\n  List.prototype.set = function set (index, value) {\n    return updateList(this, index, value);\n  };\n\n  List.prototype.remove = function remove (index) {\n    return !this.has(index)\n      ? this\n      : index === 0\n        ? this.shift()\n        : index === this.size - 1\n          ? this.pop()\n          : this.splice(index, 1);\n  };\n\n  List.prototype.insert = function insert (index, value) {\n    return this.splice(index, 0, value);\n  };\n\n  List.prototype.clear = function clear () {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = this._origin = this._capacity = 0;\n      this._level = SHIFT;\n      this._root = this._tail = null;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return emptyList();\n  };\n\n  List.prototype.push = function push (/*...values*/) {\n    var values = arguments;\n    var oldSize = this.size;\n    return this.withMutations(function (list) {\n      setListBounds(list, 0, oldSize + values.length);\n      for (var ii = 0; ii < values.length; ii++) {\n        list.set(oldSize + ii, values[ii]);\n      }\n    });\n  };\n\n  List.prototype.pop = function pop () {\n    return setListBounds(this, 0, -1);\n  };\n\n  List.prototype.unshift = function unshift (/*...values*/) {\n    var values = arguments;\n    return this.withMutations(function (list) {\n      setListBounds(list, -values.length);\n      for (var ii = 0; ii < values.length; ii++) {\n        list.set(ii, values[ii]);\n      }\n    });\n  };\n\n  List.prototype.shift = function shift () {\n    return setListBounds(this, 1);\n  };\n\n  // @pragma Composition\n\n  List.prototype.concat = function concat (/*...collections*/) {\n    var arguments$1 = arguments;\n\n    var seqs = [];\n    for (var i = 0; i < arguments.length; i++) {\n      var argument = arguments$1[i];\n      var seq = IndexedCollection$$1(\n        typeof argument !== 'string' && hasIterator(argument)\n          ? argument\n          : [argument]\n      );\n      if (seq.size !== 0) {\n        seqs.push(seq);\n      }\n    }\n    if (seqs.length === 0) {\n      return this;\n    }\n    if (this.size === 0 && !this.__ownerID && seqs.length === 1) {\n      return this.constructor(seqs[0]);\n    }\n    return this.withMutations(function (list) {\n      seqs.forEach(function (seq) { return seq.forEach(function (value) { return list.push(value); }); });\n    });\n  };\n\n  List.prototype.setSize = function setSize (size) {\n    return setListBounds(this, 0, size);\n  };\n\n  List.prototype.map = function map (mapper, context) {\n    var this$1 = this;\n\n    return this.withMutations(function (list) {\n      for (var i = 0; i < this$1.size; i++) {\n        list.set(i, mapper.call(context, list.get(i), i, list));\n      }\n    });\n  };\n\n  // @pragma Iteration\n\n  List.prototype.slice = function slice (begin, end) {\n    var size = this.size;\n    if (wholeSlice(begin, end, size)) {\n      return this;\n    }\n    return setListBounds(\n      this,\n      resolveBegin(begin, size),\n      resolveEnd(end, size)\n    );\n  };\n\n  List.prototype.__iterator = function __iterator (type, reverse) {\n    var index = reverse ? this.size : 0;\n    var values = iterateList(this, reverse);\n    return new Iterator(function () {\n      var value = values();\n      return value === DONE\n        ? iteratorDone()\n        : iteratorValue(type, reverse ? --index : index++, value);\n    });\n  };\n\n  List.prototype.__iterate = function __iterate (fn, reverse) {\n    var index = reverse ? this.size : 0;\n    var values = iterateList(this, reverse);\n    var value;\n    while ((value = values()) !== DONE) {\n      if (fn(value, reverse ? --index : index++, this) === false) {\n        break;\n      }\n    }\n    return index;\n  };\n\n  List.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyList();\n      }\n      this.__ownerID = ownerID;\n      this.__altered = false;\n      return this;\n    }\n    return makeList(\n      this._origin,\n      this._capacity,\n      this._level,\n      this._root,\n      this._tail,\n      ownerID,\n      this.__hash\n    );\n  };\n\n  return List;\n}(IndexedCollection));\n\nList.isList = isList;\n\nvar ListPrototype = List.prototype;\nListPrototype[IS_LIST_SYMBOL] = true;\nListPrototype[DELETE] = ListPrototype.remove;\nListPrototype.merge = ListPrototype.concat;\nListPrototype.setIn = setIn$1;\nListPrototype.deleteIn = ListPrototype.removeIn = deleteIn;\nListPrototype.update = update$1;\nListPrototype.updateIn = updateIn$1;\nListPrototype.mergeIn = mergeIn;\nListPrototype.mergeDeepIn = mergeDeepIn;\nListPrototype.withMutations = withMutations;\nListPrototype.wasAltered = wasAltered;\nListPrototype.asImmutable = asImmutable;\nListPrototype['@@transducer/init'] = ListPrototype.asMutable = asMutable;\nListPrototype['@@transducer/step'] = function(result, arr) {\n  return result.push(arr);\n};\nListPrototype['@@transducer/result'] = function(obj) {\n  return obj.asImmutable();\n};\n\nvar VNode = function VNode(array, ownerID) {\n  this.array = array;\n  this.ownerID = ownerID;\n};\n\n// TODO: seems like these methods are very similar\n\nVNode.prototype.removeBefore = function removeBefore (ownerID, level, index) {\n  if (index === level ? 1 << level : this.array.length === 0) {\n    return this;\n  }\n  var originIndex = (index >>> level) & MASK;\n  if (originIndex >= this.array.length) {\n    return new VNode([], ownerID);\n  }\n  var removingFirst = originIndex === 0;\n  var newChild;\n  if (level > 0) {\n    var oldChild = this.array[originIndex];\n    newChild =\n      oldChild && oldChild.removeBefore(ownerID, level - SHIFT, index);\n    if (newChild === oldChild && removingFirst) {\n      return this;\n    }\n  }\n  if (removingFirst && !newChild) {\n    return this;\n  }\n  var editable = editableVNode(this, ownerID);\n  if (!removingFirst) {\n    for (var ii = 0; ii < originIndex; ii++) {\n      editable.array[ii] = undefined;\n    }\n  }\n  if (newChild) {\n    editable.array[originIndex] = newChild;\n  }\n  return editable;\n};\n\nVNode.prototype.removeAfter = function removeAfter (ownerID, level, index) {\n  if (index === (level ? 1 << level : 0) || this.array.length === 0) {\n    return this;\n  }\n  var sizeIndex = ((index - 1) >>> level) & MASK;\n  if (sizeIndex >= this.array.length) {\n    return this;\n  }\n\n  var newChild;\n  if (level > 0) {\n    var oldChild = this.array[sizeIndex];\n    newChild =\n      oldChild && oldChild.removeAfter(ownerID, level - SHIFT, index);\n    if (newChild === oldChild && sizeIndex === this.array.length - 1) {\n      return this;\n    }\n  }\n\n  var editable = editableVNode(this, ownerID);\n  editable.array.splice(sizeIndex + 1);\n  if (newChild) {\n    editable.array[sizeIndex] = newChild;\n  }\n  return editable;\n};\n\nvar DONE = {};\n\nfunction iterateList(list, reverse) {\n  var left = list._origin;\n  var right = list._capacity;\n  var tailPos = getTailOffset(right);\n  var tail = list._tail;\n\n  return iterateNodeOrLeaf(list._root, list._level, 0);\n\n  function iterateNodeOrLeaf(node, level, offset) {\n    return level === 0\n      ? iterateLeaf(node, offset)\n      : iterateNode(node, level, offset);\n  }\n\n  function iterateLeaf(node, offset) {\n    var array = offset === tailPos ? tail && tail.array : node && node.array;\n    var from = offset > left ? 0 : left - offset;\n    var to = right - offset;\n    if (to > SIZE) {\n      to = SIZE;\n    }\n    return function () {\n      if (from === to) {\n        return DONE;\n      }\n      var idx = reverse ? --to : from++;\n      return array && array[idx];\n    };\n  }\n\n  function iterateNode(node, level, offset) {\n    var values;\n    var array = node && node.array;\n    var from = offset > left ? 0 : (left - offset) >> level;\n    var to = ((right - offset) >> level) + 1;\n    if (to > SIZE) {\n      to = SIZE;\n    }\n    return function () {\n      while (true) {\n        if (values) {\n          var value = values();\n          if (value !== DONE) {\n            return value;\n          }\n          values = null;\n        }\n        if (from === to) {\n          return DONE;\n        }\n        var idx = reverse ? --to : from++;\n        values = iterateNodeOrLeaf(\n          array && array[idx],\n          level - SHIFT,\n          offset + (idx << level)\n        );\n      }\n    };\n  }\n}\n\nfunction makeList(origin, capacity, level, root, tail, ownerID, hash) {\n  var list = Object.create(ListPrototype);\n  list.size = capacity - origin;\n  list._origin = origin;\n  list._capacity = capacity;\n  list._level = level;\n  list._root = root;\n  list._tail = tail;\n  list.__ownerID = ownerID;\n  list.__hash = hash;\n  list.__altered = false;\n  return list;\n}\n\nvar EMPTY_LIST;\nfunction emptyList() {\n  return EMPTY_LIST || (EMPTY_LIST = makeList(0, 0, SHIFT));\n}\n\nfunction updateList(list, index, value) {\n  index = wrapIndex(list, index);\n\n  if (index !== index) {\n    return list;\n  }\n\n  if (index >= list.size || index < 0) {\n    return list.withMutations(function (list) {\n      index < 0\n        ? setListBounds(list, index).set(0, value)\n        : setListBounds(list, 0, index + 1).set(index, value);\n    });\n  }\n\n  index += list._origin;\n\n  var newTail = list._tail;\n  var newRoot = list._root;\n  var didAlter = MakeRef();\n  if (index >= getTailOffset(list._capacity)) {\n    newTail = updateVNode(newTail, list.__ownerID, 0, index, value, didAlter);\n  } else {\n    newRoot = updateVNode(\n      newRoot,\n      list.__ownerID,\n      list._level,\n      index,\n      value,\n      didAlter\n    );\n  }\n\n  if (!didAlter.value) {\n    return list;\n  }\n\n  if (list.__ownerID) {\n    list._root = newRoot;\n    list._tail = newTail;\n    list.__hash = undefined;\n    list.__altered = true;\n    return list;\n  }\n  return makeList(list._origin, list._capacity, list._level, newRoot, newTail);\n}\n\nfunction updateVNode(node, ownerID, level, index, value, didAlter) {\n  var idx = (index >>> level) & MASK;\n  var nodeHas = node && idx < node.array.length;\n  if (!nodeHas && value === undefined) {\n    return node;\n  }\n\n  var newNode;\n\n  if (level > 0) {\n    var lowerNode = node && node.array[idx];\n    var newLowerNode = updateVNode(\n      lowerNode,\n      ownerID,\n      level - SHIFT,\n      index,\n      value,\n      didAlter\n    );\n    if (newLowerNode === lowerNode) {\n      return node;\n    }\n    newNode = editableVNode(node, ownerID);\n    newNode.array[idx] = newLowerNode;\n    return newNode;\n  }\n\n  if (nodeHas && node.array[idx] === value) {\n    return node;\n  }\n\n  if (didAlter) {\n    SetRef(didAlter);\n  }\n\n  newNode = editableVNode(node, ownerID);\n  if (value === undefined && idx === newNode.array.length - 1) {\n    newNode.array.pop();\n  } else {\n    newNode.array[idx] = value;\n  }\n  return newNode;\n}\n\nfunction editableVNode(node, ownerID) {\n  if (ownerID && node && ownerID === node.ownerID) {\n    return node;\n  }\n  return new VNode(node ? node.array.slice() : [], ownerID);\n}\n\nfunction listNodeFor(list, rawIndex) {\n  if (rawIndex >= getTailOffset(list._capacity)) {\n    return list._tail;\n  }\n  if (rawIndex < 1 << (list._level + SHIFT)) {\n    var node = list._root;\n    var level = list._level;\n    while (node && level > 0) {\n      node = node.array[(rawIndex >>> level) & MASK];\n      level -= SHIFT;\n    }\n    return node;\n  }\n}\n\nfunction setListBounds(list, begin, end) {\n  // Sanitize begin & end using this shorthand for ToInt32(argument)\n  // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n  if (begin !== undefined) {\n    begin |= 0;\n  }\n  if (end !== undefined) {\n    end |= 0;\n  }\n  var owner = list.__ownerID || new OwnerID();\n  var oldOrigin = list._origin;\n  var oldCapacity = list._capacity;\n  var newOrigin = oldOrigin + begin;\n  var newCapacity =\n    end === undefined\n      ? oldCapacity\n      : end < 0\n        ? oldCapacity + end\n        : oldOrigin + end;\n  if (newOrigin === oldOrigin && newCapacity === oldCapacity) {\n    return list;\n  }\n\n  // If it's going to end after it starts, it's empty.\n  if (newOrigin >= newCapacity) {\n    return list.clear();\n  }\n\n  var newLevel = list._level;\n  var newRoot = list._root;\n\n  // New origin might need creating a higher root.\n  var offsetShift = 0;\n  while (newOrigin + offsetShift < 0) {\n    newRoot = new VNode(\n      newRoot && newRoot.array.length ? [undefined, newRoot] : [],\n      owner\n    );\n    newLevel += SHIFT;\n    offsetShift += 1 << newLevel;\n  }\n  if (offsetShift) {\n    newOrigin += offsetShift;\n    oldOrigin += offsetShift;\n    newCapacity += offsetShift;\n    oldCapacity += offsetShift;\n  }\n\n  var oldTailOffset = getTailOffset(oldCapacity);\n  var newTailOffset = getTailOffset(newCapacity);\n\n  // New size might need creating a higher root.\n  while (newTailOffset >= 1 << (newLevel + SHIFT)) {\n    newRoot = new VNode(\n      newRoot && newRoot.array.length ? [newRoot] : [],\n      owner\n    );\n    newLevel += SHIFT;\n  }\n\n  // Locate or create the new tail.\n  var oldTail = list._tail;\n  var newTail =\n    newTailOffset < oldTailOffset\n      ? listNodeFor(list, newCapacity - 1)\n      : newTailOffset > oldTailOffset\n        ? new VNode([], owner)\n        : oldTail;\n\n  // Merge Tail into tree.\n  if (\n    oldTail &&\n    newTailOffset > oldTailOffset &&\n    newOrigin < oldCapacity &&\n    oldTail.array.length\n  ) {\n    newRoot = editableVNode(newRoot, owner);\n    var node = newRoot;\n    for (var level = newLevel; level > SHIFT; level -= SHIFT) {\n      var idx = (oldTailOffset >>> level) & MASK;\n      node = node.array[idx] = editableVNode(node.array[idx], owner);\n    }\n    node.array[(oldTailOffset >>> SHIFT) & MASK] = oldTail;\n  }\n\n  // If the size has been reduced, there's a chance the tail needs to be trimmed.\n  if (newCapacity < oldCapacity) {\n    newTail = newTail && newTail.removeAfter(owner, 0, newCapacity);\n  }\n\n  // If the new origin is within the tail, then we do not need a root.\n  if (newOrigin >= newTailOffset) {\n    newOrigin -= newTailOffset;\n    newCapacity -= newTailOffset;\n    newLevel = SHIFT;\n    newRoot = null;\n    newTail = newTail && newTail.removeBefore(owner, 0, newOrigin);\n\n    // Otherwise, if the root has been trimmed, garbage collect.\n  } else if (newOrigin > oldOrigin || newTailOffset < oldTailOffset) {\n    offsetShift = 0;\n\n    // Identify the new top root node of the subtree of the old root.\n    while (newRoot) {\n      var beginIndex = (newOrigin >>> newLevel) & MASK;\n      if ((beginIndex !== newTailOffset >>> newLevel) & MASK) {\n        break;\n      }\n      if (beginIndex) {\n        offsetShift += (1 << newLevel) * beginIndex;\n      }\n      newLevel -= SHIFT;\n      newRoot = newRoot.array[beginIndex];\n    }\n\n    // Trim the new sides of the new root.\n    if (newRoot && newOrigin > oldOrigin) {\n      newRoot = newRoot.removeBefore(owner, newLevel, newOrigin - offsetShift);\n    }\n    if (newRoot && newTailOffset < oldTailOffset) {\n      newRoot = newRoot.removeAfter(\n        owner,\n        newLevel,\n        newTailOffset - offsetShift\n      );\n    }\n    if (offsetShift) {\n      newOrigin -= offsetShift;\n      newCapacity -= offsetShift;\n    }\n  }\n\n  if (list.__ownerID) {\n    list.size = newCapacity - newOrigin;\n    list._origin = newOrigin;\n    list._capacity = newCapacity;\n    list._level = newLevel;\n    list._root = newRoot;\n    list._tail = newTail;\n    list.__hash = undefined;\n    list.__altered = true;\n    return list;\n  }\n  return makeList(newOrigin, newCapacity, newLevel, newRoot, newTail);\n}\n\nfunction getTailOffset(size) {\n  return size < SIZE ? 0 : ((size - 1) >>> SHIFT) << SHIFT;\n}\n\nvar OrderedMap = /*@__PURE__*/(function (Map$$1) {\n  function OrderedMap(value) {\n    return value === null || value === undefined\n      ? emptyOrderedMap()\n      : isOrderedMap(value)\n        ? value\n        : emptyOrderedMap().withMutations(function (map) {\n            var iter = KeyedCollection(value);\n            assertNotInfinite(iter.size);\n            iter.forEach(function (v, k) { return map.set(k, v); });\n          });\n  }\n\n  if ( Map$$1 ) OrderedMap.__proto__ = Map$$1;\n  OrderedMap.prototype = Object.create( Map$$1 && Map$$1.prototype );\n  OrderedMap.prototype.constructor = OrderedMap;\n\n  OrderedMap.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  OrderedMap.prototype.toString = function toString () {\n    return this.__toString('OrderedMap {', '}');\n  };\n\n  // @pragma Access\n\n  OrderedMap.prototype.get = function get (k, notSetValue) {\n    var index = this._map.get(k);\n    return index !== undefined ? this._list.get(index)[1] : notSetValue;\n  };\n\n  // @pragma Modification\n\n  OrderedMap.prototype.clear = function clear () {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = 0;\n      this._map.clear();\n      this._list.clear();\n      return this;\n    }\n    return emptyOrderedMap();\n  };\n\n  OrderedMap.prototype.set = function set (k, v) {\n    return updateOrderedMap(this, k, v);\n  };\n\n  OrderedMap.prototype.remove = function remove (k) {\n    return updateOrderedMap(this, k, NOT_SET);\n  };\n\n  OrderedMap.prototype.wasAltered = function wasAltered () {\n    return this._map.wasAltered() || this._list.wasAltered();\n  };\n\n  OrderedMap.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1 = this;\n\n    return this._list.__iterate(\n      function (entry) { return entry && fn(entry[1], entry[0], this$1); },\n      reverse\n    );\n  };\n\n  OrderedMap.prototype.__iterator = function __iterator (type, reverse) {\n    return this._list.fromEntrySeq().__iterator(type, reverse);\n  };\n\n  OrderedMap.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    var newMap = this._map.__ensureOwner(ownerID);\n    var newList = this._list.__ensureOwner(ownerID);\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyOrderedMap();\n      }\n      this.__ownerID = ownerID;\n      this._map = newMap;\n      this._list = newList;\n      return this;\n    }\n    return makeOrderedMap(newMap, newList, ownerID, this.__hash);\n  };\n\n  return OrderedMap;\n}(Map));\n\nOrderedMap.isOrderedMap = isOrderedMap;\n\nOrderedMap.prototype[IS_ORDERED_SYMBOL] = true;\nOrderedMap.prototype[DELETE] = OrderedMap.prototype.remove;\n\nfunction makeOrderedMap(map, list, ownerID, hash) {\n  var omap = Object.create(OrderedMap.prototype);\n  omap.size = map ? map.size : 0;\n  omap._map = map;\n  omap._list = list;\n  omap.__ownerID = ownerID;\n  omap.__hash = hash;\n  return omap;\n}\n\nvar EMPTY_ORDERED_MAP;\nfunction emptyOrderedMap() {\n  return (\n    EMPTY_ORDERED_MAP ||\n    (EMPTY_ORDERED_MAP = makeOrderedMap(emptyMap(), emptyList()))\n  );\n}\n\nfunction updateOrderedMap(omap, k, v) {\n  var map = omap._map;\n  var list = omap._list;\n  var i = map.get(k);\n  var has = i !== undefined;\n  var newMap;\n  var newList;\n  if (v === NOT_SET) {\n    // removed\n    if (!has) {\n      return omap;\n    }\n    if (list.size >= SIZE && list.size >= map.size * 2) {\n      newList = list.filter(function (entry, idx) { return entry !== undefined && i !== idx; });\n      newMap = newList\n        .toKeyedSeq()\n        .map(function (entry) { return entry[0]; })\n        .flip()\n        .toMap();\n      if (omap.__ownerID) {\n        newMap.__ownerID = newList.__ownerID = omap.__ownerID;\n      }\n    } else {\n      newMap = map.remove(k);\n      newList = i === list.size - 1 ? list.pop() : list.set(i, undefined);\n    }\n  } else if (has) {\n    if (v === list.get(i)[1]) {\n      return omap;\n    }\n    newMap = map;\n    newList = list.set(i, [k, v]);\n  } else {\n    newMap = map.set(k, list.size);\n    newList = list.set(list.size, [k, v]);\n  }\n  if (omap.__ownerID) {\n    omap.size = newMap.size;\n    omap._map = newMap;\n    omap._list = newList;\n    omap.__hash = undefined;\n    return omap;\n  }\n  return makeOrderedMap(newMap, newList);\n}\n\nvar IS_STACK_SYMBOL = '@@__IMMUTABLE_STACK__@@';\n\nfunction isStack(maybeStack) {\n  return Boolean(maybeStack && maybeStack[IS_STACK_SYMBOL]);\n}\n\nvar Stack = /*@__PURE__*/(function (IndexedCollection$$1) {\n  function Stack(value) {\n    return value === null || value === undefined\n      ? emptyStack()\n      : isStack(value)\n        ? value\n        : emptyStack().pushAll(value);\n  }\n\n  if ( IndexedCollection$$1 ) Stack.__proto__ = IndexedCollection$$1;\n  Stack.prototype = Object.create( IndexedCollection$$1 && IndexedCollection$$1.prototype );\n  Stack.prototype.constructor = Stack;\n\n  Stack.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  Stack.prototype.toString = function toString () {\n    return this.__toString('Stack [', ']');\n  };\n\n  // @pragma Access\n\n  Stack.prototype.get = function get (index, notSetValue) {\n    var head = this._head;\n    index = wrapIndex(this, index);\n    while (head && index--) {\n      head = head.next;\n    }\n    return head ? head.value : notSetValue;\n  };\n\n  Stack.prototype.peek = function peek () {\n    return this._head && this._head.value;\n  };\n\n  // @pragma Modification\n\n  Stack.prototype.push = function push (/*...values*/) {\n    var arguments$1 = arguments;\n\n    if (arguments.length === 0) {\n      return this;\n    }\n    var newSize = this.size + arguments.length;\n    var head = this._head;\n    for (var ii = arguments.length - 1; ii >= 0; ii--) {\n      head = {\n        value: arguments$1[ii],\n        next: head,\n      };\n    }\n    if (this.__ownerID) {\n      this.size = newSize;\n      this._head = head;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return makeStack(newSize, head);\n  };\n\n  Stack.prototype.pushAll = function pushAll (iter) {\n    iter = IndexedCollection$$1(iter);\n    if (iter.size === 0) {\n      return this;\n    }\n    if (this.size === 0 && isStack(iter)) {\n      return iter;\n    }\n    assertNotInfinite(iter.size);\n    var newSize = this.size;\n    var head = this._head;\n    iter.__iterate(function (value) {\n      newSize++;\n      head = {\n        value: value,\n        next: head,\n      };\n    }, /* reverse */ true);\n    if (this.__ownerID) {\n      this.size = newSize;\n      this._head = head;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return makeStack(newSize, head);\n  };\n\n  Stack.prototype.pop = function pop () {\n    return this.slice(1);\n  };\n\n  Stack.prototype.clear = function clear () {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = 0;\n      this._head = undefined;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return emptyStack();\n  };\n\n  Stack.prototype.slice = function slice (begin, end) {\n    if (wholeSlice(begin, end, this.size)) {\n      return this;\n    }\n    var resolvedBegin = resolveBegin(begin, this.size);\n    var resolvedEnd = resolveEnd(end, this.size);\n    if (resolvedEnd !== this.size) {\n      // super.slice(begin, end);\n      return IndexedCollection$$1.prototype.slice.call(this, begin, end);\n    }\n    var newSize = this.size - resolvedBegin;\n    var head = this._head;\n    while (resolvedBegin--) {\n      head = head.next;\n    }\n    if (this.__ownerID) {\n      this.size = newSize;\n      this._head = head;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return makeStack(newSize, head);\n  };\n\n  // @pragma Mutability\n\n  Stack.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyStack();\n      }\n      this.__ownerID = ownerID;\n      this.__altered = false;\n      return this;\n    }\n    return makeStack(this.size, this._head, ownerID, this.__hash);\n  };\n\n  // @pragma Iteration\n\n  Stack.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1 = this;\n\n    if (reverse) {\n      return new ArraySeq(this.toArray()).__iterate(\n        function (v, k) { return fn(v, k, this$1); },\n        reverse\n      );\n    }\n    var iterations = 0;\n    var node = this._head;\n    while (node) {\n      if (fn(node.value, iterations++, this) === false) {\n        break;\n      }\n      node = node.next;\n    }\n    return iterations;\n  };\n\n  Stack.prototype.__iterator = function __iterator (type, reverse) {\n    if (reverse) {\n      return new ArraySeq(this.toArray()).__iterator(type, reverse);\n    }\n    var iterations = 0;\n    var node = this._head;\n    return new Iterator(function () {\n      if (node) {\n        var value = node.value;\n        node = node.next;\n        return iteratorValue(type, iterations++, value);\n      }\n      return iteratorDone();\n    });\n  };\n\n  return Stack;\n}(IndexedCollection));\n\nStack.isStack = isStack;\n\nvar StackPrototype = Stack.prototype;\nStackPrototype[IS_STACK_SYMBOL] = true;\nStackPrototype.shift = StackPrototype.pop;\nStackPrototype.unshift = StackPrototype.push;\nStackPrototype.unshiftAll = StackPrototype.pushAll;\nStackPrototype.withMutations = withMutations;\nStackPrototype.wasAltered = wasAltered;\nStackPrototype.asImmutable = asImmutable;\nStackPrototype['@@transducer/init'] = StackPrototype.asMutable = asMutable;\nStackPrototype['@@transducer/step'] = function(result, arr) {\n  return result.unshift(arr);\n};\nStackPrototype['@@transducer/result'] = function(obj) {\n  return obj.asImmutable();\n};\n\nfunction makeStack(size, head, ownerID, hash) {\n  var map = Object.create(StackPrototype);\n  map.size = size;\n  map._head = head;\n  map.__ownerID = ownerID;\n  map.__hash = hash;\n  map.__altered = false;\n  return map;\n}\n\nvar EMPTY_STACK;\nfunction emptyStack() {\n  return EMPTY_STACK || (EMPTY_STACK = makeStack(0));\n}\n\nvar IS_SET_SYMBOL = '@@__IMMUTABLE_SET__@@';\n\nfunction isSet(maybeSet) {\n  return Boolean(maybeSet && maybeSet[IS_SET_SYMBOL]);\n}\n\nfunction isOrderedSet(maybeOrderedSet) {\n  return isSet(maybeOrderedSet) && isOrdered(maybeOrderedSet);\n}\n\nfunction deepEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (\n    !isCollection(b) ||\n    (a.size !== undefined && b.size !== undefined && a.size !== b.size) ||\n    (a.__hash !== undefined &&\n      b.__hash !== undefined &&\n      a.__hash !== b.__hash) ||\n    isKeyed(a) !== isKeyed(b) ||\n    isIndexed(a) !== isIndexed(b) ||\n    isOrdered(a) !== isOrdered(b)\n  ) {\n    return false;\n  }\n\n  if (a.size === 0 && b.size === 0) {\n    return true;\n  }\n\n  var notAssociative = !isAssociative(a);\n\n  if (isOrdered(a)) {\n    var entries = a.entries();\n    return (\n      b.every(function (v, k) {\n        var entry = entries.next().value;\n        return entry && is(entry[1], v) && (notAssociative || is(entry[0], k));\n      }) && entries.next().done\n    );\n  }\n\n  var flipped = false;\n\n  if (a.size === undefined) {\n    if (b.size === undefined) {\n      if (typeof a.cacheResult === 'function') {\n        a.cacheResult();\n      }\n    } else {\n      flipped = true;\n      var _ = a;\n      a = b;\n      b = _;\n    }\n  }\n\n  var allEqual = true;\n  var bSize = b.__iterate(function (v, k) {\n    if (\n      notAssociative\n        ? !a.has(v)\n        : flipped\n          ? !is(v, a.get(k, NOT_SET))\n          : !is(a.get(k, NOT_SET), v)\n    ) {\n      allEqual = false;\n      return false;\n    }\n  });\n\n  return allEqual && a.size === bSize;\n}\n\n/**\n * Contributes additional methods to a constructor\n */\nfunction mixin(ctor, methods) {\n  var keyCopier = function (key) {\n    ctor.prototype[key] = methods[key];\n  };\n  Object.keys(methods).forEach(keyCopier);\n  Object.getOwnPropertySymbols &&\n    Object.getOwnPropertySymbols(methods).forEach(keyCopier);\n  return ctor;\n}\n\nfunction toJS(value) {\n  if (!value || typeof value !== 'object') {\n    return value;\n  }\n  if (!isCollection(value)) {\n    if (!isDataStructure(value)) {\n      return value;\n    }\n    value = Seq(value);\n  }\n  if (isKeyed(value)) {\n    var result$1 = {};\n    value.__iterate(function (v, k) {\n      result$1[k] = toJS(v);\n    });\n    return result$1;\n  }\n  var result = [];\n  value.__iterate(function (v) {\n    result.push(toJS(v));\n  });\n  return result;\n}\n\nvar Set = /*@__PURE__*/(function (SetCollection$$1) {\n  function Set(value) {\n    return value === null || value === undefined\n      ? emptySet()\n      : isSet(value) && !isOrdered(value)\n        ? value\n        : emptySet().withMutations(function (set) {\n            var iter = SetCollection$$1(value);\n            assertNotInfinite(iter.size);\n            iter.forEach(function (v) { return set.add(v); });\n          });\n  }\n\n  if ( SetCollection$$1 ) Set.__proto__ = SetCollection$$1;\n  Set.prototype = Object.create( SetCollection$$1 && SetCollection$$1.prototype );\n  Set.prototype.constructor = Set;\n\n  Set.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  Set.fromKeys = function fromKeys (value) {\n    return this(KeyedCollection(value).keySeq());\n  };\n\n  Set.intersect = function intersect (sets) {\n    sets = Collection(sets).toArray();\n    return sets.length\n      ? SetPrototype.intersect.apply(Set(sets.pop()), sets)\n      : emptySet();\n  };\n\n  Set.union = function union (sets) {\n    sets = Collection(sets).toArray();\n    return sets.length\n      ? SetPrototype.union.apply(Set(sets.pop()), sets)\n      : emptySet();\n  };\n\n  Set.prototype.toString = function toString () {\n    return this.__toString('Set {', '}');\n  };\n\n  // @pragma Access\n\n  Set.prototype.has = function has (value) {\n    return this._map.has(value);\n  };\n\n  // @pragma Modification\n\n  Set.prototype.add = function add (value) {\n    return updateSet(this, this._map.set(value, value));\n  };\n\n  Set.prototype.remove = function remove (value) {\n    return updateSet(this, this._map.remove(value));\n  };\n\n  Set.prototype.clear = function clear () {\n    return updateSet(this, this._map.clear());\n  };\n\n  // @pragma Composition\n\n  Set.prototype.map = function map (mapper, context) {\n    var this$1 = this;\n\n    var removes = [];\n    var adds = [];\n    this.forEach(function (value) {\n      var mapped = mapper.call(context, value, value, this$1);\n      if (mapped !== value) {\n        removes.push(value);\n        adds.push(mapped);\n      }\n    });\n    return this.withMutations(function (set) {\n      removes.forEach(function (value) { return set.remove(value); });\n      adds.forEach(function (value) { return set.add(value); });\n    });\n  };\n\n  Set.prototype.union = function union () {\n    var iters = [], len = arguments.length;\n    while ( len-- ) iters[ len ] = arguments[ len ];\n\n    iters = iters.filter(function (x) { return x.size !== 0; });\n    if (iters.length === 0) {\n      return this;\n    }\n    if (this.size === 0 && !this.__ownerID && iters.length === 1) {\n      return this.constructor(iters[0]);\n    }\n    return this.withMutations(function (set) {\n      for (var ii = 0; ii < iters.length; ii++) {\n        SetCollection$$1(iters[ii]).forEach(function (value) { return set.add(value); });\n      }\n    });\n  };\n\n  Set.prototype.intersect = function intersect () {\n    var iters = [], len = arguments.length;\n    while ( len-- ) iters[ len ] = arguments[ len ];\n\n    if (iters.length === 0) {\n      return this;\n    }\n    iters = iters.map(function (iter) { return SetCollection$$1(iter); });\n    var toRemove = [];\n    this.forEach(function (value) {\n      if (!iters.every(function (iter) { return iter.includes(value); })) {\n        toRemove.push(value);\n      }\n    });\n    return this.withMutations(function (set) {\n      toRemove.forEach(function (value) {\n        set.remove(value);\n      });\n    });\n  };\n\n  Set.prototype.subtract = function subtract () {\n    var iters = [], len = arguments.length;\n    while ( len-- ) iters[ len ] = arguments[ len ];\n\n    if (iters.length === 0) {\n      return this;\n    }\n    iters = iters.map(function (iter) { return SetCollection$$1(iter); });\n    var toRemove = [];\n    this.forEach(function (value) {\n      if (iters.some(function (iter) { return iter.includes(value); })) {\n        toRemove.push(value);\n      }\n    });\n    return this.withMutations(function (set) {\n      toRemove.forEach(function (value) {\n        set.remove(value);\n      });\n    });\n  };\n\n  Set.prototype.sort = function sort (comparator) {\n    // Late binding\n    return OrderedSet(sortFactory(this, comparator));\n  };\n\n  Set.prototype.sortBy = function sortBy (mapper, comparator) {\n    // Late binding\n    return OrderedSet(sortFactory(this, comparator, mapper));\n  };\n\n  Set.prototype.wasAltered = function wasAltered () {\n    return this._map.wasAltered();\n  };\n\n  Set.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1 = this;\n\n    return this._map.__iterate(function (k) { return fn(k, k, this$1); }, reverse);\n  };\n\n  Set.prototype.__iterator = function __iterator (type, reverse) {\n    return this._map.__iterator(type, reverse);\n  };\n\n  Set.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    var newMap = this._map.__ensureOwner(ownerID);\n    if (!ownerID) {\n      if (this.size === 0) {\n        return this.__empty();\n      }\n      this.__ownerID = ownerID;\n      this._map = newMap;\n      return this;\n    }\n    return this.__make(newMap, ownerID);\n  };\n\n  return Set;\n}(SetCollection));\n\nSet.isSet = isSet;\n\nvar SetPrototype = Set.prototype;\nSetPrototype[IS_SET_SYMBOL] = true;\nSetPrototype[DELETE] = SetPrototype.remove;\nSetPrototype.merge = SetPrototype.concat = SetPrototype.union;\nSetPrototype.withMutations = withMutations;\nSetPrototype.asImmutable = asImmutable;\nSetPrototype['@@transducer/init'] = SetPrototype.asMutable = asMutable;\nSetPrototype['@@transducer/step'] = function(result, arr) {\n  return result.add(arr);\n};\nSetPrototype['@@transducer/result'] = function(obj) {\n  return obj.asImmutable();\n};\n\nSetPrototype.__empty = emptySet;\nSetPrototype.__make = makeSet;\n\nfunction updateSet(set, newMap) {\n  if (set.__ownerID) {\n    set.size = newMap.size;\n    set._map = newMap;\n    return set;\n  }\n  return newMap === set._map\n    ? set\n    : newMap.size === 0\n      ? set.__empty()\n      : set.__make(newMap);\n}\n\nfunction makeSet(map, ownerID) {\n  var set = Object.create(SetPrototype);\n  set.size = map ? map.size : 0;\n  set._map = map;\n  set.__ownerID = ownerID;\n  return set;\n}\n\nvar EMPTY_SET;\nfunction emptySet() {\n  return EMPTY_SET || (EMPTY_SET = makeSet(emptyMap()));\n}\n\n/**\n * Returns a lazy seq of nums from start (inclusive) to end\n * (exclusive), by step, where start defaults to 0, step to 1, and end to\n * infinity. When start is equal to end, returns empty list.\n */\nvar Range = /*@__PURE__*/(function (IndexedSeq$$1) {\n  function Range(start, end, step) {\n    if (!(this instanceof Range)) {\n      return new Range(start, end, step);\n    }\n    invariant(step !== 0, 'Cannot step a Range by 0');\n    start = start || 0;\n    if (end === undefined) {\n      end = Infinity;\n    }\n    step = step === undefined ? 1 : Math.abs(step);\n    if (end < start) {\n      step = -step;\n    }\n    this._start = start;\n    this._end = end;\n    this._step = step;\n    this.size = Math.max(0, Math.ceil((end - start) / step - 1) + 1);\n    if (this.size === 0) {\n      if (EMPTY_RANGE) {\n        return EMPTY_RANGE;\n      }\n      EMPTY_RANGE = this;\n    }\n  }\n\n  if ( IndexedSeq$$1 ) Range.__proto__ = IndexedSeq$$1;\n  Range.prototype = Object.create( IndexedSeq$$1 && IndexedSeq$$1.prototype );\n  Range.prototype.constructor = Range;\n\n  Range.prototype.toString = function toString () {\n    if (this.size === 0) {\n      return 'Range []';\n    }\n    return (\n      'Range [ ' +\n      this._start +\n      '...' +\n      this._end +\n      (this._step !== 1 ? ' by ' + this._step : '') +\n      ' ]'\n    );\n  };\n\n  Range.prototype.get = function get (index, notSetValue) {\n    return this.has(index)\n      ? this._start + wrapIndex(this, index) * this._step\n      : notSetValue;\n  };\n\n  Range.prototype.includes = function includes (searchValue) {\n    var possibleIndex = (searchValue - this._start) / this._step;\n    return (\n      possibleIndex >= 0 &&\n      possibleIndex < this.size &&\n      possibleIndex === Math.floor(possibleIndex)\n    );\n  };\n\n  Range.prototype.slice = function slice (begin, end) {\n    if (wholeSlice(begin, end, this.size)) {\n      return this;\n    }\n    begin = resolveBegin(begin, this.size);\n    end = resolveEnd(end, this.size);\n    if (end <= begin) {\n      return new Range(0, 0);\n    }\n    return new Range(\n      this.get(begin, this._end),\n      this.get(end, this._end),\n      this._step\n    );\n  };\n\n  Range.prototype.indexOf = function indexOf (searchValue) {\n    var offsetValue = searchValue - this._start;\n    if (offsetValue % this._step === 0) {\n      var index = offsetValue / this._step;\n      if (index >= 0 && index < this.size) {\n        return index;\n      }\n    }\n    return -1;\n  };\n\n  Range.prototype.lastIndexOf = function lastIndexOf (searchValue) {\n    return this.indexOf(searchValue);\n  };\n\n  Range.prototype.__iterate = function __iterate (fn, reverse) {\n    var size = this.size;\n    var step = this._step;\n    var value = reverse ? this._start + (size - 1) * step : this._start;\n    var i = 0;\n    while (i !== size) {\n      if (fn(value, reverse ? size - ++i : i++, this) === false) {\n        break;\n      }\n      value += reverse ? -step : step;\n    }\n    return i;\n  };\n\n  Range.prototype.__iterator = function __iterator (type, reverse) {\n    var size = this.size;\n    var step = this._step;\n    var value = reverse ? this._start + (size - 1) * step : this._start;\n    var i = 0;\n    return new Iterator(function () {\n      if (i === size) {\n        return iteratorDone();\n      }\n      var v = value;\n      value += reverse ? -step : step;\n      return iteratorValue(type, reverse ? size - ++i : i++, v);\n    });\n  };\n\n  Range.prototype.equals = function equals (other) {\n    return other instanceof Range\n      ? this._start === other._start &&\n          this._end === other._end &&\n          this._step === other._step\n      : deepEqual(this, other);\n  };\n\n  return Range;\n}(IndexedSeq));\n\nvar EMPTY_RANGE;\n\nfunction getIn(collection, searchKeyPath, notSetValue) {\n  var keyPath = coerceKeyPath(searchKeyPath);\n  var i = 0;\n  while (i !== keyPath.length) {\n    collection = get(collection, keyPath[i++], NOT_SET);\n    if (collection === NOT_SET) {\n      return notSetValue;\n    }\n  }\n  return collection;\n}\n\nfunction getIn$1(searchKeyPath, notSetValue) {\n  return getIn(this, searchKeyPath, notSetValue);\n}\n\nfunction hasIn(collection, keyPath) {\n  return getIn(collection, keyPath, NOT_SET) !== NOT_SET;\n}\n\nfunction hasIn$1(searchKeyPath) {\n  return hasIn(this, searchKeyPath);\n}\n\nfunction toObject() {\n  assertNotInfinite(this.size);\n  var object = {};\n  this.__iterate(function (v, k) {\n    object[k] = v;\n  });\n  return object;\n}\n\n// Note: all of these methods are deprecated.\nCollection.isIterable = isCollection;\nCollection.isKeyed = isKeyed;\nCollection.isIndexed = isIndexed;\nCollection.isAssociative = isAssociative;\nCollection.isOrdered = isOrdered;\n\nCollection.Iterator = Iterator;\n\nmixin(Collection, {\n  // ### Conversion to other types\n\n  toArray: function toArray() {\n    assertNotInfinite(this.size);\n    var array = new Array(this.size || 0);\n    var useTuples = isKeyed(this);\n    var i = 0;\n    this.__iterate(function (v, k) {\n      // Keyed collections produce an array of tuples.\n      array[i++] = useTuples ? [k, v] : v;\n    });\n    return array;\n  },\n\n  toIndexedSeq: function toIndexedSeq() {\n    return new ToIndexedSequence(this);\n  },\n\n  toJS: function toJS$1() {\n    return toJS(this);\n  },\n\n  toKeyedSeq: function toKeyedSeq() {\n    return new ToKeyedSequence(this, true);\n  },\n\n  toMap: function toMap() {\n    // Use Late Binding here to solve the circular dependency.\n    return Map(this.toKeyedSeq());\n  },\n\n  toObject: toObject,\n\n  toOrderedMap: function toOrderedMap() {\n    // Use Late Binding here to solve the circular dependency.\n    return OrderedMap(this.toKeyedSeq());\n  },\n\n  toOrderedSet: function toOrderedSet() {\n    // Use Late Binding here to solve the circular dependency.\n    return OrderedSet(isKeyed(this) ? this.valueSeq() : this);\n  },\n\n  toSet: function toSet() {\n    // Use Late Binding here to solve the circular dependency.\n    return Set(isKeyed(this) ? this.valueSeq() : this);\n  },\n\n  toSetSeq: function toSetSeq() {\n    return new ToSetSequence(this);\n  },\n\n  toSeq: function toSeq() {\n    return isIndexed(this)\n      ? this.toIndexedSeq()\n      : isKeyed(this)\n        ? this.toKeyedSeq()\n        : this.toSetSeq();\n  },\n\n  toStack: function toStack() {\n    // Use Late Binding here to solve the circular dependency.\n    return Stack(isKeyed(this) ? this.valueSeq() : this);\n  },\n\n  toList: function toList() {\n    // Use Late Binding here to solve the circular dependency.\n    return List(isKeyed(this) ? this.valueSeq() : this);\n  },\n\n  // ### Common JavaScript methods and properties\n\n  toString: function toString() {\n    return '[Collection]';\n  },\n\n  __toString: function __toString(head, tail) {\n    if (this.size === 0) {\n      return head + tail;\n    }\n    return (\n      head +\n      ' ' +\n      this.toSeq()\n        .map(this.__toStringMapper)\n        .join(', ') +\n      ' ' +\n      tail\n    );\n  },\n\n  // ### ES6 Collection methods (ES6 Array and Map)\n\n  concat: function concat() {\n    var values = [], len = arguments.length;\n    while ( len-- ) values[ len ] = arguments[ len ];\n\n    return reify(this, concatFactory(this, values));\n  },\n\n  includes: function includes(searchValue) {\n    return this.some(function (value) { return is(value, searchValue); });\n  },\n\n  entries: function entries() {\n    return this.__iterator(ITERATE_ENTRIES);\n  },\n\n  every: function every(predicate, context) {\n    assertNotInfinite(this.size);\n    var returnValue = true;\n    this.__iterate(function (v, k, c) {\n      if (!predicate.call(context, v, k, c)) {\n        returnValue = false;\n        return false;\n      }\n    });\n    return returnValue;\n  },\n\n  filter: function filter(predicate, context) {\n    return reify(this, filterFactory(this, predicate, context, true));\n  },\n\n  find: function find(predicate, context, notSetValue) {\n    var entry = this.findEntry(predicate, context);\n    return entry ? entry[1] : notSetValue;\n  },\n\n  forEach: function forEach(sideEffect, context) {\n    assertNotInfinite(this.size);\n    return this.__iterate(context ? sideEffect.bind(context) : sideEffect);\n  },\n\n  join: function join(separator) {\n    assertNotInfinite(this.size);\n    separator = separator !== undefined ? '' + separator : ',';\n    var joined = '';\n    var isFirst = true;\n    this.__iterate(function (v) {\n      isFirst ? (isFirst = false) : (joined += separator);\n      joined += v !== null && v !== undefined ? v.toString() : '';\n    });\n    return joined;\n  },\n\n  keys: function keys() {\n    return this.__iterator(ITERATE_KEYS);\n  },\n\n  map: function map(mapper, context) {\n    return reify(this, mapFactory(this, mapper, context));\n  },\n\n  reduce: function reduce$1(reducer, initialReduction, context) {\n    return reduce(\n      this,\n      reducer,\n      initialReduction,\n      context,\n      arguments.length < 2,\n      false\n    );\n  },\n\n  reduceRight: function reduceRight(reducer, initialReduction, context) {\n    return reduce(\n      this,\n      reducer,\n      initialReduction,\n      context,\n      arguments.length < 2,\n      true\n    );\n  },\n\n  reverse: function reverse() {\n    return reify(this, reverseFactory(this, true));\n  },\n\n  slice: function slice(begin, end) {\n    return reify(this, sliceFactory(this, begin, end, true));\n  },\n\n  some: function some(predicate, context) {\n    return !this.every(not(predicate), context);\n  },\n\n  sort: function sort(comparator) {\n    return reify(this, sortFactory(this, comparator));\n  },\n\n  values: function values() {\n    return this.__iterator(ITERATE_VALUES);\n  },\n\n  // ### More sequential methods\n\n  butLast: function butLast() {\n    return this.slice(0, -1);\n  },\n\n  isEmpty: function isEmpty() {\n    return this.size !== undefined ? this.size === 0 : !this.some(function () { return true; });\n  },\n\n  count: function count(predicate, context) {\n    return ensureSize(\n      predicate ? this.toSeq().filter(predicate, context) : this\n    );\n  },\n\n  countBy: function countBy(grouper, context) {\n    return countByFactory(this, grouper, context);\n  },\n\n  equals: function equals(other) {\n    return deepEqual(this, other);\n  },\n\n  entrySeq: function entrySeq() {\n    var collection = this;\n    if (collection._cache) {\n      // We cache as an entries array, so we can just return the cache!\n      return new ArraySeq(collection._cache);\n    }\n    var entriesSequence = collection\n      .toSeq()\n      .map(entryMapper)\n      .toIndexedSeq();\n    entriesSequence.fromEntrySeq = function () { return collection.toSeq(); };\n    return entriesSequence;\n  },\n\n  filterNot: function filterNot(predicate, context) {\n    return this.filter(not(predicate), context);\n  },\n\n  findEntry: function findEntry(predicate, context, notSetValue) {\n    var found = notSetValue;\n    this.__iterate(function (v, k, c) {\n      if (predicate.call(context, v, k, c)) {\n        found = [k, v];\n        return false;\n      }\n    });\n    return found;\n  },\n\n  findKey: function findKey(predicate, context) {\n    var entry = this.findEntry(predicate, context);\n    return entry && entry[0];\n  },\n\n  findLast: function findLast(predicate, context, notSetValue) {\n    return this.toKeyedSeq()\n      .reverse()\n      .find(predicate, context, notSetValue);\n  },\n\n  findLastEntry: function findLastEntry(predicate, context, notSetValue) {\n    return this.toKeyedSeq()\n      .reverse()\n      .findEntry(predicate, context, notSetValue);\n  },\n\n  findLastKey: function findLastKey(predicate, context) {\n    return this.toKeyedSeq()\n      .reverse()\n      .findKey(predicate, context);\n  },\n\n  first: function first(notSetValue) {\n    return this.find(returnTrue, null, notSetValue);\n  },\n\n  flatMap: function flatMap(mapper, context) {\n    return reify(this, flatMapFactory(this, mapper, context));\n  },\n\n  flatten: function flatten(depth) {\n    return reify(this, flattenFactory(this, depth, true));\n  },\n\n  fromEntrySeq: function fromEntrySeq() {\n    return new FromEntriesSequence(this);\n  },\n\n  get: function get(searchKey, notSetValue) {\n    return this.find(function (_, key) { return is(key, searchKey); }, undefined, notSetValue);\n  },\n\n  getIn: getIn$1,\n\n  groupBy: function groupBy(grouper, context) {\n    return groupByFactory(this, grouper, context);\n  },\n\n  has: function has(searchKey) {\n    return this.get(searchKey, NOT_SET) !== NOT_SET;\n  },\n\n  hasIn: hasIn$1,\n\n  isSubset: function isSubset(iter) {\n    iter = typeof iter.includes === 'function' ? iter : Collection(iter);\n    return this.every(function (value) { return iter.includes(value); });\n  },\n\n  isSuperset: function isSuperset(iter) {\n    iter = typeof iter.isSubset === 'function' ? iter : Collection(iter);\n    return iter.isSubset(this);\n  },\n\n  keyOf: function keyOf(searchValue) {\n    return this.findKey(function (value) { return is(value, searchValue); });\n  },\n\n  keySeq: function keySeq() {\n    return this.toSeq()\n      .map(keyMapper)\n      .toIndexedSeq();\n  },\n\n  last: function last(notSetValue) {\n    return this.toSeq()\n      .reverse()\n      .first(notSetValue);\n  },\n\n  lastKeyOf: function lastKeyOf(searchValue) {\n    return this.toKeyedSeq()\n      .reverse()\n      .keyOf(searchValue);\n  },\n\n  max: function max(comparator) {\n    return maxFactory(this, comparator);\n  },\n\n  maxBy: function maxBy(mapper, comparator) {\n    return maxFactory(this, comparator, mapper);\n  },\n\n  min: function min(comparator) {\n    return maxFactory(\n      this,\n      comparator ? neg(comparator) : defaultNegComparator\n    );\n  },\n\n  minBy: function minBy(mapper, comparator) {\n    return maxFactory(\n      this,\n      comparator ? neg(comparator) : defaultNegComparator,\n      mapper\n    );\n  },\n\n  rest: function rest() {\n    return this.slice(1);\n  },\n\n  skip: function skip(amount) {\n    return amount === 0 ? this : this.slice(Math.max(0, amount));\n  },\n\n  skipLast: function skipLast(amount) {\n    return amount === 0 ? this : this.slice(0, -Math.max(0, amount));\n  },\n\n  skipWhile: function skipWhile(predicate, context) {\n    return reify(this, skipWhileFactory(this, predicate, context, true));\n  },\n\n  skipUntil: function skipUntil(predicate, context) {\n    return this.skipWhile(not(predicate), context);\n  },\n\n  sortBy: function sortBy(mapper, comparator) {\n    return reify(this, sortFactory(this, comparator, mapper));\n  },\n\n  take: function take(amount) {\n    return this.slice(0, Math.max(0, amount));\n  },\n\n  takeLast: function takeLast(amount) {\n    return this.slice(-Math.max(0, amount));\n  },\n\n  takeWhile: function takeWhile(predicate, context) {\n    return reify(this, takeWhileFactory(this, predicate, context));\n  },\n\n  takeUntil: function takeUntil(predicate, context) {\n    return this.takeWhile(not(predicate), context);\n  },\n\n  update: function update(fn) {\n    return fn(this);\n  },\n\n  valueSeq: function valueSeq() {\n    return this.toIndexedSeq();\n  },\n\n  // ### Hashable Object\n\n  hashCode: function hashCode() {\n    return this.__hash || (this.__hash = hashCollection(this));\n  },\n\n  // ### Internal\n\n  // abstract __iterate(fn, reverse)\n\n  // abstract __iterator(type, reverse)\n});\n\nvar CollectionPrototype = Collection.prototype;\nCollectionPrototype[IS_COLLECTION_SYMBOL] = true;\nCollectionPrototype[ITERATOR_SYMBOL] = CollectionPrototype.values;\nCollectionPrototype.toJSON = CollectionPrototype.toArray;\nCollectionPrototype.__toStringMapper = quoteString;\nCollectionPrototype.inspect = CollectionPrototype.toSource = function() {\n  return this.toString();\n};\nCollectionPrototype.chain = CollectionPrototype.flatMap;\nCollectionPrototype.contains = CollectionPrototype.includes;\n\nmixin(KeyedCollection, {\n  // ### More sequential methods\n\n  flip: function flip() {\n    return reify(this, flipFactory(this));\n  },\n\n  mapEntries: function mapEntries(mapper, context) {\n    var this$1 = this;\n\n    var iterations = 0;\n    return reify(\n      this,\n      this.toSeq()\n        .map(function (v, k) { return mapper.call(context, [k, v], iterations++, this$1); })\n        .fromEntrySeq()\n    );\n  },\n\n  mapKeys: function mapKeys(mapper, context) {\n    var this$1 = this;\n\n    return reify(\n      this,\n      this.toSeq()\n        .flip()\n        .map(function (k, v) { return mapper.call(context, k, v, this$1); })\n        .flip()\n    );\n  },\n});\n\nvar KeyedCollectionPrototype = KeyedCollection.prototype;\nKeyedCollectionPrototype[IS_KEYED_SYMBOL] = true;\nKeyedCollectionPrototype[ITERATOR_SYMBOL] = CollectionPrototype.entries;\nKeyedCollectionPrototype.toJSON = toObject;\nKeyedCollectionPrototype.__toStringMapper = function (v, k) { return quoteString(k) + ': ' + quoteString(v); };\n\nmixin(IndexedCollection, {\n  // ### Conversion to other types\n\n  toKeyedSeq: function toKeyedSeq() {\n    return new ToKeyedSequence(this, false);\n  },\n\n  // ### ES6 Collection methods (ES6 Array and Map)\n\n  filter: function filter(predicate, context) {\n    return reify(this, filterFactory(this, predicate, context, false));\n  },\n\n  findIndex: function findIndex(predicate, context) {\n    var entry = this.findEntry(predicate, context);\n    return entry ? entry[0] : -1;\n  },\n\n  indexOf: function indexOf(searchValue) {\n    var key = this.keyOf(searchValue);\n    return key === undefined ? -1 : key;\n  },\n\n  lastIndexOf: function lastIndexOf(searchValue) {\n    var key = this.lastKeyOf(searchValue);\n    return key === undefined ? -1 : key;\n  },\n\n  reverse: function reverse() {\n    return reify(this, reverseFactory(this, false));\n  },\n\n  slice: function slice(begin, end) {\n    return reify(this, sliceFactory(this, begin, end, false));\n  },\n\n  splice: function splice(index, removeNum /*, ...values*/) {\n    var numArgs = arguments.length;\n    removeNum = Math.max(removeNum || 0, 0);\n    if (numArgs === 0 || (numArgs === 2 && !removeNum)) {\n      return this;\n    }\n    // If index is negative, it should resolve relative to the size of the\n    // collection. However size may be expensive to compute if not cached, so\n    // only call count() if the number is in fact negative.\n    index = resolveBegin(index, index < 0 ? this.count() : this.size);\n    var spliced = this.slice(0, index);\n    return reify(\n      this,\n      numArgs === 1\n        ? spliced\n        : spliced.concat(arrCopy(arguments, 2), this.slice(index + removeNum))\n    );\n  },\n\n  // ### More collection methods\n\n  findLastIndex: function findLastIndex(predicate, context) {\n    var entry = this.findLastEntry(predicate, context);\n    return entry ? entry[0] : -1;\n  },\n\n  first: function first(notSetValue) {\n    return this.get(0, notSetValue);\n  },\n\n  flatten: function flatten(depth) {\n    return reify(this, flattenFactory(this, depth, false));\n  },\n\n  get: function get(index, notSetValue) {\n    index = wrapIndex(this, index);\n    return index < 0 ||\n      (this.size === Infinity || (this.size !== undefined && index > this.size))\n      ? notSetValue\n      : this.find(function (_, key) { return key === index; }, undefined, notSetValue);\n  },\n\n  has: function has(index) {\n    index = wrapIndex(this, index);\n    return (\n      index >= 0 &&\n      (this.size !== undefined\n        ? this.size === Infinity || index < this.size\n        : this.indexOf(index) !== -1)\n    );\n  },\n\n  interpose: function interpose(separator) {\n    return reify(this, interposeFactory(this, separator));\n  },\n\n  interleave: function interleave(/*...collections*/) {\n    var collections = [this].concat(arrCopy(arguments));\n    var zipped = zipWithFactory(this.toSeq(), IndexedSeq.of, collections);\n    var interleaved = zipped.flatten(true);\n    if (zipped.size) {\n      interleaved.size = zipped.size * collections.length;\n    }\n    return reify(this, interleaved);\n  },\n\n  keySeq: function keySeq() {\n    return Range(0, this.size);\n  },\n\n  last: function last(notSetValue) {\n    return this.get(-1, notSetValue);\n  },\n\n  skipWhile: function skipWhile(predicate, context) {\n    return reify(this, skipWhileFactory(this, predicate, context, false));\n  },\n\n  zip: function zip(/*, ...collections */) {\n    var collections = [this].concat(arrCopy(arguments));\n    return reify(this, zipWithFactory(this, defaultZipper, collections));\n  },\n\n  zipAll: function zipAll(/*, ...collections */) {\n    var collections = [this].concat(arrCopy(arguments));\n    return reify(this, zipWithFactory(this, defaultZipper, collections, true));\n  },\n\n  zipWith: function zipWith(zipper /*, ...collections */) {\n    var collections = arrCopy(arguments);\n    collections[0] = this;\n    return reify(this, zipWithFactory(this, zipper, collections));\n  },\n});\n\nvar IndexedCollectionPrototype = IndexedCollection.prototype;\nIndexedCollectionPrototype[IS_INDEXED_SYMBOL] = true;\nIndexedCollectionPrototype[IS_ORDERED_SYMBOL] = true;\n\nmixin(SetCollection, {\n  // ### ES6 Collection methods (ES6 Array and Map)\n\n  get: function get(value, notSetValue) {\n    return this.has(value) ? value : notSetValue;\n  },\n\n  includes: function includes(value) {\n    return this.has(value);\n  },\n\n  // ### More sequential methods\n\n  keySeq: function keySeq() {\n    return this.valueSeq();\n  },\n});\n\nSetCollection.prototype.has = CollectionPrototype.includes;\nSetCollection.prototype.contains = SetCollection.prototype.includes;\n\n// Mixin subclasses\n\nmixin(KeyedSeq, KeyedCollection.prototype);\nmixin(IndexedSeq, IndexedCollection.prototype);\nmixin(SetSeq, SetCollection.prototype);\n\n// #pragma Helper functions\n\nfunction reduce(collection, reducer, reduction, context, useFirst, reverse) {\n  assertNotInfinite(collection.size);\n  collection.__iterate(function (v, k, c) {\n    if (useFirst) {\n      useFirst = false;\n      reduction = v;\n    } else {\n      reduction = reducer.call(context, reduction, v, k, c);\n    }\n  }, reverse);\n  return reduction;\n}\n\nfunction keyMapper(v, k) {\n  return k;\n}\n\nfunction entryMapper(v, k) {\n  return [k, v];\n}\n\nfunction not(predicate) {\n  return function() {\n    return !predicate.apply(this, arguments);\n  };\n}\n\nfunction neg(predicate) {\n  return function() {\n    return -predicate.apply(this, arguments);\n  };\n}\n\nfunction defaultZipper() {\n  return arrCopy(arguments);\n}\n\nfunction defaultNegComparator(a, b) {\n  return a < b ? 1 : a > b ? -1 : 0;\n}\n\nfunction hashCollection(collection) {\n  if (collection.size === Infinity) {\n    return 0;\n  }\n  var ordered = isOrdered(collection);\n  var keyed = isKeyed(collection);\n  var h = ordered ? 1 : 0;\n  var size = collection.__iterate(\n    keyed\n      ? ordered\n        ? function (v, k) {\n            h = (31 * h + hashMerge(hash(v), hash(k))) | 0;\n          }\n        : function (v, k) {\n            h = (h + hashMerge(hash(v), hash(k))) | 0;\n          }\n      : ordered\n        ? function (v) {\n            h = (31 * h + hash(v)) | 0;\n          }\n        : function (v) {\n            h = (h + hash(v)) | 0;\n          }\n  );\n  return murmurHashOfSize(size, h);\n}\n\nfunction murmurHashOfSize(size, h) {\n  h = imul(h, 0xcc9e2d51);\n  h = imul((h << 15) | (h >>> -15), 0x1b873593);\n  h = imul((h << 13) | (h >>> -13), 5);\n  h = ((h + 0xe6546b64) | 0) ^ size;\n  h = imul(h ^ (h >>> 16), 0x85ebca6b);\n  h = imul(h ^ (h >>> 13), 0xc2b2ae35);\n  h = smi(h ^ (h >>> 16));\n  return h;\n}\n\nfunction hashMerge(a, b) {\n  return (a ^ (b + 0x9e3779b9 + (a << 6) + (a >> 2))) | 0; // int\n}\n\nvar OrderedSet = /*@__PURE__*/(function (Set$$1) {\n  function OrderedSet(value) {\n    return value === null || value === undefined\n      ? emptyOrderedSet()\n      : isOrderedSet(value)\n        ? value\n        : emptyOrderedSet().withMutations(function (set) {\n            var iter = SetCollection(value);\n            assertNotInfinite(iter.size);\n            iter.forEach(function (v) { return set.add(v); });\n          });\n  }\n\n  if ( Set$$1 ) OrderedSet.__proto__ = Set$$1;\n  OrderedSet.prototype = Object.create( Set$$1 && Set$$1.prototype );\n  OrderedSet.prototype.constructor = OrderedSet;\n\n  OrderedSet.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  OrderedSet.fromKeys = function fromKeys (value) {\n    return this(KeyedCollection(value).keySeq());\n  };\n\n  OrderedSet.prototype.toString = function toString () {\n    return this.__toString('OrderedSet {', '}');\n  };\n\n  return OrderedSet;\n}(Set));\n\nOrderedSet.isOrderedSet = isOrderedSet;\n\nvar OrderedSetPrototype = OrderedSet.prototype;\nOrderedSetPrototype[IS_ORDERED_SYMBOL] = true;\nOrderedSetPrototype.zip = IndexedCollectionPrototype.zip;\nOrderedSetPrototype.zipWith = IndexedCollectionPrototype.zipWith;\n\nOrderedSetPrototype.__empty = emptyOrderedSet;\nOrderedSetPrototype.__make = makeOrderedSet;\n\nfunction makeOrderedSet(map, ownerID) {\n  var set = Object.create(OrderedSetPrototype);\n  set.size = map ? map.size : 0;\n  set._map = map;\n  set.__ownerID = ownerID;\n  return set;\n}\n\nvar EMPTY_ORDERED_SET;\nfunction emptyOrderedSet() {\n  return (\n    EMPTY_ORDERED_SET || (EMPTY_ORDERED_SET = makeOrderedSet(emptyOrderedMap()))\n  );\n}\n\nvar Record = function Record(defaultValues, name) {\n  var hasInitialized;\n\n  var RecordType = function Record(values) {\n    var this$1 = this;\n\n    if (values instanceof RecordType) {\n      return values;\n    }\n    if (!(this instanceof RecordType)) {\n      return new RecordType(values);\n    }\n    if (!hasInitialized) {\n      hasInitialized = true;\n      var keys = Object.keys(defaultValues);\n      var indices = (RecordTypePrototype._indices = {});\n      // Deprecated: left to attempt not to break any external code which\n      // relies on a ._name property existing on record instances.\n      // Use Record.getDescriptiveName() instead\n      RecordTypePrototype._name = name;\n      RecordTypePrototype._keys = keys;\n      RecordTypePrototype._defaultValues = defaultValues;\n      for (var i = 0; i < keys.length; i++) {\n        var propName = keys[i];\n        indices[propName] = i;\n        if (RecordTypePrototype[propName]) {\n          /* eslint-disable no-console */\n          typeof console === 'object' &&\n            console.warn &&\n            console.warn(\n              'Cannot define ' +\n                recordName(this) +\n                ' with property \"' +\n                propName +\n                '\" since that property name is part of the Record API.'\n            );\n          /* eslint-enable no-console */\n        } else {\n          setProp(RecordTypePrototype, propName);\n        }\n      }\n    }\n    this.__ownerID = undefined;\n    this._values = List().withMutations(function (l) {\n      l.setSize(this$1._keys.length);\n      KeyedCollection(values).forEach(function (v, k) {\n        l.set(this$1._indices[k], v === this$1._defaultValues[k] ? undefined : v);\n      });\n    });\n  };\n\n  var RecordTypePrototype = (RecordType.prototype = Object.create(\n    RecordPrototype\n  ));\n  RecordTypePrototype.constructor = RecordType;\n\n  if (name) {\n    RecordType.displayName = name;\n  }\n\n  return RecordType;\n};\n\nRecord.prototype.toString = function toString () {\n  var str = recordName(this) + ' { ';\n  var keys = this._keys;\n  var k;\n  for (var i = 0, l = keys.length; i !== l; i++) {\n    k = keys[i];\n    str += (i ? ', ' : '') + k + ': ' + quoteString(this.get(k));\n  }\n  return str + ' }';\n};\n\nRecord.prototype.equals = function equals (other) {\n  return (\n    this === other ||\n    (other &&\n      this._keys === other._keys &&\n      recordSeq(this).equals(recordSeq(other)))\n  );\n};\n\nRecord.prototype.hashCode = function hashCode () {\n  return recordSeq(this).hashCode();\n};\n\n// @pragma Access\n\nRecord.prototype.has = function has (k) {\n  return this._indices.hasOwnProperty(k);\n};\n\nRecord.prototype.get = function get (k, notSetValue) {\n  if (!this.has(k)) {\n    return notSetValue;\n  }\n  var index = this._indices[k];\n  var value = this._values.get(index);\n  return value === undefined ? this._defaultValues[k] : value;\n};\n\n// @pragma Modification\n\nRecord.prototype.set = function set (k, v) {\n  if (this.has(k)) {\n    var newValues = this._values.set(\n      this._indices[k],\n      v === this._defaultValues[k] ? undefined : v\n    );\n    if (newValues !== this._values && !this.__ownerID) {\n      return makeRecord(this, newValues);\n    }\n  }\n  return this;\n};\n\nRecord.prototype.remove = function remove (k) {\n  return this.set(k);\n};\n\nRecord.prototype.clear = function clear () {\n  var newValues = this._values.clear().setSize(this._keys.length);\n  return this.__ownerID ? this : makeRecord(this, newValues);\n};\n\nRecord.prototype.wasAltered = function wasAltered () {\n  return this._values.wasAltered();\n};\n\nRecord.prototype.toSeq = function toSeq () {\n  return recordSeq(this);\n};\n\nRecord.prototype.toJS = function toJS$1 () {\n  return toJS(this);\n};\n\nRecord.prototype.entries = function entries () {\n  return this.__iterator(ITERATE_ENTRIES);\n};\n\nRecord.prototype.__iterator = function __iterator (type, reverse) {\n  return recordSeq(this).__iterator(type, reverse);\n};\n\nRecord.prototype.__iterate = function __iterate (fn, reverse) {\n  return recordSeq(this).__iterate(fn, reverse);\n};\n\nRecord.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n  if (ownerID === this.__ownerID) {\n    return this;\n  }\n  var newValues = this._values.__ensureOwner(ownerID);\n  if (!ownerID) {\n    this.__ownerID = ownerID;\n    this._values = newValues;\n    return this;\n  }\n  return makeRecord(this, newValues, ownerID);\n};\n\nRecord.isRecord = isRecord;\nRecord.getDescriptiveName = recordName;\nvar RecordPrototype = Record.prototype;\nRecordPrototype[IS_RECORD_SYMBOL] = true;\nRecordPrototype[DELETE] = RecordPrototype.remove;\nRecordPrototype.deleteIn = RecordPrototype.removeIn = deleteIn;\nRecordPrototype.getIn = getIn$1;\nRecordPrototype.hasIn = CollectionPrototype.hasIn;\nRecordPrototype.merge = merge;\nRecordPrototype.mergeWith = mergeWith;\nRecordPrototype.mergeIn = mergeIn;\nRecordPrototype.mergeDeep = mergeDeep$1;\nRecordPrototype.mergeDeepWith = mergeDeepWith$1;\nRecordPrototype.mergeDeepIn = mergeDeepIn;\nRecordPrototype.setIn = setIn$1;\nRecordPrototype.update = update$1;\nRecordPrototype.updateIn = updateIn$1;\nRecordPrototype.withMutations = withMutations;\nRecordPrototype.asMutable = asMutable;\nRecordPrototype.asImmutable = asImmutable;\nRecordPrototype[ITERATOR_SYMBOL] = RecordPrototype.entries;\nRecordPrototype.toJSON = RecordPrototype.toObject =\n  CollectionPrototype.toObject;\nRecordPrototype.inspect = RecordPrototype.toSource = function() {\n  return this.toString();\n};\n\nfunction makeRecord(likeRecord, values, ownerID) {\n  var record = Object.create(Object.getPrototypeOf(likeRecord));\n  record._values = values;\n  record.__ownerID = ownerID;\n  return record;\n}\n\nfunction recordName(record) {\n  return record.constructor.displayName || record.constructor.name || 'Record';\n}\n\nfunction recordSeq(record) {\n  return keyedSeqFromValue(record._keys.map(function (k) { return [k, record.get(k)]; }));\n}\n\nfunction setProp(prototype, name) {\n  try {\n    Object.defineProperty(prototype, name, {\n      get: function() {\n        return this.get(name);\n      },\n      set: function(value) {\n        invariant(this.__ownerID, 'Cannot set on an immutable record.');\n        this.set(name, value);\n      },\n    });\n  } catch (error) {\n    // Object.defineProperty failed. Probably IE8.\n  }\n}\n\n/**\n * Returns a lazy Seq of `value` repeated `times` times. When `times` is\n * undefined, returns an infinite sequence of `value`.\n */\nvar Repeat = /*@__PURE__*/(function (IndexedSeq$$1) {\n  function Repeat(value, times) {\n    if (!(this instanceof Repeat)) {\n      return new Repeat(value, times);\n    }\n    this._value = value;\n    this.size = times === undefined ? Infinity : Math.max(0, times);\n    if (this.size === 0) {\n      if (EMPTY_REPEAT) {\n        return EMPTY_REPEAT;\n      }\n      EMPTY_REPEAT = this;\n    }\n  }\n\n  if ( IndexedSeq$$1 ) Repeat.__proto__ = IndexedSeq$$1;\n  Repeat.prototype = Object.create( IndexedSeq$$1 && IndexedSeq$$1.prototype );\n  Repeat.prototype.constructor = Repeat;\n\n  Repeat.prototype.toString = function toString () {\n    if (this.size === 0) {\n      return 'Repeat []';\n    }\n    return 'Repeat [ ' + this._value + ' ' + this.size + ' times ]';\n  };\n\n  Repeat.prototype.get = function get (index, notSetValue) {\n    return this.has(index) ? this._value : notSetValue;\n  };\n\n  Repeat.prototype.includes = function includes (searchValue) {\n    return is(this._value, searchValue);\n  };\n\n  Repeat.prototype.slice = function slice (begin, end) {\n    var size = this.size;\n    return wholeSlice(begin, end, size)\n      ? this\n      : new Repeat(\n          this._value,\n          resolveEnd(end, size) - resolveBegin(begin, size)\n        );\n  };\n\n  Repeat.prototype.reverse = function reverse () {\n    return this;\n  };\n\n  Repeat.prototype.indexOf = function indexOf (searchValue) {\n    if (is(this._value, searchValue)) {\n      return 0;\n    }\n    return -1;\n  };\n\n  Repeat.prototype.lastIndexOf = function lastIndexOf (searchValue) {\n    if (is(this._value, searchValue)) {\n      return this.size;\n    }\n    return -1;\n  };\n\n  Repeat.prototype.__iterate = function __iterate (fn, reverse) {\n    var size = this.size;\n    var i = 0;\n    while (i !== size) {\n      if (fn(this._value, reverse ? size - ++i : i++, this) === false) {\n        break;\n      }\n    }\n    return i;\n  };\n\n  Repeat.prototype.__iterator = function __iterator (type, reverse) {\n    var this$1 = this;\n\n    var size = this.size;\n    var i = 0;\n    return new Iterator(\n      function () { return i === size\n          ? iteratorDone()\n          : iteratorValue(type, reverse ? size - ++i : i++, this$1._value); }\n    );\n  };\n\n  Repeat.prototype.equals = function equals (other) {\n    return other instanceof Repeat\n      ? is(this._value, other._value)\n      : deepEqual(other);\n  };\n\n  return Repeat;\n}(IndexedSeq));\n\nvar EMPTY_REPEAT;\n\nfunction fromJS(value, converter) {\n  return fromJSWith(\n    [],\n    converter || defaultConverter,\n    value,\n    '',\n    converter && converter.length > 2 ? [] : undefined,\n    { '': value }\n  );\n}\n\nfunction fromJSWith(stack, converter, value, key, keyPath, parentValue) {\n  var toSeq = Array.isArray(value)\n    ? IndexedSeq\n    : isPlainObj(value)\n      ? KeyedSeq\n      : null;\n  if (toSeq) {\n    if (~stack.indexOf(value)) {\n      throw new TypeError('Cannot convert circular structure to Immutable');\n    }\n    stack.push(value);\n    keyPath && key !== '' && keyPath.push(key);\n    var converted = converter.call(\n      parentValue,\n      key,\n      toSeq(value).map(function (v, k) { return fromJSWith(stack, converter, v, k, keyPath, value); }\n      ),\n      keyPath && keyPath.slice()\n    );\n    stack.pop();\n    keyPath && keyPath.pop();\n    return converted;\n  }\n  return value;\n}\n\nfunction defaultConverter(k, v) {\n  return isKeyed(v) ? v.toMap() : v.toList();\n}\n\nvar version = \"4.0.0-rc.11\";\n\nvar Immutable = {\n  version: version,\n\n  Collection: Collection,\n  // Note: Iterable is deprecated\n  Iterable: Collection,\n\n  Seq: Seq,\n  Map: Map,\n  OrderedMap: OrderedMap,\n  List: List,\n  Stack: Stack,\n  Set: Set,\n  OrderedSet: OrderedSet,\n\n  Record: Record,\n  Range: Range,\n  Repeat: Repeat,\n\n  is: is,\n  fromJS: fromJS,\n  hash: hash,\n\n  isImmutable: isImmutable,\n  isCollection: isCollection,\n  isKeyed: isKeyed,\n  isIndexed: isIndexed,\n  isAssociative: isAssociative,\n  isOrdered: isOrdered,\n  isValueObject: isValueObject,\n  isSeq: isSeq,\n  isList: isList,\n  isMap: isMap,\n  isOrderedMap: isOrderedMap,\n  isStack: isStack,\n  isSet: isSet,\n  isOrderedSet: isOrderedSet,\n  isRecord: isRecord,\n\n  get: get,\n  getIn: getIn,\n  has: has,\n  hasIn: hasIn,\n  merge: merge$1,\n  mergeDeep: mergeDeep,\n  mergeWith: mergeWith$1,\n  mergeDeepWith: mergeDeepWith,\n  remove: remove,\n  removeIn: removeIn,\n  set: set,\n  setIn: setIn,\n  update: update,\n  updateIn: updateIn,\n};\n\n// Note: Iterable is deprecated\nvar Iterable = Collection;\n\nexport default Immutable;\nexport { version, Collection, Iterable, Seq, Map, OrderedMap, List, Stack, Set, OrderedSet, Record, Range, Repeat, is, fromJS, hash, isImmutable, isCollection, isKeyed, isIndexed, isAssociative, isOrdered, isValueObject, get, getIn, has, hasIn, merge$1 as merge, mergeDeep, mergeWith$1 as mergeWith, mergeDeepWith, remove, removeIn, set, setIn, update, updateIn };\n","import tinycolor from 'tinycolor2';\nimport { writable } from 'svelte/store'\nimport { fromJS } from 'immutable';\n\nlet ui = {\n  borderSize: 2,\n  selectedMenu: -1,\n  selectedColor: 0,\n  cellSize: 60,\n  scrollPos: [0, 0]\n};\n\nconst store = writable(fromJS(ui));\n\nwindow.dataUI = ui;\nexport default store;\n","<script>\n  import { onMount, onDestroy } from 'svelte';\n  import ui from '../../stores/UI';\n\n  export let xCount;\n  export let yCount;\n  export let toggleCell = (x, y) => false;\n  export let onClick = (x, y) => { };\n  export let onMouseDown = (x, y) => { };\n  export let onMouseUp = (x, y) => { };\n  export let onMouseMove = (x, y) => { };\n  export let disabled = false;\n\n  let canvas;\n  let ctx;\n  let borderSize = 2.5;\n  let cellSize = 25;\n  let rect;\n  let resizeObserver = new ResizeObserver(entries => {\n    rect = canvas.getBoundingClientRect();\n  });\n  let dx = 0;\n  let dy = 0;\n  $: {\n    if(ctx) {\n      syncCanvasDimensions(xCount, yCount);\n    }\n  }\n\n  $: {\n    if(ctx) {\n      drawForm(xCount, yCount, disabled);\n    }\n  }\n\n  onMount(() => {\n    ctx = canvas.getContext('2d');\n    resizeObserver.observe(canvas);\n  });\n  \n  onDestroy(() => {\n    resizeObserver.unobserve(canvas);\n  });\n\n  function syncCanvasDimensions(xCount, yCount) {\n      canvas.width = cellSize * xCount + 2.0 * borderSize;\n      canvas.height = cellSize * yCount + 2.0 * borderSize;\n  }\n\n  function onCanvasMouseDown(event) {\n    if(!disabled) {\n      let indices = getIndices(event);\n      onMouseDown(...indices, event);\n    }\n  }\n\n  function onCanvasMouseMove(event) {\n    if(!disabled) {\n      let indices = getIndices(event);\n      onMouseMove(...indices, event);\n    }\n  }\n\n  function onCanvasMouseUp() {\n    if(!disabled) {\n      let indices = getIndices(event);\n      onMouseUp(...indices, event);\n    }\n  }\n\n  function onCanvasClick() {\n    if(!disabled) {\n      let indices = getIndices(event);\n      onClick(...indices, event);\n    }\n  }\n\n  function getIndices(event) {\n    let canvasSize = rect.width;\n    let size = (canvasSize - borderSize) / xCount;\n    let i = Math.floor(event.offsetX / size);\n    let j = Math.floor(event.offsetY / size);\n    return [i, j];\n  }\n\n  function fillBorders(width, height) {\n    ctx.fillRect(\n      0,\n      0,\n      borderSize,\n      height\n    );\n    ctx.fillRect(\n      width,\n      0,\n      borderSize,\n      height\n    );\n    ctx.fillRect(\n      0,\n      0,\n      width,\n      borderSize\n    );\n    ctx.fillRect(\n      0,\n      height,\n      width + borderSize,\n      borderSize\n    );\n  }\n\n  export function drawForm(xCount, yCount, disabled) {\n    ctx.fillStyle = 'white';\n    ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    if(disabled) {\n      ctx.fillStyle = 'gray';\n    } else {\n      ctx.fillStyle = 'black';\n    }\n\n    let cw = ctx.canvas.width;\n    let ch = ctx.canvas.height;\n    let size = (cellSize - borderSize / 4.0);\n    let bluppSize = size / 2.0;\n\n    let width = cellSize * xCount + borderSize;\n    let height = cellSize * yCount + borderSize;\n    fillBorders(width, height);\n\n    for(let i = 1; i < xCount; i++) {\n      ctx.fillRect(i * cellSize + borderSize / 2.0, 0, borderSize, height);\n    }\n    for(let i = 1; i < yCount; i++) {\n      ctx.fillRect(0, i * cellSize + borderSize / 2.0, width, borderSize);\n    }\n\n    let innerCellMargin = 10;\n    for(let i = 0; i < xCount; i++) {\n      for(let j = 0; j < yCount; j++) {\n        if(toggleCell(j, i)) {\n          ctx.fillRect(\n            i * cellSize + innerCellMargin / 2.0 + borderSize,\n            j * cellSize + innerCellMargin / 2.0 + borderSize,\n            cellSize - innerCellMargin,\n            cellSize - innerCellMargin\n          );\n        }\n      }\n    }\n  }\n</script>\n\n<canvas\n  on:click={onCanvasClick}\n  on:pointerup={onCanvasMouseUp}\n  on:pointerdown={onCanvasMouseDown}\n  on:pointermove={onCanvasMouseMove}\n  bind:this={canvas}\n  width=\"1\"\n  height=\"1\"\n  class:disabled={disabled}\n  />\n\n<style>\n  .grid {\n    min-height: 100px;\n    min-width: 100px;\n    height: 100%;\n    width: 100%;\n  }\n\n  canvas {\n    image-rendering: crisp-edges;\n  }\n\n  canvas:not(.disabled) {\n    cursor: pointer;\n  }\n\n\n</style>\n","import tinycolor from 'tinycolor2';\nimport { writable } from 'svelte/store'\nimport { fromJS, List } from 'immutable';\nwindow.fromJS = fromJS;\nwindow.List = List;\nlet draft = {};\nif(window.localStorage.getItem('draft')) {\n  draft = JSON.parse(localStorage.getItem('draft'));\n} else {\n  draft = {\n    treadling: [],\n    threading: [],\n    warpColors: new Array(30).fill(1),\n    weftColors: new Array(30).fill(0),\n    tieup: [\n      [1, 0, 0, 1, 0, 1],\n      [0, 0, 1, 1, 1, 0],\n      [0, 1, 1, 0, 0, 1],\n      [1, 1, 0, 0, 1, 0],\n    ],\n    shaftCount: 4,\n    treadleCount: 6,\n    warpCount: 30,\n    pickCount: 30,\n    yarn: [\n      {\n        name: 'White yarn',\n        color: { r: 0.8, g: 0.8, b: 0.8}\n      },\n      {\n        name: 'Black yarn',\n        color: { r: 0.7, g: 0.0, b: 0.0}\n      }\n    ]\n  };\n\n  for(let i = 0; i < draft.warpCount; i++) {\n    draft.threading.push(i % 4);\n  }\n\n  for(let i = 0; i < draft.pickCount; i++) {\n    draft.treadling.push((i) % 6);\n  }\n}\n  /*\n    */\n\n\nconst store = writable(fromJS(draft));\nexport default store;\n\nlet d;\nstore.subscribe(value => {\n  let v = value.toJS();\n  window.data = v;\n  d = v;\n  localStorage.setItem('draft', JSON.stringify(v));\n});\n\n//window.draft = draft;\nwindow.update = function() {\n  localStorage.setItem('draft', JSON.stringify(d));\n}\n\nwindow.drop = function() {\n  localStorage.removeItem('draft');\n}\n","import { fromJS } from 'immutable';\nclass DraftUtil {\n  constructor() {\n  }\n\n  updateShaftOrTreadleCounts(draft, shaftCount, treadleCount) {\n    let tieup = new Array(shaftCount);\n    for(let i = 0; i < shaftCount; i++) {\n      tieup[i] = new Array(treadleCount);\n    }\n\n    for(let i = 0; i < shaftCount; i++) {\n      for(let j = 0; j < treadleCount; j++) {\n        if(draft.getIn(['tieup', i]) !== undefined && draft.getIn(['tieup', i, j]) !== undefined) {\n          tieup[i][j] = draft.getIn(['tieup', i, j]);\n        } else {\n          tieup[i][j] = 0;\n        }\n      }\n    }\n\n    return draft.withMutations((d) => {\n      d.set('shaftCount', shaftCount);\n      d.set('treadleCount', treadleCount);\n      d.set('tieup', fromJS(tieup));\n      return d;\n    });\n  }\n\n  updateWarpCount(draft, warpCount) {\n    let amountToAdd = warpCount - draft.get('warpCount');\n    if(amountToAdd === 0) {\n      return draft;\n    }\n    return draft.withMutations((d) => {\n      d.set('warpCount', warpCount);\n      let warpColors = this.changeArraySize(d.get('warpColors'), amountToAdd);\n      d.set('warpColors', warpColors);\n      let threading = this.changeArraySize(d.get('threading'), amountToAdd);\n      d.set('threading', threading);\n    });\n  }\n\n  updatePickCount(draft, pickCount) {\n    let amountToAdd = pickCount - draft.get('pickCount');\n    if(amountToAdd === 0) {\n      return draft;\n    }\n\n    return draft.withMutations((d) => {\n      d.set('pickCount', pickCount);\n      let weftColors = this.changeArraySize(d.get('weftColors'), amountToAdd);\n      d.set('weftColors', weftColors);\n    });\n  }\n\n  applyPattern(draft, pattern, warpOrWeft, mirroredRepeat) {\n    let newDraft = draft.toJS();\n    let length = warpOrWeft === 'warp' ? newDraft.warpCount : newDraft.pickCount;\n\n    if(warpOrWeft === 'warp') {\n      pattern.reverse();\n    }\n    let array = new Array(length);\n    let offset = 0;\n    for(let i = 0; i < length; i++) {\n      if(mirroredRepeat && (i !== 0 && (i % (pattern.length - 1)) === 0)) {\n        offset += 1;\n      }\n      let j = i + offset;\n      let v = j % (pattern.length);\n      if(mirroredRepeat && (Math.floor(j / pattern.length) % 2) === 1) {\n        v = pattern.length - (j % pattern.length) - 1;\n      }\n      array[i] = pattern[v];\n    }\n\n    if(warpOrWeft === 'warp') {\n      newDraft.threading = array;\n    } else {\n      newDraft.treadling = array;\n    }\n\n    return fromJS(newDraft);\n  }\n\n  changeArraySize(array, amountToAdd, defaultValue = 0) {\n    let newArray = array.withMutations(wc => {\n      if(amountToAdd > 0) {\n        for(let i = 0; i < amountToAdd; i++) {\n          wc.push(defaultValue);\n        }\n      } else {\n        wc = wc.splice(wc.size - amountToAdd);\n      }\n    });\n    return newArray;\n  }\n}\n\nexport default new DraftUtil();\n","<script>\n  import draft from '../../../stores/Draft';\n  import ui from '../../../stores/UI';\n  import DraftUtil from '../../../util/DraftUtil';\n\n  let shaftCount = $draft.get('shaftCount');\n  let treadleCount = $draft.get('treadleCount');\n  let warpCount = $draft.get('warpCount');\n  let pickCount = $draft.get('pickCount');\n  function submit(event) {\n    event.preventDefault();\n    let newDraft = $draft;\n    let changed = false;\n    if(\n      $draft.get('shaftCount') !== shaftCount ||\n      $draft.get('treadleCount') !== treadleCount) {\n      changed = true;\n      newDraft = DraftUtil.updateShaftOrTreadleCounts(newDraft, shaftCount, treadleCount);\n    }\n    if($draft.get('warpCount') !== warpCount) {\n      changed = true;\n      newDraft = DraftUtil.updateWarpCount(newDraft, warpCount);\n    }\n    if($draft.get('pickCount') !== pickCount) {\n      changed = true;\n      newDraft = DraftUtil.updatePickCount(newDraft, pickCount);\n    }\n    if(changed) {\n      draft.update((value) => newDraft);\n    }\n    ui.update(u => u.set('selectedMenu', -1));\n  }\n</script>\n<form on:submit={submit}>\n  <div>\n    <label for=\"shaft-count\">Number of shafts</label>\n    <input type=\"number\" id=\"shaft-count\" bind:value={shaftCount}>\n  </div>\n  <div>\n    <label for=\"treadle-count\">Treadles</label>\n    <input type=\"number\" id=\"treadle-count\" bind:value={treadleCount}>\n  </div>\n  <div>\n    <label for=\"warp-count\">Number of warp threads</label>\n    <input type=\"number\" id=\"warp-count\" bind:value={warpCount}>\n  </div>\n  <div>\n    <label for=\"weft-count\">Number of weft threads</label>\n    <input type=\"number\" id=\"weft-count\" bind:value={pickCount}>\n  </div>\n\n  <button class=\"submit\">Save</button>\n</form>\n<style>\n  form {\n    display: flex;\n    flex-direction: column;\n  }\n\n  form > * {\n    margin: 8px 4px;\n  }\n\n  .tieup input {\n    max-width: 4em;\n  }\n\n</style>\n","export default class VertexArray {\n  constructor(gl, vertexData, indexData, attrs, drawMode = gl.TRIANGLES) {\n    this.gl = gl;\n    if (vertexData instanceof Float32Array) {\n      this.vertexData = vertexData;\n    } else {\n      this.vertexData = new Float32Array(vertexData);\n    }\n\n    if (indexData instanceof Uint16Array) {\n      this.indexData = indexData;\n    } else {\n      this.indexData = new Uint16Array(indexData);\n    }\n\n    this.drawMode = drawMode;\n    this.attrs = attrs;\n    this.initialize(gl);\n  }\n\n  initialize(gl) {\n    this.vertBuf = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.vertBuf);\n    gl.bufferData(gl.ARRAY_BUFFER, this.vertexData, gl.STATIC_DRAW);\n    if (this.indexData !== undefined) {\n      this.indexBuf = gl.createBuffer();\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuf);\n      gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indexData, gl.STATIC_DRAW);\n    }\n    this.isInitialized = true;\n  }\n\n  bind() {\n    if (this.isInitialized !== true) {\n      console.error('Tried to use uninitialized VertexArray!');\n      return;\n    }\n    const attrSum = this.attrs.reduce((a, b) => a + b);\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertBuf);\n    if (this.indexData !== undefined) {\n      this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.indexBuf);\n    }\n    let pointer = 0;\n    for (let i = 0; i < this.attrs.length; i++) {\n      this.gl.vertexAttribPointer(i, this.attrs[i], this.gl.FLOAT, false, attrSum * 4, pointer * 4);\n      this.gl.enableVertexAttribArray(i);\n      pointer += this.attrs[i];\n    }\n  }\n\n  draw() {\n    this.gl.drawElements(this.drawMode, this.indexData.length, this.gl.UNSIGNED_SHORT, 0);\n  }\n\n  unbind() {\n    for (let i = 0; i < this.attrs.length; i++) {\n      this.gl.disableVertexAttribArray(i);\n    }\n    if (this.indexData !== undefined) {\n      this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, null);\n    }\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, null);\n  }\n\n  free() {\n    this.gl.deleteBuffer(this.vertBuf);\n    if(this.indexBuf) {\n      this.gl.deleteBuffer(this.indexBuf);\n    }\n  }\n}\n","export default class Shader {\n  constructor(src) {\n    this.vert = src.vert;\n    this.frag = src.frag;\n    this.attributes = this.getAttributes(src.vert);\n  }\n\n  getAttributes(source) {\n    return this.vert\n      .split('\\n')\n      .filter(row => row.includes('attribute'))\n      .map(a => a.substring(a.lastIndexOf(' ') + 1, a.length - 1));\n  }\n\n  bind() {\n    if(!this.compiled) {\n      throw new Error(\"Can't bind uncompiled shader\");\n    }\n    this.gl.useProgram(this.program);\n  }\n\n  compile(gl) {\n    this.gl = gl;\n    if (!this.compiled) {\n      this.uniforms = {};\n      const vertProgram = this.compileShader(this.gl, this.vert, gl.VERTEX_SHADER);\n      const fragProgram = this.compileShader(this.gl, this.frag, gl.FRAGMENT_SHADER);\n      this.program = this.createShaderProgram(this.gl, vertProgram, fragProgram);\n      this.compiled = true;\n    }\n  }\n\n  isCompiled() {\n    return this.compiled;\n  }\n\n  compileShader(gl, src, type) {\n    const shader = gl.createShader(type);\n    gl.shaderSource(shader, src);\n    gl.compileShader(shader);\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n      console.error(`Error when compiling shader: ${gl.getShaderInfoLog(shader)}`);\n      console.groupCollapsed('Shader source');\n      console.log(src);\n      console.groupEnd();\n      return null;\n    }\n    return shader;\n  }\n\n  createShaderProgram(gl, vertexShader, fragmentShader) {\n    const shaderProgram = gl.createProgram();\n    gl.attachShader(shaderProgram, vertexShader);\n    gl.attachShader(shaderProgram, fragmentShader);\n\n    for(let i = 0; i < this.attributes.length; i++) {\n      gl.bindAttribLocation(shaderProgram, i, this.attributes[i]);\n    }\n\n    gl.linkProgram(shaderProgram);\n    if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n      let info = gl.getProgramInfoLog(shaderProgram);\n      console.error(`Error compiling shader: \\n\\n${info}`);\n    }\n    gl.useProgram(shaderProgram);\n    return shaderProgram;\n  }\n\n\n  getUniformHandle(uniformName) {\n    if(this.uniforms[uniformName] === undefined) {\n      let handle = this.gl.getUniformLocation(this.program, uniformName);\n      this.uniforms[uniformName] = handle;\n    }\n    return this.uniforms[uniformName];\n  }\n\n  setBool(uniformName, value) {\n    let uniformHandle = this.getUniformHandle(uniformName);\n    this.gl.uniform1i(uniformHandle, value?1:0);\n  }\n\n  setInt(uniformName, value) {\n    let uniformHandle = this.getUniformHandle(uniformName);\n    this.gl.uniform1i(uniformHandle, value);\n  }\n\n  setFloat(uniformName, value) {\n    let uniformHandle = this.getUniformHandle(uniformName);\n    this.gl.uniform1f(uniformHandle, value);\n  }\n\n  setVec2(uniformName, value) {\n    let uniformHandle = this.getUniformHandle(uniformName);\n    this.gl.uniform2fv(uniformHandle, value);\n  }\n\n  setVec3(uniformName, value) {\n    let uniformHandle = this.getUniformHandle(uniformName);\n    this.gl.uniform3fv(uniformHandle, value);\n  }\n\n  setVec4(uniformName, value) {\n    let uniformHandle = this.getUniformHandle(uniformName);\n    this.gl.uniform4fv(uniformHandle, value);\n  }\n\n  setMat3(uniformName, value) {\n    let uniformHandle = this.getUniformHandle(uniformName);\n    this.gl.uniformMatrix3fv(uniformHandle, false, value);\n  }\n\n  setMat4(uniformName, value) {\n    let uniformHandle = this.getUniformHandle(uniformName);\n    this.gl.uniformMatrix4fv(uniformHandle, false, value);\n  }\n\n  setSampler2D(uniformName, value) {\n    this.setInt(uniformName, value);\n  }\n\n  unbind() {\n    this.gl.useProgram(null);\n  }\n}\n\n\n","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to translate\r\n * @param {ReadonlyVec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {ReadonlyQuat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {ReadonlyMat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {ReadonlyVec3} a The first operand\r\n * @param {ReadonlyVec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {ReadonlyVec4} result the receiving vector\r\n * @param {ReadonlyVec4} U the first vector\r\n * @param {ReadonlyVec4} V the second vector\r\n * @param {ReadonlyVec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\r\n * Quaternion\r\n * @module quat\r\n */\n\n/**\r\n * Creates a new identity quat\r\n *\r\n * @returns {quat} a new quaternion\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Set a quat to the identity quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Sets a quat from the given angle and rotation axis,\r\n * then returns it.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyVec3} axis the axis around which to rotate\r\n * @param {Number} rad the angle in radians\r\n * @returns {quat} out\r\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\r\n * Gets the rotation axis and angle for a given\r\n *  quaternion. If a quaternion is created with\r\n *  setAxisAngle, this method will return the same\r\n *  values as providied in the original parameter list\r\n *  OR functionally equivalent values.\r\n * Example: The quaternion formed by axis [0, 0, 1] and\r\n *  angle -90 is the same as the quaternion formed by\r\n *  [0, 0, 1] and 270. This method favors the latter.\r\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\r\n * @param  {ReadonlyQuat} q     Quaternion to be decomposed\r\n * @return {Number}     Angle, in radians, of the rotation\r\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\r\n * Gets the angular distance between two unit quaternions\r\n *\r\n * @param  {ReadonlyQuat} a     Origin unit quaternion\r\n * @param  {ReadonlyQuat} b     Destination unit quaternion\r\n * @return {Number}     Angle, in radians, between the two quaternions\r\n */\n\nexport function getAngle(a, b) {\n  var dotproduct = dot(a, b);\n  return Math.acos(2 * dotproduct * dotproduct - 1);\n}\n/**\r\n * Multiplies two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @returns {quat} out\r\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the X axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {ReadonlyQuat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Y axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {ReadonlyQuat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Z axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {ReadonlyQuat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\r\n * Calculates the W component of a quat from the X, Y, and Z components.\r\n * Assumes that quaternion is 1 unit in length.\r\n * Any existing W component will be ignored.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate W component of\r\n * @returns {quat} out\r\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\r\n * Calculate the exponential of a unit quaternion.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate the exponential of\r\n * @returns {quat} out\r\n */\n\nexport function exp(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var et = Math.exp(w);\n  var s = r > 0 ? et * Math.sin(r) / r : 0;\n  out[0] = x * s;\n  out[1] = y * s;\n  out[2] = z * s;\n  out[3] = et * Math.cos(r);\n  return out;\n}\n/**\r\n * Calculate the natural logarithm of a unit quaternion.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate the exponential of\r\n * @returns {quat} out\r\n */\n\nexport function ln(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var t = r > 0 ? Math.atan2(r, w) / r : 0;\n  out[0] = x * t;\n  out[1] = y * t;\n  out[2] = z * t;\n  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n  return out;\n}\n/**\r\n * Calculate the scalar power of a unit quaternion.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate the exponential of\r\n * @param {Number} b amount to scale the quaternion by\r\n * @returns {quat} out\r\n */\n\nexport function pow(out, a, b) {\n  ln(out, a);\n  scale(out, out, b);\n  exp(out, out);\n  return out;\n}\n/**\r\n * Performs a spherical linear interpolation between two quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\r\n * Generates a random unit quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\r\n * Calculates the inverse of a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate inverse of\r\n * @returns {quat} out\r\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\r\n * Calculates the conjugate of a quat\r\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate conjugate of\r\n * @returns {quat} out\r\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a quaternion from the given 3x3 rotation matrix.\r\n *\r\n * NOTE: The resultant quaternion is not normalized, so you should be sure\r\n * to renormalize the quaternion yourself where necessary.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyMat3} m rotation matrix\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\r\n * Creates a quaternion from the given euler angle x, y, z.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {x} Angle to rotate around X axis in degrees.\r\n * @param {y} Angle to rotate around Y axis in degrees.\r\n * @param {z} Angle to rotate around Z axis in degrees.\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\r\n * Returns a string representation of a quatenion\r\n *\r\n * @param {ReadonlyQuat} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"quat(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\r\n * Creates a new quat initialized with values from an existing quaternion\r\n *\r\n * @param {ReadonlyQuat} a quaternion to clone\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var clone = vec4.clone;\n/**\r\n * Creates a new quat initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var fromValues = vec4.fromValues;\n/**\r\n * Copy the values from one quat to another\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the source quaternion\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var copy = vec4.copy;\n/**\r\n * Set the components of a quat to the given values\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var set = vec4.set;\n/**\r\n * Adds two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var add = vec4.add;\n/**\r\n * Alias for {@link quat.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Scales a quat by a scalar number\r\n *\r\n * @param {quat} out the receiving vector\r\n * @param {ReadonlyQuat} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var scale = vec4.scale;\n/**\r\n * Calculates the dot product of two quat's\r\n *\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @returns {Number} dot product of a and b\r\n * @function\r\n */\n\nexport var dot = vec4.dot;\n/**\r\n * Performs a linear interpolation between two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var lerp = vec4.lerp;\n/**\r\n * Calculates the length of a quat\r\n *\r\n * @param {ReadonlyQuat} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport var length = vec4.length;\n/**\r\n * Alias for {@link quat.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Calculates the squared length of a quat\r\n *\r\n * @param {ReadonlyQuat} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n * @function\r\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\r\n * Alias for {@link quat.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Normalize a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quaternion to normalize\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var normalize = vec4.normalize;\n/**\r\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyQuat} a The first quaternion.\r\n * @param {ReadonlyQuat} b The second quaternion.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\r\n * Returns whether or not the quaternions have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyQuat} a The first vector.\r\n * @param {ReadonlyQuat} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var equals = vec4.equals;\n/**\r\n * Sets a quaternion to represent the shortest rotation from one\r\n * vector to another.\r\n *\r\n * Both vectors are assumed to be unit length.\r\n *\r\n * @param {quat} out the receiving quaternion.\r\n * @param {ReadonlyVec3} a the initial vector\r\n * @param {ReadonlyVec3} b the destination vector\r\n * @returns {quat} out\r\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\r\n * Performs a spherical linear interpolation with two control points\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @param {ReadonlyQuat} c the third operand\r\n * @param {ReadonlyQuat} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\r\n * Sets the specified quaternion with values corresponding to the given\r\n * axes. Each axis is a vec3 and is expected to be unit length and\r\n * perpendicular to all other specified axes.\r\n *\r\n * @param {ReadonlyVec3} view  the vector representing the viewing direction\r\n * @param {ReadonlyVec3} right the vector representing the local \"right\" direction\r\n * @param {ReadonlyVec3} up    the vector representing the local \"up\" direction\r\n * @returns {quat} out\r\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\r\n * 3x3 Matrix\r\n * @module mat3\r\n */\n\n/**\r\n * Creates a new identity mat3\r\n *\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the upper-left 3x3 values into the given mat3.\r\n *\r\n * @param {mat3} out the receiving 3x3 matrix\r\n * @param {ReadonlyMat4} a   the source 4x4 matrix\r\n * @returns {mat3} out\r\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\r\n * Creates a new mat3 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat3} a matrix to clone\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Copy the values from one mat3 to another\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Create a new mat3 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} A new mat3\r\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set the components of a mat3 to the given values\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} out\r\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set a mat3 to the identity matrix\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @returns {mat3} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat3\r\n *\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\r\n * Multiplies two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\r\n * Translate a mat3 by the given vector\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to translate\r\n * @param {ReadonlyVec2} v vector to translate by\r\n * @returns {mat3} out\r\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\r\n * Rotates a mat3 by the given angle\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\r\n * Scales the mat3 by the dimensions in the given vec2\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to rotate\r\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\r\n * @returns {mat3} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.translate(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyVec2} v Translation vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.rotate(dest, dest, rad);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.scale(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyVec2} v Scaling vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the values from a mat2d into a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the matrix to copy\r\n * @returns {mat3} out\r\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Calculates a 3x3 matrix from the given quaternion\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat3} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\r\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\r\n *\r\n * @returns {mat3} out\r\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\r\n * Generates a 2D projection matrix with the given bounds\r\n *\r\n * @param {mat3} out mat3 frustum matrix will be written into\r\n * @param {number} width Width of your gl context\r\n * @param {number} height Height of gl context\r\n * @returns {mat3} out\r\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat3\r\n *\r\n * @param {ReadonlyMat3} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat3\r\n *\r\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\r\n * Adds two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\r\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat3} out the receiving vector\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat3} a The first matrix.\r\n * @param {ReadonlyMat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat3} a The first matrix.\r\n * @param {ReadonlyMat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\r\n * Alias for {@link mat3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\n\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the source vector\r\n * @returns {vec2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to floor\r\n * @returns {vec2} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to round\r\n * @returns {vec2} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to negate\r\n * @returns {vec2} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to invert\r\n * @returns {vec2} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {ReadonlyVec2} a The vec2 point to rotate\r\n * @param {ReadonlyVec2} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec2} out\r\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {ReadonlyVec2} a The first operand\r\n * @param {ReadonlyVec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","<script context=\"module\">\n  import { mat4, vec2, vec3, quat } from 'gl-matrix';\n  import tinycolor from 'tinycolor2';\n\n  import { getAngle } from './util';\n  import colorWheelVert from './colorWheel.vert';\n  import colorWheelFrag from './colorWheel.frag';\n  import satValVert from './satVal.vert';\n  import satValFrag from './satVal.frag';\n  import solidFrag from './solid.frag';\n  import solidVert from './solid.vert';\n  import VertexArray from '../WeaveDisplay/gfx/VertexArray';\n  import Shader from '../WeaveDisplay/gfx/shader/Shader';\n  import Ring from './Ring';\n\n  let canvas = document.createElement(\"canvas\");\n  let root = document.body;\n  canvas.setAttribute('class', 'color-input-canvas');\n  canvas.width = 256;\n  canvas.height = 256;\n  let gl = canvas.getContext('webgl', {\n    premultipliedAlpha: true,\n    preserveDrawingBuffer: true\n  });\n  gl.clearColor(0, 0, 0, 1.0);\n\n  let listener;\n  let state = {};\n  let mouseDown = false;\n  let colorWheelToggle = false;\n  let triangleToggle = false;\n\n  let colorWheelShader = new Shader({ frag: colorWheelFrag, vert: colorWheelVert });\n  colorWheelShader.compile(gl);\n  let satValShader = new Shader({ frag: satValFrag, vert: satValVert });\n  satValShader.compile(gl);\n  let solidShader = new Shader({ frag: solidFrag, vert: solidVert });\n  solidShader.compile(gl);\n  \n  let quad = new VertexArray(\n    gl,\n    [\n      1, 1,\n      -1, 1,\n      -1, -1,\n      1, -1\n    ],\n    [1, 0, 2,\n      2, 0, 3],\n    [2]\n  );\n  let t = [\n    [0, 1.0],\n    [0.8660253882408142, -0.5],\n    [-0.8660253882408142, -0.5]\n  ];\n  let triP = t;\n  let triPT = [\n    vec2.create(),\n    vec2.create(),\n    vec2.create()\n  ];\n  let uv = [\n    [1.0, 0.0, 0.0],\n    [0.0, 1.0, 0.0],\n    [0.0, 0.0, 1.0],\n  ];\n  let triUV = uv;\n  let triangle = new VertexArray(\n    gl,\n    [\n      t[0][0], t[0][1], uv[0][0], uv[0][1], uv[0][2],\n      t[1][0], t[1][1], uv[1][0], uv[1][1], uv[1][2],\n      t[2][0], t[2][1], uv[2][0], uv[2][1], uv[2][2],\n    ],\n    [1, 0, 2],\n    [2, 3]\n  );\n  let ring = new Ring(gl, 24, 0.6);\n  let triangleModel = mat4.create();\n\n\n  function onHexInputChange(event) {\n    let str = event.target.value;\n    let color = tinycolor(`#${str}`);\n    if(str.length === 6 && color.isValid()) {\n      let hsv = color.toHsv();\n      updateColor(\n        hsv.h / 360,\n        hsv.s,\n        hsv.v\n      );\n    }\n  }\n\n  function onCanvasMouseDown(event) {\n    event.preventDefault();\n    root.addEventListener('mousemove', onCanvasMouseMove);\n    mouseDown = true;\n    let rect = canvas.getBoundingClientRect();\n    let coords = [\n      2.0 * ((event.clientX - rect.x) / rect.width - 0.5),\n      2.0 * (-(event.clientY - rect.y) / rect.height + 0.5)\n    ];\n    let { hue, saturation, value } = handleInput(coords);\n    updateColor(hue, saturation, value);\n  }\n\n\n  function onCanvasMouseMove(event) {\n    event.preventDefault();\n    if(mouseDown === true && event.buttons === 0) {\n      mouseDown = false;\n      colorWheelToggle = false;\n      triangleToggle = false;\n      root.removeEventListener('mousemove', onCanvasMouseMove);\n      return;\n    }\n    if(mouseDown) {\n      let rect = canvas.getBoundingClientRect();\n      let coords = [\n        2.0 * ((event.clientX - rect.x) / rect.width - 0.5),\n        2.0 * (-(event.clientY - rect.y) / rect.height + 0.5)\n      ];\n      let { hue, saturation, value } = handleInput(coords);\n      updateColor(hue, saturation, value);\n    }\n  }\n\n  function onCanvasMouseUp(event) {\n    event.preventDefault();\n    root.removeEventListener('mousemove', onCanvasMouseMove);\n    mouseDown = false;\n    colorWheelToggle = false;\n    triangleToggle = false;\n  }\n\n  function handleInput(coords) {\n    let { hue, saturation, value } = state;\n    let positionInWheel = getPositionInWheel(coords);\n    if(positionInWheel !== undefined) {\n      hue = positionInWheel;\n      colorWheelToggle = true;\n    }\n    let positionInTriangle = getPositionInTriangle(coords);\n    if (positionInTriangle !== undefined) {\n      let pos = positionInTriangle;\n      if(pos.w + pos.v > 1.0 || pos.v < 0 || pos.w < 0) {\n        pos = getClosestPointToTriangle(pos, coords);\n      }\n\n      value = Math.max(0, Math.min(1.0, 1.0 - pos.w));\n      saturation = Math.max(0, Math.min(1.0, pos.u / value));\n      // Still some weirdness when value is around zero\n      if(Number.isNaN(saturation)) {\n        saturation = 0.0;\n      }\n      triangleToggle = true;\n    }\n    return { hue, saturation, value };\n  }\n\n  function updateColor(hue, saturation, value, fireEvent = true) {\n    let newColor = tinycolor.fromRatio({\n      h: hue,\n      s: saturation,\n      v: value\n    });\n    setState({\n      hue,\n      saturation,\n      value,\n    });\n    let rgb = newColor.toRgb();\n    let ratio = {\n      r: rgb.r / 255,\n      g: rgb.g / 255,\n      b: rgb.b / 255,\n      a: rgb.a\n    };\n\n    if(fireEvent) {\n      emit(ratio);\n    }\n  }\n\n  function getPositionInTriangle(coord) {\n    let a = triPT[0];\n\n    let b = vec2.sub(vec2.create(), triPT[1], a);\n    let c = vec2.sub(vec2.create(), triPT[2], a);\n    let p = vec2.sub(vec2.create(), coord, a);\n\n    let d = b[0]*c[1] - c[0]*b[1];\n    let u = (p[0]*(b[1]-c[1]) + p[1]*(c[0]-b[0]) + b[0]*c[1] - c[0]*b[1])/d;\n    let v = (p[0]*c[1] - p[1]*c[0])/d;\n    let w = (p[1]*b[0]-p[0]*b[1])/d;\n\n    if(!colorWheelToggle && (triangleToggle || (u > 0.0 && u < 1.0 &&\n      v > 0.0 && v < 1.0 &&\n      w > 0.0 && w < 1.0))) {\n      return {\n        u, v, w\n      };\n    }\n    return undefined;\n  }\n\n  function getTriangleCoordinateFromColor(color) {\n    let v = 1.0 - color.value;\n    let s = (1.0 - color.saturation) * color.value;\n\n    let a = triPT[0];\n    let b = triPT[1];\n    let c = triPT[2];\n\n    let v1 = vec2.sub(vec2.create(), b, a);\n    let v2 = vec2.sub(vec2.create(), c, a);\n\n    let r1 = vec2.mul(vec2.create(), v1, [s, s]);\n    let r2 = vec2.mul(vec2.create(), v2, [v, v]);\n    let res = vec2.add(vec2.create(), r1, r2);\n    vec2.add(res, res, a);\n    return res;\n  }\n\n  function getClosestPointToTriangle(pos, coords) {\n    let from;\n    let to;\n    if(pos.w + pos.v > 1.0) {\n      from = triPT[1];\n      to = triPT[2];\n    } else if(pos.v < 0) {\n      from = triPT[0];\n      to = triPT[2];\n    } else if(pos.w < 0) {\n      from = triPT[0];\n      to = triPT[1];\n    }\n    let line = vec2.sub(vec2.create(), from, to);\n    let len = vec2.len(line);\n\n    vec2.normalize(line, line);\n\n    let v = vec2.sub(vec2.create(), coords, to);\n    let d = vec2.dot(v, line);\n    d = Math.max(0, Math.min(len, d));\n    let res = vec2.scaleAndAdd(vec2.create(), to, line, d);\n    return getPositionInTriangle(res);\n  }\n\n  function getPositionInWheel(p) {\n    let center = [0, 0];\n    let dist = vec2.distance(p, center);\n    if(!triangleToggle && (colorWheelToggle || dist > 0.8 && dist < 1.0)) {\n      return getAngle([1, 0], p) / (2.0 * Math.PI);\n    }\n    return undefined;\n  }\n\n  function render() {\n    let color = tinycolor.fromRatio({\n      h: state.hue,\n      s: state.saturation,\n      v: state.value\n    });\n\n    gl.clear(gl.COLOR_BUFFER_BIT);\n    quad.bind();\n\n    let resolution = [\n      canvas.getAttribute('width'),\n      canvas.getAttribute('height')\n    ];\n    colorWheelShader.bind();\n    colorWheelShader.setVec2('resolution', resolution);\n    quad.draw();\n    quad.unbind();\n    colorWheelShader.unbind();\n\n    satValShader.bind();\n    triangle.bind();\n\n    triangleModel = mat4.create();\n    let rot = state.hue * Math.PI * 2.0 - Math.PI/2.0;\n    let hueRot = quat.setAxisAngle(\n      quat.create(),\n      [0, 0, 1],\n      rot\n    );\n    mat4.fromRotationTranslationScale(\n      triangleModel,\n      hueRot,\n      vec3.create(),\n      [0.8, 0.8, 0.8]\n    );\n    vec2.transformMat4(triPT[0], triP[0], triangleModel);\n    vec2.transformMat4(triPT[1], triP[1], triangleModel);\n    vec2.transformMat4(triPT[2], triP[2], triangleModel);\n\n    let mvp2 = mat4.create();\n    mat4.translate(mvp2, mvp2, [0.5, 0.5, 0.0]);\n    mat4.rotate(mvp2, mvp2, rot, [0, 0, 1.0]);\n    mat4.scale(mvp2, mvp2, [0.8, 0.8, 0.8]);\n\n    satValShader.setMat4('mvp', triangleModel);\n    satValShader.setFloat('hue', state.hue);\n    triangle.draw();\n    triangle.unbind();\n    satValShader.unbind();\n\n    solidShader.bind();\n    ring.bind();\n    let pos = getTriangleCoordinateFromColor(state);\n    let svMarkerColor = color.isLight()? [0.0, 0.0, 0.0, 1.0] : [1.0, 1.0, 1.0, 1.0];\n\n    solidShader.setVec4('color', svMarkerColor);\n    solidShader.setMat4('mvp', mat4.fromRotationTranslationScale(\n      mat4.create(),\n      quat.create(),\n      [pos[0], pos[1], 0],\n      [0.03, 0.03, 1.0])\n    );\n\n    ring.draw();\n    ring.unbind();\n\n    let hue = tinycolor.fromRatio({\n      h: state.hue,\n      s: 1.0,\n      v: 1.0\n    });\n    let hueMarkerColor = hue.isLight()? [0.0, 0.0, 0.0, 1.0] : [1.0, 1.0, 1.0, 1.0];\n    let hueMarkerMatrix = mat4.create();\n    let quatMat = mat4.fromQuat(mat4.create(), hueRot);\n    mat4.multiply(hueMarkerMatrix, hueMarkerMatrix, quatMat);\n    mat4.translate(hueMarkerMatrix, hueMarkerMatrix, [0, 0.9, 0]);\n    mat4.scale(hueMarkerMatrix, hueMarkerMatrix, [0.015, 0.1, 1.0]);\n    quad.bind();\n    solidShader.setVec4('color', hueMarkerColor);\n    solidShader.setMat4('mvp', hueMarkerMatrix);\n    quad.draw();\n    quad.unbind();\n    solidShader.unbind();\n  }\n\n  function setColor(color) {\n    let c = tinycolor.fromRatio(color);\n    let hsv = c.toHsv();\n    updateColor(\n      hsv.h / 360,\n      hsv.s,\n      hsv.v,\n      false\n    );\n  }\n\n  function emit(color) {\n    listener(color);\n  }\n\n  function setState(newState) {\n    state = newState;\n    render();\n  }\n\n    canvas.addEventListener('mousedown', onCanvasMouseDown);\n    canvas.addEventListener('mouseup', onCanvasMouseUp);\n\n</script>\n<script>\n  import { onMount,onDestroy } from 'svelte';\n  export let value;\n  export let onChange = () => {};\n  export let onBlur = () => {};\n  export let x;\n  export let y;\n\n  let realX;\n  let realY;\n  $: {\n    if(elm !== undefined) {\n      let rect = elm.parentElement.getBoundingClientRect();\n      if((x + rect.width) > window.innerWidth) {\n        realX = x - rect.width - 10;\n      } else {\n        realX = x - rect.width / 2.0;\n      }\n      if((y + rect.height) > window.innerHeight) {\n        realY = y - rect.height - 10;\n      } else {\n        realY = y;\n      }\n    }\n  }\n\n  let elm;\n  let beforeElm;\n\n  let color = tinycolor.fromRatio(value);\n  let hsv = color.toHsv();\n  let hexString = color.toHex();\n  let state = {\n    hue: hsv.h / 360,\n    value: hsv.v,\n    saturation: hsv.s,\n  };\n  let c2;\n\n  setState(state);\n\n  function canvasColorChange(inColor) {\n    color = tinycolor.fromRatio(inColor);\n    hexString = color.toHex();\n    onChange(inColor);\n  }\n\n  onMount(() => {\n    elm.insertBefore(canvas, beforeElm);\n    listener = canvasColorChange;\n    render(state);\n  });\n\n  function bodyMouseMove(event) {\n    let rect = elm.getBoundingClientRect();\n    let centerX = rect.x + (rect.width / 2);\n    let centerY = rect.y + (rect.height / 2);\n    let distToCenter = vec2.sub(vec2.create(), [event.clientX, event.clientY], [centerX, centerY]);\n    if(Math.abs(distToCenter[0]) > 220 || Math.abs(distToCenter[1]) > 220) {\n      onBlur();\n    }\n  }\n\n  function bodyMouseDown(event) {\n    let container = elm.parentElement;\n    if(!container.contains(event.target)) {\n      onBlur();\n    }\n  }\n\n</script>\n<svelte:body on:mousemove={bodyMouseMove} on:mousedown={bodyMouseDown} />\n<div class=\"color-picker-container\" style={`left: ${realX}px; top: ${realY}px`}>\n  <div class=\"color-picker\" bind:this={elm}>\n    <div\n      bind:this={beforeElm}\n      class=\"color-input-color\"\n      style=\"{`background-color: #${hexString}`}\"\n      >\n      <input\n        type=\"text\"\n        spellCheck=\"false\"\n        maxLength=\"6\"\n        style={`color: ${(color.isLight() ? 'black' : 'white')}`}\n        value={hexString}\n        on:input={onHexInputChange}\n        on:paste={onHexInputChange}\n        />\n    </div>\n  </div>\n</div>\n<style>\n  :global(.color-input-canvas) {\n    margin: auto;\n    display: flex;\n  }\n\n  .color-picker .color-input-color {\n    margin: 0.2em;\n    margin-top: 0.5em;\n    border-radius: 4px;\n  }\n\n  .color-picker .color-input-color input {\n    background: none;\n    width: 100%;\n    text-align: center;\n    font-size: 14pt;\n    margin: 0;\n  }\n\n  .color-picker-container {\n    position: absolute;\n    padding: 12px;\n    background-color: var(--color-2);\n    border: 1px solid var(--color-4);\n  }\n\n</style>\n","import VertexArray from '../WeaveDisplay/gfx/VertexArray';\nimport Geometry from '../WeaveDisplay/gfx/geometry/Geometry';\n\nfunction generateGeometry(gl, numPoints, innerRadius) {\n  let points = [0, 0, 0];\n  let indices = [];\n  for(let i = 0; i < (numPoints + 1) * 2; i++) {\n    let rad = (Math.PI / numPoints) * i;\n    let justify = [\n      ((1.0 - innerRadius) / 2) * Math.sin(rad),\n      (1.0 - innerRadius) / 2 * Math.cos(rad)\n    ];\n\n    if(i % 2 === 0) {\n      points.push(Math.sin(rad) + justify[0]);\n      points.push(Math.cos(rad) + justify[1]);\n    } else {\n      points.push(Math.sin(rad) * innerRadius + justify[0]);\n      points.push(Math.cos(rad) * innerRadius + justify[1]);\n    }\n    points.push(0);\n  }\n\n  for(let i = 0; i < numPoints; i++) {\n    [3, 2, 1, 3, 4, 2]\n      .map(n => n + i*2)\n      .forEach(n => indices.push(n));\n  }\n  return new VertexArray(gl, points, indices, [3], gl.TRIANGLES);\n}\n\nexport default class Ring extends Geometry {\n  constructor(gl, points = 6, innerRadius = 0.5) {\n    super();\n    this.points = points;\n    this.geometry = generateGeometry(gl, points, innerRadius);\n  }\n}\n","export default class Geometry {\n  bind(gl) {\n    this.geometry.bind(gl);\n  }\n\n  unbind(gl) {\n    this.geometry.bind(gl);\n  }\n\n  draw(gl) {\n    this.geometry.draw(gl);\n  }\n}\n","import { vec2 } from 'gl-matrix';\n\nexport function getAngle(v1, v2) {\n  let v1n = vec2.normalize(vec2.create(), v1);\n  let v2n = vec2.normalize(vec2.create(), v2);\n  let dot = vec2.dot(v1n, v2n);\n  let det = v1n[0]*v2n[1] - v1n[1]*v2n[0];\n  let rad = Math.atan2(det, dot);\n  if(rad < 0) {\n    rad += 2*Math.PI;\n  }\n  return rad;\n}\n\n","<script>\n  import tinycolor from 'tinycolor2';\n  import { fromJS } from 'immutable';\n  import draft from '../../../stores/Draft';\n  import ui from '../../../stores/UI';\n  import ColorPicker from '../../ColorPicker/ColorPicker.svelte';\n\n  import add from 'icons/add.svg';\n\n  let colors;\n  $: {\n    colors = $draft.get('yarn').map(y => y.get('color')).toJS().map(c => tinycolor.fromRatio(c));\n  }\n  let color = {r: 1.0, g: 0.0, b: 0.0};\n\n  let newYarnName = \"\";\n  let newYarnColor = color;\n  let yarnUnderModification = 0;\n\n  let colorPickerVisible = false;\n  let colorPickerX;\n  let colorPickerY;\n\n  $: selectedYarn = $draft.getIn(['yarn', yarnUnderModification]).toJS();\n  $: selectedColor = tinycolor.fromRatio(selectedYarn.color);\n\n  function focus(elm){\n    elm.focus()\n  }\n\n  function createNewYarn(event) {\n    event.preventDefault();\n    draft.update((value) =>\n      value.update('yarn', y =>\n        y.push(fromJS({ name: 'Yarn', color: { r: 1.0, g: 1.0, b: 1.0 } }))));\n    yarnUnderModification = $draft.get('yarn').size - 1;\n  }\n\n  function selectYarnForModification(event, i) {\n    yarnUnderModification = i;\n    if(i !== $draft.get('yarn').size) {\n      newYarnColor = $draft.getIn(['yarn', i, 'color']).toJS();\n    }\n  }\n\n  function maybeCancel(event) {\n    if(event.target === settingsElm) {\n      yarnUnderModification = -1;\n      event.stopPropagation();\n    }\n  }\n\n  function updateYarn(event, index, yarn) {\n    event.preventDefault();\n    draft.update(d => d.updateIn(['yarn', index], y => fromJS({\n      name: yarn.name,\n      color: fromJS(newYarnColor)\n    })));\n    yarnUnderModification = -1;\n  }\n\n  function changeName(newName, yarnId) {\n    draft.update(d => d.setIn(['yarn', yarnId, 'name'], newName));\n  }\n\n  function changeColor(newColor, yarnId) {\n    draft.update(d => d.setIn(['yarn', yarnId, 'color'], fromJS(newColor)));\n  }\n\n  function deleteColor(index) {\n    draft.update((value) => {\n      return value.update('yarn', list => list.splice(index, 1));\n    });\n    yarnUnderModification = index - 1;\n  }\n\n  function showColorPicker(event) {\n    event.preventDefault();\n    colorPickerVisible = true;\n    colorPickerX = event.clientX;\n    colorPickerY = event.clientY;\n  }\n\n</script>\n<div class=\"yarn-settings\">\n  <div class=\"container\">\n    <div class=\"add-or-remove\">\n      <button class=\"add\" on:click={createNewYarn}>+</button>\n      <button class=\"remove\" on:click={() => deleteColor(yarnUnderModification)}>-</button>\n    </div>\n    <div class=\"yarns\">\n      {#each $draft.get('yarn').toJS() as yarn, i}\n        <button\n          class:selected={yarnUnderModification === i}\n          class=\"yarn\"\n          on:click={(e) => selectYarnForModification(e, i)}>\n          <div class=\"color\" style={`background-color: ${colors[i].toHexString()};`}></div> \n          <div class=\"name\">{yarn.name}</div>\n        </button>\n      {/each}\n    </div>\n  </div>\n  <div class=\"controls\">\n    <fieldset>\n      <label for=\"newYarnName\">Name</label>\n      <input type=\"text\" id=\"newYarnName\" value={selectedYarn.name} on:input={(e) => changeName(e.target.value, yarnUnderModification)} use:focus />\n    </fieldset>\n    <fieldset>\n      <label for=\"newYarnColor\">Color</label>\n      <button class=\"yarn-color-change\" style={`background-color: ${selectedColor.toHexString()};`} on:click={showColorPicker}></button>\n    </fieldset>\n  </div>\n</div>\n{#if colorPickerVisible === true}\n  <ColorPicker onChange={(value) => changeColor(value, yarnUnderModification)} value={selectedYarn.color} x={colorPickerX} y={colorPickerY} onBlur={() => colorPickerVisible = false}/>\n{/if}\n<style>\n  .container {\n    display: flex;\n    align-items: start;\n  }\n\n  .add-or-remove {\n    margin-right: 5px;\n    text-align: center;\n    background-color: var(--color-2);\n    padding: 4px;\n    color: white;\n    border-radius: 4px;\n    border: 1px solid #535353;\n\n    display: flex;\n    flex-direction: column;\n  }\n\n  .add-or-remove button {\n    color: var(--color-1);\n    background: none;\n    border: none;\n    margin: 0;\n    padding: 0;\n  }\n\n  .yarn {\n    background: none;\n    border: none;\n\n    display: flex;\n    color: var(--color-1);\n    margin: 4px;\n    padding: 4px 0;\n    border-radius: 4px;\n  }\n\n  .yarn.selected {\n    color: var(--color-2);\n    background-color: var(--color-1);\n  }\n\n  .yarn:not(:first-child):before {\n  }\n\n  .name {\n    margin-left: 4px;\n  }\n\n  .color {\n    margin-left: 4px;\n    width: 1em;\n    border: 1px solid var(--color-2);\n  }\n\n  .yarns {\n    background-color: var(--color-2);\n    min-width: 10em;\n    border-radius: 4px;\n    border: 1px solid #535353;\n\n    display: flex;\n    flex-direction: column;\n    flex-grow: 1;\n  }\n\n  .yarn-color-change {\n    width: 100%;\n    margin: 0;\n    padding: 8px;\n    border-radius: 4px;\n    border: 1px solid var(--color-2);\n  }\n\n  .controls input {\n    margin: 0;\n    padding: 8px;\n  }\n\n</style>\n","export function line(x0, y0, x1, y1) {\n  let points = [];\n\n  let dx = Math.abs(x1 - x0);\n  let sx = x0 < x1 ? 1 : -1;\n  let dy = -Math.abs(y1 - y0);\n  let sy = y0 < y1 ? 1 : -1;\n  let err = dx + dy;\n  while(true) {\n    points.push([x0, y0]);\n    if(x0 === x1 && y0 === y1) {\n      break;\n    }\n    let e2 = 2 * err;\n    if(e2 >= dy) {\n      err += dy;\n      x0 += sx;\n    }\n    if(e2 <= dx) {\n      err += dx;\n      y0 += sy;\n    }\n  }\n  return points;\n}\n\n","<script>\n  import draft from '../../../stores/Draft';\n  import draftUtil from '../../../util/DraftUtil';\n  import ui from '../../../stores/UI';\n  import Grid from '../../Grid/Grid.svelte';\n  import gridIcon from 'icons/grid.svg';\n  import { line } from '../../../util/MathUtil';\n\n  let prevWarpOrWeft;\n\n  let grid;\n  let xCount = $draft.get('treadleCount');\n  let yCount = $draft.get('shaftCount');\n  let mirroredRepeat = true;\n  let cellData = new Array(xCount);\n  cellData = [0,1,2,3];\n  let warpOrWeft = 'warp';\n\n  let isDragging = false;\n  let fromPos = undefined;\n  let linePoints = [];\n\n  $: {\n    if(warpOrWeft !== prevWarpOrWeft) {\n      let temp = xCount;\n      xCount = yCount;\n      yCount = temp;\n      prevWarpOrWeft = warpOrWeft;\n    }\n  }\n\n\n  function increment() {\n    if(warpOrWeft === 'warp') {\n      xCount++;\n    } else if(warpOrWeft === 'weft') {\n      yCount++;\n    }\n  }\n\n  function decrement() {\n    if(warpOrWeft === 'warp') {\n      xCount--;\n    } else if(warpOrWeft === 'weft') {\n      yCount--;\n    }\n  }\n\n  function apply() {\n    let newPattern = draftUtil.applyPattern($draft, cellData, warpOrWeft, mirroredRepeat);\n    draft.update(value => newPattern);\n    $ui.selectedMenu = -1;\n  }\n\n  function onGridClick(i, j) {\n    if(isDragging) {\n      return;\n    }\n    if(warpOrWeft === 'warp') {\n      cellData[i] = j;\n    } else if(warpOrWeft === 'weft') {\n      cellData[j] = i;\n    }\n    grid.drawForm(xCount, yCount, false);\n  }\n\n  function onGridMouseDown(i, j, event) {\n    fromPos = [i, j]\n    linePoints = [[i, j]];\n  }\n\n  function onGridMouseMove(i, j, event) {\n    if(event.buttons === 0) {\n      fromPos = undefined;\n      isDragging = false;\n      return;\n    }\n    if((event.buttons & 1) && ((event.movementX !== 0) || (event.movementY !== 0))) {\n      isDragging = true;\n    }\n    let lp = line(...fromPos, i, j);\n    linePoints = [];\n    lp.forEach(p => {\n      if(warpOrWeft === 'weft') {\n        linePoints[p[1]] = p[0];\n      } else if(warpOrWeft === 'warp') {\n        linePoints[p[0]] = p[1];\n      }\n    });\n    linePoints = addArrays(linePoints, cellData);\n    grid.drawForm(xCount, yCount, false);\n  }\n\n  function onGridMouseUp(i, j, event) {\n    if(isDragging) {\n      cellData = addArrays(linePoints, cellData);\n      fromPos = undefined;\n      linePoints = undefined;\n      isDragging = false;\n      grid.drawForm(xCount, yCount, false);\n    }\n  }\n\n  function addArrays(left, right) {\n    let ret = [...right];\n    for(let i = 0; i < left.length; i++) {\n      if(left[i] !== undefined) {\n        ret[i] = left[i];\n      }\n    }\n    return ret;\n  }\n\n  function toggleCell(i, j) {\n    let x, y;\n    if(warpOrWeft === 'warp') {\n      x = j;\n      y = i;\n    } else if(warpOrWeft === 'weft') {\n      x = i;\n      y = j;\n    }\n\n    if(isDragging) {\n      return linePoints[x] === y;\n    } else {\n      return cellData[x] === y;\n    }\n  }\n\n</script>\n<div class=\"pattern-fill\">\n  <div class=\"button-group\">\n    <div class=\"warp\">\n      <input\n        type=\"radio\"\n              id=\"warp\"\n              name=\"warp-or-weft\"\n              value=\"warp\"\n              class:notActive={warpOrWeft === undefined}\n              bind:group={warpOrWeft}>\n      <label for=\"warp\">Warp {@html gridIcon}</label>\n    </div>\n    <div class=\"weft\">\n      <input\n        type=\"radio\"\n              id=\"weft\"\n              name=\"warp-or-weft\"\n              value=\"weft\"\n              bind:group={warpOrWeft}>\n      <label for=\"weft\">Weft {@html gridIcon}</label>\n    </div>\n  </div>\n  {#if warpOrWeft !== undefined}\n    <div class={\"canvas \" + warpOrWeft}>\n      <Grid\n        bind:this={grid}\n        xCount={xCount}\n        yCount={yCount}\n        toggleCell={toggleCell}\n        onClick={onGridClick}\n        onMouseDown={onGridMouseDown}\n        onMouseUp={onGridMouseUp}\n        onMouseMove={onGridMouseMove}\n        disabled={warpOrWeft === undefined}\n        />\n        <button on:click={decrement}>-</button>\n        <button on:click={increment}>+</button>\n    </div>\n    <div class=\"controls\">\n      <fieldset>\n        <label for=\"mirrored-repeat\">Mirrored repeat</label>\n        <input type=\"checkbox\" bind:checked={mirroredRepeat} name=\"mirrored-repeat\" id=\"mirrored-repeat\" />\n      </fieldset>\n    </div>\n    <button on:click={apply}>Apply</button>\n  {/if}\n</div>\n<style>\n  .pattern-fill {\n    display: flex;\n    flex-direction: column;\n  }\n\n  .button-group :global(svg) {\n    width: 50px;\n    stroke: var(--color-1);\n    fill: var(--color-1);\n  }\n\n  .button-group {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    margin: 12px 0px;\n  }\n\n  .button-group input {\n    display: none;\n  }\n\n  .button-group label {\n    padding: 4px;\n    height: 50px;\n    cursor: pointer;\n    border: 3px solid var(--color-2);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: var(--color-2);\n    color: var(--color-1);\n  }\n\n  .button-group input:checked + label {\n    background-color: var(--color-1);\n    color: var(--color-2);\n  }\n\n  .button-group input:checked + label :global(svg) {\n    stroke: var(--color-2);\n    fill: var(--color-2);\n  }\n\n  .button-group div {\n    border-radius: 8px;\n    flex-grow: 1;\n    text-align: center;\n    cursor: pointer;\n    background-color: white;\n  }\n\n  .button-group div:first-child label {\n    border-radius: 8px 0 0 8px;\n    border-right: 2px solid rgba(0, 0, 0, 0.2);\n  }\n\n  .button-group div:last-child label {\n    border-left: 0;\n    border-radius: 0 8px 8px 0;\n  }\n\n  .weft :global(svg) {\n    transform: rotateZ(90deg);\n  }\n\n  .warp label {\n    flex-direction: column;\n  }\n\n  .canvas {\n    display: flex;\n  }\n\n  .canvas button {\n    margin: 0;\n    background-color: gray;\n    border: 1px solid black;\n    min-width: 30px;\n    min-height: 30px;\n  }\n\n  .canvas.weft {\n    flex-direction: column;\n  }\n\n  .canvas.warp {\n    flex-direction: row;\n  }\n\n  .canvas :global(canvas) {\n    flex-grow: 1;\n  }\n\n</style>\n","<script>\n  import { onMount } from 'svelte';\n  import { Router, Link, Route, link } from 'svelte-navigator';\n  import HelpIcon from 'icons/help.svg';\n  import BackIcon from 'icons/back.svg';\n  import ScarfIcon from 'icons/scarf.svg'\n  import YarnIcon from 'icons/yarn.svg'\n  import PatternBucket from 'icons/pattern-bucket.svg'\n\n  import ui from '../../stores/UI';\n  import WeaveSettings from './pages/WeaveSettings.svelte';\n  import YarnSettings from './pages/YarnSettings.svelte';\n  import PatternFill from './pages/PatternFill.svelte';\n\n  let items = [\n    {\n      icon: ScarfIcon,\n      title: 'Weave settings',\n      component: WeaveSettings\n    },\n    {\n      icon: YarnIcon,\n      title: 'Yarns',\n      component: YarnSettings\n    },\n    {\n      icon: PatternBucket,\n      title: 'Fill with pattern',\n      component: PatternFill,\n    },\n  ];\n  let sidebarWidth;\n  let sidebar;\n  onMount(() => {\n    sidebarWidth = sidebar.getBoundingClientRect().width;\n  });\n\n  function selectMenu(index) {\n    ui.update(u => u.update('selectedMenu', s => s === index ? -1 : index));\n  }\n</script>\n\n<Router primary={false}>\n  <div class=\"sidebar-container\">\n    <div class=\"sidebar\" bind:this={sidebar} >\n      {#each items as item, i}\n        <button class=\"icon-button\" on:click={() => selectMenu(i)}>\n      <div class={\"icon\"}>\n            {@html item.icon}\n          </div>\n        </button>\n      {/each}\n\n      <div class=\"help\">\n        <Route path=\"/\">\n          <a href=\"weaver/about\" use:link>\n            <div class=\"icon\">\n              {@html HelpIcon}\n            </div>\n          </a>\n        </Route>\n        <Route path=\"about\">\n        <a class=\"help\" href=\"/\" use:link>\n          <div class=\"icon\">\n            {@html BackIcon}\n          </div>\n        </a>\n        </Route>\n      </div>\n\n    </div>\n\n    {#if $ui.get('selectedMenu') !== -1}\n      <div class=\"settings-sidebar\" style={`left: ${sidebarWidth}px`}>\n        <div class=\"settings\">\n          <svelte:component this={items[$ui.get('selectedMenu')].component} />\n        </div>\n        <div class=\"overlay\" on:click={() => selectMenu(-1)}></div>\n      </div>\n    {/if}\n  </div>\n</Router>\n\n<style>\n  .icon {\n    fill: var(--color-1);\n    stroke: var(--color-1);\n    width: 50px;\n    height: 50px;\n  }\n\n  .icon-button {\n    background-color: var(--color-2);\n    border-radius: 4px;\n    border: 1px black;\n  }\n\n  .sidebar-container {\n    display: flex;\n    z-index: 10;\n  }\n\n  .sidebar {\n    width: 50px;\n    background-color: #40362A;\n    padding: 10px 20px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  .sidebar > * {\n    margin: 10px;\n  }\n\n  .help {\n    display: flex;\n    flex-direction: column-reverse;\n    flex-grow: 1;\n  }\n\n  .settings-sidebar {\n    max-height: 100vh;\n    overflow: auto;\n  }\n\n  .settings {\n    background-color: var(--color-5);\n    padding: 20px;\n    border-left: none;\n    border: 1px solid var(--color-4);\n  }\n\n  .overlay {\n    background-color: rgba(0.0, 0.0, 0.0, 0.4);\n    flex-grow: 1;\n  }\n\n  .pattern-bucket {\n  }\n\n</style>\n","import solidFrag from './glsl/solid.frag';\nimport weaveFrag from './glsl/weave.frag';\nimport weaveVert from './glsl/weave.vert';\nimport textureFrag from './glsl/textureShader.frag';\nimport gridFrag from './glsl/grid.frag';\nimport tieupFrag from './glsl/tieup.frag';\nimport colorRowFrag from './glsl/colorRow.frag';\nimport genUV2D from './glsl/genUV2D.vert';\nimport Shader from './Shader';\n\nfunction buildShader(name) {\n  switch(name) {\n    case 'texture': return new Shader({ frag: textureFrag, vert: genUV2D });\n    case 'solid': return new Shader({ frag: solidFrag, vert: genUV2D });\n    case 'weave': return new Shader({ frag: weaveFrag, vert: genUV2D });\n    case 'grid': return new Shader({ frag: gridFrag, vert: genUV2D });\n    case 'tieup': return new Shader({ frag: tieupFrag, vert: genUV2D });\n    case 'colorRow': return new Shader({ frag: colorRowFrag, vert: genUV2D });\n    default: return undefined;\n  }\n}\n\nexport default class ShaderBuilder {\n  constructor(gl) {\n    this.gl = gl;\n    this.shaderCache = {};\n  }\n\n  getShader(shaderName) {\n    let shader = this.shaderCache[shaderName];\n    if(shader === undefined) {\n      shader = buildShader(shaderName);\n      if(shader === undefined) {\n        throw new Error(`Unknown shader name ${shaderName}`);\n      }\n      shader.compile(this.gl);\n      this.shaderCache[shaderName] = shader;\n    }\n    return shader;\n  }\n}\n","export default class Texture {\n  constructor(gl, width, height, data) {\n    this.gl = gl;\n    if(width === undefined || height === undefined) {\n      throw new Error(\"Undefined width/height of texture\")\n    }\n    this.width = width;\n    this.height = height;\n\n\n    if (data instanceof Uint8Array) {\n      this.color = data;\n    } else {\n      this.color = new Uint8Array(data.length * 4);\n      for(let i = 0; i < data.length; i++) {\n        let d = data[i];\n        let n = i * 4;\n        this.color[n + 0] = d[0] * 255;\n        this.color[n + 1] = d[1] * 255;\n        this.color[n + 2] = d[2] * 255;\n        this.color[n + 3] = d[3] * 255;\n      }\n    }\n\n    this.compile(this.gl);\n  }\n\n  compile() {\n    this.texture = this.gl.createTexture();\n\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.texture);\n    this.gl.texImage2D(this.gl.TEXTURE_2D,\n      0,\n      this.gl.RGBA,\n      this.width,\n      this.height,\n      0,\n      this.gl.RGBA,\n      this.gl.UNSIGNED_BYTE,\n      this.color);\n    this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.NEAREST);\n    this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.NEAREST);\n  this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE);\n  this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, null);\n  }\n\n  delete() {\n    this.gl.deleteTexture(this.texture);\n  }\n\n  bind(unit) {\n    this.gl.activeTexture(this.gl.TEXTURE0 + unit);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.texture);\n  }\n\n  setColor(x, y, color) {\n    this.setColorArea(x, y, 1, 1, color);\n  }\n\n  setColorArea(x, y, width, height, color) {\n    this.color = new Uint8Array([\n      color[0] * 255,\n      color[1] * 255,\n      color[2] * 255,\n      color[3] * 255\n    ]);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.texture);\n    this.gl.texSubImage2D(\n      this.gl.TEXTURE_2D,\n      0,\n      x,\n      y,\n      width,\n      height,\n      this.gl.RGBA,\n      this.gl.UNSIGNED_BYTE,\n      this.color);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, null);\n  }\n\n  unbind() {\n    this.gl.bindTexture(this.gl.TEXTURE_2D, null);\n  }\n}\n","import VertexArray from '../VertexArray';\nimport Texture from '../Texture';\nimport { line } from '../../../../util/MathUtil';\nimport { fromJS } from 'immutable';\n\nexport default class RendererEventTarget {\n  clickListeners = [];\n  pointerMoveListeners = [];\n  pointerUpListeners = [];\n  pointerDownListeners = [];\n\n  constructor(gl, shaders) {\n    this.gl = gl;\n    this.solidShader = shaders.getShader('solid');\n    this.centerQuad = new VertexArray(this.gl, [\n      -0.5, 0.5,\n      0.5, 0.5,\n      0.5, -0.5,\n      -0.5, -0.5,\n    ], [\n      1, 0, 2,\n      2, 0, 3\n    ], [2]);\n    this.quad = new VertexArray(this.gl, [\n      0.0, 1.0,\n      1.0, 1.0,\n      1.0, 0.0,\n      0.0, 0.0\n    ], [\n      1, 0, 2,\n      2, 0, 3\n    ], [2]);\n  }\n\n  isWithinGrid(pos) {\n    let { cellSize, xCount, yCount } = this.values;\n\n    let w = this.gl.canvas.width;\n    let h = this.gl.canvas.height;\n\n    let x = (w - event.offsetX) / w * 2.0;\n    let y = (h - event.offsetY) / h * 2.0;\n    let gridX = (this.rendererPos[0]) * (cellSize / w);\n    let gridY = (this.rendererPos[1]) * (cellSize / h);\n    let gridW = (xCount * cellSize) / w;\n    let gridH = (yCount * cellSize) / h;\n    return (\n      x > gridX &&\n      y > gridY &&\n      x < (gridX + gridW) &&\n      y < (gridY + gridH)\n    );\n  }\n\n  getCellAtPos(pos) {\n    let { cellSize, xCount, yCount, scrollPos, warpCount, pickCount } = this.values;\n    let scrollX = this.scrollX ? 1.0 : 0.0;\n    let scrollY = this.scrollY ? 1.0 : 0.0;\n    let w = this.gl.canvas.width;\n    let h = this.gl.canvas.height;\n    let xOffset = scrollX * (scrollPos.get(0) / cellSize);\n    let yOffset = scrollY * (scrollPos.get(1) / cellSize);\n    let cellX = Math.floor((w - pos[0]) / (cellSize / 2.0) + xOffset);\n    let cellY = Math.floor((h - pos[1]) / (cellSize / 2.0) + yOffset);\n    let i = cellX - this.rendererPos[0];\n    let j = cellY - this.rendererPos[1];\n    return [i, j];\n  }\n\n  getCellsBetweenPoints(from, to) {\n    let fromCell = this.getCellAtPos(from);\n    let toCell = this.getCellAtPos(to);\n    let linePoints = line(fromCell[0], fromCell[1], toCell[0], toCell[1]);\n    let {xCount, yCount} = this.values;\n    return linePoints.filter(p => \n      p[0] >= 0 && p[0] < xCount &&\n      p[1] >= 0 && p[1] < yCount\n    );\n  }\n\n}\n","import VertexArray from '../VertexArray';\nimport { mat4, quat } from 'gl-matrix';\nimport Texture from '../Texture';\nimport RendererEventTarget from './RendererEventTarget';\n\nexport class TieupRenderer extends RendererEventTarget {\n  constructor(gl, shaders, toggleFunction = () => false, eventListeners = {}, settings = {innerCellMargin: 15}) {\n    super(gl, shaders);\n    this.shader = shaders.getShader('tieup')\n    this.mvp = mat4.create();\n\n    this.settings = settings;\n\n    this.initialView = mat4.create();\n    mat4.scale(this.initialView, this.initialView, [\n        -1.0,\n        1.0,\n        1.0\n      ]);\n    mat4.translate(this.initialView, this.initialView, [\n      -1.0,\n      -1.0,\n      0.0\n      ]);\n    this.view = mat4.create();\n    this.mvp = mat4.create();\n  }\n\n  renderPoints(points) {\n    this.render();\n    let {\n      xCount,\n      yCount,\n      cellSize,\n      scrollPos\n    } = this.values;\n    this.solidShader.bind();\n    this.centerQuad.bind();\n    let w = this.gl.canvas.width;\n    let h = this.gl.canvas.height;\n    let cw = cellSize / w;\n    let ch = cellSize / h;\n    let scrollX = this.scrollX ? 1.0 : 0.0;\n    let scrollY = this.scrollY ? 1.0 : 0.0;\n\n\n    let mvp = mat4.identity(this.mvp);\n    let view = mat4.translate(mat4.identity(this.view), this.initialView, [\n        (this.rendererPos[0]) * cw,\n        (this.rendererPos[1]) * ch,\n        0.0\n    ]);\n    mat4.translate(view, view, \n      [\n        cw/2.0,\n        ch/2.0,\n        1.0\n      ]\n    );\n    mat4.scale(view, view, \n      [\n        cw,\n        ch,\n        1.0\n      ]\n    );\n    let minorSize = Math.min(xCount, yCount);\n    for(let i = 0; i < xCount; i++) {\n      for(let j = 0; j < yCount; j++) {\n        if(points.some(p => p[0] === i && p[1] === j)) {\n          this.solidShader.setVec4('color', [1.0, 0.0, 0.0, 1.0]);\n        } else {\n          continue;\n        }\n        mat4.translate(mvp, view, [ i, j, 0.0 ]);\n        mat4.scale(mvp, mvp, [ 0.80, 0.80, 1.0 ]);\n        this.solidShader.setMat4('mvp', mvp);\n        this.centerQuad.draw();\n      }\n    }\n    this.centerQuad.unbind()\n    this.solidShader.unbind();\n  }\n\n\n  handleEvent(event) {\n    let { cellSize, xCount, yCount } = this.values;\n    let w = this.gl.canvas.width;\n    let h = this.gl.canvas.height;\n    let x = (w - event.offsetX) / w * 2.0;\n    let y = (h - event.offsetY) / h * 2.0;\n\n    let gridX = (this.rendererPos[0]) * (cellSize / w);\n    let gridY = (this.rendererPos[1]) * (cellSize / h);\n    let gridW = (xCount * cellSize) / w;\n    let gridH = (yCount * cellSize) / h;\n    if(\n      x > gridX &&\n      y > gridY &&\n      x < (gridX + gridW) &&\n      y < (gridY + gridH)\n    ) {\n      let i = Math.floor(((x - gridX) / gridW) * xCount);\n      let j = Math.floor(((y - gridY) / gridH) * yCount);\n      return [i, j, event]\n    }\n    return undefined;\n  }\n\n  updateValues(values) {\n    this.values = values;\n  }\n\n  setRendererPosition(scrollPos) {\n    this.rendererPos = scrollPos;\n  }\n\n  setCellToggleTexture(cellToggleTexture) {\n    this.cellToggleTexture = cellToggleTexture;\n  }\n\n  render() {\n    if(this.values === undefined) return;\n    let { ui, xCount, yCount, cellSize, borderSize } = this.values;\n\n    let w = this.gl.canvas.width;\n    let h = this.gl.canvas.height;\n\n    this.shader.bind();\n    this.quad.bind();\n\n    let cw = cellSize / w;\n    let ch = cellSize / h;\n    let mvp = mat4.identity(this.mvp);\n    let view = mat4.translate(mat4.identity(this.view), this.initialView, [\n        (this.rendererPos[0]) * cw,\n        (this.rendererPos[1]) * ch,\n        0.0\n    ]);\n    mat4.scale(mvp, view, \n      [\n        (cellSize * xCount) / w,\n        (cellSize * yCount) / h,\n        1.0\n      ]\n    );\n\n    this.cellToggleTexture.bind(0);\n    this.shader.setSampler2D('cellToggleSampler', 0);\n\n    this.shader.setVec2('scrollPos', [ 0,0 ]);\n\n    this.shader.setVec2('cellSize', [\n      cw / (cw * xCount),\n      ch / (ch * yCount),\n    ]);\n\n    this.shader.setMat4('mvp', mvp);\n    this.quad.draw();\n    this.quad.unbind();\n    this.shader.unbind();\n  }\n}\n","import VertexArray from '../VertexArray';\nimport { mat4, quat } from 'gl-matrix';\nimport Texture from '../Texture';\nimport RendererEventTarget from './RendererEventTarget';\n\nexport class GridRenderer extends RendererEventTarget {\n  constructor(gl, shaders, vertical, scrollX, scrollY) {\n    super(gl, shaders);\n    this.gl = gl;\n    this.shader = shaders.getShader('grid');\n    this.vertical = vertical;\n    this.name = name;\n    this.scrollX = scrollX;\n    this.scrollY = scrollY;\n\n    this.mvp = mat4.create();\n\n    this.initialView = mat4.create();\n    mat4.scale(this.initialView, this.initialView, [\n        -1.0,\n        1.0,\n        1.0\n      ]);\n    mat4.translate(this.initialView, this.initialView, [\n      -1.0,\n      -1.0,\n      0.0\n      ]);\n    this.view = mat4.create();\n    this.mvp = mat4.create();\n  }\n\n  updateValues(values) {\n    this.values = values;\n  }\n\n  setRendererPosition(scrollPos) {\n    this.rendererPos = scrollPos;\n  }\n\n  setCellToggleTexture(cellToggleTexture) {\n    this.cellToggleTexture = cellToggleTexture;\n  }\n\n  renderPoints(points) {\n    this.render();\n    let {\n      xCount,\n      yCount,\n      cellSize,\n      warpCount,\n      pickCount,\n      scrollPos\n    } = this.values;\n    this.solidShader.bind();\n    this.centerQuad.bind();\n    let w = this.gl.canvas.width;\n    let h = this.gl.canvas.height;\n    let cw = cellSize / w;\n    let ch = cellSize / h;\n    let scrollX = this.scrollX ? 1.0 : 0.0;\n    let scrollY = this.scrollY ? 1.0 : 0.0;\n\n    let mvp = mat4.identity(this.mvp);\n    let view = mat4.translate(mat4.identity(this.view), this.initialView, [\n        (this.rendererPos[0]) * cw,\n        (this.rendererPos[1]) * ch,\n        0.0\n    ]);\n    mat4.translate(view, view, \n      [\n        cw/2.0,\n        ch/2.0,\n        1.0\n      ]\n    );\n    mat4.scale(view, view, \n      [\n        cw,\n        ch,\n        1.0\n      ]\n    );\n    let minorSize = Math.min(xCount, yCount);\n    for(let i = 0; i < points.length; i++) {\n      for(let j = 0; j < minorSize; j++) {\n        let x, y;\n        if(yCount < xCount) {\n          x = i;\n          y = j;\n        } else {\n          x = j;\n          y = i;\n        }\n\n        mat4.translate(mvp, view, [\n          (-scrollPos.get(0) / cellSize) * scrollX,\n          (-scrollPos.get(1) / cellSize) * scrollY,\n          0.0\n        ]);\n        mat4.translate(mvp, mvp, [ x, y, 0.0 ]);\n        if(points[i] === undefined) {\n          continue;\n        } else if(points[i] === j) {\n          this.solidShader.setVec4('color', [0.02, 0.4, 0.02, 1.0]);\n          mat4.scale(mvp, mvp, [ 0.62, 0.62, 1.0 ]);\n        } else {\n          this.solidShader.setVec4('color', [1.0, 1.0, 1.0, 1.0]);\n          mat4.scale(mvp, mvp, [ 0.80, 0.80, 1.0 ]);\n        }\n        this.solidShader.setMat4('mvp', mvp);\n        this.centerQuad.draw();\n      }\n    }\n    this.centerQuad.unbind()\n    this.solidShader.unbind();\n  }\n\n  render() {\n    if(this.values === undefined) return;\n    let {\n      xCount,\n      yCount,\n      cellSize,\n      borderSize,\n      warpCount,\n      pickCount,\n      scrollPos\n    } = this.values;\n    let scrollX = this.scrollX ? 1.0 : 0.0;\n    let scrollY = this.scrollY ? 1.0 : 0.0;\n\n    let w = this.gl.canvas.width;\n    let h = this.gl.canvas.height;\n\n    this.shader.bind();\n    this.quad.bind();\n\n    let cw = cellSize / w;\n    let ch = cellSize / h;\n    let mvp = mat4.identity(this.mvp);\n    let view = mat4.translate(mat4.identity(this.view), this.initialView, [\n        (this.rendererPos[0]) * cw,\n        (this.rendererPos[1]) * ch,\n        0.0\n    ]);\n    mat4.scale(mvp, view, \n      [\n        (cellSize * xCount) / w,\n        (cellSize * yCount) / h,\n        1.0\n      ]\n    );\n\n    this.cellToggleTexture.bind(0);\n    this.shader.setSampler2D('cellToggleSampler', 0);\n    this.shader.setVec2('scrollPos', [\n      scrollPos.get(0) / (warpCount * cellSize) * scrollX,\n      scrollPos.get(1) / (pickCount * cellSize) * scrollY\n    ]);\n\n    this.shader.setFloat('vert', yCount > xCount ? 1.0 : 0.0);\n\n    this.shader.setFloat('gap', 0.04);\n    this.shader.setVec2('cellSize', [\n      cw / (cw * xCount),\n      ch / (ch * yCount),\n    ]);\n\n    this.shader.setMat4('mvp', mvp);\n    this.quad.draw();\n    this.quad.unbind();\n    this.shader.unbind();\n  }\n}\n","import ShaderBuilder from '../shader/';\nimport VertexArray from '../VertexArray';\nimport Framebuffer from '../Framebuffer';\nimport Texture from '../Texture';\nimport { mat4, quat } from 'gl-matrix';\nimport RendererEventTarget from './RendererEventTarget';\n\nexport class WeaveRenderer extends RendererEventTarget {\n  constructor(gl, shaders) {\n    super(gl, shaders);\n    this.gl = gl;\n    this.weaveShader = shaders.getShader('weave');\n\n    this.initialView = mat4.create();\n    mat4.scale(this.initialView, this.initialView, [\n        -1.0,\n        1.0,\n        1.0\n      ]);\n    mat4.translate(this.initialView, this.initialView, [\n      -1.0,\n      -1.0,\n      0.0\n      ]);\n    this.view = mat4.create();\n    this.mvp = mat4.create();\n  }\n\n  updateValues(values) {\n    this.values = values;\n  }\n\n  setTextures(threading, treadling, tieup, warpTexture, weftTexture) {\n    this.threading = threading;\n    this.treadling = treadling;\n    this.tieup = tieup;\n    this.warpTexture = warpTexture;\n    this.weftTexture = weftTexture;\n  }\n\n  setRendererPosition(scrollPos) {\n    this.rendererPos = scrollPos;\n  }\n\n  render() {\n    console.log(\"render weave\");\n    if(this.values === undefined) return;\n    let { xCount, yCount, scrollPos, cellSize, shaftCount, treadleCount } = this.values;\n\n    let w = this.gl.canvas.width;\n    let h = this.gl.canvas.height;\n\n\n    let cw = cellSize / w;\n    let ch = cellSize / h;\n    let mvp = mat4.identity(this.mvp);\n    let view = mat4.translate(mat4.identity(this.view), this.initialView, [\n        this.rendererPos[0] * cw,\n        this.rendererPos[1] * ch,\n        0.0\n    ]);\n    mat4.scale(mvp, view, \n      [\n        (cellSize * xCount) / w,\n        (cellSize * yCount) / h,\n        1.0\n      ]\n    );\n\n    this.weaveShader.bind();\n    this.quad.bind();\n    this.weaveShader.setMat4('mvp', mvp);\n\n    this.warpTexture.bind(0);\n    this.weaveShader.setSampler2D('warpSampler', 0);\n\n    this.weftTexture.bind(1);\n    this.weaveShader.setSampler2D('weftSampler', 1);\n\n    this.threading.bind(2);\n    this.weaveShader.setSampler2D('threading', 2);\n\n    this.treadling.bind(3);\n    this.weaveShader.setSampler2D('treadling', 3);\n\n    this.tieup.bind(4);\n    this.weaveShader.setSampler2D('tieup', 4);\n\n    this.weaveShader.setFloat('shaftCount', shaftCount);\n    this.weaveShader.setFloat('treadleCount', treadleCount);\n\n    this.weaveShader.setVec2('cellSize', [\n      cw / (cw * xCount),\n      ch / (ch * yCount),\n    ]);\n\n    this.weaveShader.setVec2('scrollPos', [\n      scrollPos.get(0) / (xCount * cellSize),\n      scrollPos.get(1) / (yCount * cellSize)\n    ]);\n\n    this.quad.draw();\n    this.quad.unbind();\n    this.weaveShader.unbind();\n  }\n}\n","import VertexArray from '../VertexArray';\nimport { mat4, quat } from 'gl-matrix';\nimport Texture from '../Texture';\nimport RendererEventTarget from './RendererEventTarget';\n\nexport class ColorRowRenderer extends RendererEventTarget {\n  constructor(gl, shaders, scrollX, scrollY) {\n    super(gl, shaders);\n    this.shader = shaders.getShader('colorRow')\n    this.scrollX = scrollX;\n    this.scrollY = scrollY;\n\n    this.initialView = mat4.create();\n    mat4.scale(this.initialView, this.initialView, [\n        -1.0,\n        1.0,\n        1.0\n      ]);\n    mat4.translate(this.initialView, this.initialView, [\n      -1.0,\n      -1.0,\n      0.0\n      ]);\n    this.view = mat4.create();\n    this.mvp = mat4.create();\n  }\n\n  getCellsBetweenPoints(from, to) {\n    let fromCell = this.getCellAtPos(from);\n    let toCell = this.getCellAtPos(to);\n    let vert = this.values.yCount > this.values.xCount;\n    if(!vert) {\n      return [fromCell[0], toCell[0]];\n    } else {\n      return [fromCell[1], toCell[1]];\n    }\n  }\n\n  renderPoints(from, to, color) {\n    this.render();\n    let {\n      xCount,\n      yCount,\n      cellSize,\n      scrollPos\n    } = this.values;\n    this.solidShader.bind();\n    this.centerQuad.bind();\n    if(to < from) {\n      [from, to] = [to, from]\n    }\n    let w = this.gl.canvas.width;\n    let h = this.gl.canvas.height;\n    let cw = cellSize / w;\n    let ch = cellSize / h;\n    let scrollX = this.scrollX ? 1.0 : 0.0;\n    let scrollY = this.scrollY ? 1.0 : 0.0;\n\n    let mvp = mat4.identity(this.mvp);\n    let view = mat4.translate(mat4.identity(this.view), this.initialView, [\n        (this.rendererPos[0]) * cw,\n        (this.rendererPos[1]) * ch,\n        0.0\n    ]);\n    mat4.translate(view, view, \n      [\n        cw/2.0,\n        ch/2.0,\n        1.0\n      ]\n    );\n    mat4.scale(view, view, \n      [\n        cw,\n        ch,\n        1.0\n      ]\n    );\n\n    for(let i = 0; i < (to - from) + 1; i++) {\n      let x, y;\n      if(xCount > yCount) {\n        x = from + i;\n        y = 0;\n      } else {\n        x = 0;\n        y = from + i;\n      }\n      this.solidShader.setVec4('color', [color.r, color.g, color.b, 1.0]);\n      mat4.translate(mvp, view, [\n        (-scrollPos.get(0) / cellSize) * scrollX,\n        (-scrollPos.get(1) / cellSize) * scrollY,\n        0.0\n      ]);\n      mat4.translate(mvp, mvp, [ x, y, 0.0 ]);\n      mat4.scale(mvp, mvp, [ 0.61, 0.61, 1.0 ]);\n      this.solidShader.setMat4('mvp', mvp);\n      this.centerQuad.draw();\n    }\n    this.centerQuad.unbind()\n    this.solidShader.unbind();\n  }\n\n\n  handleEvent(event) {\n    let { cellSize, xCount, yCount, scrollPos, warpCount, pickCount } = this.values;\n    let w = this.gl.canvas.width;\n    let h = this.gl.canvas.height;\n    let cw = cellSize / w;\n    let ch = cellSize / h;\n    let x = (w - event.offsetX) / w * 2.0;\n    let y = (h - event.offsetY) / h * 2.0;\n    let gridX = (this.rendererPos[0]) * (cellSize / w);\n    let gridY = (this.rendererPos[1]) * (cellSize / h);\n    let gridW = (xCount * cellSize) / w;\n    let gridH = (yCount * cellSize) / h;\n    if(\n      x > gridX &&\n      y > gridY &&\n      x < (gridX + gridW) &&\n      y < (gridY + gridH)\n    ) {\n      let i = Math.floor(((x - gridX) / gridW) * xCount + scrollPos.get(0) / cellSize);\n      let j = Math.floor(((y - gridY) / gridH) * yCount + scrollPos.get(1) / cellSize);\n      return [i, j, event];\n    }\n    return undefined;\n  }\n\n  updateValues(values) {\n    this.values = values;\n  }\n\n  setRendererPosition(scrollPos) {\n    this.rendererPos = scrollPos;\n  }\n\n  setColorTexture(colorTexture) {\n    this.colorTexture = colorTexture;\n  }\n\n  render() {\n    if(this.values === undefined) return;\n    let {\n      scrollPos,\n      xCount,\n      yCount,\n      cellSize,\n      borderSize,\n      warpCount,\n      pickCount\n    } = this.values;\n    let scrollX = this.scrollX ? 1.0 : 0.0;\n    let scrollY = this.scrollY ? 1.0 : 0.0;\n\n    let w = this.gl.canvas.width;\n    let h = this.gl.canvas.height;\n\n    this.shader.bind();\n    this.quad.bind();\n\n    let cw = cellSize / w;\n    let ch = cellSize / h;\n    let mvp = mat4.identity(this.mvp);\n    let view = mat4.translate(mat4.identity(this.view), this.initialView, [\n        (this.rendererPos[0]) * cw,\n        (this.rendererPos[1]) * ch,\n        0.0\n    ]);\n    mat4.scale(mvp, view, \n      [\n        (cellSize * xCount) / w,\n        (cellSize * yCount) / h,\n        1.0\n      ]\n    );\n\n    this.colorTexture.bind(0);\n    this.shader.setSampler2D('colorSampler', 0);\n    this.shader.setVec2('scrollPos', [\n      scrollPos.get(0) / (warpCount * cellSize) * scrollX,\n      scrollPos.get(1) / (pickCount * cellSize) * scrollY\n    ]);\n\n\n    this.shader.setFloat('vert', yCount > xCount ? 1.0 : 0.0);\n\n    this.shader.setVec2('cellSize', [\n      cw / (cw * xCount),\n      ch / (ch * yCount),\n    ]);\n\n    this.shader.setMat4('mvp', mvp);\n    this.quad.draw();\n    this.quad.unbind();\n    this.shader.unbind();\n  }\n}\n","import Texture from './Texture';\nexport function create1DGridTexture(gl, data, shafts, length) {\n  let gridTexture = new Uint8Array(length * 4);\n  for(let i = 0; i < length; i++) {\n    let n = i * 4;\n    let value = (data.get(i) / shafts) * 255;\n    let absence = 255;\n    if(data.get(i) === null || data.get(i) === undefined || data.get(i) === -1) {\n      absence = 0;\n    }\n    gridTexture[n + 0] = value;\n    gridTexture[n + 1] = absence;\n    gridTexture[n + 2] = value;\n    gridTexture[n + 3] = value;\n  }\n  return new Texture(gl, length, 1, gridTexture);\n}\n\n\nexport function createGridTexture(gl, data, width, height) {\n  let gridTexture = new Uint8Array(width * height * 4);\n  let num = 0;\n  for(let i = 0; i < height; i++) {\n    for(let j = 0; j < width; j++) {\n      if(data.getIn([i, j]) === 1) {\n        num++;\n        //Why only 8?\n        let n = (i * width + j) * 4;\n        gridTexture[n + 0] = 255;\n        gridTexture[n + 1] = 255;\n        gridTexture[n + 2] = 255;\n        gridTexture[n + 3] = 255;\n      }\n    }\n  }\n\n  console.log('num', num);\n  let s = ''\n  for(let i = 0; i < height; i++) {\n    for(let j = 0; j < width; j++) {\n      let n = (i * width + j) * 4;\n      s += (gridTexture[n] === 255 ? 1 : 0) + ','\n    }\n    s += '\\n'\n  }\n  console.log(s);\n\n  return new Texture(gl, width, height, gridTexture);\n}\n\nexport function createColorTexture(gl, colors, w, h, yarns) {\n  let data = new Uint8Array(colors.size * 4);\n  for(let i = 0; i < colors.size; i++) {\n    let n = i * 4;\n    let c = yarns.getIn([colors.get(i), 'color']).toJS();\n    data[n + 0] = c.r * 255;\n    data[n + 1] = c.g * 255;\n    data[n + 2] = c.b * 255;\n    data[n + 3] = 255;\n  }\n  return new Texture(\n    gl,\n    w,\n    h,\n    data\n  );\n}\n","import ShaderBuilder from './shader/';\nimport VertexArray from './VertexArray';\nimport Texture from './Texture';\nimport { mat4 } from 'gl-matrix';\n\nimport { TieupRenderer} from './renderers/TieupRenderer';\nimport { GridRenderer} from './renderers/GridRenderer';\nimport { WeaveRenderer} from './renderers/WeaveRenderer';\nimport { ColorRowRenderer} from './renderers/ColorRowRenderer';\n\nimport { create1DGridTexture, createGridTexture, createColorTexture } from './TextureUtil';\nimport { fromJS } from 'immutable';\n\nexport class Renderer {\n  prevDraft = fromJS({});\n  prevUI = fromJS({});\n\n  constructor(canvas) {\n    this.gl = canvas.getContext('webgl', {\n      premultipliedAlpha: true,\n      preserveDrawingBuffer: true\n    });\n    this.gl.clearColor(1, 1, 1, 1);\n    this.gl.disable(this.gl.CULL_FACE);\n    this.shaders = new ShaderBuilder(this.gl);\n    //this.gl.enable(this.gl.BLEND);\n    //this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n    this.gl.disable(this.gl.DEPTH_TEST);\n\n    let maxTextureSize = this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE);\n    console.log(\"Max texture size\", maxTextureSize);\n\n    this.threadingTexture = new Texture(this.gl, 1, 1, [[0, 0, 0, 0]]);\n    this.treadlingTexture = new Texture(this.gl, 1, 1, [[0, 0, 0, 0]])\n    this.tieupTexture = new Texture(this.gl, 1, 1, [[0, 0, 0, 0]])\n    this.warpTexture = new Texture(this.gl, 1, 1, [[0, 0, 0, 0]])\n    this.weftTexture = new Texture(this.gl, 1, 1, [[0, 0, 0, 0]])\n\n    this.resizeCanvas();\n    window.addEventListener('beforeunload', () => {\n      let extension = this.gl.getExtension('WEBGL_lose_context');\n      if(extension) {\n        console.log('Trying to free webgl context');\n        extension.loseContext();\n      }\n    });\n    this.tieup = new TieupRenderer(this.gl, this.shaders);\n    this.threading = new GridRenderer(this.gl, this.shaders, false, true, false);\n    this.treadling = new GridRenderer(this.gl, this.shaders, true, false, true);\n    this.warpColors= new ColorRowRenderer(this.gl, this.shaders, true, false);\n    this.weftColors = new ColorRowRenderer(this.gl, this.shaders, false, true);\n    this.weave = new WeaveRenderer(this.gl, this.shaders);\n\n    this.renderers = [\n      {\n        renderer: this.tieup,\n        name: 'tieup',\n        dirty: true\n      },\n      {\n        renderer: this.threading,\n        name: 'threading',\n        dirty: true\n      },\n      {\n        renderer: this.treadling,\n        name: 'treadling',\n        dirty: true\n      },\n      {\n        renderer: this.warpColors,\n        name: 'warpColors',\n        dirty: true\n      },\n      {\n        renderer: this.weftColors,\n        name: 'weftColors',\n        dirty: true\n      },\n      {\n        renderer: this.weave,\n        name: 'weave',\n        dirty: true\n      },\n    ];\n\n    let render = () => {\n      if(this.renderNextFrame) {\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n        this.renderers\n          .filter(r => r.dirty)\n          .forEach(r => {\n            //r.dirty = false;\n            r.renderer.render()\n          });\n        this.renderNextFrame = false;\n      }\n      requestAnimationFrame(render);\n    }\n    requestAnimationFrame(render);\n  }\n\n  setRendererPosition(draft) {\n    let treadleCount = draft.get('treadleCount');\n    let shaftCount = draft.get('shaftCount');\n    this.tieup.setRendererPosition([3, 3]);\n    this.threading.setRendererPosition([treadleCount + 4, 3]);\n    this.treadling.setRendererPosition([3, shaftCount + 4]);\n    this.weftColors.setRendererPosition([1, shaftCount + 4]);\n    this.warpColors.setRendererPosition([treadleCount + 4, 1]);\n    this.weave.setRendererPosition([\n      treadleCount + 4,\n      shaftCount + 4\n    ]);\n  }\n\n  isDifferent(draft, prevDraft, ...args) {\n    return args.some(a => draft.get(a) !== prevDraft.get(a));\n  }\n\n  update(draft, ui) {\n    let prevDraft = this.prevDraft;\n    let prevUI = this.prevUI;\n\n    if(this.isDifferent(ui, prevUI, 'cellSize')) {\n      this.clear();\n    }\n\n    this.updateTextures(draft);\n    this.weave.setTextures(\n      this.threadingTexture,\n      this.treadlingTexture,\n      this.tieupTexture,\n      this.warpTexture,\n      this.weftTexture\n    );\n    if(this.isDifferent(draft, prevDraft,\n      'treadleCount',\n      'shaftCount',\n      'tieup') ||\n      this.isDifferent(ui, prevUI, 'cellSize')\n    ) {\n      this.tieup.updateValues({\n        xCount: draft.get('treadleCount'),\n        yCount: draft.get('shaftCount'),\n        cellSize: ui.get('cellSize'),\n        borderSize: ui.get('borderSize'),\n        scrollPos: ui.get('scrollPos')\n      });\n      this.renderers[0].dirty = true;\n      this.tieup.setCellToggleTexture(this.tieupTexture);\n    }\n\n    if(this.isDifferent(draft, prevDraft,\n      'warpCount',\n      'shaftCount',\n      'pickCount',\n      'threading') ||\n      ui.getIn(['scrollPos', 0]) !== prevUI.getIn(['scrollPos', 0]) ||\n      this.isDifferent(ui, prevUI, 'cellSize')\n    ) {\n      this.threading.updateValues({\n        xCount: draft.get('warpCount'),\n        yCount: draft.get('shaftCount'),\n        pickCount: draft.get('pickCount'),\n        warpCount: draft.get('warpCount'),\n        cellSize: ui.get('cellSize'),\n        scrollPos: ui.get('scrollPos')\n      });\n      this.renderers[1].dirty = true;\n      this.threading.setCellToggleTexture(this.threadingTexture);\n    }\n\n    if(\n      this.isDifferent(draft, prevDraft, \n      'treadleCount',\n      'pickCount',\n      'warpCount',\n      'treadling') ||\n      ui.getIn(['scrollPos', 1]) !== prevUI.getIn(['scrollPos', 1]) ||\n      this.isDifferent(ui, prevUI, 'cellSize')\n    ) {\n      this.treadling.updateValues({\n        xCount: draft.get('treadleCount'),\n        yCount: draft.get('pickCount'),\n        pickCount: draft.get('pickCount'),\n        warpCount: draft.get('warpCount'),\n        cellSize: ui.get('cellSize'),\n        borderSize: ui.get('borderSize'),\n        scrollPos: ui.get('scrollPos'),\n      });\n      this.renderers[2].dirty = true;\n      this.treadling.setCellToggleTexture(this.treadlingTexture);\n    }\n\n    if(\n      this.isDifferent(draft, prevDraft, \n        'warpCount',\n        'pickCount',\n        'warpColors') ||\n      ui.getIn(['scrollPos', 0]) !== prevUI.getIn(['scrollPos', 0]) ||\n      this.isDifferent(ui, prevUI, 'cellSize')\n    ) {\n      this.warpColors.updateValues({\n        xCount: draft.get('pickCount'),\n        yCount: 1,\n        pickCount: draft.get('pickCount'),\n        warpCount: draft.get('warpCount'),\n        cellSize: ui.get('cellSize'),\n        borderSize: ui.get('borderSize'),\n        scrollPos: ui.get('scrollPos')\n      });\n      this.renderers[3].dirty = true;\n      this.warpColors.setColorTexture(this.warpTexture);\n    }\n\n    if(\n      this.isDifferent(draft, prevDraft, \n      'warpCount',\n      'pickCount',\n      'weftColors') ||\n      ui.getIn(['scrollPos', 1]) !== prevUI.getIn(['scrollPos', 1]) ||\n      this.isDifferent(ui, prevUI, 'cellSize')\n    ) {\n      this.weftColors.updateValues({\n        xCount: 1,\n        yCount: draft.get('pickCount'),\n        pickCount: draft.get('pickCount'),\n        warpCount: draft.get('warpCount'),\n        cellSize: ui.get('cellSize'),\n        borderSize: ui.get('borderSize'),\n        scrollPos: ui.get('scrollPos')\n      });\n      this.renderers[4].dirty = true;\n      this.weftColors.setColorTexture(this.weftTexture);\n    }\n\n    if(\n      draft !== prevDraft ||\n      prevUI !== ui\n    ) {\n      this.weave.updateValues({\n        xCount: draft.get('warpCount'),\n        yCount: draft.get('pickCount'),\n        shaftCount: draft.get('shaftCount'),\n        treadleCount: draft.get('treadleCount'),\n        cellSize: ui.get('cellSize'),\n        scrollPos: ui.get('scrollPos')\n      });\n      this.renderers[5].dirty = true;\n    }\n\n\n    this.prevDraft = draft;\n    this.prevUI = ui;\n  }\n\n  updateTextures(draft) {\n    let prevDraft = this.prevDraft;\n    if(this.isDifferent(draft, prevDraft, 'threading', 'shaftCount', 'warpCount')) {\n      this.threadingTexture.delete();\n      this.threadingTexture = create1DGridTexture(this.gl,\n        draft.get('threading'),\n        draft.get('shaftCount'),\n        draft.get('warpCount'));\n    }\n\n    if(this.isDifferent(draft, prevDraft, 'treadling', 'treadleCount', 'pickCount')) {\n      this.treadlingTexture.delete();\n      this.treadlingTexture = create1DGridTexture(this.gl,\n        draft.get('treadling'),\n        draft.get('treadleCount'),\n        draft.get('pickCount'));\n    }\n\n    if(this.isDifferent(draft, prevDraft, 'tieup', 'shaftCount')) {\n      this.tieupTexture.delete();\n      this.tieupTexture = createGridTexture(this.gl,\n        draft.get('tieup'),\n        draft.get('treadleCount'),\n        draft.get('shaftCount'));\n    }\n\n    if(this.isDifferent(draft, prevDraft, 'warpColors', 'yarn')) {\n      this.warpTexture.delete()\n      this.warpTexture = createColorTexture(this.gl,\n        draft.get('warpColors'),\n        draft.get('warpColors').size,\n        1,\n        draft.get('yarn'));\n    }\n\n    if(this.isDifferent(draft, prevDraft, 'weftColors', 'yarn')) {\n      this.weftTexture.delete();\n      this.weftTexture = createColorTexture(this.gl,\n        draft.get('weftColors'),\n        1,\n        draft.get('weftColors').size,\n        draft.get('yarn'));\n    }\n  }\n\n  resizeCanvas() {\n    this.width = this.gl.canvas.width;\n    this.height = this.gl.canvas.height;\n    this.gl.viewport(0, 0, this.width, this.height);\n  }\n\n  addEventListener(name, func) {\n    this.gl.canvas.addEventListener(name, func);\n  }\n\n  render() {\n    this.renderNextFrame = true;\n  }\n\n  clear() {\n    this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n    this.renderers.forEach(r => r.dirty = true);\n    this.render();\n  }\n}\n","<script>\n  import draft from '../../stores/Draft';\n  import ui from '../../stores/UI';\n\n  let width = $draft.get('warpCount') * $ui.get('cellSize');\n  let height = $draft.get('pickCount') * $ui.get('cellSize');\n\n</script>\n<div\n      class=\"scrollpane\"\n      style={`left: ${width}px; top: ${height}px;`}\n      >\n</div>\n<style>\n  .scrollpane {\n    background-color: #5959308f;\n    pointer-events: none;\n    position: relative;\n    width: 10px;\n    height: 10px;\n  }\n</style>\n","<script>\n  import { onMount } from 'svelte';\n\n  import draft from '../../stores/Draft';\n  import ui from '../../stores/UI';\n  import { Renderer } from './gfx/Renderer';\n  import ScrollPane from '../ScrollPane/ScrollPane.svelte';\n  import { line } from '../../util/MathUtil';\n\n  let renderer;\n  let canvas;\n\n  let drag;\n  let linePoints;\n  let oldLinePoints = [];\n  let oldP = [];\n\n  let startPos;\n  let endPos;\n  let startScroll;\n\n  $: {\n    if(renderer) {\n      renderer.update($draft, $ui);\n      renderer.setRendererPosition($draft);\n      try {\n        renderer.render();\n      } catch (e) {\n        console.error(e);\n      }\n    }\n  }\n\n  let oldScroll = [];\n  $: {\n    let scroll = $ui.get('scrollPos').toJS();\n    if(renderer !== undefined  && drag !== undefined && (scroll[0] !== oldScroll[0] || scroll[1] !== oldScroll[1])) {\n      if(drag.includes('Color')) {\n        let color = $draft.getIn(['yarn', $ui.get('selectedColor'), 'color']).toJS()\n        renderer[drag].renderPoints(...linePoints, color);\n      } else {\n        renderer[drag].renderPoints(linePoints);\n      }\n    }\n    oldScroll = scroll;\n  }\n\n  onMount(() => {\n    renderer = new Renderer(canvas);\n    syncCanvasDimensions();\n\n    renderer.addEventListener('pointerdown', (e) => {\n      startPos = [e.offsetX, e.offsetY];\n      startScroll = $ui.get('scrollPos').toJS();\n    });\n\n    renderer.addEventListener('pointermove', (e) => {\n      if(drag !== undefined && e.buttons === 0) {\n        drag = undefined;\n        renderer[drag].render();\n      } \n\n      if(drag === undefined && e.buttons & 1 !== 0 && (e.movementX !== 0 || e.movementY !== 0)) {\n        let r = renderer.renderers.find(r => r.renderer.isWithinGrid(startPos));\n        if(r !== undefined) {\n          drag = r.name;\n        }\n      }\n\n      if(drag !== undefined) {\n        let cellSize = $ui.get('cellSize');\n        let scroll = $ui.get('scrollPos').toJS();\n        endPos = [e.offsetX - scroll[0] / cellSize, e.offsetY - scroll[1] / cellSize];\n        let startPosScroll = [\n          startPos[0] + (scroll[0] - startScroll[0]) / 2.0,\n          startPos[1] + (scroll[1] - startScroll[1]) / 2.0\n        ];\n\n        linePoints = renderer[drag].getCellsBetweenPoints(startPosScroll, endPos);\n        if(!drag.includes('Color')) {\n          if(drag === 'tieup') {\n            if(linePointsChanged(linePoints, oldLinePoints)) { \n              renderer[drag].renderPoints(linePoints);\n            }\n            oldLinePoints = linePoints\n          } else {\n            let p = pointsToArray(linePoints);\n            if(linePointsChanged(p, oldP)) { \n              renderer[drag].renderPoints(p);\n            }\n            oldP = p;\n          }\n        } else {\n          if(linePointsChanged(linePoints, oldLinePoints)) { \n            let color = $draft.getIn(['yarn', $ui.get('selectedColor'), 'color']).toJS()\n            renderer[drag].renderPoints(...linePoints, color);\n          }\n          oldLinePoints = linePoints\n        }\n      }\n    });\n\n    renderer.addEventListener('pointerup', (e) => {\n      if(drag !== undefined) {\n        switch(drag) {\n          case 'warpColors':\n          case 'weftColors':\n            updateColor(drag, linePoints[0], linePoints[1], $ui.get('selectedColor'));\n            renderer.clear();\n            break;\n          case 'treadling':\n          case 'threading':\n            let lp = pointsToArray(linePoints);\n            updateListWithLine(drag, lp);\n            break;\n          case 'tieup':\n            updateTieupWithPoints(linePoints);\n            break;\n        }\n\n        renderer[drag].render();\n        drag = undefined;\n      } else {\n        let pos = [e.offsetX, e.offsetY];\n        let r = renderer.renderers.find(r => r.renderer.isWithinGrid(pos));\n        if(r === undefined) {\n          return;\n        }\n        let name = r.name;\n        let cell = renderer[name].getCellAtPos(pos);\n        switch(name) {\n          case 'warpColors':\n            updateColor(name, cell[0], cell[0], $ui.get('selectedColor'));\n            break;\n          case 'weftColors':\n            updateColor(name, cell[1], cell[1], $ui.get('selectedColor'));\n            break;\n          case 'threading':\n            updateGrid(name, cell[0], cell[1]);\n            break;\n          case 'treadling':\n            updateGrid(name, cell[1], cell[0]);\n            break;\n          case 'tieup':\n            toggleTieup(cell[1], cell[0]);\n            break;\n        }\n      }\n    });\n  });\n\n  function updateGrid(name, index, value) {\n    draft.update(d => d.updateIn([name, index], c => c === value ? -1 : value));\n  }\n\n  function updateTieupWithPoints(linePoints) {\n    let w = $draft.get('treadleCount');\n    let h = $draft.get('shaftCount');\n    draft.update(d => {\n      let draft = d;\n      linePoints.forEach(p => {\n        draft = draft.setIn(['tieup', p[1], p[0]], 1);\n      });\n      return draft;\n    });\n  }\n\n  function updateColor(name, colorStart, colorEnd, selectedColor) {\n    if(colorEnd < colorStart) {\n      [colorStart, colorEnd] = [colorEnd, colorStart];\n    }\n\n    let newList = $draft.get(name).withMutations(l => {\n      for(let i = 0; i < (colorEnd - colorStart) + 1; i++) {\n        l.set(colorStart + i, selectedColor);\n      }\n    });\n\n    draft.update(d => d.set(name, newList));\n  }\n\n  function updateListWithLine(name, lp) {\n    let w = $draft.get('treadleCount');\n    let h = $draft.get('shaftCount');\n    let m = Math.max(w, h);\n    draft.update(d => d.update(name, list => list.withMutations(l => {\n      lp.forEach((p, i) => l.set(i, p));\n    })));\n  }\n\n  function toggleTieup(x, y) {\n    let w = $draft.get('treadleCount');\n    let h = $draft.get('shaftCount');\n    draft.update(d => d.updateIn(['tieup', x, y], v => v === 1 ? 0 : 1));\n  }\n\n  function linePointsChanged(left, right) {\n    if(left.length !== right.length) {\n      return true;\n    }\n    for(let i = 0; i < left.length; i++) {\n      if(left[i] !== right[i]) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  function pointsToArray(lp) {\n    let ret = [];\n    lp.forEach(p => {\n      if(drag === 'tieup') {\n      } else  if(drag === 'treadling') {\n        ret[p[1]] = p[0];\n      } else if(drag === 'threading') {\n        ret[p[0]] = p[1];\n      }\n    });\n    return ret;\n  }\n\n  export function syncCanvasDimensions() {\n    canvas.width = canvas.offsetWidth;\n    canvas.height = canvas.offsetHeight;\n    renderer.resizeCanvas();\n    renderer.render();\n  }\n\n  export function dispatchEvent(e) {\n    canvas.dispatchEvent(e);\n  }\n\n</script>\n<canvas class=\"weave-display\" bind:this={canvas} />\n<style>\n  .weave-display {\n    image-rendering: crisp-edges;\n    width: 100%;\n    height: 100%;\n  }\n</style>\n","<script>\n  import tinycolor from 'tinycolor2';\n  import draft from '../../stores/Draft';\n  import ui from '../../stores/UI';\n  import downArrow from 'icons/down-arrow.svg';\n  import upArrow from 'icons/up-arrow.svg';\n\n  let isToggled = false;\n  let color = tinycolor('black');\n  $: {\n    let selectedColor = $ui.get('selectedColor');\n    let c = $draft.getIn([\n      'yarn',\n      selectedColor,\n      'color'\n    ]).toJS();\n    color = tinycolor.fromRatio(c);\n  }\n\n\n  function setColor(index) {\n    ui.update(u => u.set('selectedColor', index));\n    isToggled = false;\n  }\n\n</script>\n\n<div class=\"yarn-selector\">\n  <button\n    class=\"color-display\"\n    on:click={() => isToggled = !isToggled}>\n    <div\n      class=\"color-marker\"\n      style={`background-color: ${color.toHexString()};`}\n      >\n    </div>\n      <span\n        class=\"arrow\"\n        style={`\n        stroke: ${color.isDark() ? 'black' : 'white'};\n        fill: ${color.isLight() ? 'black' : 'white'};\n        `}>\n        {#if isToggled === true}\n          {@html upArrow}\n        {:else}\n          {@html downArrow}\n        {/if}\n      </span>\n  </button>\n  {#if isToggled === true}\n    <ul>\n      {#each $draft.get('yarn').toJS() as yarn, i}\n        <li style={`background-color: ${tinycolor.fromRatio(yarn.color).toHexString()}`} on:click={() => setColor(i)}></li>\n      {/each}\n    </ul>\n  {/if}\n</div>\n\n<style>\n  .yarn-selector {\n    min-height: 2em;\n    min-width: 2em;\n    position: absolute;\n    right: 2em;\n    bottom: 2em;\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n    align-items: center;\n    background-color: white;\n\n    z-index: 10;\n    border: 1px solid black;\n  }\n\n  .yarn-selector button {\n    width: calc(100%);\n    height: calc(100%);\n    padding: 8px;\n    margin: 0;\n  }\n\n  .yarn-selector ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n  }\n\n  .yarn-selector li {\n    width: 2em;\n    height: 2em;\n  }\n\n  .arrow {\n    position: absolute;\n    top: calc(2em - 8px);\n    right: 0;\n    width: 15px;\n    height: 15px;\n  }\n\n  .arrow :global(svg) {\n    stroke-width: 10px;\n  }\n\n  .color-marker {\n    width: 12px;\n    height: 12px;\n    padding: 8px;\n  }\n</style>\n","<script>\n  import { onMount, onDestroy, afterUpdate } from 'svelte';\n  import { Map, List } from 'immutable';\n  import ui from '../stores/UI';\n  import draft from '../stores/Draft';\n  import { useFocus } from \"svelte-navigator\";\n  import WeaveDisplay from '../components/WeaveDisplay/WeaveDisplay.svelte';\n  import YarnSelector from '../components/YarnSelector/YarnSelector.svelte';\n  import ScrollPane from '../components/ScrollPane/ScrollPane.svelte';\n\n  const registerFocus = useFocus();\n\n  let scrollContainer;\n  let canvasContainer;\n  let newCellSize = $ui.get('cellSize');\n\n  let scrollbarWidth = 15;\n  let weaveDisplay;\n\n  let resizeObserver;\n\n  onMount(() => {\n    scrollbarWidth = scrollContainer.offsetWidth - scrollContainer.clientWidth;\n    scrollContainer.addEventListener('scroll', updatePosition);\n    let scrollLeftMax = scrollContainer.scrollWidth - scrollContainer.clientWidth\n    let scrollTopMax = scrollContainer.scrollHeight - scrollContainer.clientHeight\n    scrollContainer.scrollTo(\n      scrollLeftMax,\n      scrollTopMax\n    );\n    resizeObserver = new ResizeObserver(entries => {\n      weaveDisplay.syncCanvasDimensions();\n    });\n    resizeObserver.observe(canvasContainer);\n\n    scrollContainer.addEventListener('pointermove', e => {\n      let evt = createMouseEvent('pointermove', e);\n      weaveDisplay.dispatchEvent(evt);\n    });\n    scrollContainer.addEventListener('pointerup', e => {\n      let evt = createMouseEvent('pointerup', e);\n      weaveDisplay.dispatchEvent(evt);\n    });\n    scrollContainer.addEventListener('pointerdown', e => {\n      let evt = createMouseEvent('pointerdown', e);\n      weaveDisplay.dispatchEvent(evt);\n    });\n    scrollContainer.addEventListener('click', e => {\n      let evt = createMouseEvent('click', e);\n      weaveDisplay.dispatchEvent(evt);\n    });\n  });\n\n  function createMouseEvent(name, e) {\n    return new MouseEvent(name, {\n      clientX: e.clientX,\n      clientY: e.clientY,\n      buttons: e.buttons,\n      movementX: e.movementX,\n      movementY: e.movementY\n    });\n  }\n\n  onDestroy(() => {\n    scrollContainer.removeEventListener('scroll', updatePosition);\n  });\n\n  function updatePosition(event) {\n    let xOffset = 0;\n    let yOffset = 0;\n    let canvasRect = canvasContainer.getBoundingClientRect();\n    let rect = scrollContainer.getBoundingClientRect();\n    let scrollLeftMax = scrollContainer.scrollWidth - scrollContainer.clientWidth\n    let scrollTopMax = scrollContainer.scrollHeight - scrollContainer.clientHeight\n    let x = scrollLeftMax - scrollContainer.scrollLeft;\n    let y = scrollTopMax - scrollContainer.scrollTop;\n    \n    ui.update(u => {\n      return u.set('scrollPos', List([x, y]))\n    });\n  }\n\n  function changeCellSize() {\n    let scroll = $ui.get('scrollPos');\n    ui.update(u => u.set('cellSize', newCellSize));\n  }\n\n</script>\n<div on:scroll={updatePosition} bind:this={scrollContainer} class=\"container\" tabindex=\"0\">\n  <YarnSelector />\n  <ScrollPane />\n  <div bind:this={canvasContainer} class=\"fixed\" style={`\n                                   right: ${scrollbarWidth}px;\n                                   bottom: ${scrollbarWidth}px\n                                   `}>\n    <WeaveDisplay bind:this={weaveDisplay} />\n  </div>\n</div>\n<div class=\"ok-zoomer\">\n  <input type=\"range\" min=\"5\" max=\"70\" on:input={changeCellSize} bind:value={newCellSize} />\n</div>\n<style>\n\n  .container {\n    overflow: auto;\n  }\n\n  .fixed {\n    display: flex;\n    justify-content: stretch;\n    align-items: stretch;\n\n    position: absolute;\n    right: 0;\n    left: 90px;\n    bottom: 0;\n    top: 0;\n\n    pointer-events: none;\n  }\n\n  .ok-zoomer {\n    position: fixed;\n    bottom: 0;\n    right: 20px;\n    z-index: 1000;\n  }\n\n  .scrollbar-measure {\n    width: 100px;\n    height: 100px;\n    overflow: scroll;\n    position: absolute;\n    top: -9999px;\n  }\n\n</style>\n","<script>\n  import { useFocus } from \"svelte-navigator\";\n\n  const registerFocus = useFocus();\n</script>\n\n<div class=\"application\">\n  <h1 use:registerFocus >Halp plix!!!</h1>\n  <h2>Oh man i am not good with computer plz to help</h2>\n\n  <ul>\n    <li>help by Baboon designs from the Noun Project</li>\n    <li>back by David from the Noun Project</li>\n    <li>Scarf by Sergey Demushkin from the Noun Project</li>\n    <li>Yarn by Sergey Demushkin from the Noun Project</li>\n    <li>add by Johan Ronsse from the Noun Project</li>\n  </ul>\n</div>\n\n<style>\n</style>\n","<script>\n  import { Router, Link, Route } from \"svelte-navigator\";\n  import {\n    Sidebar\n  } from './components';\n  import Editor from './pages/Editor.svelte';\n  import Help from './pages/Help.svelte';\n  import ui from './stores/UI';\n  import draft from './stores/Draft';\n\n  export let url;\n</script>\n\n<Router url=\"{url}\" basepath=\"/weaver\">\n  <div class=\"application\">\n    <Sidebar />\n    <Route path=\"about\" component=\"{Help}\" />\n    <Route path=\"/\" component=\"{Editor}\" />\n  </div>\n</Router>\n\n<style>\n  .application {\n    flex-grow: 1;\n    display: grid;\n    grid-template-columns: auto 1fr;\n  }\n\n  main {\n    grid-gap: 16px;\n    padding: 16px;\n    display: grid;\n  }\n\n  .tieup-container {\n    grid-row: 2;\n    grid-column: 2;\n  }\n\n  .threading-container {\n    grid-row: 2;\n    grid-column: 3;\n  }\n\n  .treadling-container {\n    grid-row: 3;\n    grid-column: 2;\n  }\n\n  .weave-display-container {\n    grid-row: 3;\n    grid-column: 3;\n  }\n\n  .warp-colors {\n    grid-row: 1;\n    grid-column: 3;\n  }\n\n  .weft-colors {\n    grid-row: 3;\n    grid-column: 1;\n  }\n\n</style>\n","import tinycolor from 'tinycolor2';\nimport App from './App.svelte';\n\nconst app = new App({\n  target: document.body,\n  props: {\n    url: location.pathname.substr(location.pathname.lastIndexOf('/'))\n  }\n});\n\nwindow.tinycolor = tinycolor;\nexport default app;\n"],"names":["Math","trimLeft","trimRight","tinyCounter","mathRound","round","mathMin","min","mathMax","max","mathRandom","random","tinycolor","color","opts","this","rgb","r","g","b","a","s","v","l","ok","format","replace","toLowerCase","match","named","names","matchers","exec","rgba","hsl","h","hsla","hsv","hsva","hex8","parseIntFromHex","convertHexToDecimal","hex6","hex4","hex3","stringInputToObject","isValidCSSUnit","bound01","String","substr","convertToPercentage","i","floor","f","p","q","t","mod","hsvToRgb","hue2rgb","hslToRgb","hasOwnProperty","boundAlpha","inputToRGB","_originalInput","_r","_g","_b","_a","_roundA","_format","_gradientType","gradientType","_ok","_tc_id","rgbToHsl","d","rgbToHsv","rgbToHex","allow3Char","hex","pad2","toString","charAt","join","rgbaToArgbHex","convertDecimalToHex","desaturate","amount","toHsl","clamp01","saturate","greyscale","lighten","brighten","toRgb","darken","spin","hue","complement","triad","tetrad","splitcomplement","analogous","results","slices","part","ret","push","monochromatic","toHsv","modification","prototype","isDark","getBrightness","isLight","isValid","getOriginalInput","getFormat","getAlpha","getLuminance","RsRGB","GsRGB","BsRGB","pow","setAlpha","value","toHsvString","toHslString","toHex","toHexString","toHex8","allow4Char","rgbaToHex","toHex8String","toRgbString","toPercentageRgb","toPercentageRgbString","toName","hexNames","toFilter","secondColor","hex8String","secondHex8String","formatSet","formattedString","hasAlpha","clone","_applyModification","fn","args","apply","concat","slice","call","arguments","_applyCombination","fromRatio","newColor","equals","color1","color2","mix","rgb1","rgb2","readability","c1","c2","isReadable","wcag2","wcag2Parms","out","parms","level","size","toUpperCase","mostReadable","baseColor","colorList","includeFallbackColors","bestColor","bestScore","length","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","burntsienna","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","o","flipped","flip","parseFloat","isNaN","n","indexOf","isOnePointZero","processPercent","isPercentage","parseInt","abs","val","c","CSS_UNIT","PERMISSIVE_MATCH3","PERMISSIVE_MATCH4","RegExp","module","exports","window","noop","assign","tar","src","k","run","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","subscribe","store","callbacks","unsub","unsubscribe","get_store_value","_","component_subscribe","component","callback","$$","on_destroy","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","update_slot","slot","slot_definition","dirty","get_slot_changes_fn","get_slot_context_fn","slot_changes","lets","undefined","merged","len","get_slot_changes","slot_context","exclude_internal_props","props","result","compute_rest_props","keys","rest","Set","has","null_to_empty","action_destroyer","action_result","destroy","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","element","name","document","createElement","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","attr","attribute","removeAttribute","getAttribute","setAttribute","to_number","set_data","wholeText","set_input_value","input","set_style","key","important","style","setProperty","toggle_class","toggle","classList","HtmlTag","[object Object]","e","html","nodeName","innerHTML","Array","from","childNodes","current_component","set_current_component","get_current_component","Error","onMount","on_mount","onDestroy","setContext","context","set","getContext","get","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","schedule_update","then","flush","tick","add_render_callback","flushing","seen_callbacks","update","pop","add","clear","fragment","before_update","after_update","outroing","outros","group_outros","check_outros","transition_in","block","local","delete","transition_out","globals","globalThis","global","get_spread_object","spread_props","create_component","mount_component","m","new_on_destroy","map","filter","destroy_component","init","instance","create_fragment","not_equal","parent_component","prop_values","bound","Map","skip_bound","ready","fill","make_dirty","hydrate","nodes","children","intro","SvelteComponent","$destroy","type","index","splice","$$props","obj","$$set","isUndefined","isNumber","createCounter","isSSR","addListener","subscriber_queue","writable","start","stop","subscribers","new_value","run_queue","invalidate","subscriber","derived","stores","initial_value","single","isArray","stores_array","auto","inited","values","pending","cleanup","sync","unsubscribers","createKey","ctxName","LOCATION","ROUTER","ROUTE","ROUTE_PARAMS","FOCUS_ELEM","paramRegex","startsWith","string","search","isSplat","segment","stripSlashes","str","segmentize","uri","filterFalsy","segments","split","Boolean","addQuery","pathname","query","normalizePath","path","pathFragments","joinedSegments","labels","1","2","3","4","5","6","7","8","9","10","11","createLabel","labelId","createMessage","message","originId","origin","to","basepath","createIdentifier","originMsg","label","createMessageHandler","fail","warn","console","rankRoute","route","score","default","fullPath","reduce","acc","nextScore","isRootSegment","test","isDynamic","SEGMENT_POINTS","pick","routes","bestMatch","defaultMatch","uriPathname","uriSegments","isRootUri","ranked","sort","rankRoutes","missed","params","createMatch","routeSegments","routeSegment","uriSegment","splatName","decodeURIComponent","dynamicMatch","normalizeLocation","location","hash","state","baseSegments","pathSegments","shift","normalizeUrlFragment","frag","createLocation","url","searchIndex","hashIndex","hasSearchIndex","hasHashIndex","pathnameAndSearch","resolveLink","routeBase","appBase","base","toPathname","toQuery","basePathname","toSegments","allSegments","extractBaseUri","routePath","routeMatch","POP","getLocation","source","encodeURI","decodeURI","history","_key","createStackFrame","canUseDOM","isEmbeddedPage","globalHistory","listeners","action","notifyListeners","listenerFns","listener","unlisten","go","keyedState","substring","createHistory","initialPathname","stack","entries","title","newIndex","createMemorySource","navigate","focusCandidate","initialNavigation","pushFocusCandidate","item","routerIdA","routerIdB","routerMarkers","querySelectorAll","currentId","Number","dataset","svnavRouter","isAbove","routerId","focus","elem","TABINDEX","hasAttribute","blurListener","activeElement","isEndMarker","id","svnavRouteEnd","selector","parent","querySelector","handleFocus","focusElement","current","nextElementSibling","tagName","heading","queryHeading","documentElement","createTriggerFocus","a11yConfig","announcementText","manageFocus","announceNavigation","announcements","meta","announcementMessage","createAnnouncement","createId","defaultBasepath","primary","a11y","initialBasepath","normalizedBasepath","locationContext","routerContext","isTopLevelRouter","activeRoute","hasActiveRoute","prevLocation","$location","triggerFocus","createRouteFilter","routeId","routeList","routeItem","changedHistory","normalizedLocation","registerRoute","matchingRoute","prevRoutes","nextRoutes","unregisterRoute","$routes","hasHash","shouldManageFocus","$prevLocation","$activeRoute","usePreflightCheck","componentId","ctxKey","ctxProviderId","useLocation","toReadonly","useRouteBase","_route","useNavigate","useResolve","useHistory","useFocus","lazyElement","_resolve","unmounted","innerUnsubscribe","levels","updates","to_null_out","accounted_for","parentBase","ssrMatch","isDefault","rawBase","$parentBase","updatedRoute","isActive","activeParams","link","getAnchor","defaultNavigate","defaultPrevented","button","metaKey","altKey","ctrlKey","shiftKey","shouldNavigate","preventDefault","createAction","currentTarget","SIZE","MASK","NOT_SET","SetRef","ref","OwnerID","ensureSize","iter","__iterate","returnTrue","wrapIndex","uint32Index","NaN","wholeSlice","begin","end","isNeg","resolveBegin","resolveIndex","resolveEnd","defaultIndex","Infinity","IS_COLLECTION_SYMBOL","isCollection","maybeCollection","IS_KEYED_SYMBOL","isKeyed","maybeKeyed","IS_INDEXED_SYMBOL","isIndexed","maybeIndexed","isAssociative","maybeAssociative","Collection","Seq","KeyedCollection","KeyedSeq","__proto__","constructor","IndexedCollection","IndexedSeq","SetCollection","SetSeq","Keyed","Indexed","IS_SEQ_SYMBOL","isSeq","maybeSeq","isRecord","maybeRecord","isImmutable","maybeImmutable","IS_ORDERED_SYMBOL","isOrdered","maybeOrdered","REAL_ITERATOR_SYMBOL","Symbol","iterator","FAUX_ITERATOR_SYMBOL","ITERATOR_SYMBOL","Iterator","next","iteratorValue","iteratorResult","done","iteratorDone","hasIterator","maybeIterable","getIteratorFn","isIterator","maybeIterator","getIterator","iterable","iteratorFn","KEYS","VALUES","ENTRIES","inspect","toSource","isArrayLike","isInteger","Collection$$1","emptySequence","toSeq","seq","maybeIndexedSeqFromValue","ObjectSeq","TypeError","seqFromValue","__toString","cacheResult","_cache","__iterateUncached","entrySeq","toArray","reverse","cache","entry","__iterator","__iteratorUncached","toKeyedSeq","fromEntrySeq","keyedSeqFromValue","toIndexedSeq","indexedSeqFromValue","of","toSetSeq","ArraySeq","array","_array","notSetValue","ii","object","_object","_keys","EMPTY_SEQ","CollectionSeq","collection","_collection","step","IS_MAP_SYMBOL","isMap","maybeMap","isOrderedMap","maybeOrderedMap","isValueObject","maybeValue","hashCode","is","valueA","valueB","valueOf","imul","smi","i32","defaultValueOf","hashNumber","STRING_HASH_CACHE_MIN_STRLEN","hashed","stringHashCache","hashString","STRING_HASH_CACHE_SIZE","STRING_HASH_CACHE_MAX_SIZE","cachedHashString","usingWeakMap","weakMap","UID_HASH_KEY","canDefineProperty","propertyIsEnumerable","nodeType","uniqueID","getIENodeHash","objHashUID","isExtensible","defineProperty","enumerable","configurable","hashJSObj","charCodeAt","WeakMap","ToKeyedSequence","KeyedSeq$$1","indexed","useKeys","_iter","_useKeys","valueSeq","this$1","reversedSequence","reverseFactory","mapper","mappedSequence","mapFactory","ToIndexedSequence","IndexedSeq$$1","includes","ToSetSequence","SetSeq$$1","FromEntriesSequence","validateEntry","indexedCollection","flipFactory","flipSequence","makeSequence","cacheResultThrough","filterFactory","predicate","filterSequence","sliceFactory","originalSize","resolvedBegin","resolvedEnd","sliceSize","resolvedSize","sliceSeq","skipped","isSkipping","skipWhileFactory","skipSequence","skipping","concatFactory","isKeyedCollection","iters","singleton","concatSeq","flatten","sum","flattenFactory","depth","flatSequence","stopped","flatDeep","currentDepth","sortFactory","comparator","defaultComparator","maxFactory","maxCompare","comp","zipWithFactory","keyIter","zipper","zipAll","zipSequence","sizes","iterators","isDone","steps","every","some","reify","collectionClass","arrCopy","arr","offset","newArr","invariant","condition","error","assertNotInfinite","coerceKeyPath","keyPath","isPlainObj","isDataStructure","quoteString","JSON","stringify","_ignoreError","shallowCopy","updateIn","updater","updatedValue","updateInDeeply","inImmutable","existing","wasNotSet","existingValue","newValue","nextExisting","nextUpdated","remove","collectionCopy","emptyMap","setIn$1","setIn","deleteIn","removeIn","update$1","updateIn$1","mergeIntoKeyedWith","collections","merger","collection$1","__ownerID","withMutations","mergeIntoCollection","oldVal","mergeDeepWithSources","sources","mergeWithSources","deepMerger","oldValue","deepMergerWith","mergeWith","merge","mergeItem","hasVal","nextVal","mergeIn","mergeDeepIn","mutable","asMutable","wasAltered","__ensureOwner","asImmutable","__altered","KeyedCollection$$1","keyValues","_root","updateMap","deleteAll","__hash","OrderedMap","sortBy","MapIterator","iterate","ownerID","makeMap","MapPrototype","removeAll","mergeDeep","mergeDeepWith","ArrayMapNode","keyHash","didChangeSize","didAlter","removed","idx","exists","MAX_ARRAY_MAP_SIZE","ValueNode","createNodes","isEditable","newEntries","BitmapIndexedNode","bitmap","bit","popCount","keyHashFrag","newNode","updateNode","MAX_BITMAP_INDEXED_SIZE","including","count","expandedNodes","HashArrayMapNode","expandNodes","isLeafNode","newBitmap","newNodes","setAt","canEdit","newLen","newArray","after","spliceOut","spliceIn","newCount","MIN_HASH_ARRAY_MAP_SIZE","excluding","packedII","packedNodes","packNodes","HashCollisionNode","mergeIntoNode","keyMatch","maxIndex","EMPTY_MAP","Iterator$$1","_type","_reverse","_stack","mapIteratorFrame","mapIteratorValue","subNode","__prev","prev","root","hash$$1","newRoot","newSize","idx1","idx2","x","IS_LIST_SYMBOL","isList","maybeList","List","IndexedCollection$$1","emptyList","makeList","VNode","list","setSize","listNodeFor","_origin","setListBounds","newTail","_tail","getTailOffset","_capacity","updateVNode","_level","updateList","oldSize","unshift","arguments$1","seqs","argument","iterateList","DONE","ListPrototype","removeBefore","originIndex","newChild","removingFirst","oldChild","editable","editableVNode","removeAfter","sizeIndex","EMPTY_LIST","left","right","tailPos","tail","iterateNodeOrLeaf","iterateLeaf","iterateNode","capacity","nodeHas","lowerNode","newLowerNode","rawIndex","owner","oldOrigin","oldCapacity","newOrigin","newCapacity","newLevel","offsetShift","oldTailOffset","newTailOffset","oldTail","beginIndex","EMPTY_ORDERED_MAP","Map$$1","emptyOrderedMap","_map","_list","updateOrderedMap","newMap","newList","makeOrderedMap","omap","toMap","IS_STACK_SYMBOL","isStack","maybeStack","Stack","emptyStack","pushAll","head","_head","peek","makeStack","EMPTY_STACK","StackPrototype","unshiftAll","IS_SET_SYMBOL","isSet","maybeSet","isOrderedSet","maybeOrderedSet","deepEqual","notAssociative","allEqual","bSize","mixin","ctor","methods","keyCopier","getOwnPropertySymbols","toJS","result$1","SetCollection$$1","emptySet","fromKeys","keySeq","intersect","sets","SetPrototype","union","updateSet","removes","adds","mapped","toRemove","subtract","OrderedSet","__make","__empty","EMPTY_SET","makeSet","EMPTY_RANGE","Range","_start","_end","_step","ceil","searchValue","possibleIndex","offsetValue","lastIndexOf","other","getIn","searchKeyPath","toObject","isIterable","useTuples","toOrderedMap","toOrderedSet","toSet","toStack","toList","__toStringMapper","returnValue","find","findEntry","sideEffect","bind","separator","joined","isFirst","reducer","initialReduction","reduceRight","not","butLast","isEmpty","countBy","grouper","groups","countByFactory","entriesSequence","entryMapper","filterNot","found","findKey","findLast","findLastEntry","findLastKey","first","flatMap","coerce","flatMapFactory","searchKey","groupBy","isKeyedIter","groupByFactory","hasIn","isSubset","isSuperset","keyOf","keyMapper","last","lastKeyOf","maxBy","neg","defaultNegComparator","minBy","skip","skipLast","skipWhile","skipUntil","take","takeLast","takeWhile","takeSequence","iterating","takeWhileFactory","takeUntil","ordered","keyed","murmurHashOfSize","hashMerge","hashCollection","CollectionPrototype","toJSON","chain","contains","mapEntries","mapKeys","KeyedCollectionPrototype","findIndex","removeNum","numArgs","spliced","findLastIndex","interpose","interposedSequence","interposeFactory","interleave","zipped","interleaved","zip","defaultZipper","zipWith","IndexedCollectionPrototype","reduction","useFirst","Set$$1","emptyOrderedSet","EMPTY_ORDERED_SET","OrderedSetPrototype","makeOrderedSet","fromJS","converter","fromJSWith","defaultConverter","parentValue","converted","ui","borderSize","selectedMenu","selectedColor","cellSize","scrollPos","dataUI","canvas","rect","xCount","yCount","toggleCell","y","onClick","onMouseDown","onMouseUp","onMouseMove","disabled","resizeObserver","ResizeObserver","getBoundingClientRect","getIndices","width","offsetX","offsetY","drawForm","fillStyle","fillRect","height","fillBorders","j","innerCellMargin","observe","unobserve","syncCanvasDimensions","indices","draft","localStorage","getItem","parse","treadling","threading","warpColors","weftColors","tieup","shaftCount","treadleCount","warpCount","pickCount","yarn","setItem","drop","removeItem","amountToAdd","changeArraySize","pattern","warpOrWeft","mirroredRepeat","newDraft","defaultValue","wc","$draft","changed","DraftUtil","updateShaftOrTreadleCounts","updateWarpCount","updatePickCount","u","VertexArray","gl","vertexData","indexData","attrs","drawMode","TRIANGLES","Float32Array","Uint16Array","initialize","vertBuf","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","indexBuf","ELEMENT_ARRAY_BUFFER","isInitialized","attrSum","pointer","vertexAttribPointer","FLOAT","enableVertexAttribArray","drawElements","UNSIGNED_SHORT","disableVertexAttribArray","deleteBuffer","Shader","vert","attributes","getAttributes","row","compiled","useProgram","program","uniforms","vertProgram","compileShader","VERTEX_SHADER","fragProgram","FRAGMENT_SHADER","createShaderProgram","shader","createShader","shaderSource","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","groupCollapsed","log","groupEnd","vertexShader","fragmentShader","shaderProgram","createProgram","attachShader","bindAttribLocation","linkProgram","getProgramParameter","LINK_STATUS","info","getProgramInfoLog","uniformName","handle","getUniformLocation","uniformHandle","getUniformHandle","uniform1i","uniform1f","uniform2fv","uniform3fv","uniform4fv","uniformMatrix3fv","uniformMatrix4fv","setInt","EPSILON","ARRAY_TYPE","glMatrix.ARRAY_TYPE","identity","translate","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","z","scale","fromRotationTranslationScale","w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","sx","sy","sz","fromValues","cross","ax","ay","az","bx","by","bz","hypot","sqrt","vec","setAxisAngle","axis","rad","sin","cos","slerp","omega","cosom","sinom","scale0","scale1","aw","bw","glMatrix.EPSILON","acos","tmpvec3","xUnitVec3","yUnitVec3","temp1","temp2","matr","normalize","vec3.create","vec3.fromValues","dot","transformMat4","sub","mul","onHexInputChange","body","premultipliedAlpha","preserveDrawingBuffer","clearColor","mouseDown","colorWheelToggle","triangleToggle","colorWheelShader","compile","satValShader","solidShader","quad","triP","triPT","vec2.create","uv","triangle","ring","geometry","draw","points","innerRadius","super","numPoints","PI","justify","generateGeometry","triangleModel","mat4.create","updateColor","onCanvasMouseMove","buttons","coords","clientX","clientY","saturation","handleInput","positionInWheel","dist","v1","v2","v1n","vec2.normalize","v2n","vec2.dot","det","atan2","getAngle","getPositionInWheel","positionInTriangle","getPositionInTriangle","pos","line","vec2.sub","vec2.len","vec2.scaleAndAdd","getClosestPointToTriangle","fireEvent","setState","ratio","coord","render","COLOR_BUFFER_BIT","resolution","setVec2","unbind","rot","hueRot","quat.setAxisAngle","quat.create","mat4.fromRotationTranslationScale","vec2.transformMat4","mvp2","mat4.translate","b00","b01","b02","b10","b11","b12","b20","b21","b22","mat4.rotate","mat4.scale","setMat4","setFloat","r1","vec2.mul","r2","res","vec2.add","getTriangleCoordinateFromColor","svMarkerColor","setVec4","hueMarkerColor","hueMarkerMatrix","a30","a31","a32","a33","b0","b1","b2","b3","mat4.multiply","yx","zx","zy","mat4.fromQuat","newState","realX","realY","elm","beforeElm","onChange","onBlur","hexString","canvasColorChange","inColor","parentElement","innerWidth","innerHeight","centerX","centerY","distToCenter","colors","colorPickerX","colorPickerY","yarnUnderModification","colorPickerVisible","selectYarnForModification","changeName","newName","yarnId","changeColor","deleteColor","selectedYarn","x0","y0","x1","y1","dx","dy","err","e2","gridIcon","addArrays","prevWarpOrWeft","grid","cellData","fromPos","isDragging","linePoints","temp","newPattern","draftUtil","applyPattern","$ui","movementX","movementY","lp","icon","sidebarWidth","sidebar","items","WeaveSettings","YarnSettings","PatternFill","selectMenu","ShaderBuilder","shaderCache","shaderName","genUV2D","buildShader","Texture","Uint8Array","texture","createTexture","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","TEXTURE_WRAP_T","CLAMP_TO_EDGE","TEXTURE_WRAP_S","deleteTexture","unit","activeTexture","TEXTURE0","setColorArea","texSubImage2D","RendererEventTarget","shaders","getShader","centerQuad","gridX","rendererPos","gridY","scrollX","scrollY","xOffset","yOffset","cellX","cellY","fromCell","getCellAtPos","toCell","TieupRenderer","toggleFunction","eventListeners","settings","mvp","initialView","view","cw","ch","mat4.identity","gridW","gridH","cellToggleTexture","setSampler2D","GridRenderer","vertical","minorSize","WeaveRenderer","weaveShader","warpTexture","weftTexture","ColorRowRenderer","colorTexture","create1DGridTexture","shafts","gridTexture","absence","createColorTexture","yarns","Renderer","disable","CULL_FACE","DEPTH_TEST","maxTextureSize","getParameter","MAX_TEXTURE_SIZE","threadingTexture","treadlingTexture","tieupTexture","resizeCanvas","extension","getExtension","loseContext","weave","renderers","renderer","renderNextFrame","requestAnimationFrame","setRendererPosition","prevDraft","prevUI","isDifferent","updateTextures","setTextures","updateValues","setCellToggleTexture","setColorTexture","num","createGridTexture","viewport","func","linePointsChanged","drag","startPos","endPos","startScroll","oldLinePoints","oldP","oldScroll","updateGrid","colorStart","colorEnd","pointsToArray","offsetWidth","offsetHeight","isWithinGrid","scroll","startPosScroll","getCellsBetweenPoints","renderPoints","updateListWithLine","updateTieupWithPoints","cell","toggleTieup","dispatchEvent","isToggled","setColor","createMouseEvent","MouseEvent","scrollContainer","canvasContainer","weaveDisplay","newCellSize","scrollbarWidth","updatePosition","scrollLeftMax","scrollWidth","clientWidth","scrollTopMax","scrollHeight","clientHeight","scrollLeft","scrollTop","scrollTo","evt","Help","Editor","app"],"mappings":"wDAIA,SAAUA,GAEV,IAAIC,EAAW,OACXC,EAAY,OACZC,EAAc,EACdC,EAAYJ,EAAKK,MACjBC,EAAUN,EAAKO,IACfC,EAAUR,EAAKS,IACfC,EAAaV,EAAKW,OAEtB,SAASC,EAAWC,EAAOC,GAMvB,GAHAA,EAAOA,GAAQ,IADfD,EAAQ,GAAkB,cAILD,EAClB,OAAOC,EAGV,KAAME,gBAAgBH,GAClB,OAAO,IAAIA,EAAUC,EAAOC,GAGhC,IAAIE,EAoRR,SAAoBH,GAEhB,IA8DcI,EAAGC,EAAGC,EA9DhBH,EAAM,CAAEC,EAAG,EAAGC,EAAG,EAAGC,EAAG,GACvBC,EAAI,EACJC,EAAI,KACJC,EAAI,KACJC,EAAI,KACJC,GAAK,EACLC,GAAS,EAkCb,MAhCoB,iBAATZ,IACPA,EAywBR,SAA6BA,GAEzBA,EAAQA,EAAMa,QAAQzB,EAAS,IAAIyB,QAAQxB,EAAW,IAAIyB,cAC1D,IAaIC,EAbAC,GAAQ,EACZ,GAAIC,EAAMjB,GACNA,EAAQiB,EAAMjB,GACdgB,GAAQ,OAEP,GAAa,eAAThB,EACL,MAAO,CAAEI,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGK,OAAQ,QAQ7C,OAAKG,EAAQG,EAASf,IAAIgB,KAAKnB,IACpB,CAAEI,EAAGW,EAAM,GAAIV,EAAGU,EAAM,GAAIT,EAAGS,EAAM,KAE3CA,EAAQG,EAASE,KAAKD,KAAKnB,IACrB,CAAEI,EAAGW,EAAM,GAAIV,EAAGU,EAAM,GAAIT,EAAGS,EAAM,GAAIR,EAAGQ,EAAM,KAExDA,EAAQG,EAASG,IAAIF,KAAKnB,IACpB,CAAEsB,EAAGP,EAAM,GAAIP,EAAGO,EAAM,GAAIL,EAAGK,EAAM,KAE3CA,EAAQG,EAASK,KAAKJ,KAAKnB,IACrB,CAAEsB,EAAGP,EAAM,GAAIP,EAAGO,EAAM,GAAIL,EAAGK,EAAM,GAAIR,EAAGQ,EAAM,KAExDA,EAAQG,EAASM,IAAIL,KAAKnB,IACpB,CAAEsB,EAAGP,EAAM,GAAIP,EAAGO,EAAM,GAAIN,EAAGM,EAAM,KAE3CA,EAAQG,EAASO,KAAKN,KAAKnB,IACrB,CAAEsB,EAAGP,EAAM,GAAIP,EAAGO,EAAM,GAAIN,EAAGM,EAAM,GAAIR,EAAGQ,EAAM,KAExDA,EAAQG,EAASQ,KAAKP,KAAKnB,IACrB,CACHI,EAAGuB,EAAgBZ,EAAM,IACzBV,EAAGsB,EAAgBZ,EAAM,IACzBT,EAAGqB,EAAgBZ,EAAM,IACzBR,EAAGqB,EAAoBb,EAAM,IAC7BH,OAAQI,EAAQ,OAAS,SAG5BD,EAAQG,EAASW,KAAKV,KAAKnB,IACrB,CACHI,EAAGuB,EAAgBZ,EAAM,IACzBV,EAAGsB,EAAgBZ,EAAM,IACzBT,EAAGqB,EAAgBZ,EAAM,IACzBH,OAAQI,EAAQ,OAAS,QAG5BD,EAAQG,EAASY,KAAKX,KAAKnB,IACrB,CACHI,EAAGuB,EAAgBZ,EAAM,GAAK,GAAKA,EAAM,IACzCV,EAAGsB,EAAgBZ,EAAM,GAAK,GAAKA,EAAM,IACzCT,EAAGqB,EAAgBZ,EAAM,GAAK,GAAKA,EAAM,IACzCR,EAAGqB,EAAoBb,EAAM,GAAK,GAAKA,EAAM,IAC7CH,OAAQI,EAAQ,OAAS,WAG5BD,EAAQG,EAASa,KAAKZ,KAAKnB,KACrB,CACHI,EAAGuB,EAAgBZ,EAAM,GAAK,GAAKA,EAAM,IACzCV,EAAGsB,EAAgBZ,EAAM,GAAK,GAAKA,EAAM,IACzCT,EAAGqB,EAAgBZ,EAAM,GAAK,GAAKA,EAAM,IACzCH,OAAQI,EAAQ,OAAS,OA30BrBgB,CAAoBhC,IAGZ,iBAATA,IACHiC,EAAejC,EAAMI,IAAM6B,EAAejC,EAAMK,IAAM4B,EAAejC,EAAMM,IAiDrEF,EAhDSJ,EAAMI,EAgDZC,EAhDeL,EAAMK,EAgDlBC,EAhDqBN,EAAMM,EAAvCH,EAiDD,CACHC,EAAqB,IAAlB8B,EAAQ9B,EAAG,KACdC,EAAqB,IAAlB6B,EAAQ7B,EAAG,KACdC,EAAqB,IAAlB4B,EAAQ5B,EAAG,MAnDVK,GAAK,EACLC,EAAwC,MAA/BuB,OAAOnC,EAAMI,GAAGgC,QAAQ,GAAa,OAAS,OAElDH,EAAejC,EAAMsB,IAAMW,EAAejC,EAAMQ,IAAMyB,EAAejC,EAAMS,IAChFD,EAAI6B,EAAoBrC,EAAMQ,GAC9BC,EAAI4B,EAAoBrC,EAAMS,GAC9BN,EAoJX,SAAkBmB,EAAGd,EAAGC,GAErBa,EAAsB,EAAlBY,EAAQZ,EAAG,KACfd,EAAI0B,EAAQ1B,EAAG,KACfC,EAAIyB,EAAQzB,EAAG,KAEf,IAAI6B,EAAInD,EAAKoD,MAAMjB,GACfkB,EAAIlB,EAAIgB,EACRG,EAAIhC,GAAK,EAAID,GACbkC,EAAIjC,GAAK,EAAI+B,EAAIhC,GACjBmC,EAAIlC,GAAK,GAAK,EAAI+B,GAAKhC,GACvBoC,EAAMN,EAAI,EAKd,MAAO,CAAElC,EAAO,IAJR,CAACK,EAAGiC,EAAGD,EAAGA,EAAGE,EAAGlC,GAAGmC,GAINvC,EAAO,IAHpB,CAACsC,EAAGlC,EAAGA,EAAGiC,EAAGD,EAAGA,GAAGG,GAGMtC,EAAO,IAFhC,CAACmC,EAAGA,EAAGE,EAAGlC,EAAGA,EAAGiC,GAAGE,IAlKbC,CAAS7C,EAAMsB,EAAGd,EAAGC,GAC3BE,GAAK,EACLC,EAAS,OAEJqB,EAAejC,EAAMsB,IAAMW,EAAejC,EAAMQ,IAAMyB,EAAejC,EAAMU,KAChFF,EAAI6B,EAAoBrC,EAAMQ,GAC9BE,EAAI2B,EAAoBrC,EAAMU,GAC9BP,EA6EZ,SAAkBmB,EAAGd,EAAGE,GACpB,IAAIN,EAAGC,EAAGC,EAMV,SAASwC,EAAQL,EAAGC,EAAGC,GAGnB,OAFGA,EAAI,IAAGA,GAAK,GACZA,EAAI,IAAGA,GAAK,GACZA,EAAI,EAAE,EAAUF,EAAc,GAATC,EAAID,GAASE,EAClCA,EAAI,GAAYD,EAChBC,EAAI,EAAE,EAAUF,GAAKC,EAAID,IAAM,EAAE,EAAIE,GAAK,EACtCF,EAGX,GAbAnB,EAAIY,EAAQZ,EAAG,KACfd,EAAI0B,EAAQ1B,EAAG,KACfE,EAAIwB,EAAQxB,EAAG,KAWN,IAANF,EACCJ,EAAIC,EAAIC,EAAII,MAEX,CACD,IAAIgC,EAAIhC,EAAI,GAAMA,GAAK,EAAIF,GAAKE,EAAIF,EAAIE,EAAIF,EACxCiC,EAAI,EAAI/B,EAAIgC,EAChBtC,EAAI0C,EAAQL,EAAGC,EAAGpB,EAAI,EAAE,GACxBjB,EAAIyC,EAAQL,EAAGC,EAAGpB,GAClBhB,EAAIwC,EAAQL,EAAGC,EAAGpB,EAAI,EAAE,GAG5B,MAAO,CAAElB,EAAO,IAAJA,EAASC,EAAO,IAAJA,EAASC,EAAO,IAAJA,GAxGtByC,CAAS/C,EAAMsB,EAAGd,EAAGE,GAC3BC,GAAK,EACLC,EAAS,OAGTZ,EAAMgD,eAAe,OACrBzC,EAAIP,EAAMO,IAIlBA,EAAI0C,EAAW1C,GAER,CACHI,GAAIA,EACJC,OAAQZ,EAAMY,QAAUA,EACxBR,EAAGX,EAAQ,IAAKE,EAAQQ,EAAIC,EAAG,IAC/BC,EAAGZ,EAAQ,IAAKE,EAAQQ,EAAIE,EAAG,IAC/BC,EAAGb,EAAQ,IAAKE,EAAQQ,EAAIG,EAAG,IAC/BC,EAAGA,GApUG2C,CAAWlD,GACrBE,KAAKiD,eAAiBnD,EACtBE,KAAKkD,GAAKjD,EAAIC,EACdF,KAAKmD,GAAKlD,EAAIE,EACdH,KAAKoD,GAAKnD,EAAIG,EACdJ,KAAKqD,GAAKpD,EAAII,EACdL,KAAKsD,QAAUjE,EAAU,IAAIW,KAAKqD,IAAM,IACxCrD,KAAKuD,QAAUxD,EAAKW,QAAUT,EAAIS,OAClCV,KAAKwD,cAAgBzD,EAAK0D,aAMtBzD,KAAKkD,GAAK,IAAKlD,KAAKkD,GAAK7D,EAAUW,KAAKkD,KACxClD,KAAKmD,GAAK,IAAKnD,KAAKmD,GAAK9D,EAAUW,KAAKmD,KACxCnD,KAAKoD,GAAK,IAAKpD,KAAKoD,GAAK/D,EAAUW,KAAKoD,KAE5CpD,KAAK0D,IAAMzD,EAAIQ,GACfT,KAAK2D,OAASvE,IA6UlB,SAASwE,EAAS1D,EAAGC,EAAGC,GAEpBF,EAAI8B,EAAQ9B,EAAG,KACfC,EAAI6B,EAAQ7B,EAAG,KACfC,EAAI4B,EAAQ5B,EAAG,KAEf,IACIgB,EAAGd,EADHZ,EAAMD,EAAQS,EAAGC,EAAGC,GAAIZ,EAAMD,EAAQW,EAAGC,EAAGC,GACtCI,GAAKd,EAAMF,GAAO,EAE5B,GAAGE,GAAOF,EACN4B,EAAId,EAAI,MAEP,CACD,IAAIuD,EAAInE,EAAMF,EAEd,OADAc,EAAIE,EAAI,GAAMqD,GAAK,EAAInE,EAAMF,GAAOqE,GAAKnE,EAAMF,GACxCE,GACH,KAAKQ,EAAGkB,GAAKjB,EAAIC,GAAKyD,GAAK1D,EAAIC,EAAI,EAAI,GAAI,MAC3C,KAAKD,EAAGiB,GAAKhB,EAAIF,GAAK2D,EAAI,EAAG,MAC7B,KAAKzD,EAAGgB,GAAKlB,EAAIC,GAAK0D,EAAI,EAG9BzC,GAAK,EAGT,MAAO,CAAEA,EAAGA,EAAGd,EAAGA,EAAGE,EAAGA,GAyC5B,SAASsD,EAAS5D,EAAGC,EAAGC,GAEpBF,EAAI8B,EAAQ9B,EAAG,KACfC,EAAI6B,EAAQ7B,EAAG,KACfC,EAAI4B,EAAQ5B,EAAG,KAEf,IACIgB,EAAGd,EADHZ,EAAMD,EAAQS,EAAGC,EAAGC,GAAIZ,EAAMD,EAAQW,EAAGC,EAAGC,GACtCG,EAAIb,EAEVmE,EAAInE,EAAMF,EAGd,GAFAc,EAAY,IAARZ,EAAY,EAAImE,EAAInE,EAErBA,GAAOF,EACN4B,EAAI,MAEH,CACD,OAAO1B,GACH,KAAKQ,EAAGkB,GAAKjB,EAAIC,GAAKyD,GAAK1D,EAAIC,EAAI,EAAI,GAAI,MAC3C,KAAKD,EAAGiB,GAAKhB,EAAIF,GAAK2D,EAAI,EAAG,MAC7B,KAAKzD,EAAGgB,GAAKlB,EAAIC,GAAK0D,EAAI,EAE9BzC,GAAK,EAET,MAAO,CAAEA,EAAGA,EAAGd,EAAGA,EAAGC,EAAGA,GA8B5B,SAASwD,EAAS7D,EAAGC,EAAGC,EAAG4D,GAEvB,IAAIC,EAAM,CACNC,EAAK7E,EAAUa,GAAGiE,SAAS,KAC3BD,EAAK7E,EAAUc,GAAGgE,SAAS,KAC3BD,EAAK7E,EAAUe,GAAG+D,SAAS,MAI/B,OAAIH,GAAcC,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,GACzHH,EAAI,GAAGG,OAAO,GAAKH,EAAI,GAAGG,OAAO,GAAKH,EAAI,GAAGG,OAAO,GAGxDH,EAAII,KAAK,IA2BpB,SAASC,EAAcpE,EAAGC,EAAGC,EAAGC,GAS5B,MAPU,CACN6D,EAAKK,EAAoBlE,IACzB6D,EAAK7E,EAAUa,GAAGiE,SAAS,KAC3BD,EAAK7E,EAAUc,GAAGgE,SAAS,KAC3BD,EAAK7E,EAAUe,GAAG+D,SAAS,MAGpBE,KAAK,IAwBpB,SAASG,EAAW1E,EAAO2E,GACvBA,EAAqB,IAAXA,EAAgB,EAAKA,GAAU,GACzC,IAAItD,EAAMtB,EAAUC,GAAO4E,QAG3B,OAFAvD,EAAIb,GAAKmE,EAAS,IAClBtD,EAAIb,EAAIqE,EAAQxD,EAAIb,GACbT,EAAUsB,GAGrB,SAASyD,EAAS9E,EAAO2E,GACrBA,EAAqB,IAAXA,EAAgB,EAAKA,GAAU,GACzC,IAAItD,EAAMtB,EAAUC,GAAO4E,QAG3B,OAFAvD,EAAIb,GAAKmE,EAAS,IAClBtD,EAAIb,EAAIqE,EAAQxD,EAAIb,GACbT,EAAUsB,GAGrB,SAAS0D,EAAU/E,GACf,OAAOD,EAAUC,GAAO0E,WAAW,KAGvC,SAASM,EAAShF,EAAO2E,GACrBA,EAAqB,IAAXA,EAAgB,EAAKA,GAAU,GACzC,IAAItD,EAAMtB,EAAUC,GAAO4E,QAG3B,OAFAvD,EAAIX,GAAKiE,EAAS,IAClBtD,EAAIX,EAAImE,EAAQxD,EAAIX,GACbX,EAAUsB,GAGrB,SAAS4D,EAASjF,EAAO2E,GACrBA,EAAqB,IAAXA,EAAgB,EAAKA,GAAU,GACzC,IAAIxE,EAAMJ,EAAUC,GAAOkF,QAI3B,OAHA/E,EAAIC,EAAIT,EAAQ,EAAGF,EAAQ,IAAKU,EAAIC,EAAIb,GAAmBoF,EAAS,IAAlB,OAClDxE,EAAIE,EAAIV,EAAQ,EAAGF,EAAQ,IAAKU,EAAIE,EAAId,GAAmBoF,EAAS,IAAlB,OAClDxE,EAAIG,EAAIX,EAAQ,EAAGF,EAAQ,IAAKU,EAAIG,EAAIf,GAAmBoF,EAAS,IAAlB,OAC3C5E,EAAUI,GAGrB,SAASgF,EAAQnF,EAAO2E,GACpBA,EAAqB,IAAXA,EAAgB,EAAKA,GAAU,GACzC,IAAItD,EAAMtB,EAAUC,GAAO4E,QAG3B,OAFAvD,EAAIX,GAAKiE,EAAS,IAClBtD,EAAIX,EAAImE,EAAQxD,EAAIX,GACbX,EAAUsB,GAKrB,SAAS+D,EAAKpF,EAAO2E,GACjB,IAAItD,EAAMtB,EAAUC,GAAO4E,QACvBS,GAAOhE,EAAIC,EAAIqD,GAAU,IAE7B,OADAtD,EAAIC,EAAI+D,EAAM,EAAI,IAAMA,EAAMA,EACvBtF,EAAUsB,GAQrB,SAASiE,EAAWtF,GAChB,IAAIqB,EAAMtB,EAAUC,GAAO4E,QAE3B,OADAvD,EAAIC,GAAKD,EAAIC,EAAI,KAAO,IACjBvB,EAAUsB,GAGrB,SAASkE,EAAMvF,GACX,IAAIqB,EAAMtB,EAAUC,GAAO4E,QACvBtD,EAAID,EAAIC,EACZ,MAAO,CACHvB,EAAUC,GACVD,EAAU,CAAEuB,GAAIA,EAAI,KAAO,IAAKd,EAAGa,EAAIb,EAAGE,EAAGW,EAAIX,IACjDX,EAAU,CAAEuB,GAAIA,EAAI,KAAO,IAAKd,EAAGa,EAAIb,EAAGE,EAAGW,EAAIX,KAIzD,SAAS8E,EAAOxF,GACZ,IAAIqB,EAAMtB,EAAUC,GAAO4E,QACvBtD,EAAID,EAAIC,EACZ,MAAO,CACHvB,EAAUC,GACVD,EAAU,CAAEuB,GAAIA,EAAI,IAAM,IAAKd,EAAGa,EAAIb,EAAGE,EAAGW,EAAIX,IAChDX,EAAU,CAAEuB,GAAIA,EAAI,KAAO,IAAKd,EAAGa,EAAIb,EAAGE,EAAGW,EAAIX,IACjDX,EAAU,CAAEuB,GAAIA,EAAI,KAAO,IAAKd,EAAGa,EAAIb,EAAGE,EAAGW,EAAIX,KAIzD,SAAS+E,EAAgBzF,GACrB,IAAIqB,EAAMtB,EAAUC,GAAO4E,QACvBtD,EAAID,EAAIC,EACZ,MAAO,CACHvB,EAAUC,GACVD,EAAU,CAAEuB,GAAIA,EAAI,IAAM,IAAKd,EAAGa,EAAIb,EAAGE,EAAGW,EAAIX,IAChDX,EAAU,CAAEuB,GAAIA,EAAI,KAAO,IAAKd,EAAGa,EAAIb,EAAGE,EAAGW,EAAIX,KAIzD,SAASgF,EAAU1F,EAAO2F,EAASC,GAC/BD,EAAUA,GAAW,EACrBC,EAASA,GAAU,GAEnB,IAAIvE,EAAMtB,EAAUC,GAAO4E,QACvBiB,EAAO,IAAMD,EACbE,EAAM,CAAC/F,EAAUC,IAErB,IAAKqB,EAAIC,GAAMD,EAAIC,GAAKuE,EAAOF,GAAW,GAAM,KAAO,MAAOA,GAC1DtE,EAAIC,GAAKD,EAAIC,EAAIuE,GAAQ,IACzBC,EAAIC,KAAKhG,EAAUsB,IAEvB,OAAOyE,EAGX,SAASE,EAAchG,EAAO2F,GAC1BA,EAAUA,GAAW,EAMrB,IALA,IAAInE,EAAMzB,EAAUC,GAAOiG,QACvB3E,EAAIE,EAAIF,EAAGd,EAAIgB,EAAIhB,EAAGC,EAAIe,EAAIf,EAC9BqF,EAAM,GACNI,EAAe,EAAIP,EAEhBA,KACHG,EAAIC,KAAKhG,EAAU,CAAEuB,EAAGA,EAAGd,EAAGA,EAAGC,EAAGA,KACpCA,GAAKA,EAAIyF,GAAgB,EAG7B,OAAOJ,EApoBX/F,EAAUoG,UAAY,CAClBC,OAAQ,WACJ,OAAOlG,KAAKmG,gBAAkB,KAElCC,QAAS,WACL,OAAQpG,KAAKkG,UAEjBG,QAAS,WACL,OAAOrG,KAAK0D,KAEhB4C,iBAAkB,WAChB,OAAOtG,KAAKiD,gBAEdsD,UAAW,WACP,OAAOvG,KAAKuD,SAEhBiD,SAAU,WACN,OAAOxG,KAAKqD,IAEhB8C,cAAe,WAEX,IAAIlG,EAAMD,KAAKgF,QACf,OAAgB,IAAR/E,EAAIC,EAAkB,IAARD,EAAIE,EAAkB,IAARF,EAAIG,GAAW,KAEvDqG,aAAc,WAEV,IACIC,EAAOC,EAAOC,EADd3G,EAAMD,KAAKgF,QASf,OAPA0B,EAAQzG,EAAIC,EAAE,IACdyG,EAAQ1G,EAAIE,EAAE,IACdyG,EAAQ3G,EAAIG,EAAE,IAKN,OAHJsG,GAAS,OAAcA,EAAQ,MAAkBzH,EAAK4H,KAAMH,EAAQ,MAAS,MAAQ,MAGlE,OAFnBC,GAAS,OAAcA,EAAQ,MAAkB1H,EAAK4H,KAAMF,EAAQ,MAAS,MAAQ,MAEnD,OADlCC,GAAS,OAAcA,EAAQ,MAAkB3H,EAAK4H,KAAMD,EAAQ,MAAS,MAAQ,OAG7FE,SAAU,SAASC,GAGf,OAFA/G,KAAKqD,GAAKN,EAAWgE,GACrB/G,KAAKsD,QAAUjE,EAAU,IAAIW,KAAKqD,IAAM,IACjCrD,MAEX+F,MAAO,WACH,IAAIzE,EAAMwC,EAAS9D,KAAKkD,GAAIlD,KAAKmD,GAAInD,KAAKoD,IAC1C,MAAO,CAAEhC,EAAW,IAARE,EAAIF,EAASd,EAAGgB,EAAIhB,EAAGC,EAAGe,EAAIf,EAAGF,EAAGL,KAAKqD,KAEzD2D,YAAa,WACT,IAAI1F,EAAMwC,EAAS9D,KAAKkD,GAAIlD,KAAKmD,GAAInD,KAAKoD,IACtChC,EAAI/B,EAAkB,IAARiC,EAAIF,GAAUd,EAAIjB,EAAkB,IAARiC,EAAIhB,GAAUC,EAAIlB,EAAkB,IAARiC,EAAIf,GAC9E,OAAmB,GAAXP,KAAKqD,GACX,OAAUjC,EAAI,KAAOd,EAAI,MAAQC,EAAI,KACrC,QAAUa,EAAI,KAAOd,EAAI,MAAQC,EAAI,MAAOP,KAAKsD,QAAU,KAEjEoB,MAAO,WACH,IAAIvD,EAAMyC,EAAS5D,KAAKkD,GAAIlD,KAAKmD,GAAInD,KAAKoD,IAC1C,MAAO,CAAEhC,EAAW,IAARD,EAAIC,EAASd,EAAGa,EAAIb,EAAGE,EAAGW,EAAIX,EAAGH,EAAGL,KAAKqD,KAEzD4D,YAAa,WACT,IAAI9F,EAAMyC,EAAS5D,KAAKkD,GAAIlD,KAAKmD,GAAInD,KAAKoD,IACtChC,EAAI/B,EAAkB,IAAR8B,EAAIC,GAAUd,EAAIjB,EAAkB,IAAR8B,EAAIb,GAAUE,EAAInB,EAAkB,IAAR8B,EAAIX,GAC9E,OAAmB,GAAXR,KAAKqD,GACX,OAAUjC,EAAI,KAAOd,EAAI,MAAQE,EAAI,KACrC,QAAUY,EAAI,KAAOd,EAAI,MAAQE,EAAI,MAAOR,KAAKsD,QAAU,KAEjE4D,MAAO,SAASlD,GACZ,OAAOD,EAAS/D,KAAKkD,GAAIlD,KAAKmD,GAAInD,KAAKoD,GAAIY,IAE/CmD,YAAa,SAASnD,GAClB,MAAO,IAAMhE,KAAKkH,MAAMlD,IAE5BoD,OAAQ,SAASC,GACb,OA6YR,SAAmBnH,EAAGC,EAAGC,EAAGC,EAAGgH,GAE3B,IAAIpD,EAAM,CACNC,EAAK7E,EAAUa,GAAGiE,SAAS,KAC3BD,EAAK7E,EAAUc,GAAGgE,SAAS,KAC3BD,EAAK7E,EAAUe,GAAG+D,SAAS,KAC3BD,EAAKK,EAAoBlE,KAI7B,OAAIgH,GAAcpD,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,GACjKH,EAAI,GAAGG,OAAO,GAAKH,EAAI,GAAGG,OAAO,GAAKH,EAAI,GAAGG,OAAO,GAAKH,EAAI,GAAGG,OAAO,GAG3EH,EAAII,KAAK,IA3ZLiD,CAAUtH,KAAKkD,GAAIlD,KAAKmD,GAAInD,KAAKoD,GAAIpD,KAAKqD,GAAIgE,IAEzDE,aAAc,SAASF,GACnB,MAAO,IAAMrH,KAAKoH,OAAOC,IAE7BrC,MAAO,WACH,MAAO,CAAE9E,EAAGb,EAAUW,KAAKkD,IAAK/C,EAAGd,EAAUW,KAAKmD,IAAK/C,EAAGf,EAAUW,KAAKoD,IAAK/C,EAAGL,KAAKqD,KAE1FmE,YAAa,WACT,OAAmB,GAAXxH,KAAKqD,GACX,OAAUhE,EAAUW,KAAKkD,IAAM,KAAO7D,EAAUW,KAAKmD,IAAM,KAAO9D,EAAUW,KAAKoD,IAAM,IACvF,QAAU/D,EAAUW,KAAKkD,IAAM,KAAO7D,EAAUW,KAAKmD,IAAM,KAAO9D,EAAUW,KAAKoD,IAAM,KAAOpD,KAAKsD,QAAU,KAEnHmE,gBAAiB,WACb,MAAO,CAAEvH,EAAGb,EAAkC,IAAxB2C,EAAQhC,KAAKkD,GAAI,MAAc,IAAK/C,EAAGd,EAAkC,IAAxB2C,EAAQhC,KAAKmD,GAAI,MAAc,IAAK/C,EAAGf,EAAkC,IAAxB2C,EAAQhC,KAAKoD,GAAI,MAAc,IAAK/C,EAAGL,KAAKqD,KAExKqE,sBAAuB,WACnB,OAAmB,GAAX1H,KAAKqD,GACX,OAAUhE,EAAkC,IAAxB2C,EAAQhC,KAAKkD,GAAI,MAAc,MAAQ7D,EAAkC,IAAxB2C,EAAQhC,KAAKmD,GAAI,MAAc,MAAQ9D,EAAkC,IAAxB2C,EAAQhC,KAAKoD,GAAI,MAAc,KACrJ,QAAU/D,EAAkC,IAAxB2C,EAAQhC,KAAKkD,GAAI,MAAc,MAAQ7D,EAAkC,IAAxB2C,EAAQhC,KAAKmD,GAAI,MAAc,MAAQ9D,EAAkC,IAAxB2C,EAAQhC,KAAKoD,GAAI,MAAc,MAAQpD,KAAKsD,QAAU,KAElLqE,OAAQ,WACJ,OAAgB,IAAZ3H,KAAKqD,GACE,gBAGPrD,KAAKqD,GAAK,KAIPuE,EAAS7D,EAAS/D,KAAKkD,GAAIlD,KAAKmD,GAAInD,KAAKoD,IAAI,MAAU,IAElEyE,SAAU,SAASC,GACf,IAAIC,EAAa,IAAMzD,EAActE,KAAKkD,GAAIlD,KAAKmD,GAAInD,KAAKoD,GAAIpD,KAAKqD,IACjE2E,EAAmBD,EACnBtE,EAAezD,KAAKwD,cAAgB,qBAAuB,GAE/D,GAAIsE,EAAa,CACb,IAAIxH,EAAIT,EAAUiI,GAClBE,EAAmB,IAAM1D,EAAchE,EAAE4C,GAAI5C,EAAE6C,GAAI7C,EAAE8C,GAAI9C,EAAE+C,IAG/D,MAAO,8CAA8CI,EAAa,iBAAiBsE,EAAW,gBAAgBC,EAAiB,KAEnI7D,SAAU,SAASzD,GACf,IAAIuH,IAAcvH,EAClBA,EAASA,GAAUV,KAAKuD,QAExB,IAAI2E,GAAkB,EAClBC,EAAWnI,KAAKqD,GAAK,GAAKrD,KAAKqD,IAAM,EAGzC,OAFwB4E,IAAaE,GAAwB,QAAXzH,GAA+B,SAAXA,GAAgC,SAAXA,GAAgC,SAAXA,GAAgC,SAAXA,GAAgC,SAAXA,GAU3I,QAAXA,IACAwH,EAAkBlI,KAAKwH,eAEZ,SAAX9G,IACAwH,EAAkBlI,KAAK0H,yBAEZ,QAAXhH,GAA+B,SAAXA,IACpBwH,EAAkBlI,KAAKmH,eAEZ,SAAXzG,IACAwH,EAAkBlI,KAAKmH,aAAY,IAExB,SAAXzG,IACAwH,EAAkBlI,KAAKuH,cAAa,IAEzB,SAAX7G,IACAwH,EAAkBlI,KAAKuH,gBAEZ,SAAX7G,IACAwH,EAAkBlI,KAAK2H,UAEZ,QAAXjH,IACAwH,EAAkBlI,KAAKiH,eAEZ,QAAXvG,IACAwH,EAAkBlI,KAAKgH,eAGpBkB,GAAmBlI,KAAKmH,eAjCZ,SAAXzG,GAAiC,IAAZV,KAAKqD,GACnBrD,KAAK2H,SAET3H,KAAKwH,eAgCpBY,MAAO,WACH,OAAOvI,EAAUG,KAAKmE,aAG1BkE,mBAAoB,SAASC,EAAIC,GAC7B,IAAIzI,EAAQwI,EAAGE,MAAM,KAAM,CAACxI,MAAMyI,OAAO,GAAGC,MAAMC,KAAKJ,KAKvD,OAJAvI,KAAKkD,GAAKpD,EAAMoD,GAChBlD,KAAKmD,GAAKrD,EAAMqD,GAChBnD,KAAKoD,GAAKtD,EAAMsD,GAChBpD,KAAK8G,SAAShH,EAAMuD,IACbrD,MAEX8E,QAAS,WACL,OAAO9E,KAAKqI,mBAAmBvD,EAAS8D,YAE5C7D,SAAU,WACN,OAAO/E,KAAKqI,mBAAmBtD,EAAU6D,YAE7C3D,OAAQ,WACJ,OAAOjF,KAAKqI,mBAAmBpD,EAAQ2D,YAE3CpE,WAAY,WACR,OAAOxE,KAAKqI,mBAAmB7D,EAAYoE,YAE/ChE,SAAU,WACN,OAAO5E,KAAKqI,mBAAmBzD,EAAUgE,YAE7C/D,UAAW,WACP,OAAO7E,KAAKqI,mBAAmBxD,EAAW+D,YAE9C1D,KAAM,WACF,OAAOlF,KAAKqI,mBAAmBnD,EAAM0D,YAGzCC,kBAAmB,SAASP,EAAIC,GAC5B,OAAOD,EAAGE,MAAM,KAAM,CAACxI,MAAMyI,OAAO,GAAGC,MAAMC,KAAKJ,MAEtD/C,UAAW,WACP,OAAOxF,KAAK6I,kBAAkBrD,EAAWoD,YAE7CxD,WAAY,WACR,OAAOpF,KAAK6I,kBAAkBzD,EAAYwD,YAE9C9C,cAAe,WACX,OAAO9F,KAAK6I,kBAAkB/C,EAAe8C,YAEjDrD,gBAAiB,WACb,OAAOvF,KAAK6I,kBAAkBtD,EAAiBqD,YAEnDvD,MAAO,WACH,OAAOrF,KAAK6I,kBAAkBxD,EAAOuD,YAEzCtD,OAAQ,WACJ,OAAOtF,KAAK6I,kBAAkBvD,EAAQsD,aAM9C/I,EAAUiJ,UAAY,SAAShJ,EAAOC,GAClC,GAAoB,iBAATD,EAAmB,CAC1B,IAAIiJ,EAAW,GACf,IAAK,IAAI3G,KAAKtC,EACNA,EAAMgD,eAAeV,KAEjB2G,EAAS3G,GADH,MAANA,EACctC,EAAMsC,GAGND,EAAoBrC,EAAMsC,KAIpDtC,EAAQiJ,EAGZ,OAAOlJ,EAAUC,EAAOC,IA0Q5BF,EAAUmJ,OAAS,SAAUC,EAAQC,GACjC,SAAKD,IAAWC,IACTrJ,EAAUoJ,GAAQzB,eAAiB3H,EAAUqJ,GAAQ1B,eAGhE3H,EAAUD,OAAS,WACf,OAAOC,EAAUiJ,UAAU,CACvB5I,EAAGP,IACHQ,EAAGR,IACHS,EAAGT,OA2IXE,EAAUsJ,IAAM,SAASF,EAAQC,EAAQzE,GACrCA,EAAqB,IAAXA,EAAgB,EAAKA,GAAU,GAEzC,IAAI2E,EAAOvJ,EAAUoJ,GAAQjE,QACzBqE,EAAOxJ,EAAUqJ,GAAQlE,QAEzBzC,EAAIkC,EAAS,IASjB,OAAO5E,EAPI,CACPK,GAAKmJ,EAAKnJ,EAAIkJ,EAAKlJ,GAAKqC,EAAK6G,EAAKlJ,EAClCC,GAAKkJ,EAAKlJ,EAAIiJ,EAAKjJ,GAAKoC,EAAK6G,EAAKjJ,EAClCC,GAAKiJ,EAAKjJ,EAAIgJ,EAAKhJ,GAAKmC,EAAK6G,EAAKhJ,EAClCC,GAAKgJ,EAAKhJ,EAAI+I,EAAK/I,GAAKkC,EAAK6G,EAAK/I,KAa1CR,EAAUyJ,YAAc,SAASL,EAAQC,GACrC,IAAIK,EAAK1J,EAAUoJ,GACfO,EAAK3J,EAAUqJ,GACnB,OAAQjK,EAAKS,IAAI6J,EAAG9C,eAAe+C,EAAG/C,gBAAgB,MAASxH,EAAKO,IAAI+J,EAAG9C,eAAe+C,EAAG/C,gBAAgB,MAajH5G,EAAU4J,WAAa,SAASR,EAAQC,EAAQQ,GAC5C,IACIC,EAAYC,EAsaQC,EAGpBC,EAAOC,EA1aPT,EAAczJ,EAAUyJ,YAAYL,EAAQC,GAMhD,OAHAU,GAAM,GAoakBC,EAlaQH,EAuahCI,IADAD,EAAQA,GAAS,CAACC,MAAQ,KAAMC,KAAO,UACxBD,OAAS,MAAME,cAC9BD,GAAQF,EAAME,MAAQ,SAASnJ,cACjB,OAAVkJ,GAA4B,QAAVA,IAClBA,EAAQ,MAEC,UAATC,GAA6B,UAATA,IACpBA,EAAO,SA7aXJ,EA+aO,CAACG,MAAQA,EAAOC,KAAOA,IA9aXD,MAAQH,EAAWI,MAClC,IAAK,UACL,IAAK,WACDH,EAAMN,GAAe,IACrB,MACJ,IAAK,UACDM,EAAMN,GAAe,EACrB,MACJ,IAAK,WACDM,EAAMN,GAAe,EAG7B,OAAOM,GAaX/J,EAAUoK,aAAe,SAASC,EAAWC,EAAW5B,GACpD,IAEIe,EACAc,EAAuBN,EAAOC,EAH9BM,EAAY,KACZC,EAAY,EAIhBF,GADA7B,EAAOA,GAAQ,IACc6B,sBAC7BN,EAAQvB,EAAKuB,MACbC,EAAOxB,EAAKwB,KAEZ,IAAK,IAAI3H,EAAG,EAAGA,EAAI+H,EAAUI,OAASnI,KAClCkH,EAAczJ,EAAUyJ,YAAYY,EAAWC,EAAU/H,KACvCkI,IACdA,EAAYhB,EACZe,EAAYxK,EAAUsK,EAAU/H,KAIxC,OAAIvC,EAAU4J,WAAWS,EAAWG,EAAW,CAACP,MAAQA,EAAMC,KAAOA,MAAWK,EACrEC,GAGP9B,EAAK6B,uBAAsB,EACpBvK,EAAUoK,aAAaC,EAAU,CAAC,OAAQ,QAAQ3B,KAQjE,IAAIxH,EAAQlB,EAAUkB,MAAQ,CAC1ByJ,UAAW,SACXC,aAAc,SACdC,KAAM,MACNC,WAAY,SACZC,MAAO,SACPC,MAAO,SACPC,OAAQ,SACRC,MAAO,MACPC,eAAgB,SAChBC,KAAM,MACNC,WAAY,SACZC,MAAO,SACPC,UAAW,SACXC,YAAa,SACbC,UAAW,SACXC,WAAY,SACZC,UAAW,SACXC,MAAO,SACPC,eAAgB,SAChBC,SAAU,SACVC,QAAS,SACTC,KAAM,MACNC,SAAU,SACVC,SAAU,SACVC,cAAe,SACfC,SAAU,SACVC,UAAW,SACXC,SAAU,SACVC,UAAW,SACXC,YAAa,SACbC,eAAgB,SAChBC,WAAY,SACZC,WAAY,SACZC,QAAS,SACTC,WAAY,SACZC,aAAc,SACdC,cAAe,SACfC,cAAe,SACfC,cAAe,SACfC,cAAe,SACfC,WAAY,SACZC,SAAU,SACVC,YAAa,SACbC,QAAS,SACTC,QAAS,SACTC,WAAY,SACZC,UAAW,SACXC,YAAa,SACbC,YAAa,SACbC,QAAS,MACTC,UAAW,SACXC,WAAY,SACZC,KAAM,SACNC,UAAW,SACXC,KAAM,SACNC,MAAO,SACPC,YAAa,SACbC,KAAM,SACNC,SAAU,SACVC,QAAS,SACTC,UAAW,SACXC,OAAQ,SACRC,MAAO,SACPC,MAAO,SACPC,SAAU,SACVC,cAAe,SACfC,UAAW,SACXC,aAAc,SACdC,UAAW,SACXC,WAAY,SACZC,UAAW,SACXC,qBAAsB,SACtBC,UAAW,SACXC,WAAY,SACZC,UAAW,SACXC,UAAW,SACXC,YAAa,SACbC,cAAe,SACfC,aAAc,SACdC,eAAgB,MAChBC,eAAgB,MAChBC,eAAgB,SAChBC,YAAa,SACbC,KAAM,MACNC,UAAW,SACXC,MAAO,SACPC,QAAS,MACTC,OAAQ,SACRC,iBAAkB,SAClBC,WAAY,SACZC,aAAc,SACdC,aAAc,SACdC,eAAgB,SAChBC,gBAAiB,SACjBC,kBAAmB,SACnBC,gBAAiB,SACjBC,gBAAiB,SACjBC,aAAc,SACdC,UAAW,SACXC,UAAW,SACXC,SAAU,SACVC,YAAa,SACbC,KAAM,SACNC,QAAS,SACTC,MAAO,SACPC,UAAW,SACXC,OAAQ,SACRC,UAAW,SACXC,OAAQ,SACRC,cAAe,SACfC,UAAW,SACXC,cAAe,SACfC,cAAe,SACfC,WAAY,SACZC,UAAW,SACXC,KAAM,SACNC,KAAM,SACNC,KAAM,SACNC,WAAY,SACZC,OAAQ,SACRC,cAAe,SACfC,IAAK,MACLC,UAAW,SACXC,UAAW,SACXC,YAAa,SACbC,OAAQ,SACRC,WAAY,SACZC,SAAU,SACVC,SAAU,SACVC,OAAQ,SACRC,OAAQ,SACRC,QAAS,SACTC,UAAW,SACXC,UAAW,SACXC,UAAW,SACXC,KAAM,SACNC,YAAa,SACbC,UAAW,SACXC,IAAK,SACLC,KAAM,SACNC,QAAS,SACTC,OAAQ,SACRC,UAAW,SACXC,OAAQ,SACRC,MAAO,SACPC,MAAO,MACPC,WAAY,SACZC,OAAQ,MACRC,YAAa,UAIbhM,EAAW/H,EAAU+H,SAOzB,SAAciM,GACV,IAAIC,EAAU,GACd,IAAK,IAAI1R,KAAKyR,EACNA,EAAE/Q,eAAeV,KACjB0R,EAAQD,EAAEzR,IAAMA,GAGxB,OAAO0R,EAdyBC,CAAKhT,GAkBzC,SAASgC,EAAW1C,GAOhB,OANAA,EAAI2T,WAAW3T,IAEX4T,MAAM5T,IAAMA,EAAI,GAAKA,EAAI,KACzBA,EAAI,GAGDA,EAIX,SAAS2B,EAAQkS,EAAGxU,IAgCpB,SAAwBwU,GACpB,MAAmB,iBAALA,IAAoC,GAAnBA,EAAEC,QAAQ,MAAgC,IAAlBH,WAAWE,IAhC9DE,CAAeF,KAAMA,EAAI,QAE7B,IAAIG,EAkCR,SAAsBH,GAClB,MAAoB,iBAANA,IAAqC,GAAnBA,EAAEC,QAAQ,KAnCrBG,CAAaJ,GASlC,OARAA,EAAI3U,EAAQG,EAAKD,EAAQ,EAAGuU,WAAWE,KAGnCG,IACAH,EAAIK,SAASL,EAAIxU,EAAK,IAAM,KAI3BT,EAAKuV,IAAIN,EAAIxU,GAAO,KACd,EAIHwU,EAAIxU,EAAOsU,WAAWtU,GAIlC,SAASiF,EAAQ8P,GACb,OAAOlV,EAAQ,EAAGE,EAAQ,EAAGgV,IAIjC,SAAShT,EAAgBgT,GACrB,OAAOF,SAASE,EAAK,IAezB,SAASvQ,EAAKwQ,GACV,OAAmB,GAAZA,EAAEnK,OAAc,IAAMmK,EAAI,GAAKA,EAI1C,SAASvS,EAAoB+R,GAKzB,OAJIA,GAAK,IACLA,EAAS,IAAJA,EAAW,KAGbA,EAIX,SAAS3P,EAAoBV,GACzB,OAAO5E,EAAKK,MAAsB,IAAhB0U,WAAWnQ,IAAUM,SAAS,IAGpD,SAASzC,EAAoBN,GACzB,OAAQK,EAAgBL,GAAK,IAGjC,IASQuT,EAKAC,EACAC,EAfJ7T,GAcI4T,EAAoB,eALpBD,EAAW,8CAKoC,aAAeA,EAAW,aAAeA,EAAW,YACnGE,EAAoB,cAAgBF,EAAW,aAAeA,EAAW,aAAeA,EAAW,aAAeA,EAAW,YAE1H,CACHA,SAAU,IAAIG,OAAOH,GACrB1U,IAAK,IAAI6U,OAAO,MAAQF,GACxB1T,KAAM,IAAI4T,OAAO,OAASD,GAC1B1T,IAAK,IAAI2T,OAAO,MAAQF,GACxBvT,KAAM,IAAIyT,OAAO,OAASD,GAC1BvT,IAAK,IAAIwT,OAAO,MAAQF,GACxBrT,KAAM,IAAIuT,OAAO,OAASD,GAC1BhT,KAAM,uDACNF,KAAM,uDACNC,KAAM,uEACNJ,KAAM,yEAOd,SAASO,EAAejC,GACpB,QAASkB,EAAS2T,SAAS1T,KAAKnB,GAgGCiV,EAAOC,QACxCD,UAAiBlV,EAQjBoV,OAAOpV,UAAYA,EAnqCvB,CAsqCGZ,yMC1qCH,SAASiW,KAET,SAASC,EAAOC,EAAKC,GAEjB,IAAK,MAAMC,KAAKD,EACZD,EAAIE,GAAKD,EAAIC,GACjB,OAAOF,EAUX,SAASG,EAAIjN,GACT,OAAOA,IAEX,SAASkN,IACL,OAAOC,OAAOC,OAAO,MAEzB,SAASC,EAAQC,GACbA,EAAIC,QAAQN,GAEhB,SAASO,EAAYC,GACjB,MAAwB,mBAAVA,EAElB,SAASC,EAAe3V,EAAGD,GACvB,OAAOC,GAAKA,EAAID,GAAKA,EAAIC,IAAMD,GAAOC,GAAkB,iBAANA,GAAgC,mBAANA,EAahF,SAAS4V,EAAUC,KAAUC,GACzB,GAAa,MAATD,EACA,OAAOhB,EAEX,MAAMkB,EAAQF,EAAMD,aAAaE,GACjC,OAAOC,EAAMC,YAAc,IAAMD,EAAMC,cAAgBD,EAE3D,SAASE,EAAgBJ,GACrB,IAAInP,EAEJ,OADAkP,EAAUC,GAAOK,GAAKxP,EAAQwP,GAA9BN,GACOlP,EAEX,SAASyP,EAAoBC,EAAWP,EAAOQ,GAC3CD,EAAUE,GAAGC,WAAW/Q,KAAKoQ,EAAUC,EAAOQ,IAElD,SAASG,EAAYC,EAAYC,EAAKC,EAAS1O,GAC3C,GAAIwO,EAAY,CACZ,MAAMG,EAAWC,EAAiBJ,EAAYC,EAAKC,EAAS1O,GAC5D,OAAOwO,EAAW,GAAGG,IAG7B,SAASC,EAAiBJ,EAAYC,EAAKC,EAAS1O,GAChD,OAAOwO,EAAW,IAAMxO,EAClB6M,EAAO6B,EAAQD,IAAIrO,QAASoO,EAAW,GAAGxO,EAAGyO,KAC7CC,EAAQD,IAoBlB,SAASI,EAAYC,EAAMC,EAAiBN,EAAKC,EAASM,EAAOC,EAAqBC,GAClF,MAAMC,EAnBV,SAA0BX,EAAYE,EAASM,EAAOhP,GAClD,GAAIwO,EAAW,IAAMxO,EAAI,CACrB,MAAMoP,EAAOZ,EAAW,GAAGxO,EAAGgP,IAC9B,QAAsBK,IAAlBX,EAAQM,MACR,OAAOI,EAEX,GAAoB,iBAATA,EAAmB,CAC1B,MAAME,EAAS,GACTC,EAAM5Y,KAAKS,IAAIsX,EAAQM,MAAM/M,OAAQmN,EAAKnN,QAChD,IAAK,IAAInI,EAAI,EAAGA,EAAIyV,EAAKzV,GAAK,EAC1BwV,EAAOxV,GAAK4U,EAAQM,MAAMlV,GAAKsV,EAAKtV,GAExC,OAAOwV,EAEX,OAAOZ,EAAQM,MAAQI,EAE3B,OAAOV,EAAQM,MAGMQ,CAAiBT,EAAiBL,EAASM,EAAOC,GACvE,GAAIE,EAAc,CACd,MAAMM,EAAeb,EAAiBG,EAAiBN,EAAKC,EAASQ,GACrEJ,EAAK7U,EAAEwV,EAAcN,IAU7B,SAASO,EAAuBC,GAC5B,MAAMC,EAAS,GACf,IAAK,MAAM5C,KAAK2C,EACC,MAAT3C,EAAE,KACF4C,EAAO5C,GAAK2C,EAAM3C,IAC1B,OAAO4C,EAEX,SAASC,EAAmBF,EAAOG,GAC/B,MAAMC,EAAO,GACbD,EAAO,IAAIE,IAAIF,GACf,IAAK,MAAM9C,KAAK2C,EACPG,EAAKG,IAAIjD,IAAe,MAATA,EAAE,KAClB+C,EAAK/C,GAAK2C,EAAM3C,IACxB,OAAO+C,EAkBX,SAASG,EAAczR,GACnB,OAAgB,MAATA,EAAgB,GAAKA,EAOhC,SAAS0R,EAAiBC,GACtB,OAAOA,GAAiB5C,EAAY4C,EAAcC,SAAWD,EAAcC,QAAUzD,EAmDzF,SAAS0D,EAAOC,EAAQC,GACpBD,EAAOE,YAAYD,GAEvB,SAASE,EAAOH,EAAQC,EAAMG,GAC1BJ,EAAOK,aAAaJ,EAAMG,GAAU,MAExC,SAASE,EAAOL,GACZA,EAAKM,WAAWC,YAAYP,GAEhC,SAASQ,EAAaC,EAAYC,GAC9B,IAAK,IAAIpX,EAAI,EAAGA,EAAImX,EAAWhP,OAAQnI,GAAK,EACpCmX,EAAWnX,IACXmX,EAAWnX,GAAGyB,EAAE2V,GAG5B,SAASC,EAAQC,GACb,OAAOC,SAASC,cAAcF,GAoBlC,SAASG,EAAKC,GACV,OAAOH,SAASI,eAAeD,GAEnC,SAASE,IACL,OAAOH,EAAK,KAEhB,SAASI,IACL,OAAOJ,EAAK,IAEhB,SAASK,EAAOpB,EAAMqB,EAAOC,EAASC,GAElC,OADAvB,EAAKwB,iBAAiBH,EAAOC,EAASC,GAC/B,IAAMvB,EAAKyB,oBAAoBJ,EAAOC,EAASC,GAuB1D,SAASG,EAAK1B,EAAM2B,EAAW1T,GACd,MAATA,EACA+R,EAAK4B,gBAAgBD,GAChB3B,EAAK6B,aAAaF,KAAe1T,GACtC+R,EAAK8B,aAAaH,EAAW1T,GAkDrC,SAAS8T,EAAU9T,GACf,MAAiB,KAAVA,EAAe,MAAQA,EA6ClC,SAAS+T,EAASjB,EAAMC,GACpBA,EAAO,GAAKA,EACRD,EAAKkB,YAAcjB,IACnBD,EAAKC,KAAOA,GAEpB,SAASkB,EAAgBC,EAAOlU,GAC5BkU,EAAMlU,MAAiB,MAATA,EAAgB,GAAKA,EAUvC,SAASmU,EAAUpC,EAAMqC,EAAKpU,EAAOqU,GACjCtC,EAAKuC,MAAMC,YAAYH,EAAKpU,EAAOqU,EAAY,YAAc,IA6EjE,SAASG,EAAa9B,EAASC,EAAM8B,GACjC/B,EAAQgC,UAAUD,EAAS,MAAQ,UAAU9B,GAUjD,MAAMgC,EACFC,YAAY1C,EAAS,MACjBjZ,KAAKK,EAAI4Y,EACTjZ,KAAK4b,EAAI5b,KAAKkU,EAAI,KAEtByH,EAAEE,EAAMhD,EAAQI,EAAS,MAChBjZ,KAAK4b,IACN5b,KAAK4b,EAAInC,EAAQZ,EAAOiD,UACxB9b,KAAKyC,EAAIoW,EACT7Y,KAAKoB,EAAEya,IAEX7b,KAAKoC,EAAE6W,GAEX0C,EAAEE,GACE7b,KAAK4b,EAAEG,UAAYF,EACnB7b,KAAKkU,EAAI8H,MAAMC,KAAKjc,KAAK4b,EAAEM,YAE/BP,EAAE1C,GACE,IAAK,IAAI7W,EAAI,EAAGA,EAAIpC,KAAKkU,EAAE3J,OAAQnI,GAAK,EACpC4W,EAAOhZ,KAAKyC,EAAGzC,KAAKkU,EAAE9R,GAAI6W,GAGlC0C,EAAEE,GACE7b,KAAK6D,IACL7D,KAAKoB,EAAEya,GACP7b,KAAKoC,EAAEpC,KAAKK,GAEhBsb,IACI3b,KAAKkU,EAAE2B,QAAQsD,IAoJvB,IAAIgD,EACJ,SAASC,EAAsB3F,GAC3B0F,EAAoB1F,EAExB,SAAS4F,IACL,IAAKF,EACD,MAAM,IAAIG,MAAM,oDACpB,OAAOH,EAKX,SAASI,EAAQjU,GACb+T,IAAwB1F,GAAG6F,SAAS3W,KAAKyC,GAK7C,SAASmU,EAAUnU,GACf+T,IAAwB1F,GAAGC,WAAW/Q,KAAKyC,GAgB/C,SAASoU,EAAWvB,EAAKwB,GACrBN,IAAwB1F,GAAGgG,QAAQC,IAAIzB,EAAKwB,GAEhD,SAASE,EAAW1B,GAChB,OAAOkB,IAAwB1F,GAAGgG,QAAQG,IAAI3B,GAelD,MAAM4B,EAAmB,GAEnBC,EAAoB,GACpBC,EAAmB,GACnBC,EAAkB,GAClBC,EAAmBC,QAAQC,UACjC,IAAIC,GAAmB,EACvB,SAASC,IACAD,IACDA,GAAmB,EACnBH,EAAiBK,KAAKC,KAG9B,SAASC,IAEL,OADAH,IACOJ,EAEX,SAASQ,EAAoBrV,GACzB2U,EAAiBpX,KAAKyC,GAK1B,IAAIsV,GAAW,EACf,MAAMC,EAAiB,IAAIvF,IAC3B,SAASmF,KACL,IAAIG,EAAJ,CAEAA,GAAW,EACX,EAAG,CAGC,IAAK,IAAIxb,EAAI,EAAGA,EAAI2a,EAAiBxS,OAAQnI,GAAK,EAAG,CACjD,MAAMqU,EAAYsG,EAAiB3a,GACnCga,EAAsB3F,GACtBqH,GAAOrH,EAAUE,IAIrB,IAFAyF,EAAsB,MACtBW,EAAiBxS,OAAS,EACnByS,EAAkBzS,QACrByS,EAAkBe,KAAlBf,GAIJ,IAAK,IAAI5a,EAAI,EAAGA,EAAI6a,EAAiB1S,OAAQnI,GAAK,EAAG,CACjD,MAAMsU,EAAWuG,EAAiB7a,GAC7Byb,EAAetF,IAAI7B,KAEpBmH,EAAeG,IAAItH,GACnBA,KAGRuG,EAAiB1S,OAAS,QACrBwS,EAAiBxS,QAC1B,KAAO2S,EAAgB3S,QACnB2S,EAAgBa,KAAhBb,GAEJI,GAAmB,EACnBM,GAAW,EACXC,EAAeI,SAEnB,SAASH,GAAOnH,GACZ,GAAoB,OAAhBA,EAAGuH,SAAmB,CACtBvH,EAAGmH,SACHnI,EAAQgB,EAAGwH,eACX,MAAM7G,EAAQX,EAAGW,MACjBX,EAAGW,MAAQ,EAAE,GACbX,EAAGuH,UAAYvH,EAAGuH,SAAS3b,EAAEoU,EAAGI,IAAKO,GACrCX,EAAGyH,aAAavI,QAAQ8H,IAiBhC,MAAMU,GAAW,IAAI/F,IACrB,IAAIgG,GACJ,SAASC,KACLD,GAAS,CACLpe,EAAG,EACHwU,EAAG,GACHnS,EAAG+b,IAGX,SAASE,KACAF,GAAOpe,GACRyV,EAAQ2I,GAAO5J,GAEnB4J,GAASA,GAAO/b,EAEpB,SAASkc,GAAcC,EAAOC,GACtBD,GAASA,EAAMtc,IACfic,GAASO,OAAOF,GAChBA,EAAMtc,EAAEuc,IAGhB,SAASE,GAAeH,EAAOC,EAAOxF,EAAQzC,GAC1C,GAAIgI,GAASA,EAAM7K,EAAG,CAClB,GAAIwK,GAAS9F,IAAImG,GACb,OACJL,GAASL,IAAIU,GACbJ,GAAO5J,EAAE7O,MAAK,KACVwY,GAASO,OAAOF,GACZhI,IACIyC,GACAuF,EAAM7a,EAAE,GACZ6S,QAGRgI,EAAM7K,EAAE8K,IA2ShB,MAAMG,GAA6B,oBAAX7J,OAClBA,OACsB,oBAAf8J,WACHA,WACAC,OA0IV,SAASC,GAAkBC,GACvB,MAA+B,iBAAjBA,GAA8C,OAAjBA,EAAwBA,EAAe,GAkJtF,SAASC,GAAiBT,GACtBA,GAASA,EAAMhK,IAKnB,SAAS0K,GAAgB3I,EAAWoC,EAAQI,GACxC,MAAMiF,SAAEA,EAAQ1B,SAAEA,EAAQ5F,WAAEA,EAAUwH,aAAEA,GAAiB3H,EAAUE,GACnEuH,GAAYA,EAASmB,EAAExG,EAAQI,GAE/B0E,GAAoB,KAChB,MAAM2B,EAAiB9C,EAAS+C,IAAIhK,GAAKiK,OAAO1J,GAC5Cc,EACAA,EAAW/Q,QAAQyZ,GAKnB3J,EAAQ2J,GAEZ7I,EAAUE,GAAG6F,SAAW,MAE5B4B,EAAavI,QAAQ8H,GAEzB,SAAS8B,GAAkBhJ,EAAW+C,GAClC,MAAM7C,EAAKF,EAAUE,GACD,OAAhBA,EAAGuH,WACHvI,EAAQgB,EAAGC,YACXD,EAAGuH,UAAYvH,EAAGuH,SAASra,EAAE2V,GAG7B7C,EAAGC,WAAaD,EAAGuH,SAAW,KAC9BvH,EAAGI,IAAM,IAWjB,SAAS2I,GAAKjJ,EAAW4D,EAASsF,EAAUC,EAAiBC,EAAW5H,EAAOX,EAAQ,EAAE,IACrF,MAAMwI,EAAmB3D,EACzBC,EAAsB3F,GACtB,MAAMsJ,EAAc1F,EAAQpC,OAAS,GAC/BtB,EAAKF,EAAUE,GAAK,CACtBuH,SAAU,KACVnH,IAAK,KAELkB,MAAAA,EACA6F,OAAQ5I,EACR2K,UAAAA,EACAG,MAAOxK,IAEPgH,SAAU,GACV5F,WAAY,GACZuH,cAAe,GACfC,aAAc,GACdzB,QAAS,IAAIsD,IAAIH,EAAmBA,EAAiBnJ,GAAGgG,QAAU,IAElExG,UAAWX,IACX8B,MAAAA,EACA4I,YAAY,GAEhB,IAAIC,GAAQ,EAkBZ,GAjBAxJ,EAAGI,IAAM4I,EACHA,EAASlJ,EAAWsJ,GAAa,CAAC3d,EAAGwD,KAAQyS,KAC3C,MAAMtR,EAAQsR,EAAK9N,OAAS8N,EAAK,GAAKzS,EAOtC,OANI+Q,EAAGI,KAAO8I,EAAUlJ,EAAGI,IAAI3U,GAAIuU,EAAGI,IAAI3U,GAAK2E,MACtC4P,EAAGuJ,YAAcvJ,EAAGqJ,MAAM5d,IAC3BuU,EAAGqJ,MAAM5d,GAAG2E,GACZoZ,GAtCpB,SAAoB1J,EAAWrU,IACI,IAA3BqU,EAAUE,GAAGW,MAAM,KACnByF,EAAiBlX,KAAK4Q,GACtB8G,IACA9G,EAAUE,GAAGW,MAAM8I,KAAK,IAE5B3J,EAAUE,GAAGW,MAAOlV,EAAI,GAAM,IAAO,GAAMA,EAAI,GAiC/Bie,CAAW5J,EAAWrU,IAEvBwD,KAET,GACN+Q,EAAGmH,SACHqC,GAAQ,EACRxK,EAAQgB,EAAGwH,eAEXxH,EAAGuH,WAAW0B,GAAkBA,EAAgBjJ,EAAGI,KAC/CsD,EAAQxB,OAAQ,CAChB,GAAIwB,EAAQiG,QAAS,CACjB,MAAMC,EA5oClB,SAAkB9G,GACd,OAAOuC,MAAMC,KAAKxC,EAAQyC,YA2oCJsE,CAASnG,EAAQxB,QAE/BlC,EAAGuH,UAAYvH,EAAGuH,SAAS1d,EAAE+f,GAC7BA,EAAM1K,QAAQsD,QAIdxC,EAAGuH,UAAYvH,EAAGuH,SAASxJ,IAE3B2F,EAAQoG,OACRhC,GAAchI,EAAUE,GAAGuH,UAC/BkB,GAAgB3I,EAAW4D,EAAQxB,OAAQwB,EAAQpB,QACnDwE,KAEJrB,EAAsB0D,GA6C1B,MAAMY,GACF/E,WACI8D,GAAkBzf,KAAM,GACxBA,KAAK2gB,SAAWzL,EAEpByG,IAAIiF,EAAMlK,GACN,MAAMP,EAAanW,KAAK2W,GAAGR,UAAUyK,KAAU5gB,KAAK2W,GAAGR,UAAUyK,GAAQ,IAEzE,OADAzK,EAAUtQ,KAAK6Q,GACR,KACH,MAAMmK,EAAQ1K,EAAUhC,QAAQuC,IACjB,IAAXmK,GACA1K,EAAU2K,OAAOD,EAAO,IAGpClF,KAAKoF,GAx/CT,IAAkBC,EAy/CNhhB,KAAKihB,QAz/CCD,EAy/CkBD,EAx/CG,IAA5BtL,OAAO2C,KAAK4I,GAAKzW,UAy/ChBvK,KAAK2W,GAAGuJ,YAAa,EACrBlgB,KAAKihB,MAAMF,GACX/gB,KAAK2W,GAAGuJ,YAAa,ICxhD1B,MAAMgB,GAAcna,QAA0B,IAAVA,EAI9Boa,GAAWpa,GAA0B,iBAAVA,EAcjC,SAASqa,KACf,IAAIhf,EAAI,EAKR,MAAO,IAAMA,IAoBP,MAAMif,GAA0B,oBAAXpM,OAErB,SAASqM,GAAYzI,EAAQ+H,EAAMxG,GAEzC,OADAvB,EAAOyB,iBAAiBsG,EAAMxG,GACvB,IAAMvB,EAAO0B,oBAAoBqG,EAAMxG,GCnD/C,MAAMmH,GAAmB,GAgBzB,SAASC,GAASza,EAAO0a,EAAQvM,GAC7B,IAAIwM,EACJ,MAAMC,EAAc,GACpB,SAAS/E,EAAIgF,GACT,GAAI5L,EAAejP,EAAO6a,KACtB7a,EAAQ6a,EACJF,GAAM,CACN,MAAMG,GAAaN,GAAiBhX,OACpC,IAAK,IAAInI,EAAI,EAAGA,EAAIuf,EAAYpX,OAAQnI,GAAK,EAAG,CAC5C,MAAM9B,EAAIqhB,EAAYvf,GACtB9B,EAAE,KACFihB,GAAiB1b,KAAKvF,EAAGyG,GAE7B,GAAI8a,EAAW,CACX,IAAK,IAAIzf,EAAI,EAAGA,EAAImf,GAAiBhX,OAAQnI,GAAK,EAC9Cmf,GAAiBnf,GAAG,GAAGmf,GAAiBnf,EAAI,IAEhDmf,GAAiBhX,OAAS,IA0B1C,MAAO,CAAEqS,IAAAA,EAAKkB,OArBd,SAAgBxV,GACZsU,EAAItU,EAAGvB,KAoBWkP,UAlBtB,SAAmBV,EAAKuM,EAAa5M,GACjC,MAAM6M,EAAa,CAACxM,EAAKuM,GAMzB,OALAH,EAAY9b,KAAKkc,GACU,IAAvBJ,EAAYpX,SACZmX,EAAOD,EAAM7E,IAAQ1H,GAEzBK,EAAIxO,GACG,KACH,MAAM8Z,EAAQc,EAAYxN,QAAQ4N,IACnB,IAAXlB,GACAc,EAAYb,OAAOD,EAAO,GAEH,IAAvBc,EAAYpX,SACZmX,IACAA,EAAO,SAMvB,SAASM,GAAQC,EAAQ3Z,EAAI4Z,GACzB,MAAMC,GAAUnG,MAAMoG,QAAQH,GACxBI,EAAeF,EACf,CAACF,GACDA,EACAK,EAAOha,EAAGiC,OAAS,EACzB,MA5DO,CACH0L,UAAWuL,GA2DCU,GAAgBtF,IAC5B,IAAI2F,GAAS,EACb,MAAMC,EAAS,GACf,IAAIC,EAAU,EACVC,EAAUxN,EACd,MAAMyN,EAAO,KACT,GAAIF,EACA,OAEJC,IACA,MAAMxK,EAAS5P,EAAG6Z,EAASK,EAAO,GAAKA,EAAQ5F,GAC3C0F,EACA1F,EAAI1E,GAGJwK,EAAU5M,EAAYoC,GAAUA,EAAShD,GAG3C0N,EAAgBP,EAAa9C,KAAI,CAACrJ,EAAO9T,IAAM6T,EAAUC,GAAQnP,IACnEyb,EAAOpgB,GAAK2E,EACZ0b,KAAa,GAAKrgB,GACdmgB,GACAI,OAEL,KACCF,GAAY,GAAKrgB,OAIrB,OAFAmgB,GAAS,EACTI,IACO,WACHhN,EAAQiN,GACRF,QA1F8BzM,WCL1C,MAAM4M,GAAYC,GAAW,gBAAgBA,IAIhCC,GAAWF,GAAU,YACrBG,GAASH,GAAU,UACnBI,GAAQJ,GAAU,SAClBK,GAAeL,GAAU,gBACzBM,GAAaN,GAAU,cCdvBO,GAAa,SAQbC,GAAa,CAACC,EAAQC,IAClCD,EAAOphB,OAAO,EAAGqhB,EAAOhZ,UAAYgZ,EAqBxBC,GAAUC,GAA0B,MAAfA,EAAQ,GAc7BC,GAAeC,GAAOA,EAAIhjB,QAAQ,eAAgB,IAOxD,SAASijB,GAAWC,EAAKC,GAAc,GAC7C,MAAMC,EAAWL,GAAaG,GAAKG,MAAM,KACzC,OAAOF,EAAcC,EAASvE,OAAOyE,SAAWF,EAS1C,MAAMG,GAAW,CAACC,EAAUC,IAClCD,GAAYC,EAAQ,IAAIA,IAAU,IAsBtBC,GAAgBC,GAAQ,IAAIZ,GAAaY,KAQ/C,SAASjgB,MAAQkgB,GACvB,MACMC,EAAiBD,EAAchF,KADhBrB,GAAY0F,GAAW1F,GAAU,GAAM7Z,KAAK,OACVA,KAAK,KAC5D,OAAOggB,GAAcG,GC5Ff,MAYDC,GAAS,CACdC,EAAW,OACXC,EAAY,QACZC,EAAa,SACbC,EAAgB,WAChBC,EAAmB,cACnBC,EAAgB,WAChBC,EAAmB,cACnBC,EAAiB,YACjBC,EAAqB,gBACrBC,GAAkB,aAClBC,GAAe,YAGHC,GAAcC,GAAWb,GAAOa,GActC,SAASC,GAAcD,EAASE,EAASvN,EAAOwN,GACtD,MAAMC,EAASzN,GAbT,SAA0BqN,EAASrN,GACzC,IAAIuC,EAQJ,OApCuB,IA6BnB8K,EACH9K,EAAOvC,EAAMqM,KAAO,SAASrM,EAAMqM,QAAU,UA/BxB,IAgCXgB,EACV9K,EAAO,OAAOvC,EAAM0N,MA/BG,IAgCbL,IACV9K,EAAO,aAAavC,EAAM2N,UAAY,OAEhC,IAAIP,GAAYC,MAAY9K,GAAQ,QAInBqL,CAAiBJ,GAAYH,EAASrN,GACxD6N,EAAYJ,EAAS,oBAAoBA,IAAW,GACpDK,EAAQV,GAAYC,GAE1B,MAAO,IAAIS,MJzCwC,mBIwC5BP,EAAWA,EAAQO,GAASP,IACxBM,IAGrB,MAAME,GAAuB5L,GAAW,IAAI7R,IAClD6R,EAAQmL,MAAiBhd,IAEb0d,GAAOD,IAAqBR,IACxC,MAAM,IAAIlJ,MAAMkJ,MAIJU,GAAOF,GAAqBG,QAAQD,MCjC1C,SAASE,GAAUC,EAAOxF,GAoBhC,MAAO,CAAEwF,MAAAA,EAAOC,MAnBFD,EAAME,QACjB,EACA3C,GAAWyC,EAAMG,UAAUC,QAAO,CAACC,EAAKjD,KACxC,IAAIkD,EAAYD,EAahB,OAZAC,GAjBmB,EFCMlD,CAAAA,GAAuB,KAAZA,EEkBhCmD,CAAcnD,GACjBkD,GAhBe,EFIKlD,CAAAA,GAAWL,GAAWyD,KAAKpD,GEarCqD,CAAUrD,GACpBkD,GApBkB,EAqBRnD,GAAQC,GAClBkD,GAAaI,EAEbJ,GAzBiB,EA4BXA,IACJ,GAEiB9F,MAAAA,GA+CjB,SAASmG,GAAKC,EAAQpD,GAC5B,IAAIqD,EACAC,EAEJ,MAAOC,GAAevD,EAAIG,MAAM,KAC1BqD,EAAczD,GAAWwD,GACzBE,EAA+B,KAAnBD,EAAY,GACxBE,EA9CA,SAAoBN,GAC1B,OACCA,EACE1H,IAAI6G,IAEJoB,MAAK,CAACnnB,EAAGD,IACLC,EAAEimB,MAAQlmB,EAAEkmB,MACR,EAEJjmB,EAAEimB,MAAQlmB,EAAEkmB,OACP,EAEFjmB,EAAEwgB,MAAQzgB,EAAEygB,QAkCP4G,CAAWR,GAE1B,IAAK,IAAI7kB,EAAI,EAAG5B,EAAI+mB,EAAOhd,OAAQnI,EAAI5B,EAAG4B,IAAK,CAC9C,MAAMikB,MAAEA,GAAUkB,EAAOnlB,GACzB,IAAIslB,GAAS,EACb,MAAMC,EAAS,GAGTC,EAAc/D,QAAawC,EAAOsB,OAAAA,EAAQ9D,IAAAA,IAEhD,GAAIwC,EAAME,QAAS,CAClBY,EAAeS,EAAY/D,GAC3B,SAGD,MAAMgE,EAAgBjE,GAAWyC,EAAMG,UACjC9mB,EAAMT,KAAKS,IAAI2nB,EAAY9c,OAAQsd,EAActd,QACvD,IAAIsW,EAAQ,EAEZ,KAAOA,EAAQnhB,EAAKmhB,IAAS,CAC5B,MAAMiH,EAAeD,EAAchH,GAC7BkH,EAAaV,EAAYxG,GAE/B,IAAKK,GAAY4G,IAAiBtE,GAAQsE,GAAe,CAIxD,MAAME,EAA6B,MAAjBF,EAAuB,IAAMA,EAAapf,MAAM,GAElEif,EAAOK,GAAaX,EAClB3e,MAAMmY,GACNtB,IAAI0I,oBACJ5jB,KAAK,KACP,MAGD,GAAI6c,GAAY6G,GAAa,CAI5BL,GAAS,EACT,MAGD,MAAMQ,EAAe9E,GAAWniB,KAAK6mB,GAErC,GAAII,IAAiBZ,EAAW,CAC/B,MAAMvgB,EAAQkhB,mBAAmBF,GACjCJ,EAAOO,EAAa,IAAMnhB,OACpB,GAAI+gB,IAAiBC,EAAY,CAIvCL,GAAS,EACT,OAIF,IAAKA,EAAQ,CACZR,EAAYU,EAAYvjB,MAAQgjB,EAAY3e,MAAM,EAAGmY,KACrD,OAIF,OAAOqG,GAAaC,GAAgB,KAS9B,SAAStmB,GAAMwlB,EAAOxC,GAC5B,OAAOmD,GAAK,CAACX,GAAQxC,GAkFf,SAASsE,GAAkBC,EAAUxC,GAC3C,MAAMzB,SAAEA,EAAQkE,KAAEA,EAAO,GAAE9E,OAAEA,EAAS,GAAE+E,MAAEA,GAAUF,EAC9CG,EAAe3E,GAAWgC,GAAU,GACpC4C,EAAe5E,GAAWO,GAAU,GAC1C,KAAOoE,EAAahe,QACfge,EAAa,KAAOC,EAAa,IACpCvC,GDjQsB,ECmQrB,8DAA8DL,cAAqBzB,MAGrFoE,EAAaE,QACbD,EAAaC,QAEd,MAAO,CACNtE,SAAU9f,MAAQmkB,GAClBH,KAAAA,EACA9E,OAAAA,EACA+E,MAAAA,GAIF,MAAMI,GAAuBC,GAAyB,IAAhBA,EAAKpe,OAAe,GAAKoe,EAUxD,SAASC,GAAeC,GAC9B,MAAMC,EAAcD,EAAI1U,QAAQ,KAC1B4U,EAAYF,EAAI1U,QAAQ,KACxB6U,GAAkC,IAAjBF,EACjBG,GAA8B,IAAfF,EACfV,EAAOY,EAAeP,GAAqBG,EAAI3mB,OAAO6mB,IAAc,GACpEG,EAAoBD,EAAeJ,EAAI3mB,OAAO,EAAG6mB,GAAaF,EAC9DtF,EAASyF,EACZN,GAAqBQ,EAAkBhnB,OAAO4mB,IAC9C,GAIH,MAAO,CAAE3E,SAHQ6E,EACdE,EAAkBhnB,OAAO,EAAG4mB,GAC5BI,EACgB3F,OAAAA,EAAQ8E,KAAAA,GAiBrB,SAASc,GAAY7E,EAAM8E,EAAWC,GAC5C,OAAOhlB,GAAKglB,EAlHN,SAAiB1D,EAAI2D,GAE3B,GAAIjG,GAAWsC,EAAI,KAClB,OAAOA,EAGR,MAAO4D,EAAYC,GAAW7D,EAAG3B,MAAM,MAChCyF,GAAgBH,EAAKtF,MAAM,KAC5B0F,EAAa9F,GAAW2F,GACxBhB,EAAe3E,GAAW6F,GAGhC,GAAsB,KAAlBC,EAAW,GACd,OAAOxF,GAASuF,EAAcD,GAI/B,IAAKnG,GAAWqG,EAAW,GAAI,KAAM,CACpC,MAAMvF,EAAWoE,EAAa9f,OAAOihB,GAAYrlB,KAAK,KACtD,OAAO6f,IAA2B,MAAjBuF,EAAuB,GAAK,KAAOtF,EAAUqF,GAQ/D,MAAMG,EAAcpB,EAAa9f,OAAOihB,GAClC3F,EAAW,GAUjB,OARA4F,EAAY9T,SAAQ4N,IACH,OAAZA,EACHM,EAAShG,MACa,MAAZ0F,GACVM,EAASle,KAAK4d,MAITS,GAAS,IAAIH,EAAS1f,KAAK,OAAQmlB,GA4ErBnM,CAAQiH,EAAM8E,IAS7B,SAASQ,GAAeC,EAAW1F,GACzC,MAAMqC,EAAWnC,GAAyBwF,EFrSNlpB,QAAQ,QAAS,KEsSrD,MAAM4nB,EAAe3E,GAAW4C,GAAU,GAEpCsD,EAAajpB,GAAM,CAAE2lB,SAAAA,GAAYniB,MADlBuf,GAAWO,GAAU,GAAMzb,MAAM,EAAG6f,EAAahe,UAEtE,OAAOuf,GAAcA,EAAWjG,ICpUjC,MAAMkG,GAAM,MAIZ,SAASC,GAAYC,GACpB,MAAO,IACHA,EAAO7B,SACVjE,SAAU+F,UAAUC,UAAUF,EAAO7B,SAASjE,WAC9CmE,MAAO2B,EAAOG,QAAQ9B,MACtB+B,KAAOJ,EAAOG,QAAQ9B,OAAS2B,EAAOG,QAAQ9B,MAAM+B,MAAS,WAgF/D,SAASC,GAAiBhC,EAAOzE,GAChC,MAAO,IAAK+E,GAAe/E,GAAMyE,MAAAA,GAiDlC,MAAMiC,KACJlJ,KACDpM,OAAO0E,WACP1E,OAAO0E,SAASC,eAGX4Q,IAAkBnJ,IAAoC,SAA3BpM,OAAOmT,SAAS1C,OAC3C+E,GArIN,SAAuBR,GACtB,IAAIS,EAAY,GACZtC,EAAW4B,GAAYC,GACvBU,EAASZ,GAEb,MAAMa,EAAkB,CAACC,EAAcH,IACtCG,EAAYhV,SAAQiV,GAAYA,EAAS,CAAE1C,SAAAA,EAAUuC,OAAAA,MAEtD,MAAO,CACNvC,eACC,OAAOA,GAERzM,OAAOmP,GACNJ,EAAU7kB,KAAKilB,GASfF,EAAgB,CAACE,IAEjB,MAAMC,EAAWzJ,GAAY2I,EAAQ,YATZ,KACxB7B,EAAW4B,GAAYC,GACvBU,EAASZ,GACTa,EAAgB,CAACE,OAOlB,MAAO,KACNC,IACAL,EAAYA,EAAUlL,QAAOlX,GAAMA,IAAOwiB,MAe5CnP,SAASgK,EAAItL,GACZ,MAAMiO,MAAEA,EAAQ,GAAE3nB,QAAEA,GAAU,GAAU0Z,GAAW,GAEnD,GADAsQ,EAAShqB,EAvDI,UADH,OAyDNwgB,GAASwE,GACRtL,GACH6L,GFxDsB,GE0DrB,uIAKFyE,EAASZ,GACTE,EAAOG,QAAQY,GAAGrF,OACZ,CACN,MAAMsF,EAAa,IAAK3C,EAAO+B,KNzC3BprB,KAAKW,SAASuE,SAAS,IAAI+mB,UAAU,IM2CzC,IACCjB,EAAOG,QAAQzpB,EAAU,eAAiB,aACzCsqB,EACA,GACAtF,GAEA,MAAO/J,GACRqO,EAAO7B,SAASznB,EAAU,UAAY,UAAUglB,IAIlDyC,EAAW4B,GAAYC,GACvBW,MA8DmBO,CACrBZ,KAAcC,GAAiBvV,OArDhC,SAA4BmW,EAAkB,KAC7C,IAAIvK,EAAQ,EACRwK,EAAQ,CAACf,GAAiB,KAAMc,IAEpC,MAAO,CAENE,cACC,OAAOD,GAERjD,eACC,OAAOiD,EAAMxK,IAEdlF,qBACAA,wBACAyO,QAAS,CACR9B,YACC,OAAO+C,EAAMxK,GAAOyH,OAErB3M,UAAU2M,EAAOiD,EAAO1H,GACvBhD,IAOAwK,EAAQA,EAAM3iB,MAAM,EAAGmY,GACvBwK,EAAMxlB,KAAKykB,GAAiBhC,EAAOzE,KAEpClI,aAAa2M,EAAOiD,EAAO1H,GAC1BwH,EAAMxK,GAASyJ,GAAiBhC,EAAOzE,IAExClI,GAAGgK,GACF,MAAM6F,EAAW3K,EAAQ8E,EACrB6F,EAAW,GAAKA,EAAWH,EAAM9gB,OAAS,IAG9CsW,EAAQ2K,MAgB6BC,KAEnCC,SAAEA,IAAajB,GCrJd,IAAIkB,GAAiB,KAGjBC,IAAoB,EA8BxB,SAASC,GAAmBC,KAGhCH,IAIDG,EAAKhiB,MAAQ6hB,GAAe7hB,OAG3BgiB,EAAKhiB,QAAU6hB,GAAe7hB,OAjCjC,SAAiBiiB,EAAWC,GAC3B,MAAMC,EAAgBtS,SAASuS,iBAAiB,uBAChD,IAAK,IAAI9pB,EAAI,EAAGA,EAAI6pB,EAAc1hB,OAAQnI,IAAK,CAC9C,MAAM0W,EAAOmT,EAAc7pB,GACrB+pB,EAAYC,OAAOtT,EAAKuT,QAAQC,aACtC,GAAIH,IAAcJ,EAAW,OAAO,EACpC,GAAII,IAAcH,EAAW,OAAO,EAErC,OAAO,EA0BLO,CAAQT,EAAKU,SAAUb,GAAea,aAEvCb,GAAiBG,GAoBZ,SAASW,GAAMC,GACrB,IAAKA,EAAM,OAAO,EAClB,MAAMC,EAAW,WACjB,IACC,IAAKD,EAAKE,aAAaD,GAAW,CAEjC,IAAI5B,EADJ2B,EAAK9R,aAAa+R,EAAU,MAI5B,MAAME,EAAe,KACpBH,EAAKhS,gBAAgBiS,GACrB5B,KAEDA,EAAWzJ,GAAYoL,EAAM,OAAQG,GAGtC,OADAH,EAAKD,QACE9S,SAASmT,gBAAkBJ,EACjC,MAAO9Q,GAGR,OAAO,GAIF,SAASmR,GAAYL,EAAMM,GACjC,OAAOZ,OAAOM,EAAKL,QAAQY,iBAAmBD,EAO/C,SAAS5I,GAAM8I,EAAUC,EAASxT,UACjC,OAAOwT,EAAOC,cAAcF,GAmBtB,SAASG,GAAYhH,GAC3BjJ,QAAQC,QAAQP,EAAIuJ,EAAMiH,eAAe9P,MAAKkP,IAC7C,MAAMY,EAAeZ,GAlBhB,SAAsBM,GAE5B,IAAIO,EADWnJ,GAAM,4BAA4B4I,OAC5BQ,mBACrB,MAAQT,GAAYQ,EAASP,IAAK,CACjC,GAXM,YAAYnG,KAWJ0G,EAXcE,SAY3B,OAAOF,EAER,MAAMG,EAAUtJ,GAAM,oBAAqBmJ,GAC3C,GAAIG,EACH,OAAOA,EAERH,EAAUA,EAAQC,mBAEnB,OAAO,KAKuBG,CAAatH,EAAM2G,IAC3CM,GACJpH,GH9HsB,EGgIrB,iPAKAG,EHtIoB,GG0ICoG,GAAMa,IAE7Bb,GAAM9S,SAASiU,oBAIV,MAAMC,GAAqB,CAACC,EAAYC,EAAkB3F,IAAa,CAC7E4F,EACAC,IAGAvQ,IAAOF,MAAK,KACX,GAAKmO,KAAkBC,GAAvB,CAOA,GAHIoC,GACHX,GAAY1B,GAAetF,OAExByH,EAAWI,eAAiBD,EAAoB,CACnD,MAAM3J,KAAEA,EAAIkC,SAAEA,EAAQ2H,KAAEA,EAAIxG,OAAEA,EAAM9D,IAAEA,GAAQ8H,GAAetF,MACvD+H,EAAsBN,EAAWO,mBACtC,CAAE/J,KAAAA,EAAMkC,SAAAA,EAAU2H,KAAAA,EAAMxG,OAAAA,EAAQ9D,IAAAA,GAChC/G,EAAIsL,IAELhL,QAAQC,QAAQ+Q,GAAqB5Q,MAAKgI,IACzCuI,EAAiBnR,IAAI4I,MAzGxBmG,GAAiB,UAIjBC,IAAoB,kFC8HhB7U,MAAoBA,MAAeA,KAAWmX,6DAOhDnX,2FDzBF,gKCyBEA,4JAX8DA,uIAI5DA,MAAoBA,MAAeA,KAAWmX,qIA9L5CI,GAAWlN,KAwBXmN,GAAkB,0EAEb3I,EAAW2I,WACX1F,EAAM,iBACNuB,EAAUK,eACV+D,GAAU,WACVC,cAELX,GACLO,mBAAoBhI,mBAAyBA,EAAMxC,MACnDqK,eAAe,KACZO,GAKEC,EAAkB9I,EAClB+I,EAAqBtK,GAAcuB,GAEnCgJ,EAAkB/R,EAAWkG,IAC7B8L,EAAgBhS,EAAWmG,IAE3B8L,GAAoBF,EACpBpC,EAAW8B,KAEXN,EAAcQ,KAAaK,IAAkBA,EAAcb,aAC3DD,EAAmBvM,GAAS,+BAE5ByF,EAASzF,mCACTuN,EAAcvN,GAAS,gCAEzBwN,GAAiB,QAKfllB,EAAQglB,EAAmB,EAAID,EAAc/kB,MAAQ,EAQrDse,EAAW0G,EACdtN,GALF2G,GACC9G,GAAQuH,GAAeC,GAAOuB,EAAQhC,SACtCuG,IAICC,8BACGK,EAAezN,GAAS0N,+BAExBC,EAAetB,GACpBC,EACAC,EACA3F,GAGKgH,EAAoBC,GAAWC,GACpCA,EAAU9P,QAAO+P,GAAaA,EAAUvC,KAAOqC,WAkC3CP,GAAoBlJ,IAAa2I,IACrCrI,GJjHuB,EImHtB,qEACEN,SAAAA,IAqCAkJ,IAGHvS,OACkB6N,EAAQlQ,QAAOsV,UACzBC,EAAqBtH,GAC1BqH,EAAepH,SACfuG,GAEDM,EAAarS,IAAIsS,GACjB9G,EAASxL,IAAI6S,QAMf/S,EAAWqG,GAAUqF,IAGtB1L,EAAWsG,IACV+L,YAAAA,EACAW,uBA9FsBrJ,MAClBhF,OAIC2N,eAIEW,EAAgB9uB,GAAMwlB,EAAO6I,EAAU/K,aACzCwL,SACHX,GAAiB,EAIVW,OAGR1I,EAAOnJ,QAAO8R,UAGPC,EAAaT,EAAkB/I,EAAM2G,GAAxBoC,CAA4BQ,UAC/CC,EAAWhqB,KAAKwgB,GACTwJ,MAwETC,yBAnEwBT,GACxBpI,EAAOnJ,OAAOsR,EAAkBC,KAmEhCrB,YAAAA,EACAlkB,MAAAA,EACAkjB,GAAIR,EACJpC,QAAS0E,EAAmB1E,EAAUyE,EAAczE,QACpDxE,SAAUkJ,EAAmBH,EAAqBE,EAAcjJ,0PA7D1DA,IAAa8I,GACnBxI,GJxHuB,EIwHP,oFAQVgB,EAAYF,GAAK+I,EAASb,EAAU/K,UAC1C4K,EAAYnS,IAAIsK,4BAKZ4H,SACGkB,IAAYd,EAAU7G,KAGtB4H,GAAqBD,GAAWhC,EAGhCC,GACJ+B,GAAWd,EAAU/K,WAAa+L,EAAc/L,SAClDgL,EAAac,EAAmBhC,yBAM3BD,GAAemC,GAAgBA,EAAa3B,SAClD3C,IAAqB/hB,MAAAA,EAAO0iB,SAAAA,EAAUnG,MAAO8J,2KCjIxC,SAASC,GACfC,EACApY,EACAqY,EAAStN,GACTuN,ELzBwB,GK2BZ1T,EAAWyT,IAEtBrK,GACCoK,GACAtK,GACC,kBAAkBA,kBAAsBV,GAAYkL,OACrDtY,GAoCI,SAASuY,KAEf,OADAJ,GLpE8B,GKoCZrZ,CAAAA,IAClB,MAAMd,UAAEA,GAAc4G,EAAW9F,GACjC,MAAO,CAAEd,UAAAA,IA+BFwa,CAAW1N,IA2BZ,SAAS2N,KACf,MAAMrK,EAAQxJ,EAAWoG,IACzB,OAAOoD,EAAQrE,GAAQqE,GAAOsK,GAAUA,EAAOrH,OAAQ9H,GAAS,KAoI1D,SAASoP,KACfR,GLrO8B,GKsO9B,MAAM/S,EA9GA,WACN+S,GLtH6B,IKuH7B,MAAMhH,EAAYsH,MACV9K,SAAUyD,GAAYxM,EAAWmG,IAQzC,OADgBsB,GAAQ6E,GAAY7E,EAAMxH,EAAIsM,GAAYC,GAoG1CwH,IACVnF,SAAEA,GAjJF,WACN,MAAMtB,QAAEA,GAAYvN,EAAWmG,IAC/B,OAAOoH,EA+Ic0G,GAmBrB,MANyB,CAACnL,EAAItL,KAG7B,MAAMxB,EAASsI,GAASwE,GAAMA,EAAKtI,EAAQsI,GAC3C,OAAO+F,EAAS7S,EAAQwB,IAqInB,SAAS0W,KACfX,GLjY2B,EKiYK,KAAMnN,GLnYf,GKoYvB,MAAMmF,EAAWoI,KACXlD,EAAezQ,EAAWsG,IAEhC,IAAI9F,EAUJ,OAFAZ,EAPoB2L,EAASnS,WAAU,KACtC,MAAM+a,EAAc,IAAI5T,SAAQ6T,IAC/B5T,EAAU4T,KAEX3D,EAAa1Q,IAAIoU,OAKXlY,IACN,IAAIoY,GAAY,EAChB,MAAMC,EAAmB/I,EAASnS,WAAU,KAC3CyH,IAAOF,MAAK,KACN0T,GACJ7T,EAAQvE,SAIX,MAAO,CACN6C,UACCuV,GAAY,EACZC,+DChTQ9P,GAAQvE,EAAI/F,MAAUA,cACpBA,0lBARAA,uBAENsK,GAAQvE,EAAI/F,MAAUA,KACtBA,aAJEA,uMX6lCV,SAA2Bqa,EAAQC,GAC/B,MAAMvT,EAAS,GACTwT,EAAc,GACdC,EAAgB,CAAEva,QAAS,GACjC,IAAI5U,EAAIgvB,EAAO7mB,OACf,KAAOnI,KAAK,CACR,MAAMyR,EAAIud,EAAOhvB,GACX8R,EAAImd,EAAQjvB,GAClB,GAAI8R,EAAG,CACH,IAAK,MAAMiH,KAAOtH,EACRsH,KAAOjH,IACTod,EAAYnW,GAAO,GAE3B,IAAK,MAAMA,KAAOjH,EACTqd,EAAcpW,KACf2C,EAAO3C,GAAOjH,EAAEiH,GAChBoW,EAAcpW,GAAO,GAG7BiW,EAAOhvB,GAAK8R,OAGZ,IAAK,MAAMiH,KAAOtH,EACd0d,EAAcpW,GAAO,EAIjC,IAAK,MAAMA,KAAOmW,EACRnW,KAAO2C,IACTA,EAAO3C,QAAOxD,GAEtB,OAAOmG,qBW3nCG/G,yCAENsK,GAAQvE,EAAI/F,MAAUA,iBACtBA,sBAJEA,uVAFW,OAAdA,kVARFA,+IADiEA,iFA0BFA,6EAzB/DA,kNA5FEuX,GAAWlN,kIAyBNkD,EAAO,iBACP7N,EAAY,cACZ0X,iBACAK,GAAU,KAErB4B,GN7BuB,EM6BKrP,SAEtBiM,EAAKsB,oBAEHoB,EAAaI,gBAAEA,EAAef,YAAEA,GAAgBlS,EAAWmG,gCAC7DwO,EAAad,iCACbtI,EAAWoI,gCACXlD,EAAe9L,GAAS,UAI1BiQ,QAEEpL,EAAQ7E,KA2BRmG,EAASnG,4BAMf9E,EAAWuG,GAAOoD,GAClB3J,EAAWwG,GAAcyE,GACzBjL,EAAWyG,GAAYmK,SAIjB5B,EAAWkF,YAIZvP,IACJ5E,OAAgBqT,EAAgB9C,gQAzC1B0E,EAAqB,KAATpN,EACZqN,EAAUttB,GAAKutB,EAAatN,GAC5BuN,GACL7E,GAAAA,EACA1I,KAAAA,EACA6J,KAAAA,EAGA5H,QAASmL,EACTlL,SAAUkL,EAAY,GAAKC,EAC3BrI,KAAMoI,EACHE,EACAhI,GAAe+H,EAASzC,EAAU/K,UACrCqK,QAAAA,EACAlB,aAAAA,GAEDjH,EAAMzJ,IAAIiV,QAGVJ,EAAW/B,EAAcmC,6BAGvBC,KAAcL,GAAatB,GAAgBA,EAAanD,KAAOA,sBAG3D8E,SACEnK,OAAQoK,GAAiBN,GAAYtB,EAC7CxI,EAAO/K,IAAImV,2JCpEb,MAuBaC,GAvBQC,CAAAA,GAAa,CAACnZ,EAAM4S,EAAWwG,MAU5C,CAAEvZ,QADQ2I,GAAYxI,EAAM,SARfqB,IACnB,MAAMlB,EAASgZ,EAAU9X,GACzB,GAAIlB,GAA4B,KAAlBA,EAAOJ,QXIhB,SAAwBsB,GAC9B,OACEA,EAAMgY,kBACU,IAAjBhY,EAAMiY,UACJjY,EAAMkY,SAAWlY,EAAMmY,QAAUnY,EAAMoY,SAAWpY,EAAMqY,UWRpBC,CAAetY,GAAQ,CAC5DA,EAAMuY,iBACN,MAAM/M,EAAK1M,EAAOkL,SAAWlL,EAAOsK,OAAStK,EAAOoP,KACpDqD,EAAS/F,EAAI,CAAEhlB,QAASsY,EAAO2T,aAAa,mBAiBd+F,EAAaxY,GAASA,EAAMyY,gBCxB7D,IAIIC,GAAO,GACPC,GAAOD,GAIPE,GAAU,GAOd,SAASC,GAAOC,GACVA,IACFA,EAAIlsB,OAAQ,GAOhB,SAASmsB,MAET,SAASC,GAAWC,GAIlB,YAHkBzb,IAAdyb,EAAKrpB,OACPqpB,EAAKrpB,KAAOqpB,EAAKC,UAAUC,KAEtBF,EAAKrpB,KAGd,SAASwpB,GAAUH,EAAMvS,GAQvB,GAAqB,iBAAVA,EAAoB,CAC7B,IAAI2S,EAAc3S,IAAU,EAC5B,GAAI,GAAK2S,IAAgB3S,GAAyB,aAAhB2S,EAChC,OAAOC,IAET5S,EAAQ2S,EAEV,OAAO3S,EAAQ,EAAIsS,GAAWC,GAAQvS,EAAQA,EAGhD,SAASyS,KACP,OAAO,EAGT,SAASI,GAAWC,EAAOC,EAAK7pB,GAC9B,OACc,IAAV4pB,IAAgBE,GAAMF,SACZhc,IAAT5N,GAAsB4pB,IAAU5pB,UAC1B4N,IAARic,QAA+Bjc,IAAT5N,GAAsB6pB,GAAO7pB,GAIxD,SAAS+pB,GAAaH,EAAO5pB,GAC3B,OAAOgqB,GAAaJ,EAAO5pB,EAAM,GAGnC,SAASiqB,GAAWJ,EAAK7pB,GACvB,OAAOgqB,GAAaH,EAAK7pB,EAAMA,GAGjC,SAASgqB,GAAalT,EAAO9W,EAAMkqB,GAGjC,YAAiBtc,IAAVkJ,EACHoT,EACAJ,GAAMhT,GACJ9W,IAASmqB,EAAAA,EACPnqB,EAC4B,EAA5B9K,KAAKS,IAAI,EAAGqK,EAAO8W,QACZlJ,IAAT5N,GAAsBA,IAAS8W,EAC7BA,EACwB,EAAxB5hB,KAAKO,IAAIuK,EAAM8W,GAGzB,SAASgT,GAAM9sB,GAEb,OAAOA,EAAQ,GAAgB,IAAVA,GAAe,EAAIA,IAAWmtB,EAAAA,EAIrD,IAAIC,GAAuB,6BAE3B,SAASC,GAAaC,GACpB,OAAOpQ,QAAQoQ,GAAmBA,EAAgBF,KAGpD,IAAIG,GAAkB,0BAEtB,SAASC,GAAQC,GACf,OAAOvQ,QAAQuQ,GAAcA,EAAWF,KAG1C,IAAIG,GAAoB,4BAExB,SAASC,GAAUC,GACjB,OAAO1Q,QAAQ0Q,GAAgBA,EAAaF,KAG9C,SAASG,GAAcC,GACrB,OAAON,GAAQM,IAAqBH,GAAUG,GAGhD,IAAIC,GAAa,SAAoB/tB,GACnC,OAAOqtB,GAAartB,GAASA,EAAQguB,GAAIhuB,IAGvCiuB,GAAgC,SAAUF,GAC5C,SAASE,EAAgBjuB,GACvB,OAAOwtB,GAAQxtB,GAASA,EAAQkuB,GAASluB,GAO3C,OAJK+tB,IAAaE,EAAgBE,UAAYJ,GAC9CE,EAAgB/uB,UAAYwP,OAAOC,OAAQof,GAAcA,EAAW7uB,WACpE+uB,EAAgB/uB,UAAUkvB,YAAcH,EAEjCA,GACPF,IAEEM,GAAkC,SAAUN,GAC9C,SAASM,EAAkBruB,GACzB,OAAO2tB,GAAU3tB,GAASA,EAAQsuB,GAAWtuB,GAO/C,OAJK+tB,IAAaM,EAAkBF,UAAYJ,GAChDM,EAAkBnvB,UAAYwP,OAAOC,OAAQof,GAAcA,EAAW7uB,WACtEmvB,EAAkBnvB,UAAUkvB,YAAcC,EAEnCA,GACPN,IAEEQ,GAA8B,SAAUR,GAC1C,SAASQ,EAAcvuB,GACrB,OAAOqtB,GAAartB,KAAW6tB,GAAc7tB,GAASA,EAAQwuB,GAAOxuB,GAOvE,OAJK+tB,IAAaQ,EAAcJ,UAAYJ,GAC5CQ,EAAcrvB,UAAYwP,OAAOC,OAAQof,GAAcA,EAAW7uB,WAClEqvB,EAAcrvB,UAAUkvB,YAAcG,EAE/BA,GACPR,IAEFA,GAAWU,MAAQR,GACnBF,GAAWW,QAAUL,GACrBN,GAAWxc,IAAMgd,GAEjB,IAAII,GAAgB,wBAEpB,SAASC,GAAMC,GACb,OAAO3R,QAAQ2R,GAAYA,EAASF,KAKtC,SAASG,GAASC,GAChB,OAAO7R,QAAQ6R,GAAeA,EAHT,6BAMvB,SAASC,GAAYC,GACnB,OAAO5B,GAAa4B,IAAmBH,GAASG,GAGlD,IAAIC,GAAoB,4BAExB,SAASC,GAAUC,GACjB,OAAOlS,QAAQkS,GAAgBA,EAAaF,KAG9C,IAIIG,GAAyC,mBAAXC,QAAyBA,OAAOC,SAC9DC,GAAuB,aAEvBC,GAAkBJ,IAAwBG,GAE1CE,GAAW,SAAkBC,GAC/B12B,KAAK02B,KAAOA,GAkBd,SAASC,GAAc/V,EAAMtL,EAAG/U,EAAGq2B,GACjC,IAAI7vB,EAAiB,IAAT6Z,EAAatL,EAAa,IAATsL,EAAargB,EAAI,CAAC+U,EAAG/U,GAOlD,OANAq2B,EACKA,EAAe7vB,MAAQA,EACvB6vB,EAAiB,CAChB7vB,MAAOA,EACP8vB,MAAM,GAELD,EAGT,SAASE,KACP,MAAO,CAAE/vB,WAAO4Q,EAAWkf,MAAM,GAGnC,SAASE,GAAYC,GACnB,QAASC,GAAcD,GAGzB,SAASE,GAAWC,GAClB,OAAOA,GAA+C,mBAAvBA,EAAcT,KAG/C,SAASU,GAAYC,GACnB,IAAIC,EAAaL,GAAcI,GAC/B,OAAOC,GAAcA,EAAW3uB,KAAK0uB,GAGvC,SAASJ,GAAcI,GACrB,IAAIC,EACFD,IACEjB,IAAwBiB,EAASjB,KACjCiB,EAASd,eACb,GAA0B,mBAAfe,EACT,OAAOA,EAjDXb,GAASxwB,UAAU9B,SAAW,WAC5B,MAAO,cAGTsyB,GAASc,KAjBU,EAkBnBd,GAASe,OAjBY,EAkBrBf,GAASgB,QAjBa,EAmBtBhB,GAASxwB,UAAUyxB,QAAUjB,GAASxwB,UAAU0xB,SAAW,WACzD,OAAO33B,KAAKmE,YAEdsyB,GAASxwB,UAAUuwB,IAAmB,WACpC,OAAOx2B,MAyCT,IAAI8C,GAAiB2S,OAAOxP,UAAUnD,eAEtC,SAAS80B,GAAY7wB,GACnB,SAAIiV,MAAMoG,QAAQrb,IAA2B,iBAAVA,IAKjCA,GACiB,iBAAVA,GACPqlB,OAAOyL,UAAU9wB,EAAMwD,SACvBxD,EAAMwD,QAAU,IACE,IAAjBxD,EAAMwD,OAE2B,IAA9BkL,OAAO2C,KAAKrR,GAAOwD,OAGnBxD,EAAMjE,eAAeiE,EAAMwD,OAAS,IAI5C,IAAIwqB,GAAoB,SAAU+C,GAChC,SAAS/C,EAAIhuB,GACX,OAAOA,MAAAA,EACHgxB,KACAhC,GAAYhvB,GACVA,EAAMixB,QA4UhB,SAAsBjxB,GACpB,IAAIkxB,EAAMC,GAAyBnxB,GACnC,GAAIkxB,EACF,OAAOA,EAET,GAAqB,iBAAVlxB,EACT,OAAO,IAAIoxB,GAAUpxB,GAEvB,MAAM,IAAIqxB,UACR,mEAAqErxB,GApV/DsxB,CAAatxB,GA2DrB,OAxDK+wB,IAAgB/C,EAAIG,UAAY4C,GACrC/C,EAAI9uB,UAAYwP,OAAOC,OAAQoiB,GAAiBA,EAAc7xB,WAC9D8uB,EAAI9uB,UAAUkvB,YAAcJ,EAE5BA,EAAI9uB,UAAU+xB,MAAQ,WACpB,OAAOh4B,MAGT+0B,EAAI9uB,UAAU9B,SAAW,WACvB,OAAOnE,KAAKs4B,WAAW,QAAS,MAGlCvD,EAAI9uB,UAAUsyB,YAAc,WAK1B,OAJKv4B,KAAKw4B,QAAUx4B,KAAKy4B,oBACvBz4B,KAAKw4B,OAASx4B,KAAK04B,WAAWC,UAC9B34B,KAAK+J,KAAO/J,KAAKw4B,OAAOjuB,QAEnBvK,MAKT+0B,EAAI9uB,UAAUotB,UAAY,SAAoB/qB,EAAIswB,GAChD,IAAIC,EAAQ74B,KAAKw4B,OACjB,GAAIK,EAAO,CAGT,IAFA,IAAI9uB,EAAO8uB,EAAMtuB,OACbnI,EAAI,EACDA,IAAM2H,GAAM,CACjB,IAAI+uB,EAAQD,EAAMD,EAAU7uB,IAAS3H,EAAIA,KACzC,IAAqC,IAAjCkG,EAAGwwB,EAAM,GAAIA,EAAM,GAAI94B,MACzB,MAGJ,OAAOoC,EAET,OAAOpC,KAAKy4B,kBAAkBnwB,EAAIswB,IAKpC7D,EAAI9uB,UAAU8yB,WAAa,SAAqBnY,EAAMgY,GACpD,IAAIC,EAAQ74B,KAAKw4B,OACjB,GAAIK,EAAO,CACT,IAAI9uB,EAAO8uB,EAAMtuB,OACbnI,EAAI,EACR,OAAO,IAAIq0B,IAAS,WAClB,GAAIr0B,IAAM2H,EACR,MAvGD,CAAEhD,WAAO4Q,EAAWkf,MAAM,GAyG3B,IAAIiC,EAAQD,EAAMD,EAAU7uB,IAAS3H,EAAIA,KACzC,OAAOu0B,GAAc/V,EAAMkY,EAAM,GAAIA,EAAM,OAG/C,OAAO94B,KAAKg5B,mBAAmBpY,EAAMgY,IAGhC7D,GACPD,IAEEG,GAAyB,SAAUF,GACrC,SAASE,EAASluB,GAChB,OAAOA,MAAAA,EACHgxB,KAAgBkB,aAChB7E,GAAartB,GACXwtB,GAAQxtB,GACNA,EAAMixB,QACNjxB,EAAMmyB,eACRrD,GAAS9uB,GACPA,EAAMixB,QACNmB,GAAkBpyB,GAW5B,OARKguB,IAAME,EAASC,UAAYH,GAChCE,EAAShvB,UAAYwP,OAAOC,OAAQqf,GAAOA,EAAI9uB,WAC/CgvB,EAAShvB,UAAUkvB,YAAcF,EAEjCA,EAAShvB,UAAUgzB,WAAa,WAC9B,OAAOj5B,MAGFi1B,GACPF,IAEEM,GAA2B,SAAUN,GACvC,SAASM,EAAWtuB,GAClB,OAAOA,MAAAA,EACHgxB,KACA3D,GAAartB,GACXwtB,GAAQxtB,GACNA,EAAM2xB,WACN3xB,EAAMqyB,eACRvD,GAAS9uB,GACPA,EAAMixB,QAAQU,WACdW,GAAoBtyB,GAmB9B,OAhBKguB,IAAMM,EAAWH,UAAYH,GAClCM,EAAWpvB,UAAYwP,OAAOC,OAAQqf,GAAOA,EAAI9uB,WACjDovB,EAAWpvB,UAAUkvB,YAAcE,EAEnCA,EAAWiE,GAAK,WACd,OAAOjE,EAAWzsB,YAGpBysB,EAAWpvB,UAAUmzB,aAAe,WAClC,OAAOp5B,MAGTq1B,EAAWpvB,UAAU9B,SAAW,WAC9B,OAAOnE,KAAKs4B,WAAW,QAAS,MAG3BjD,GACPN,IAEEQ,GAAuB,SAAUR,GACnC,SAASQ,EAAOxuB,GACd,OAAQqtB,GAAartB,KAAW6tB,GAAc7tB,GAC1CA,EACAsuB,GAAWtuB,IACbwyB,WAeJ,OAZKxE,IAAMQ,EAAOL,UAAYH,GAC9BQ,EAAOtvB,UAAYwP,OAAOC,OAAQqf,GAAOA,EAAI9uB,WAC7CsvB,EAAOtvB,UAAUkvB,YAAcI,EAE/BA,EAAO+D,GAAK,WACV,OAAO/D,EAAO3sB,YAGhB2sB,EAAOtvB,UAAUszB,SAAW,WAC1B,OAAOv5B,MAGFu1B,GACPR,IAEFA,GAAIY,MAAQA,GACZZ,GAAIS,MAAQP,GACZF,GAAIzc,IAAMid,GACVR,GAAIU,QAAUJ,GAEdN,GAAI9uB,UAAUyvB,KAAiB,EAI/B,IAAI8D,GAAyB,SAAUnE,GACrC,SAASmE,EAASC,GAChBz5B,KAAK05B,OAASD,EACdz5B,KAAK+J,KAAO0vB,EAAMlvB,OAqCpB,OAlCK8qB,IAAamE,EAAStE,UAAYG,GACvCmE,EAASvzB,UAAYwP,OAAOC,OAAQ2f,GAAcA,EAAWpvB,WAC7DuzB,EAASvzB,UAAUkvB,YAAcqE,EAEjCA,EAASvzB,UAAU6W,IAAM,SAAc+D,EAAO8Y,GAC5C,OAAO35B,KAAKuY,IAAIsI,GAAS7gB,KAAK05B,OAAOnG,GAAUvzB,KAAM6gB,IAAU8Y,GAGjEH,EAASvzB,UAAUotB,UAAY,SAAoB/qB,EAAIswB,GAIrD,IAHA,IAAIa,EAAQz5B,KAAK05B,OACb3vB,EAAO0vB,EAAMlvB,OACbnI,EAAI,EACDA,IAAM2H,GAAM,CACjB,IAAI6vB,EAAKhB,EAAU7uB,IAAS3H,EAAIA,IAChC,IAAgC,IAA5BkG,EAAGmxB,EAAMG,GAAKA,EAAI55B,MACpB,MAGJ,OAAOoC,GAGTo3B,EAASvzB,UAAU8yB,WAAa,SAAqBnY,EAAMgY,GACzD,IAAIa,EAAQz5B,KAAK05B,OACb3vB,EAAO0vB,EAAMlvB,OACbnI,EAAI,EACR,OAAO,IAAIq0B,IAAS,WAClB,GAAIr0B,IAAM2H,EACR,MA5OC,CAAEhD,WAAO4Q,EAAWkf,MAAM,GA8O7B,IAAI+C,EAAKhB,EAAU7uB,IAAS3H,EAAIA,IAChC,OAAOu0B,GAAc/V,EAAMgZ,EAAIH,EAAMG,QAIlCJ,GACPnE,IAEE8C,GAA0B,SAAUlD,GACtC,SAASkD,EAAU0B,GACjB,IAAIzhB,EAAO3C,OAAO2C,KAAKyhB,GACvB75B,KAAK85B,QAAUD,EACf75B,KAAK+5B,MAAQ3hB,EACbpY,KAAK+J,KAAOqO,EAAK7N,OA8CnB,OA3CK0qB,IAAWkD,EAAUjD,UAAYD,GACtCkD,EAAUlyB,UAAYwP,OAAOC,OAAQuf,GAAYA,EAAShvB,WAC1DkyB,EAAUlyB,UAAUkvB,YAAcgD,EAElCA,EAAUlyB,UAAU6W,IAAM,SAAc3B,EAAKwe,GAC3C,YAAoBhiB,IAAhBgiB,GAA8B35B,KAAKuY,IAAI4C,GAGpCnb,KAAK85B,QAAQ3e,GAFXwe,GAKXxB,EAAUlyB,UAAUsS,IAAM,SAAc4C,GACtC,OAAOrY,GAAe6F,KAAK3I,KAAK85B,QAAS3e,IAG3Cgd,EAAUlyB,UAAUotB,UAAY,SAAoB/qB,EAAIswB,GAKtD,IAJA,IAAIiB,EAAS75B,KAAK85B,QACd1hB,EAAOpY,KAAK+5B,MACZhwB,EAAOqO,EAAK7N,OACZnI,EAAI,EACDA,IAAM2H,GAAM,CACjB,IAAIoR,EAAM/C,EAAKwgB,EAAU7uB,IAAS3H,EAAIA,KACtC,IAAmC,IAA/BkG,EAAGuxB,EAAO1e,GAAMA,EAAKnb,MACvB,MAGJ,OAAOoC,GAGT+1B,EAAUlyB,UAAU8yB,WAAa,SAAqBnY,EAAMgY,GAC1D,IAAIiB,EAAS75B,KAAK85B,QACd1hB,EAAOpY,KAAK+5B,MACZhwB,EAAOqO,EAAK7N,OACZnI,EAAI,EACR,OAAO,IAAIq0B,IAAS,WAClB,GAAIr0B,IAAM2H,EACR,MAlSC,CAAEhD,WAAO4Q,EAAWkf,MAAM,GAoS7B,IAAI1b,EAAM/C,EAAKwgB,EAAU7uB,IAAS3H,EAAIA,KACtC,OAAOu0B,GAAc/V,EAAMzF,EAAK0e,EAAO1e,QAIpCgd,GACPlD,IACFkD,GAAUlyB,UAAUgwB,KAAqB,EAEzC,IAiDI+D,GAjDAC,GAA8B,SAAU5E,GAC1C,SAAS4E,EAAcC,GACrBl6B,KAAKm6B,YAAcD,EACnBl6B,KAAK+J,KAAOmwB,EAAW3vB,QAAU2vB,EAAWnwB,KAyC9C,OAtCKsrB,IAAa4E,EAAc/E,UAAYG,GAC5C4E,EAAch0B,UAAYwP,OAAOC,OAAQ2f,GAAcA,EAAWpvB,WAClEg0B,EAAch0B,UAAUkvB,YAAc8E,EAEtCA,EAAch0B,UAAUwyB,kBAAoB,SAA4BnwB,EAAIswB,GAC1E,GAAIA,EACF,OAAO54B,KAAKu4B,cAAclF,UAAU/qB,EAAIswB,GAE1C,IACItC,EAAWc,GADEp3B,KAAKm6B,aAElB5gB,EAAa,EACjB,GAAI2d,GAAWZ,GAEb,IADA,IAAI8D,IACKA,EAAO9D,EAASI,QAAQG,OACY,IAAvCvuB,EAAG8xB,EAAKrzB,MAAOwS,IAAcvZ,QAKrC,OAAOuZ,GAGT0gB,EAAch0B,UAAU+yB,mBAAqB,SAA6BpY,EAAMgY,GAC9E,GAAIA,EACF,OAAO54B,KAAKu4B,cAAcQ,WAAWnY,EAAMgY,GAE7C,IACItC,EAAWc,GADEp3B,KAAKm6B,aAEtB,IAAKjD,GAAWZ,GACd,OAAO,IAAIG,GAASK,IAEtB,IAAIvd,EAAa,EACjB,OAAO,IAAIkd,IAAS,WAClB,IAAI2D,EAAO9D,EAASI,OACpB,OAAO0D,EAAKvD,KAAOuD,EAAOzD,GAAc/V,EAAMrH,IAAc6gB,EAAKrzB,WAI9DkzB,GACP5E,IAMF,SAAS0C,KACP,OAAOiC,KAAcA,GAAY,IAAIR,GAAS,KAGhD,SAASL,GAAkBpyB,GACzB,IAAIkxB,EAAMjc,MAAMoG,QAAQrb,GACpB,IAAIyyB,GAASzyB,GACbgwB,GAAYhwB,GACV,IAAIkzB,GAAclzB,QAClB4Q,EACN,GAAIsgB,EACF,OAAOA,EAAIiB,eAEb,GAAqB,iBAAVnyB,EACT,OAAO,IAAIoxB,GAAUpxB,GAEvB,MAAM,IAAIqxB,UACR,2EACErxB,GAIN,SAASsyB,GAAoBtyB,GAC3B,IAAIkxB,EAAMC,GAAyBnxB,GACnC,GAAIkxB,EACF,OAAOA,EAET,MAAM,IAAIG,UACR,kDAAoDrxB,GAiBxD,SAASmxB,GAAyBnxB,GAChC,OAAO6wB,GAAY7wB,GACf,IAAIyyB,GAASzyB,GACbgwB,GAAYhwB,GACV,IAAIkzB,GAAclzB,QAClB4Q,EAGR,IAAI0iB,GAAgB,wBAEpB,SAASC,GAAMC,GACb,OAAOtW,QAAQsW,GAAYA,EAASF,KAGtC,SAASG,GAAaC,GACpB,OAAOH,GAAMG,IAAoBvE,GAAUuE,GAG7C,SAASC,GAAcC,GACrB,OAAO1W,QACL0W,GAC+B,mBAAtBA,EAAW3xB,QACa,mBAAxB2xB,EAAWC,UA0DxB,SAASC,GAAGC,EAAQC,GAClB,GAAID,IAAWC,GAAWD,GAAWA,GAAUC,GAAWA,EACxD,OAAO,EAET,IAAKD,IAAWC,EACd,OAAO,EAET,GAC4B,mBAAnBD,EAAOE,SACY,mBAAnBD,EAAOC,QACd,CAGA,IAFAF,EAASA,EAAOE,cAChBD,EAASA,EAAOC,YACUF,GAAWA,GAAUC,GAAWA,EACxD,OAAO,EAET,IAAKD,IAAWC,EACd,OAAO,EAGX,SACEL,GAAcI,IACdJ,GAAcK,IACdD,EAAO9xB,OAAO+xB,IAIlB,IAAIE,GACmB,mBAAdh8B,KAAKg8B,OAAqD,IAA9Bh8B,KAAKg8B,KAAK,WAAY,GACrDh8B,KAAKg8B,KACL,SAAc56B,EAAGD,GAGf,IAAIsU,EAAQ,OAFZrU,GAAK,GAGDwD,EAAQ,OAFZzD,GAAK,GAIL,OAAQsU,EAAI7Q,IAAQxD,IAAM,IAAMwD,EAAI6Q,GAAKtU,IAAM,KAAQ,KAAQ,GAAM,GAO7E,SAAS86B,GAAIC,GACX,OAASA,IAAQ,EAAK,WAAqB,WAANA,EAGvC,IAAIC,GAAiB3lB,OAAOxP,UAAU+0B,QAEtC,SAAS3S,GAAKxU,GACZ,cAAeA,GACb,IAAK,UAIH,OAAOA,EAAI,WAAa,WAC1B,IAAK,SACH,OA6BN,SAAoBK,GAClB,GAAIA,GAAMA,GAAKA,IAAMggB,EAAAA,EACnB,OAAO,EAET,IAAI7L,EAAW,EAAJnU,EACPmU,IAASnU,IACXmU,GAAY,WAAJnU,GAEV,KAAOA,EAAI,YAETmU,GADAnU,GAAK,WAGP,OAAOgnB,GAAI7S,GAzCAgT,CAAWxnB,GACpB,IAAK,SACH,OAAOA,EAAEtJ,OAAS+wB,GA0CxB,SAA0BhY,GACxB,IAAIiY,EAASC,GAAgBlY,QACd3L,IAAX4jB,IACFA,EAASE,GAAWnY,GAChBoY,KAA2BC,KAC7BD,GAAyB,EACzBF,GAAkB,IAEpBE,KACAF,GAAgBlY,GAAUiY,GAE5B,OAAOA,EApDCK,CAAiB/nB,GACjB4nB,GAAW5nB,GACjB,IAAK,SACL,IAAK,WACH,OAAU,OAANA,EACK,WAEiB,mBAAfA,EAAE+mB,SAEJM,GAAIrnB,EAAE+mB,SAAS/mB,KAEpBA,EAAEmnB,UAAYI,IAAuC,mBAAdvnB,EAAEmnB,UAC3CnnB,EAAIA,EAAEmnB,QAAQnnB,IA0DtB,SAAmBmN,GACjB,IAAIua,EACJ,GAAIM,SAEalkB,KADf4jB,EAASO,GAAQhf,IAAIkE,IAEnB,OAAOua,EAKX,QAAe5jB,KADf4jB,EAASva,EAAI+a,KAEX,OAAOR,EAGT,IAAKS,GAAmB,CAEtB,QAAerkB,KADf4jB,EAASva,EAAIib,sBAAwBjb,EAAIib,qBAAqBF,KAE5D,OAAOR,EAIT,QAAe5jB,KADf4jB,EAiEJ,SAAuBziB,GACrB,GAAIA,GAAQA,EAAKojB,SAAW,EAC1B,OAAQpjB,EAAKojB,UACX,KAAK,EACH,OAAOpjB,EAAKqjB,SACd,KAAK,EACH,OAAOrjB,EAAK8U,iBAAmB9U,EAAK8U,gBAAgBuO,UAvE/CC,CAAcpb,IAErB,OAAOua,EAIXA,IAAWc,GACM,WAAbA,KACFA,GAAa,GAGf,GAAIR,GACFC,GAAQlf,IAAIoE,EAAKua,OACZ,CAAA,QAAqB5jB,IAAjB2kB,KAAoD,IAAtBA,GAAatb,GACpD,MAAM,IAAI1E,MAAM,mDACX,GAAI0f,GACTvmB,OAAO8mB,eAAevb,EAAK+a,GAAc,CACvCS,YAAY,EACZC,cAAc,EACdjb,UAAU,EACVza,MAAOw0B,SAEJ,QACwB5jB,IAA7BqJ,EAAIib,sBACJjb,EAAIib,uBAAyBjb,EAAImU,YAAYlvB,UAAUg2B,qBAMvDjb,EAAIib,qBAAuB,WACzB,OAAOj8B,KAAKm1B,YAAYlvB,UAAUg2B,qBAAqBzzB,MACrDxI,KACA4I,YAGJoY,EAAIib,qBAAqBF,IAAgBR,MACpC,CAAA,QAAqB5jB,IAAjBqJ,EAAIkb,SAOb,MAAM,IAAI5f,MAAM,sDAFhB0E,EAAI+a,IAAgBR,GAKtB,OAAOA,EA3HImB,CAAU7oB,IACnB,IAAK,YACH,OAAO,WACT,QACE,GAA0B,mBAAfA,EAAE1P,SACX,OAAOs3B,GAAW5nB,EAAE1P,YAEtB,MAAM,IAAImY,MAAM,qBAAuBzI,EAAI,uBAmCjD,SAAS4nB,GAAWnY,GAQlB,IADA,IAAIiY,EAAS,EACJ3B,EAAK,EAAGA,EAAKtW,EAAO/Y,OAAQqvB,IACnC2B,EAAU,GAAKA,EAASjY,EAAOqZ,WAAW/C,GAAO,EAEnD,OAAOsB,GAAIK,GA0Eb,IAAIe,GAAe7mB,OAAO6mB,aAGtBN,GAAoB,WACtB,IAEE,OADAvmB,OAAO8mB,eAAe,GAAI,IAAK,KACxB,EACP,MAAO3gB,GACP,OAAO,GALa,GAuBxB,IACIkgB,GADAD,GAAkC,mBAAZe,QAEtBf,KACFC,GAAU,IAAIc,SAGhB,IAAIP,GAAa,EAEbN,GAAe,oBACG,mBAAX1F,SACT0F,GAAe1F,OAAO0F,KAGxB,IAAIT,GAA+B,GAC/BK,GAA6B,IAC7BD,GAAyB,EACzBF,GAAkB,GAElBqB,GAAgC,SAAUC,GAC5C,SAASD,EAAgBE,EAASC,GAChCh9B,KAAKi9B,MAAQF,EACb/8B,KAAKk9B,SAAWF,EAChBh9B,KAAK+J,KAAOgzB,EAAQhzB,KAiDtB,OA9CK+yB,IAAcD,EAAgB3H,UAAY4H,GAC/CD,EAAgB52B,UAAYwP,OAAOC,OAAQonB,GAAeA,EAAY72B,WACtE42B,EAAgB52B,UAAUkvB,YAAc0H,EAExCA,EAAgB52B,UAAU6W,IAAM,SAAc3B,EAAKwe,GACjD,OAAO35B,KAAKi9B,MAAMngB,IAAI3B,EAAKwe,IAG7BkD,EAAgB52B,UAAUsS,IAAM,SAAc4C,GAC5C,OAAOnb,KAAKi9B,MAAM1kB,IAAI4C,IAGxB0hB,EAAgB52B,UAAUk3B,SAAW,WACnC,OAAOn9B,KAAKi9B,MAAME,YAGpBN,EAAgB52B,UAAU2yB,QAAU,WAClC,IAAIwE,EAASp9B,KAETq9B,EAAmBC,GAAet9B,MAAM,GAI5C,OAHKA,KAAKk9B,WACRG,EAAiBF,SAAW,WAAc,OAAOC,EAAOH,MAAMjF,QAAQY,YAEjEyE,GAGTR,EAAgB52B,UAAUsZ,IAAM,SAAcge,EAAQ5gB,GACpD,IAAIygB,EAASp9B,KAETw9B,EAAiBC,GAAWz9B,KAAMu9B,EAAQ5gB,GAI9C,OAHK3c,KAAKk9B,WACRM,EAAeL,SAAW,WAAc,OAAOC,EAAOH,MAAMjF,QAAQzY,IAAIge,EAAQ5gB,KAE3E6gB,GAGTX,EAAgB52B,UAAUotB,UAAY,SAAoB/qB,EAAIswB,GAC5D,IAAIwE,EAASp9B,KAEb,OAAOA,KAAKi9B,MAAM5J,WAAU,SAAU9yB,EAAG+U,GAAK,OAAOhN,EAAG/H,EAAG+U,EAAG8nB,KAAYxE,IAG5EiE,EAAgB52B,UAAU8yB,WAAa,SAAqBnY,EAAMgY,GAChE,OAAO54B,KAAKi9B,MAAMlE,WAAWnY,EAAMgY,IAG9BiE,GACP5H,IACF4H,GAAgB52B,UAAUgwB,KAAqB,EAE/C,IAAIyH,GAAkC,SAAUC,GAC9C,SAASD,EAAkBtK,GACzBpzB,KAAKi9B,MAAQ7J,EACbpzB,KAAK+J,KAAOqpB,EAAKrpB,KAyCnB,OAtCK4zB,IAAgBD,EAAkBxI,UAAYyI,GACnDD,EAAkBz3B,UAAYwP,OAAOC,OAAQioB,GAAiBA,EAAc13B,WAC5Ey3B,EAAkBz3B,UAAUkvB,YAAcuI,EAE1CA,EAAkBz3B,UAAU23B,SAAW,SAAmB72B,GACxD,OAAO/G,KAAKi9B,MAAMW,SAAS72B,IAG7B22B,EAAkBz3B,UAAUotB,UAAY,SAAoB/qB,EAAIswB,GAC9D,IAAIwE,EAASp9B,KAEToC,EAAI,EAER,OADAw2B,GAAWzF,GAAWnzB,MACfA,KAAKi9B,MAAM5J,WAChB,SAAU9yB,GAAK,OAAO+H,EAAG/H,EAAGq4B,EAAUwE,EAAOrzB,OAAS3H,EAAIA,IAAKg7B,KAC/DxE,IAIJ8E,EAAkBz3B,UAAU8yB,WAAa,SAAqBnY,EAAMgY,GAClE,IAAIwE,EAASp9B,KAETs2B,EAAWt2B,KAAKi9B,MAAMlE,WA90BT,EA80BoCH,GACjDx2B,EAAI,EAER,OADAw2B,GAAWzF,GAAWnzB,MACf,IAAIy2B,IAAS,WAClB,IAAI2D,EAAO9D,EAASI,OACpB,OAAO0D,EAAKvD,KACRuD,EACAzD,GACE/V,EACAgY,EAAUwE,EAAOrzB,OAAS3H,EAAIA,IAC9Bg4B,EAAKrzB,MACLqzB,OAKHsD,GACPrI,IAEEwI,GAA8B,SAAUC,GAC1C,SAASD,EAAczK,GACrBpzB,KAAKi9B,MAAQ7J,EACbpzB,KAAK+J,KAAOqpB,EAAKrpB,KA2BnB,OAxBK+zB,IAAYD,EAAc3I,UAAY4I,GAC3CD,EAAc53B,UAAYwP,OAAOC,OAAQooB,GAAaA,EAAU73B,WAChE43B,EAAc53B,UAAUkvB,YAAc0I,EAEtCA,EAAc53B,UAAUsS,IAAM,SAAc4C,GAC1C,OAAOnb,KAAKi9B,MAAMW,SAASziB,IAG7B0iB,EAAc53B,UAAUotB,UAAY,SAAoB/qB,EAAIswB,GAC1D,IAAIwE,EAASp9B,KAEb,OAAOA,KAAKi9B,MAAM5J,WAAU,SAAU9yB,GAAK,OAAO+H,EAAG/H,EAAGA,EAAG68B,KAAYxE,IAGzEiF,EAAc53B,UAAU8yB,WAAa,SAAqBnY,EAAMgY,GAC9D,IAAItC,EAAWt2B,KAAKi9B,MAAMlE,WAt3BT,EAs3BoCH,GACrD,OAAO,IAAInC,IAAS,WAClB,IAAI2D,EAAO9D,EAASI,OACpB,OAAO0D,EAAKvD,KACRuD,EACAzD,GAAc/V,EAAMwZ,EAAKrzB,MAAOqzB,EAAKrzB,MAAOqzB,OAI7CyD,GACPtI,IAEEwI,GAAoC,SAAUjB,GAChD,SAASiB,EAAoBzS,GAC3BtrB,KAAKi9B,MAAQ3R,EACbtrB,KAAK+J,KAAOuhB,EAAQvhB,KAsDtB,OAnDK+yB,IAAciB,EAAoB7I,UAAY4H,GACnDiB,EAAoB93B,UAAYwP,OAAOC,OAAQonB,GAAeA,EAAY72B,WAC1E83B,EAAoB93B,UAAUkvB,YAAc4I,EAE5CA,EAAoB93B,UAAUyyB,SAAW,WACvC,OAAO14B,KAAKi9B,MAAMjF,SAGpB+F,EAAoB93B,UAAUotB,UAAY,SAAoB/qB,EAAIswB,GAChE,IAAIwE,EAASp9B,KAEb,OAAOA,KAAKi9B,MAAM5J,WAAU,SAAUyF,GAGpC,GAAIA,EAAO,CACTkF,GAAclF,GACd,IAAImF,EAAoB7J,GAAa0E,GACrC,OAAOxwB,EACL21B,EAAoBnF,EAAMhc,IAAI,GAAKgc,EAAM,GACzCmF,EAAoBnF,EAAMhc,IAAI,GAAKgc,EAAM,GACzCsE,MAGHxE,IAGLmF,EAAoB93B,UAAU8yB,WAAa,SAAqBnY,EAAMgY,GACpE,IAAItC,EAAWt2B,KAAKi9B,MAAMlE,WAn6BT,EAm6BoCH,GACrD,OAAO,IAAInC,IAAS,WAClB,OAAa,CACX,IAAI2D,EAAO9D,EAASI,OACpB,GAAI0D,EAAKvD,KACP,OAAOuD,EAET,IAAItB,EAAQsB,EAAKrzB,MAGjB,GAAI+xB,EAAO,CACTkF,GAAclF,GACd,IAAImF,EAAoB7J,GAAa0E,GACrC,OAAOnC,GACL/V,EACAqd,EAAoBnF,EAAMhc,IAAI,GAAKgc,EAAM,GACzCmF,EAAoBnF,EAAMhc,IAAI,GAAKgc,EAAM,GACzCsB,SAOH2D,GACP9I,IAIF,SAASiJ,GAAYhE,GACnB,IAAIiE,EAAeC,GAAalE,GAmChC,OAlCAiE,EAAalB,MAAQ/C,EACrBiE,EAAap0B,KAAOmwB,EAAWnwB,KAC/Bo0B,EAAapqB,KAAO,WAAc,OAAOmmB,GACzCiE,EAAavF,QAAU,WACrB,IAAIyE,EAAmBnD,EAAWtB,QAAQpwB,MAAMxI,MAEhD,OADAq9B,EAAiBtpB,KAAO,WAAc,OAAOmmB,EAAWtB,WACjDyE,GAETc,EAAa5lB,IAAM,SAAU4C,GAAO,OAAO+e,EAAW0D,SAASziB,IAC/DgjB,EAAaP,SAAW,SAAUziB,GAAO,OAAO+e,EAAW3hB,IAAI4C,IAC/DgjB,EAAa5F,YAAc8F,GAC3BF,EAAa1F,kBAAoB,SAASnwB,EAAIswB,GAC5C,IAAIwE,EAASp9B,KAEb,OAAOk6B,EAAW7G,WAAU,SAAU9yB,EAAG+U,GAAK,OAA4B,IAArBhN,EAAGgN,EAAG/U,EAAG68B,KAAsBxE,IAEtFuF,EAAanF,mBAAqB,SAASpY,EAAMgY,GAC/C,GAl9BkB,IAk9BdhY,EAA0B,CAC5B,IAAI0V,EAAW4D,EAAWnB,WAAWnY,EAAMgY,GAC3C,OAAO,IAAInC,IAAS,WAClB,IAAI2D,EAAO9D,EAASI,OACpB,IAAK0D,EAAKvD,KAAM,CACd,IAAIvhB,EAAI8kB,EAAKrzB,MAAM,GACnBqzB,EAAKrzB,MAAM,GAAKqzB,EAAKrzB,MAAM,GAC3BqzB,EAAKrzB,MAAM,GAAKuO,EAElB,OAAO8kB,KAGX,OAAOF,EAAWnB,WA/9BD,IAg+BfnY,EAj+Ba,EACE,EAi+BfgY,IAGGuF,EAGT,SAASV,GAAWvD,EAAYqD,EAAQ5gB,GACtC,IAAI6gB,EAAiBY,GAAalE,GAkClC,OAjCAsD,EAAezzB,KAAOmwB,EAAWnwB,KACjCyzB,EAAejlB,IAAM,SAAU4C,GAAO,OAAO+e,EAAW3hB,IAAI4C,IAC5DqiB,EAAe1gB,IAAM,SAAU3B,EAAKwe,GAClC,IAAIp5B,EAAI25B,EAAWpd,IAAI3B,EAAK4X,IAC5B,OAAOxyB,IAAMwyB,GACT4G,EACA4D,EAAO50B,KAAKgU,EAASpc,EAAG4a,EAAK+e,IAEnCsD,EAAe/E,kBAAoB,SAASnwB,EAAIswB,GAC9C,IAAIwE,EAASp9B,KAEb,OAAOk6B,EAAW7G,WAChB,SAAU9yB,EAAG+U,EAAGZ,GAAK,OAAwD,IAAjDpM,EAAGi1B,EAAO50B,KAAKgU,EAASpc,EAAG+U,EAAGZ,GAAIY,EAAG8nB,KACjExE,IAGJ4E,EAAexE,mBAAqB,SAASpY,EAAMgY,GACjD,IAAItC,EAAW4D,EAAWnB,WAz/BR,EAy/BoCH,GACtD,OAAO,IAAInC,IAAS,WAClB,IAAI2D,EAAO9D,EAASI,OACpB,GAAI0D,EAAKvD,KACP,OAAOuD,EAET,IAAItB,EAAQsB,EAAKrzB,MACboU,EAAM2d,EAAM,GAChB,OAAOnC,GACL/V,EACAzF,EACAoiB,EAAO50B,KAAKgU,EAASmc,EAAM,GAAI3d,EAAK+e,GACpCE,OAICoD,EAGT,SAASF,GAAepD,EAAY8C,GAClC,IAAII,EAASp9B,KAETq9B,EAAmBe,GAAalE,GA2CpC,OA1CAmD,EAAiBJ,MAAQ/C,EACzBmD,EAAiBtzB,KAAOmwB,EAAWnwB,KACnCszB,EAAiBzE,QAAU,WAAc,OAAOsB,GAC5CA,EAAWnmB,OACbspB,EAAiBtpB,KAAO,WACtB,IAAIoqB,EAAeD,GAAYhE,GAE/B,OADAiE,EAAavF,QAAU,WAAc,OAAOsB,EAAWnmB,QAChDoqB,IAGXd,EAAiBvgB,IAAM,SAAU3B,EAAKwe,GAAe,OAAOO,EAAWpd,IAAIkgB,EAAU7hB,GAAO,EAAIA,EAAKwe,IACrG0D,EAAiB9kB,IAAM,SAAU4C,GAAO,OAAO+e,EAAW3hB,IAAIykB,EAAU7hB,GAAO,EAAIA,IACnFkiB,EAAiBO,SAAW,SAAU72B,GAAS,OAAOmzB,EAAW0D,SAAS72B,IAC1Es2B,EAAiB9E,YAAc8F,GAC/BhB,EAAiBhK,UAAY,SAAS/qB,EAAIswB,GACxC,IAAIwE,EAASp9B,KAEToC,EAAI,EAER,OADAw2B,GAAWzF,GAAW+G,GACfA,EAAW7G,WAChB,SAAU9yB,EAAG+U,GAAK,OAAOhN,EAAG/H,EAAGy8B,EAAU1nB,EAAIsjB,EAAUwE,EAAOrzB,OAAS3H,EAAIA,IAAKg7B,MAC/ExE,IAGLyE,EAAiBtE,WAAa,SAAUnY,EAAMgY,GAC5C,IAAIx2B,EAAI,EACRw2B,GAAWzF,GAAW+G,GACtB,IAAI5D,EAAW4D,EAAWnB,WA3iCR,GA2iCqCH,GACvD,OAAO,IAAInC,IAAS,WAClB,IAAI2D,EAAO9D,EAASI,OACpB,GAAI0D,EAAKvD,KACP,OAAOuD,EAET,IAAItB,EAAQsB,EAAKrzB,MACjB,OAAO4vB,GACL/V,EACAoc,EAAUlE,EAAM,GAAKF,EAAUwE,EAAOrzB,OAAS3H,EAAIA,IACnD02B,EAAM,GACNsB,OAICiD,EAGT,SAASiB,GAAcpE,EAAYqE,EAAW5hB,EAASqgB,GACrD,IAAIwB,EAAiBJ,GAAalE,GA2ClC,OA1CI8C,IACFwB,EAAejmB,IAAM,SAAU4C,GAC7B,IAAI5a,EAAI25B,EAAWpd,IAAI3B,EAAK4X,IAC5B,OAAOxyB,IAAMwyB,MAAawL,EAAU51B,KAAKgU,EAASpc,EAAG4a,EAAK+e,IAE5DsE,EAAe1hB,IAAM,SAAU3B,EAAKwe,GAClC,IAAIp5B,EAAI25B,EAAWpd,IAAI3B,EAAK4X,IAC5B,OAAOxyB,IAAMwyB,IAAWwL,EAAU51B,KAAKgU,EAASpc,EAAG4a,EAAK+e,GACpD35B,EACAo5B,IAGR6E,EAAe/F,kBAAoB,SAASnwB,EAAIswB,GAC9C,IAAIwE,EAASp9B,KAETuZ,EAAa,EAOjB,OANA2gB,EAAW7G,WAAU,SAAU9yB,EAAG+U,EAAGZ,GACnC,GAAI6pB,EAAU51B,KAAKgU,EAASpc,EAAG+U,EAAGZ,GAEhC,OADA6E,IACOjR,EAAG/H,EAAGy8B,EAAU1nB,EAAIiE,EAAa,EAAG6jB,KAE5CxE,GACIrf,GAETilB,EAAexF,mBAAqB,SAASpY,EAAMgY,GACjD,IAAItC,EAAW4D,EAAWnB,WAxlCR,EAwlCoCH,GAClDrf,EAAa,EACjB,OAAO,IAAIkd,IAAS,WAClB,OAAa,CACX,IAAI2D,EAAO9D,EAASI,OACpB,GAAI0D,EAAKvD,KACP,OAAOuD,EAET,IAAItB,EAAQsB,EAAKrzB,MACboU,EAAM2d,EAAM,GACZ/xB,EAAQ+xB,EAAM,GAClB,GAAIyF,EAAU51B,KAAKgU,EAAS5V,EAAOoU,EAAK+e,GACtC,OAAOvD,GAAc/V,EAAMoc,EAAU7hB,EAAM5B,IAAcxS,EAAOqzB,QAKjEoE,EAwBT,SAASC,GAAavE,EAAYvG,EAAOC,EAAKoJ,GAC5C,IAAI0B,EAAexE,EAAWnwB,KAE9B,GAAI2pB,GAAWC,EAAOC,EAAK8K,GACzB,OAAOxE,EAGT,IAAIyE,EAAgB7K,GAAaH,EAAO+K,GACpCE,EAAc5K,GAAWJ,EAAK8K,GAKlC,GAAIC,GAAkBA,GAAiBC,GAAgBA,EACrD,OAAOH,GAAavE,EAAWlC,QAAQO,cAAe5E,EAAOC,EAAKoJ,GAOpE,IACI6B,EADAC,EAAeF,EAAcD,EAE7BG,GAAiBA,IACnBD,EAAYC,EAAe,EAAI,EAAIA,GAGrC,IAAIC,EAAWX,GAAalE,GAqE5B,OAjEA6E,EAASh1B,KACO,IAAd80B,EAAkBA,EAAa3E,EAAWnwB,MAAQ80B,QAAclnB,GAE7DqlB,GAAWrH,GAAMuE,IAAe2E,GAAa,IAChDE,EAASjiB,IAAM,SAAS+D,EAAO8Y,GAE7B,OADA9Y,EAAQ0S,GAAUvzB,KAAM6gB,KACR,GAAKA,EAAQge,EACzB3E,EAAWpd,IAAI+D,EAAQ8d,EAAehF,GACtCA,IAIRoF,EAAStG,kBAAoB,SAASnwB,EAAIswB,GACxC,IAAIwE,EAASp9B,KAEb,GAAkB,IAAd6+B,EACF,OAAO,EAET,GAAIjG,EACF,OAAO54B,KAAKu4B,cAAclF,UAAU/qB,EAAIswB,GAE1C,IAAIoG,EAAU,EACVC,GAAa,EACb1lB,EAAa,EAUjB,OATA2gB,EAAW7G,WAAU,SAAU9yB,EAAG+U,GAChC,IAAM2pB,KAAeA,EAAaD,IAAYL,GAE5C,OADAplB,KAEkD,IAAhDjR,EAAG/H,EAAGy8B,EAAU1nB,EAAIiE,EAAa,EAAG6jB,IACpC7jB,IAAeslB,KAIdtlB,GAGTwlB,EAAS/F,mBAAqB,SAASpY,EAAMgY,GAC3C,GAAkB,IAAdiG,GAAmBjG,EACrB,OAAO54B,KAAKu4B,cAAcQ,WAAWnY,EAAMgY,GAG7C,GAAkB,IAAdiG,EACF,OAAO,IAAIpI,GAASK,IAEtB,IAAIR,EAAW4D,EAAWnB,WAAWnY,EAAMgY,GACvCoG,EAAU,EACVzlB,EAAa,EACjB,OAAO,IAAIkd,IAAS,WAClB,KAAOuI,IAAYL,GACjBrI,EAASI,OAEX,KAAMnd,EAAaslB,EACjB,MA9qCC,CAAE93B,WAAO4Q,EAAWkf,MAAM,GAgrC7B,IAAIuD,EAAO9D,EAASI,OACpB,OAAIsG,GAxtCW,IAwtCApc,GAA2BwZ,EAAKvD,KACtCuD,EAGAzD,GAAc/V,EAAMrH,EAAa,EA7tC7B,IA4tCTqH,OACyCjJ,EAEFyiB,EAAKrzB,MAAM,GAFEqzB,OAMrD2E,EA8CT,SAASG,GAAiBhF,EAAYqE,EAAW5hB,EAASqgB,GACxD,IAAImC,EAAef,GAAalE,GAiDhC,OAhDAiF,EAAa1G,kBAAoB,SAASnwB,EAAIswB,GAC5C,IAAIwE,EAASp9B,KAEb,GAAI44B,EACF,OAAO54B,KAAKu4B,cAAclF,UAAU/qB,EAAIswB,GAE1C,IAAIqG,GAAa,EACb1lB,EAAa,EAOjB,OANA2gB,EAAW7G,WAAU,SAAU9yB,EAAG+U,EAAGZ,GACnC,IAAMuqB,KAAeA,EAAaV,EAAU51B,KAAKgU,EAASpc,EAAG+U,EAAGZ,IAE9D,OADA6E,IACOjR,EAAG/H,EAAGy8B,EAAU1nB,EAAIiE,EAAa,EAAG6jB,MAGxC7jB,GAET4lB,EAAanG,mBAAqB,SAASpY,EAAMgY,GAC/C,IAAIwE,EAASp9B,KAEb,GAAI44B,EACF,OAAO54B,KAAKu4B,cAAcQ,WAAWnY,EAAMgY,GAE7C,IAAItC,EAAW4D,EAAWnB,WAvyCR,EAuyCoCH,GAClDwG,GAAW,EACX7lB,EAAa,EACjB,OAAO,IAAIkd,IAAS,WAClB,IAAI2D,EACA9kB,EACA/U,EACJ,EAAG,CAED,IADA65B,EAAO9D,EAASI,QACPG,KACP,OAAImG,GAlzCO,IAkzCIpc,EACNwZ,EAGAzD,GAAc/V,EAAMrH,IAvzCpB,IAszCLqH,OACuCjJ,EAEFyiB,EAAKrzB,MAAM,GAFEqzB,GAIxD,IAAItB,EAAQsB,EAAKrzB,MACjBuO,EAAIwjB,EAAM,GACVv4B,EAAIu4B,EAAM,GACVsG,IAAaA,EAAWb,EAAU51B,KAAKgU,EAASpc,EAAG+U,EAAG8nB,UAC/CgC,GACT,OA9zCgB,IA8zCTxe,EAA2BwZ,EAAOzD,GAAc/V,EAAMtL,EAAG/U,EAAG65B,OAGhE+E,EAGT,SAASE,GAAcnF,EAAY1X,GACjC,IAAI8c,EAAoB/K,GAAQ2F,GAC5BqF,EAAQ,CAACrF,GACVzxB,OAAO+Z,GACPjD,KAAI,SAAUhf,GAQb,OAPK6zB,GAAa7zB,GAIP++B,IACT/+B,EAAIy0B,GAAgBz0B,IAJpBA,EAAI++B,EACAnG,GAAkB54B,GAClB84B,GAAoBrd,MAAMoG,QAAQ7hB,GAAKA,EAAI,CAACA,IAI3CA,KAERif,QAAO,SAAUjf,GAAK,OAAkB,IAAXA,EAAEwJ,QAElC,GAAqB,IAAjBw1B,EAAMh1B,OACR,OAAO2vB,EAGT,GAAqB,IAAjBqF,EAAMh1B,OAAc,CACtB,IAAIi1B,EAAYD,EAAM,GACtB,GACEC,IAActF,GACboF,GAAqB/K,GAAQiL,IAC7B9K,GAAUwF,IAAexF,GAAU8K,GAEpC,OAAOA,EAIX,IAAIC,EAAY,IAAIjG,GAAS+F,GAe7B,OAdID,EACFG,EAAYA,EAAUxG,aACZvE,GAAUwF,KACpBuF,EAAYA,EAAUlG,aAExBkG,EAAYA,EAAUC,SAAQ,IACpB31B,KAAOw1B,EAAM9Y,QAAO,SAAUkZ,EAAK1H,GAC3C,QAAYtgB,IAARgoB,EAAmB,CACrB,IAAI51B,EAAOkuB,EAAIluB,KACf,QAAa4N,IAAT5N,EACF,OAAO41B,EAAM51B,KAGhB,GACI01B,EAGT,SAASG,GAAe1F,EAAY2F,EAAO7C,GACzC,IAAI8C,EAAe1B,GAAalE,GAmDhC,OAlDA4F,EAAarH,kBAAoB,SAASnwB,EAAIswB,GAC5C,GAAIA,EACF,OAAO54B,KAAKu4B,cAAclF,UAAU/qB,EAAIswB,GAE1C,IAAIrf,EAAa,EACbwmB,GAAU,EAed,OAdA,SAASC,EAAS5M,EAAM6M,GACtB7M,EAAKC,WAAU,SAAU9yB,EAAG+U,GAS1B,QARMuqB,GAASI,EAAeJ,IAAUzL,GAAa7zB,GACnDy/B,EAASz/B,EAAG0/B,EAAe,IAE3B1mB,KAC0D,IAAtDjR,EAAG/H,EAAGy8B,EAAU1nB,EAAIiE,EAAa,EAAGumB,KACtCC,GAAU,KAGNA,IACPnH,GAELoH,CAAS9F,EAAY,GACd3gB,GAETumB,EAAa9G,mBAAqB,SAASpY,EAAMgY,GAC/C,GAAIA,EACF,OAAO54B,KAAKu4B,cAAcQ,WAAWnY,EAAMgY,GAE7C,IAAItC,EAAW4D,EAAWnB,WAAWnY,EAAMgY,GACvCvN,EAAQ,GACR9R,EAAa,EACjB,OAAO,IAAIkd,IAAS,WAClB,KAAOH,GAAU,CACf,IAAI8D,EAAO9D,EAASI,OACpB,IAAkB,IAAd0D,EAAKvD,KAAT,CAIA,IAAIt2B,EAAI65B,EAAKrzB,MAIb,GA/5Cc,IA45CV6Z,IACFrgB,EAAIA,EAAE,IAEFs/B,KAASxU,EAAM9gB,OAASs1B,KAAUzL,GAAa7zB,GAInD,OAAOy8B,EAAU5C,EAAOzD,GAAc/V,EAAMrH,IAAchZ,EAAG65B,GAH7D/O,EAAMxlB,KAAKywB,GACXA,EAAW/1B,EAAEw4B,WAAWnY,EAAMgY,QAT9BtC,EAAWjL,EAAMtN,MAcrB,MAh4CG,CAAEhX,WAAO4Q,EAAWkf,MAAM,OAm4C1BiJ,EA4CT,SAASI,GAAYhG,EAAYiG,EAAY5C,GACtC4C,IACHA,EAAaC,IAEf,IAAId,EAAoB/K,GAAQ2F,GAC5BrZ,EAAQ,EACRyK,EAAU4O,EACXlC,QACAzY,KAAI,SAAUhf,EAAG+U,GAAK,MAAO,CAACA,EAAG/U,EAAGsgB,IAAS0c,EAASA,EAAOh9B,EAAG+U,EAAG4kB,GAAc35B,MACjF48B,WACAxE,UAUH,OATArN,EAAQ9D,MAAK,SAAUnnB,EAAGD,GAAK,OAAO+/B,EAAW9/B,EAAE,GAAID,EAAE,KAAOC,EAAE,GAAKD,EAAE,MAAOyV,QAC9EypB,EACI,SAAU/+B,EAAG6B,GACXkpB,EAAQlpB,GAAGmI,OAAS,GAEtB,SAAUhK,EAAG6B,GACXkpB,EAAQlpB,GAAK7B,EAAE,KAGhB++B,EACHrK,GAAS3J,GACToJ,GAAUwF,GACR7E,GAAW/J,GACXiK,GAAOjK,GAGf,SAAS+U,GAAWnG,EAAYiG,EAAY5C,GAI1C,GAHK4C,IACHA,EAAaC,IAEX7C,EAAQ,CACV,IAAIzE,EAAQoB,EACTlC,QACAzY,KAAI,SAAUhf,EAAG+U,GAAK,MAAO,CAAC/U,EAAGg9B,EAAOh9B,EAAG+U,EAAG4kB,OAC9CzT,QAAO,SAAUpmB,EAAGD,GAAK,OAAQkgC,GAAWH,EAAY9/B,EAAE,GAAID,EAAE,IAAMA,EAAIC,KAC7E,OAAOy4B,GAASA,EAAM,GAExB,OAAOoB,EAAWzT,QAAO,SAAUpmB,EAAGD,GAAK,OAAQkgC,GAAWH,EAAY9/B,EAAGD,GAAKA,EAAIC,KAGxF,SAASigC,GAAWH,EAAY9/B,EAAGD,GACjC,IAAImgC,EAAOJ,EAAW//B,EAAGC,GAGzB,OACY,IAATkgC,GAAcngC,IAAMC,IAAMD,MAAAA,GAAiCA,GAAMA,IAClEmgC,EAAO,EAIX,SAASC,GAAeC,EAASC,EAAQnB,EAAOoB,GAC9C,IAAIC,EAAcxC,GAAaqC,GAC3BI,EAAQ,IAAIrH,GAAS+F,GAAOhgB,KAAI,SAAUnd,GAAK,OAAOA,EAAE2H,QAkD5D,OAjDA62B,EAAY72B,KAAO42B,EAASE,EAAMnhC,MAAQmhC,EAAMrhC,MAGhDohC,EAAYvN,UAAY,SAAS/qB,EAAIswB,GAiBnC,IAHA,IACIwB,EADA9D,EAAWt2B,KAAK+4B,WA7hDH,EA6hD8BH,GAE3Crf,EAAa,IACR6gB,EAAO9D,EAASI,QAAQG,OACY,IAAvCvuB,EAAG8xB,EAAKrzB,MAAOwS,IAAcvZ,QAInC,OAAOuZ,GAETqnB,EAAY5H,mBAAqB,SAASpY,EAAMgY,GAC9C,IAAIkI,EAAYvB,EAAMhgB,KACpB,SAAUnd,GAAK,OAASA,EAAI0yB,GAAW1yB,GAAKg1B,GAAYwB,EAAUx2B,EAAEw2B,UAAYx2B,MAE9EmX,EAAa,EACbwnB,GAAS,EACb,OAAO,IAAItK,IAAS,WAClB,IAAIuK,EAKJ,OAJKD,IACHC,EAAQF,EAAUvhB,KAAI,SAAUnd,GAAK,OAAOA,EAAEs0B,UAC9CqK,EAASJ,EAASK,EAAMC,OAAM,SAAU3gC,GAAK,OAAOA,EAAEu2B,QAAWmK,EAAME,MAAK,SAAU5gC,GAAK,OAAOA,EAAEu2B,SAElGkK,EA5gDD,CAAEh6B,WAAO4Q,EAAWkf,MAAM,GA+gDtBF,GACL/V,EACArH,IACAmnB,EAAOl4B,MAAM,KAAMw4B,EAAMzhB,KAAI,SAAUjf,GAAK,OAAOA,EAAEyG,eAIpD65B,EAKT,SAASO,GAAM/N,EAAM6E,GACnB,OAAO7E,IAAS6E,EAAM7E,EAAOuC,GAAMvC,GAAQ6E,EAAM7E,EAAK+B,YAAY8C,GAGpE,SAAS+F,GAAclF,GACrB,GAAIA,IAAUrjB,OAAOqjB,GACnB,MAAM,IAAIV,UAAU,0BAA4BU,GAIpD,SAASsI,GAAgBlH,GACvB,OAAO3F,GAAQ2F,GACXlF,GACAN,GAAUwF,GACR9E,GACAE,GAGR,SAAS8I,GAAalE,GACpB,OAAOzkB,OAAOC,QACX6e,GAAQ2F,GACLjF,GACAP,GAAUwF,GACR7E,GACAE,IACJtvB,WAIN,SAASo4B,KACP,OAAIr+B,KAAKi9B,MAAM1E,aACbv4B,KAAKi9B,MAAM1E,cACXv4B,KAAK+J,KAAO/J,KAAKi9B,MAAMlzB,KAChB/J,MAEF+0B,GAAI9uB,UAAUsyB,YAAY5vB,KAAK3I,MAGxC,SAASogC,GAAkB//B,EAAGD,GAC5B,YAAUuX,IAANtX,QAAyBsX,IAANvX,EACd,OAGCuX,IAANtX,EACK,OAGCsX,IAANvX,GACM,EAGHC,EAAID,EAAI,EAAIC,EAAID,GAAK,EAAI,EAIlC,SAASihC,GAAQC,EAAKC,GACpBA,EAASA,GAAU,EAGnB,IAFA,IAAI1pB,EAAM5Y,KAAKS,IAAI,EAAG4hC,EAAI/2B,OAASg3B,GAC/BC,EAAS,IAAIxlB,MAAMnE,GACd+hB,EAAK,EAAGA,EAAK/hB,EAAK+hB,IACzB4H,EAAO5H,GAAM0H,EAAI1H,EAAK2H,GAExB,OAAOC,EAGT,SAASC,GAAUC,EAAWC,GAC5B,IAAKD,EAAa,MAAM,IAAIplB,MAAMqlB,GAGpC,SAASC,GAAkB73B,GACzB03B,GACE13B,IAASmqB,EAAAA,EACT,qDAIJ,SAAS2N,GAAcC,GACrB,GAAIlK,GAAYkK,IAA+B,iBAAZA,EACjC,OAAOA,EAET,GAAI5L,GAAU4L,GACZ,OAAOA,EAAQnJ,UAEjB,MAAM,IAAIP,UACR,0DAA4D0J,GAIhE,SAASC,GAAWh7B,GAClB,OACEA,IAC8B,mBAAtBA,EAAMouB,aACe,WAA3BpuB,EAAMouB,YAAYzb,MAQxB,SAASsoB,GAAgBj7B,GACvB,MACmB,iBAAVA,IACNgvB,GAAYhvB,IAAUiV,MAAMoG,QAAQrb,IAAUg7B,GAAWh7B,IAO9D,SAASk7B,GAAYl7B,GACnB,IACE,MAAwB,iBAAVA,EAAqBm7B,KAAKC,UAAUp7B,GAAS9E,OAAO8E,GAClE,MAAOq7B,GACP,OAAOF,KAAKC,UAAUp7B,IAU1B,SAAS+V,GAAIod,EAAY/e,EAAKwe,GAC5B,OAAO5D,GAAYmE,GACfA,EAAWpd,IAAI3B,EAAKwe,GAR1B,SAAaO,EAAY/e,GACvB,OAAO4a,GAAYmE,GACfA,EAAW3hB,IAAI4C,GACf6mB,GAAgB9H,IAAep3B,GAAe6F,KAAKuxB,EAAY/e,GAM9D5C,CAAI2hB,EAAY/e,GAEW,mBAAnB+e,EAAWpd,IAChBod,EAAWpd,IAAI3B,GACf+e,EAAW/e,GAHbwe,EAMR,SAAS0I,GAAYpmB,GACnB,GAAID,MAAMoG,QAAQnG,GAChB,OAAOolB,GAAQplB,GAEjB,IAAI0J,EAAK,GACT,IAAK,IAAIxK,KAAOc,EACVnZ,GAAe6F,KAAKsT,EAAMd,KAC5BwK,EAAGxK,GAAOc,EAAKd,IAGnB,OAAOwK,EAmDT,SAAS2c,GAASpI,EAAY4H,EAASnI,EAAa4I,GAC7CA,IACHA,EAAU5I,EACVA,OAAchiB,GAEhB,IAAI6qB,EAAeC,GACjB1M,GAAYmE,GACZA,EACA2H,GAAcC,GACd,EACAnI,EACA4I,GAEF,OAAOC,IAAiBzP,GAAU4G,EAAc6I,EAGlD,SAASC,GACPC,EACAC,EACAb,EACA1/B,EACAu3B,EACA4I,GAEA,IAAIK,EAAYD,IAAa5P,GAC7B,GAAI3wB,IAAM0/B,EAAQv3B,OAAQ,CACxB,IAAIs4B,EAAgBD,EAAYjJ,EAAcgJ,EAC1CG,EAAWP,EAAQM,GACvB,OAAOC,IAAaD,EAAgBF,EAAWG,EAEjD,IAAKF,IAAcZ,GAAgBW,GACjC,MAAM,IAAIvK,UACR,0DACE0J,EAAQp5B,MAAM,EAAGtG,GAAGmd,IAAI0iB,IACxB,MACAU,GAGN,IAAIxnB,EAAM2mB,EAAQ1/B,GACd2gC,EAAeH,EAAY7P,GAAUjW,GAAI6lB,EAAUxnB,EAAK4X,IACxDiQ,EAAcP,GAChBM,IAAiBhQ,GAAU2P,EAAc3M,GAAYgN,GACrDA,EACAjB,EACA1/B,EAAI,EACJu3B,EACA4I,GAEF,OAAOS,IAAgBD,EACnBJ,EACAK,IAAgBjQ,GAlGtB,SAAgBmH,EAAY/e,GAC1B,IAAK6mB,GAAgB9H,GACnB,MAAM,IAAI9B,UACR,2CAA6C8B,GAGjD,GAAInE,GAAYmE,GAAa,CAC3B,IAAKA,EAAW+I,OACd,MAAM,IAAI7K,UACR,2DAA6D8B,GAGjE,OAAOA,EAAW+I,OAAO9nB,GAE3B,IAAKrY,GAAe6F,KAAKuxB,EAAY/e,GACnC,OAAO+e,EAET,IAAIgJ,EAAiBb,GAAYnI,GAMjC,OALIle,MAAMoG,QAAQ8gB,GAChBA,EAAepiB,OAAO3F,EAAK,UAEpB+nB,EAAe/nB,GAEjB+nB,EA4EDD,CAAON,EAAUxnB,GAzEzB,SAAa+e,EAAY/e,EAAKpU,GAC5B,IAAKi7B,GAAgB9H,GACnB,MAAM,IAAI9B,UACR,2CAA6C8B,GAGjD,GAAInE,GAAYmE,GAAa,CAC3B,IAAKA,EAAWtd,IACd,MAAM,IAAIwb,UACR,wDAA0D8B,GAG9D,OAAOA,EAAWtd,IAAIzB,EAAKpU,GAE7B,GAAIjE,GAAe6F,KAAKuxB,EAAY/e,IAAQpU,IAAUmzB,EAAW/e,GAC/D,OAAO+e,EAET,IAAIgJ,EAAiBb,GAAYnI,GAEjC,OADAgJ,EAAe/nB,GAAOpU,EACfm8B,EAuDDtmB,CACEgmB,EAAaF,EAAcS,KAAa,GAAMR,EAC9CxnB,EACA6nB,GAQV,SAASI,GAAQtB,EAASvhC,GACxB,OALF,SAAe25B,EAAY4H,EAAS/6B,GAClC,OAAOu7B,GAASpI,EAAY4H,EAAS/O,IAAS,WAAc,OAAOhsB,KAI5Ds8B,CAAMrjC,KAAM8hC,EAASvhC,GAO9B,SAAS+iC,GAASxB,GAChB,OALF,SAAkB5H,EAAY4H,GAC5B,OAAOQ,GAASpI,EAAY4H,GAAS,WAAc,OAAO/O,MAInDwQ,CAASvjC,KAAM8hC,GAGxB,SAAShkB,GAAOoc,EAAY/e,EAAKwe,EAAa4I,GAC5C,OAAOD,GAASpI,EAAY,CAAC/e,GAAMwe,EAAa4I,GAGlD,SAASiB,GAASroB,EAAKwe,EAAa4I,GAClC,OAA4B,IAArB35B,UAAU2B,OACb4Q,EAAInb,MACJ8d,GAAO9d,KAAMmb,EAAKwe,EAAa4I,GAGrC,SAASkB,GAAW3B,EAASnI,EAAa4I,GACxC,OAAOD,GAAStiC,KAAM8hC,EAASnI,EAAa4I,GAoB9C,SAASmB,GAAmBxJ,EAAYyJ,EAAaC,GAEnD,IADA,IAAIrE,EAAQ,GACH3F,EAAK,EAAGA,EAAK+J,EAAYp5B,OAAQqvB,IAAM,CAC9C,IAAIiK,EAAe7O,GAAgB2O,EAAY/J,IACrB,IAAtBiK,EAAa95B,MACfw1B,EAAM15B,KAAKg+B,GAGf,OAAqB,IAAjBtE,EAAMh1B,OACD2vB,EAGqB,IAA5BA,EAAWlC,QAAQjuB,MAClBmwB,EAAW4J,WACK,IAAjBvE,EAAMh1B,OAID2vB,EAAW6J,eAAc,SAAU7J,GAaxC,IAZA,IAAI8J,EAAsBJ,EACtB,SAAU78B,EAAOoU,GACf2C,GACEoc,EACA/e,EACA4X,IACA,SAAUkR,GAAU,OAAQA,IAAWlR,GAAUhsB,EAAQ68B,EAAOK,EAAQl9B,EAAOoU,OAGnF,SAAUpU,EAAOoU,GACf+e,EAAWtd,IAAIzB,EAAKpU,IAEjB6yB,EAAK,EAAGA,EAAK2F,EAAMh1B,OAAQqvB,IAClC2F,EAAM3F,GAAI/jB,QAAQmuB,MAhBb9J,EAAW/E,YAAYoK,EAAM,IAiDxC,SAAS2E,GAAqBhK,EAAYiK,EAASP,GACjD,OAAOQ,GAAiBlK,EAAYiK,EA6CtC,SAAwBP,GACtB,SAASS,EAAWC,EAAUxB,EAAU3nB,GACtC,OAAO6mB,GAAgBsC,IAAatC,GAAgBc,GAChDsB,GAAiBE,EAAU,CAACxB,GAAWuB,GACvCT,EACEA,EAAOU,EAAUxB,EAAU3nB,GAC3B2nB,EAER,OAAOuB,EArDsCE,CAAeX,IAG9D,SAASQ,GAAiBlK,EAAYiK,EAASP,GAC7C,IAAK5B,GAAgB9H,GACnB,MAAM,IAAI9B,UACR,+CAAiD8B,GAGrD,GAAInE,GAAYmE,GACd,MAAyB,mBAAX0J,GAAyB1J,EAAWsK,UAC9CtK,EAAWsK,UAAUh8B,MAAM0xB,EAAY,CAAE0J,GAASn7B,OAAQ07B,IAC1DjK,EAAWuK,MACTvK,EAAWuK,MAAMj8B,MAAM0xB,EAAYiK,GACnCjK,EAAWzxB,OAAOD,MAAM0xB,EAAYiK,GAyB5C,IAvBA,IAAI/hB,EAAUpG,MAAMoG,QAAQ8X,GACxBtiB,EAASsiB,EACTpC,EAAgB1V,EAAUgT,GAAoBJ,GAC9C0P,EAAYtiB,EACZ,SAAUrb,GAEJ6Q,IAAWsiB,IACbtiB,EAASyqB,GAAYzqB,IAEvBA,EAAO/R,KAAKkB,IAEd,SAAUA,EAAOoU,GACf,IAAIwpB,EAAS7hC,GAAe6F,KAAKiP,EAAQuD,GACrCypB,EACFD,GAAUf,EAASA,EAAOhsB,EAAOuD,GAAMpU,EAAOoU,GAAOpU,EAClD49B,GAAUC,IAAYhtB,EAAOuD,KAE5BvD,IAAWsiB,IACbtiB,EAASyqB,GAAYzqB,IAEvBA,EAAOuD,GAAOypB,IAGbxiC,EAAI,EAAGA,EAAI+hC,EAAQ55B,OAAQnI,IAClC01B,EAAcqM,EAAQ/hC,IAAIyT,QAAQ6uB,GAEpC,OAAO9sB,EA4BT,SAASitB,GAAQ/C,GAEf,IADA,IAAIvC,EAAQ,GAAI1nB,EAAMjP,UAAU2B,OAAS,EACjCsN,KAAQ,GAAI0nB,EAAO1nB,GAAQjP,UAAWiP,EAAM,GAEpD,OAAOyqB,GAAStiC,KAAM8hC,EAASqB,MAAY,SAAU9jB,GAAK,OAAO+kB,GAAiB/kB,EAAGkgB,MAGvF,SAASuF,GAAYhD,GAEnB,IADA,IAAIvC,EAAQ,GAAI1nB,EAAMjP,UAAU2B,OAAS,EACjCsN,KAAQ,GAAI0nB,EAAO1nB,GAAQjP,UAAWiP,EAAM,GAEpD,OAAOyqB,GAAStiC,KAAM8hC,EAASqB,MAAY,SAAU9jB,GAAK,OAAO6kB,GAAqB7kB,EAAGkgB,MAI3F,SAASwE,GAAcz7B,GACrB,IAAIy8B,EAAU/kC,KAAKglC,YAEnB,OADA18B,EAAGy8B,GACIA,EAAQE,aAAeF,EAAQG,cAAcllC,KAAK8jC,WAAa9jC,KAGxE,SAASglC,KACP,OAAOhlC,KAAK8jC,UAAY9jC,KAAOA,KAAKklC,cAAc,IAAIhS,IAGxD,SAASiS,KACP,OAAOnlC,KAAKklC,gBAGd,SAASD,KACP,OAAOjlC,KAAKolC,UAvlCd1H,GAAkBz3B,UAAUsyB,YAAcsE,GAAgB52B,UAAUsyB,YAAcsF,GAAc53B,UAAUsyB,YAAcwF,GAAoB93B,UAAUsyB,YAAc8F,GA0lCpK,IAAIpe,GAAoB,SAAUolB,GAChC,SAASplB,EAAIlZ,GACX,OAAOA,MAAAA,EACHo8B,KACA7I,GAAMvzB,KAAWmvB,GAAUnvB,GACzBA,EACAo8B,KAAWY,eAAc,SAAUxkB,GACjC,IAAI6T,EAAOiS,EAAmBt+B,GAC9B66B,GAAkBxO,EAAKrpB,MACvBqpB,EAAKvd,SAAQ,SAAUtV,EAAG+U,GAAK,OAAOiK,EAAI3C,IAAItH,EAAG/U,SA2H3D,OAvHK8kC,IAAqBplB,EAAIiV,UAAYmQ,GAC1CplB,EAAIha,UAAYwP,OAAOC,OAAQ2vB,GAAsBA,EAAmBp/B,WACxEga,EAAIha,UAAUkvB,YAAclV,EAE5BA,EAAIqZ,GAAK,WAEP,IADA,IAAIgM,EAAY,GAAIztB,EAAMjP,UAAU2B,OAC5BsN,KAAQytB,EAAWztB,GAAQjP,UAAWiP,GAE9C,OAAOsrB,KAAWY,eAAc,SAAUxkB,GACxC,IAAK,IAAInd,EAAI,EAAGA,EAAIkjC,EAAU/6B,OAAQnI,GAAK,EAAG,CAC5C,GAAIA,EAAI,GAAKkjC,EAAU/6B,OACrB,MAAM,IAAI+R,MAAM,0BAA4BgpB,EAAUljC,IAExDmd,EAAI3C,IAAI0oB,EAAUljC,GAAIkjC,EAAUljC,EAAI,SAK1C6d,EAAIha,UAAU9B,SAAW,WACvB,OAAOnE,KAAKs4B,WAAW,QAAS,MAKlCrY,EAAIha,UAAU6W,IAAM,SAAcxH,EAAGqkB,GACnC,OAAO35B,KAAKulC,MACRvlC,KAAKulC,MAAMzoB,IAAI,OAAGnF,EAAWrC,EAAGqkB,GAChCA,GAKN1Z,EAAIha,UAAU2W,IAAM,SAActH,EAAG/U,GACnC,OAAOilC,GAAUxlC,KAAMsV,EAAG/U,IAG5B0f,EAAIha,UAAUg9B,OAAS,SAAiB3tB,GACtC,OAAOkwB,GAAUxlC,KAAMsV,EAAGyd,KAG5B9S,EAAIha,UAAUw/B,UAAY,SAAoBrtB,GAC5C,IAAI8hB,EAAapF,GAAW1c,GAE5B,OAAwB,IAApB8hB,EAAWnwB,KACN/J,KAGFA,KAAK+jC,eAAc,SAAUxkB,GAClC2a,EAAWrkB,SAAQ,SAAUsF,GAAO,OAAOoE,EAAI0jB,OAAO9nB,UAI1D8E,EAAIha,UAAUgY,MAAQ,WACpB,OAAkB,IAAdje,KAAK+J,KACA/J,KAELA,KAAK8jC,WACP9jC,KAAK+J,KAAO,EACZ/J,KAAKulC,MAAQ,KACbvlC,KAAK0lC,YAAS/tB,EACd3X,KAAKolC,WAAY,EACVplC,MAEFmjC,MAKTljB,EAAIha,UAAUuhB,KAAO,SAAe2Y,GAElC,OAAOwF,GAAWzF,GAAYlgC,KAAMmgC,KAGtClgB,EAAIha,UAAU2/B,OAAS,SAAiBrI,EAAQ4C,GAE9C,OAAOwF,GAAWzF,GAAYlgC,KAAMmgC,EAAY5C,KAGlDtd,EAAIha,UAAUsZ,IAAM,SAAcge,EAAQ5gB,GACxC,OAAO3c,KAAK+jC,eAAc,SAAUxkB,GAClCA,EAAI1J,SAAQ,SAAU9O,EAAOoU,GAC3BoE,EAAI3C,IAAIzB,EAAKoiB,EAAO50B,KAAKgU,EAAS5V,EAAOoU,EAAKoE,WAOpDU,EAAIha,UAAU8yB,WAAa,SAAqBnY,EAAMgY,GACpD,OAAO,IAAIiN,GAAY7lC,KAAM4gB,EAAMgY,IAGrC3Y,EAAIha,UAAUotB,UAAY,SAAoB/qB,EAAIswB,GAChD,IAAIwE,EAASp9B,KAETuZ,EAAa,EAMjB,OALAvZ,KAAKulC,OACHvlC,KAAKulC,MAAMO,SAAQ,SAAUhN,GAE3B,OADAvf,IACOjR,EAAGwwB,EAAM,GAAIA,EAAM,GAAIsE,KAC7BxE,GACErf,GAGT0G,EAAIha,UAAUi/B,cAAgB,SAAwBa,GACpD,OAAIA,IAAY/lC,KAAK8jC,UACZ9jC,KAEJ+lC,EAQEC,GAAQhmC,KAAK+J,KAAM/J,KAAKulC,MAAOQ,EAAS/lC,KAAK0lC,QAPhC,IAAd1lC,KAAK+J,KACAo5B,MAETnjC,KAAK8jC,UAAYiC,EACjB/lC,KAAKolC,WAAY,EACVplC,OAKJigB,GACP+U,OAEEsF,MAAQA,GAEZ,IAAI2L,GAAehmB,GAAIha,UACvBggC,GAAa5L,KAAiB,EAC9B4L,GAAmB,OAAIA,GAAahD,OACpCgD,GAAaC,UAAYD,GAAaR,UACtCQ,GAAa5C,MAAQD,GACrB6C,GAAa1C,SAAW0C,GAAa3C,SAAWA,GAChD2C,GAAanoB,OAAS0lB,GACtByC,GAAa3D,SAAWmB,GACxBwC,GAAaxB,MAAQwB,GAAax9B,OA3UlC,WAEE,IADA,IAAI82B,EAAQ,GAAI1nB,EAAMjP,UAAU2B,OACxBsN,KAAQ0nB,EAAO1nB,GAAQjP,UAAWiP,GAE1C,OAAO6rB,GAAmB1jC,KAAMu/B,IAwUlC0G,GAAazB,UArUb,SAAmBZ,GAEjB,IADA,IAAIrE,EAAQ,GAAI1nB,EAAMjP,UAAU2B,OAAS,EACjCsN,KAAQ,GAAI0nB,EAAO1nB,GAAQjP,UAAWiP,EAAM,GAEpD,GAAsB,mBAAX+rB,EACT,MAAM,IAAIxL,UAAU,4BAA8BwL,GAEpD,OAAOF,GAAmB1jC,KAAMu/B,EAAOqE,IA+TzCqC,GAAaE,UAlMb,WAEE,IADA,IAAI5G,EAAQ,GAAI1nB,EAAMjP,UAAU2B,OACxBsN,KAAQ0nB,EAAO1nB,GAAQjP,UAAWiP,GAE1C,OAAOqsB,GAAqBlkC,KAAMu/B,IA+LpC0G,GAAaG,cA5Lb,SAAyBxC,GAEvB,IADA,IAAIrE,EAAQ,GAAI1nB,EAAMjP,UAAU2B,OAAS,EACjCsN,KAAQ,GAAI0nB,EAAO1nB,GAAQjP,UAAWiP,EAAM,GAEpD,OAAOqsB,GAAqBlkC,KAAMu/B,EAAOqE,IAyL3CqC,GAAapB,QAAUA,GACvBoB,GAAanB,YAAcA,GAC3BmB,GAAalC,cAAgBA,GAC7BkC,GAAahB,WAAaA,GAC1BgB,GAAad,YAAcA,GAC3Bc,GAAa,qBAAuBA,GAAajB,UAAYA,GAC7DiB,GAAa,qBAAuB,SAAS/tB,EAAQopB,GACnD,OAAOppB,EAAO0E,IAAI0kB,EAAI,GAAIA,EAAI,KAEhC2E,GAAa,uBAAyB,SAASjlB,GAC7C,OAAOA,EAAImkB,eAKb,IAAIkB,GAAe,SAAsBN,EAASza,GAChDtrB,KAAK+lC,QAAUA,EACf/lC,KAAKsrB,QAAUA,GAGjB+a,GAAapgC,UAAU6W,IAAM,SAAc2L,EAAO6d,EAASnrB,EAAKwe,GAE9D,IADA,IAAIrO,EAAUtrB,KAAKsrB,QACVsO,EAAK,EAAG/hB,EAAMyT,EAAQ/gB,OAAQqvB,EAAK/hB,EAAK+hB,IAC/C,GAAIiB,GAAG1f,EAAKmQ,EAAQsO,GAAI,IACtB,OAAOtO,EAAQsO,GAAI,GAGvB,OAAOD,GAGT0M,GAAapgC,UAAU6X,OAAS,SAAiBioB,EAAStd,EAAO6d,EAASnrB,EAAKpU,EAAOw/B,EAAeC,GAMnG,IALA,IAAIC,EAAU1/B,IAAUgsB,GAEpBzH,EAAUtrB,KAAKsrB,QACfob,EAAM,EACN7uB,EAAMyT,EAAQ/gB,OACXm8B,EAAM7uB,IACPgjB,GAAG1f,EAAKmQ,EAAQob,GAAK,IADTA,KAKlB,IAAIC,EAASD,EAAM7uB,EAEnB,GAAI8uB,EAASrb,EAAQob,GAAK,KAAO3/B,EAAQ0/B,EACvC,OAAOzmC,KAMT,GAHAgzB,GAAOwT,IACNC,IAAYE,IAAW3T,GAAOuT,IAE3BE,GAA8B,IAAnBnb,EAAQ/gB,OAAvB,CAIA,IAAKo8B,IAAWF,GAAWnb,EAAQ/gB,QAAUq8B,GAC3C,OA2eJ,SAAqBb,EAASza,EAASnQ,EAAKpU,GACrCg/B,IACHA,EAAU,IAAI7S,IAGhB,IADA,IAAIpa,EAAO,IAAI+tB,GAAUd,EAAS1d,GAAKlN,GAAM,CAACA,EAAKpU,IAC1C6yB,EAAK,EAAGA,EAAKtO,EAAQ/gB,OAAQqvB,IAAM,CAC1C,IAAId,EAAQxN,EAAQsO,GACpB9gB,EAAOA,EAAKgF,OAAOioB,EAAS,OAAGpuB,EAAWmhB,EAAM,GAAIA,EAAM,IAE5D,OAAOhgB,EApfEguB,CAAYf,EAASza,EAASnQ,EAAKpU,GAG5C,IAAIggC,EAAahB,GAAWA,IAAY/lC,KAAK+lC,QACzCiB,EAAaD,EAAazb,EAAU+V,GAAQ/V,GAchD,OAZIqb,EACEF,EACFC,IAAQ7uB,EAAM,EACVmvB,EAAWjpB,MACVipB,EAAWN,GAAOM,EAAWjpB,MAElCipB,EAAWN,GAAO,CAACvrB,EAAKpU,GAG1BigC,EAAWnhC,KAAK,CAACsV,EAAKpU,IAGpBggC,GACF/mC,KAAKsrB,QAAU0b,EACRhnC,MAGF,IAAIqmC,GAAaN,EAASiB,KAGnC,IAAIC,GAAoB,SAA2BlB,EAASmB,EAAQ3mB,GAClEvgB,KAAK+lC,QAAUA,EACf/lC,KAAKknC,OAASA,EACdlnC,KAAKugB,MAAQA,GAGf0mB,GAAkBhhC,UAAU6W,IAAM,SAAc2L,EAAO6d,EAASnrB,EAAKwe,QACnDhiB,IAAZ2uB,IACFA,EAAUje,GAAKlN,IAEjB,IAAIgsB,EAAM,KAAiB,IAAV1e,EAAc6d,EAAUA,IAAY7d,GAASqK,IAC1DoU,EAASlnC,KAAKknC,OAClB,OAA0B,IAAlBA,EAASC,GACbxN,EACA35B,KAAKugB,MAAM6mB,GAASF,EAAUC,EAAM,IAAKrqB,IACvC2L,EA/7EI,EAg8EJ6d,EACAnrB,EACAwe,IAIRsN,GAAkBhhC,UAAU6X,OAAS,SAAiBioB,EAAStd,EAAO6d,EAASnrB,EAAKpU,EAAOw/B,EAAeC,QACxF7uB,IAAZ2uB,IACFA,EAAUje,GAAKlN,IAEjB,IAAIksB,GAAyB,IAAV5e,EAAc6d,EAAUA,IAAY7d,GAASqK,GAC5DqU,EAAM,GAAKE,EACXH,EAASlnC,KAAKknC,OACdP,EAA4B,IAAlBO,EAASC,GAEvB,IAAKR,GAAU5/B,IAAUgsB,GACvB,OAAO/yB,KAGT,IAAI0mC,EAAMU,GAASF,EAAUC,EAAM,GAC/B5mB,EAAQvgB,KAAKugB,MACbzH,EAAO6tB,EAASpmB,EAAMmmB,QAAO/uB,EAC7B2vB,EAAUC,GACZzuB,EACAitB,EACAtd,EAz9EQ,EA09ER6d,EACAnrB,EACApU,EACAw/B,EACAC,GAGF,GAAIc,IAAYxuB,EACd,OAAO9Y,KAGT,IAAK2mC,GAAUW,GAAW/mB,EAAMhW,QAAUi9B,GACxC,OAqbJ,SAAqBzB,EAASxlB,EAAO2mB,EAAQO,EAAW3uB,GAGtD,IAFA,IAAI4uB,EAAQ,EACRC,EAAgB,IAAI3rB,MAAM6W,IACrB+G,EAAK,EAAc,IAAXsN,EAActN,IAAMsN,KAAY,EAC/CS,EAAc/N,GAAe,EAATsN,EAAa3mB,EAAMmnB,UAAW/vB,EAGpD,OADAgwB,EAAcF,GAAa3uB,EACpB,IAAI8uB,GAAiB7B,EAAS2B,EAAQ,EAAGC,GA5bvCE,CAAY9B,EAASxlB,EAAO2mB,EAAQG,EAAaC,GAG1D,GACEX,IACCW,GACgB,IAAjB/mB,EAAMhW,QACNu9B,GAAWvnB,EAAY,EAANmmB,IAEjB,OAAOnmB,EAAY,EAANmmB,GAGf,GAAIC,GAAUW,GAA4B,IAAjB/mB,EAAMhW,QAAgBu9B,GAAWR,GACxD,OAAOA,EAGT,IAAIP,EAAahB,GAAWA,IAAY/lC,KAAK+lC,QACzCgC,EAAYpB,EAAUW,EAAUJ,EAASA,EAASC,EAAOD,EAASC,EAClEa,EAAWrB,EACXW,EACEW,GAAM1nB,EAAOmmB,EAAKY,EAASP,GA6cnC,SAAmBtN,EAAOiN,EAAKwB,GAC7B,IAAIC,EAAS1O,EAAMlvB,OAAS,EAC5B,GAAI29B,GAAWxB,IAAQyB,EAErB,OADA1O,EAAM1b,MACC0b,EAIT,IAFA,IAAI2O,EAAW,IAAIpsB,MAAMmsB,GACrBE,EAAQ,EACHzO,EAAK,EAAGA,EAAKuO,EAAQvO,IACxBA,IAAO8M,IACT2B,EAAQ,GAEVD,EAASxO,GAAMH,EAAMG,EAAKyO,GAE5B,OAAOD,EA1dDE,CAAU/nB,EAAOmmB,EAAKK,GAyb9B,SAAkBtN,EAAOiN,EAAKjyB,EAAKyzB,GACjC,IAAIC,EAAS1O,EAAMlvB,OAAS,EAC5B,GAAI29B,GAAWxB,EAAM,IAAMyB,EAEzB,OADA1O,EAAMiN,GAAOjyB,EACNglB,EAIT,IAFA,IAAI2O,EAAW,IAAIpsB,MAAMmsB,GACrBE,EAAQ,EACHzO,EAAK,EAAGA,EAAKuO,EAAQvO,IACxBA,IAAO8M,GACT0B,EAASxO,GAAMnlB,EACf4zB,GAAS,GAETD,EAASxO,GAAMH,EAAMG,EAAKyO,GAG9B,OAAOD,EAxcHG,CAAShoB,EAAOmmB,EAAKY,EAASP,GAElC,OAAIA,GACF/mC,KAAKknC,OAASa,EACd/nC,KAAKugB,MAAQynB,EACNhoC,MAGF,IAAIinC,GAAkBlB,EAASgC,EAAWC,IAGnD,IAAIJ,GAAmB,SAA0B7B,EAAS2B,EAAOnnB,GAC/DvgB,KAAK+lC,QAAUA,EACf/lC,KAAK0nC,MAAQA,EACb1nC,KAAKugB,MAAQA,GAGfqnB,GAAiB3hC,UAAU6W,IAAM,SAAc2L,EAAO6d,EAASnrB,EAAKwe,QAClDhiB,IAAZ2uB,IACFA,EAAUje,GAAKlN,IAEjB,IAAIurB,GAAiB,IAAVje,EAAc6d,EAAUA,IAAY7d,GAASqK,GACpDha,EAAO9Y,KAAKugB,MAAMmmB,GACtB,OAAO5tB,EACHA,EAAKgE,IAAI2L,EAphFH,EAohFkB6d,EAASnrB,EAAKwe,GACtCA,GAGNiO,GAAiB3hC,UAAU6X,OAAS,SAAiBioB,EAAStd,EAAO6d,EAASnrB,EAAKpU,EAAOw/B,EAAeC,QACvF7uB,IAAZ2uB,IACFA,EAAUje,GAAKlN,IAEjB,IAAIurB,GAAiB,IAAVje,EAAc6d,EAAUA,IAAY7d,GAASqK,GACpD2T,EAAU1/B,IAAUgsB,GACpBxS,EAAQvgB,KAAKugB,MACbzH,EAAOyH,EAAMmmB,GAEjB,GAAID,IAAY3tB,EACd,OAAO9Y,KAGT,IAAIsnC,EAAUC,GACZzuB,EACAitB,EACAtd,EAxiFQ,EAyiFR6d,EACAnrB,EACApU,EACAw/B,EACAC,GAEF,GAAIc,IAAYxuB,EACd,OAAO9Y,KAGT,IAAIwoC,EAAWxoC,KAAK0nC,MACpB,GAAK5uB,GAEE,IAAKwuB,KACVkB,EACeC,GACb,OAoVN,SAAmB1C,EAASxlB,EAAOmnB,EAAOgB,GAIxC,IAHA,IAAIxB,EAAS,EACTyB,EAAW,EACXC,EAAc,IAAI5sB,MAAM0rB,GACnB9N,EAAK,EAAGuN,EAAM,EAAGtvB,EAAM0I,EAAMhW,OAAQqvB,EAAK/hB,EAAK+hB,IAAMuN,IAAQ,EAAG,CACvE,IAAIruB,EAAOyH,EAAMqZ,QACJjiB,IAATmB,GAAsB8gB,IAAO8O,IAC/BxB,GAAUC,EACVyB,EAAYD,KAAc7vB,GAG9B,OAAO,IAAImuB,GAAkBlB,EAASmB,EAAQ0B,GA/VnCC,CAAU9C,EAASxlB,EAAOioB,EAAU9B,QAJ7C8B,IAQF,IAAIzB,EAAahB,GAAWA,IAAY/lC,KAAK+lC,QACzCiC,EAAWC,GAAM1nB,EAAOmmB,EAAKY,EAASP,GAE1C,OAAIA,GACF/mC,KAAK0nC,MAAQc,EACbxoC,KAAKugB,MAAQynB,EACNhoC,MAGF,IAAI4nC,GAAiB7B,EAASyC,EAAUR,IAGjD,IAAIc,GAAoB,SAA2B/C,EAASO,EAAShb,GACnEtrB,KAAK+lC,QAAUA,EACf/lC,KAAKsmC,QAAUA,EACftmC,KAAKsrB,QAAUA,GAGjBwd,GAAkB7iC,UAAU6W,IAAM,SAAc2L,EAAO6d,EAASnrB,EAAKwe,GAEnE,IADA,IAAIrO,EAAUtrB,KAAKsrB,QACVsO,EAAK,EAAG/hB,EAAMyT,EAAQ/gB,OAAQqvB,EAAK/hB,EAAK+hB,IAC/C,GAAIiB,GAAG1f,EAAKmQ,EAAQsO,GAAI,IACtB,OAAOtO,EAAQsO,GAAI,GAGvB,OAAOD,GAGTmP,GAAkB7iC,UAAU6X,OAAS,SAAiBioB,EAAStd,EAAO6d,EAASnrB,EAAKpU,EAAOw/B,EAAeC,QACxF7uB,IAAZ2uB,IACFA,EAAUje,GAAKlN,IAGjB,IAAIsrB,EAAU1/B,IAAUgsB,GAExB,GAAIuT,IAAYtmC,KAAKsmC,QACnB,OAAIG,EACKzmC,MAETgzB,GAAOwT,GACPxT,GAAOuT,GACAwC,GAAc/oC,KAAM+lC,EAAStd,EAAO6d,EAAS,CAACnrB,EAAKpU,KAM5D,IAHA,IAAIukB,EAAUtrB,KAAKsrB,QACfob,EAAM,EACN7uB,EAAMyT,EAAQ/gB,OACXm8B,EAAM7uB,IACPgjB,GAAG1f,EAAKmQ,EAAQob,GAAK,IADTA,KAKlB,IAAIC,EAASD,EAAM7uB,EAEnB,GAAI8uB,EAASrb,EAAQob,GAAK,KAAO3/B,EAAQ0/B,EACvC,OAAOzmC,KAMT,GAHAgzB,GAAOwT,IACNC,IAAYE,IAAW3T,GAAOuT,GAE3BE,GAAmB,IAAR5uB,EACb,OAAO,IAAIgvB,GAAUd,EAAS/lC,KAAKsmC,QAAShb,EAAc,EAANob,IAGtD,IAAIK,EAAahB,GAAWA,IAAY/lC,KAAK+lC,QACzCiB,EAAaD,EAAazb,EAAU+V,GAAQ/V,GAchD,OAZIqb,EACEF,EACFC,IAAQ7uB,EAAM,EACVmvB,EAAWjpB,MACVipB,EAAWN,GAAOM,EAAWjpB,MAElCipB,EAAWN,GAAO,CAACvrB,EAAKpU,GAG1BigC,EAAWnhC,KAAK,CAACsV,EAAKpU,IAGpBggC,GACF/mC,KAAKsrB,QAAU0b,EACRhnC,MAGF,IAAI8oC,GAAkB/C,EAAS/lC,KAAKsmC,QAASU,IAGtD,IAAIH,GAAY,SAAmBd,EAASO,EAASxN,GACnD94B,KAAK+lC,QAAUA,EACf/lC,KAAKsmC,QAAUA,EACftmC,KAAK84B,MAAQA,GAGf+N,GAAU5gC,UAAU6W,IAAM,SAAc2L,EAAO6d,EAASnrB,EAAKwe,GAC3D,OAAOkB,GAAG1f,EAAKnb,KAAK84B,MAAM,IAAM94B,KAAK84B,MAAM,GAAKa,GAGlDkN,GAAU5gC,UAAU6X,OAAS,SAAiBioB,EAAStd,EAAO6d,EAASnrB,EAAKpU,EAAOw/B,EAAeC,GAChG,IAAIC,EAAU1/B,IAAUgsB,GACpBiW,EAAWnO,GAAG1f,EAAKnb,KAAK84B,MAAM,IAClC,OAAIkQ,EAAWjiC,IAAU/G,KAAK84B,MAAM,GAAK2N,GAChCzmC,MAGTgzB,GAAOwT,GAEHC,OACFzT,GAAOuT,GAILyC,EACEjD,GAAWA,IAAY/lC,KAAK+lC,SAC9B/lC,KAAK84B,MAAM,GAAK/xB,EACT/G,MAEF,IAAI6mC,GAAUd,EAAS/lC,KAAKsmC,QAAS,CAACnrB,EAAKpU,KAGpDisB,GAAOuT,GACAwC,GAAc/oC,KAAM+lC,EAAStd,EAAOJ,GAAKlN,GAAM,CAACA,EAAKpU,OAK9Ds/B,GAAapgC,UAAU6/B,QAAUgD,GAAkB7iC,UAAU6/B,QAAU,SACrEx9B,EACAswB,GAGA,IADA,IAAItN,EAAUtrB,KAAKsrB,QACVsO,EAAK,EAAGqP,EAAW3d,EAAQ/gB,OAAS,EAAGqvB,GAAMqP,EAAUrP,IAC9D,IAAkD,IAA9CtxB,EAAGgjB,EAAQsN,EAAUqQ,EAAWrP,EAAKA,IACvC,OAAO,GAKbqN,GAAkBhhC,UAAU6/B,QAAU8B,GAAiB3hC,UAAU6/B,QAAU,SACzEx9B,EACAswB,GAGA,IADA,IAAIrY,EAAQvgB,KAAKugB,MACRqZ,EAAK,EAAGqP,EAAW1oB,EAAMhW,OAAS,EAAGqvB,GAAMqP,EAAUrP,IAAM,CAClE,IAAI9gB,EAAOyH,EAAMqY,EAAUqQ,EAAWrP,EAAKA,GAC3C,GAAI9gB,IAAsC,IAA9BA,EAAKgtB,QAAQx9B,EAAIswB,GAC3B,OAAO,IAMbiO,GAAU5gC,UAAU6/B,QAAU,SAASx9B,EAAIswB,GACzC,OAAOtwB,EAAGtI,KAAK84B,QAGjB,IAyEIoQ,GAzEArD,GAA4B,SAAUsD,GACxC,SAAStD,EAAYtmB,EAAKqB,EAAMgY,GAC9B54B,KAAKopC,MAAQxoB,EACb5gB,KAAKqpC,SAAWzQ,EAChB54B,KAAKspC,OAAS/pB,EAAIgmB,OAASgE,GAAiBhqB,EAAIgmB,OA4ClD,OAzCK4D,IAActD,EAAY3Q,UAAYiU,GAC3CtD,EAAY5/B,UAAYwP,OAAOC,OAAQyzB,GAAeA,EAAYljC,WAClE4/B,EAAY5/B,UAAUkvB,YAAc0Q,EAEpCA,EAAY5/B,UAAUywB,KAAO,WAG3B,IAFA,IAAI9V,EAAO5gB,KAAKopC,MACZ/d,EAAQrrB,KAAKspC,OACVje,GAAO,CACZ,IAAIvS,EAAOuS,EAAMvS,KACb+H,EAAQwK,EAAMxK,QACdooB,SACJ,GAAInwB,EAAKggB,OACP,GAAc,IAAVjY,EACF,OAAO2oB,GAAiB5oB,EAAM9H,EAAKggB,YAEhC,GAAIhgB,EAAKwS,SAEd,GAAIzK,IADJooB,EAAWnwB,EAAKwS,QAAQ/gB,OAAS,GAE/B,OAAOi/B,GACL5oB,EACA9H,EAAKwS,QAAQtrB,KAAKqpC,SAAWJ,EAAWpoB,EAAQA,SAKpD,GAAIA,IADJooB,EAAWnwB,EAAKyH,MAAMhW,OAAS,GACR,CACrB,IAAIk/B,EAAU3wB,EAAKyH,MAAMvgB,KAAKqpC,SAAWJ,EAAWpoB,EAAQA,GAC5D,GAAI4oB,EAAS,CACX,GAAIA,EAAQ3Q,MACV,OAAO0Q,GAAiB5oB,EAAM6oB,EAAQ3Q,OAExCzN,EAAQrrB,KAAKspC,OAASC,GAAiBE,EAASpe,GAElD,SAGJA,EAAQrrB,KAAKspC,OAAStpC,KAAKspC,OAAOI,OAEpC,MA7iFK,CAAE3iC,WAAO4Q,EAAWkf,MAAM,IAgjF1BgP,GACPpP,IAEF,SAAS+S,GAAiB5oB,EAAMkY,GAC9B,OAAOnC,GAAc/V,EAAMkY,EAAM,GAAIA,EAAM,IAG7C,SAASyQ,GAAiBzwB,EAAM6wB,GAC9B,MAAO,CACL7wB,KAAMA,EACN+H,MAAO,EACP6oB,OAAQC,GAIZ,SAAS3D,GAAQj8B,EAAM6/B,EAAM7D,EAAS8D,GACpC,IAAItqB,EAAM9J,OAAOC,OAAOuwB,IAMxB,OALA1mB,EAAIxV,KAAOA,EACXwV,EAAIgmB,MAAQqE,EACZrqB,EAAIukB,UAAYiC,EAChBxmB,EAAImmB,OAASmE,EACbtqB,EAAI6lB,WAAY,EACT7lB,EAIT,SAAS4jB,KACP,OAAO+F,KAAcA,GAAYlD,GAAQ,IAG3C,SAASR,GAAUjmB,EAAKjK,EAAG/U,GACzB,IAAIupC,EACAC,EACJ,GAAKxqB,EAAIgmB,MAMF,CACL,IAAIgB,EAvyFC,CAAEx/B,OAAO,GAwyFVy/B,EAxyFC,CAAEz/B,OAAO,GAmzFd,GAVA+iC,EAAUvC,GACRhoB,EAAIgmB,MACJhmB,EAAIukB,UACJ,OACAnsB,EACArC,EACA/U,EACAgmC,EACAC,IAEGA,EAASz/B,MACZ,OAAOwY,EAETwqB,EAAUxqB,EAAIxV,MAAQw8B,EAAcx/B,MAASxG,IAAMwyB,IAAW,EAAI,EAAK,OAtBzD,CACd,GAAIxyB,IAAMwyB,GACR,OAAOxT,EAETwqB,EAAU,EACVD,EAAU,IAAIzD,GAAa9mB,EAAIukB,UAAW,CAAC,CAACxuB,EAAG/U,KAmBjD,OAAIgf,EAAIukB,WACNvkB,EAAIxV,KAAOggC,EACXxqB,EAAIgmB,MAAQuE,EACZvqB,EAAImmB,YAAS/tB,EACb4H,EAAI6lB,WAAY,EACT7lB,GAEFuqB,EAAU9D,GAAQ+D,EAASD,GAAW3G,KAG/C,SAASoE,GACPzuB,EACAitB,EACAtd,EACA6d,EACAnrB,EACApU,EACAw/B,EACAC,GAEA,OAAK1tB,EAQEA,EAAKgF,OACVioB,EACAtd,EACA6d,EACAnrB,EACApU,EACAw/B,EACAC,GAdIz/B,IAAUgsB,GACLja,GAETka,GAAOwT,GACPxT,GAAOuT,GACA,IAAIM,GAAUd,EAASO,EAAS,CAACnrB,EAAKpU,KAajD,SAAS+gC,GAAWhvB,GAClB,OACEA,EAAKqc,cAAgB0R,IAAa/tB,EAAKqc,cAAgB2T,GAI3D,SAASC,GAAcjwB,EAAMitB,EAAStd,EAAO6d,EAASxN,GACpD,GAAIhgB,EAAKwtB,UAAYA,EACnB,OAAO,IAAIwC,GAAkB/C,EAASO,EAAS,CAACxtB,EAAKggB,MAAOA,IAG9D,IAGIwO,EAHA0C,GAAkB,IAAVvhB,EAAc3P,EAAKwtB,QAAUxtB,EAAKwtB,UAAY7d,GAASqK,GAC/DmX,GAAkB,IAAVxhB,EAAc6d,EAAUA,IAAY7d,GAASqK,GAGrDvS,EACFypB,IAASC,EACL,CAAClB,GAAcjwB,EAAMitB,EAAStd,EA13F1B,EA03FyC6d,EAASxN,KACpDwO,EAAU,IAAIT,GAAUd,EAASO,EAASxN,GAC5CkR,EAAOC,EAAO,CAACnxB,EAAMwuB,GAAW,CAACA,EAASxuB,IAEhD,OAAO,IAAImuB,GAAkBlB,EAAU,GAAKiE,EAAS,GAAKC,EAAO1pB,GAuCnE,SAAS6mB,GAAS8C,GAMhB,OAHAA,GADAA,GAAS,WADTA,GAAMA,GAAK,EAAK,cACSA,GAAK,EAAK,aACzBA,GAAK,GAAM,UACrBA,GAAKA,GAAK,EAEC,KADXA,GAAKA,GAAK,IAIZ,SAASjC,GAAMxO,EAAOiN,EAAKjyB,EAAKyzB,GAC9B,IAAIE,EAAWF,EAAUzO,EAAQ4H,GAAQ5H,GAEzC,OADA2O,EAAS1B,GAAOjyB,EACT2zB,EAuCT,IAAIxB,GAAqB/T,EACrB2U,GAA0B3U,GAC1B4V,GAA0B5V,EAE1BsX,GAAiB,yBAErB,SAASC,GAAOC,GACd,OAAOpmB,QAAQomB,GAAaA,EAAUF,KAGxC,IAAIG,GAAqB,SAAUC,GACjC,SAASD,EAAKvjC,GACZ,IAAIkT,EAAQuwB,KACZ,GAAIzjC,MAAAA,EACF,OAAOkT,EAET,GAAImwB,GAAOrjC,GACT,OAAOA,EAET,IAAIqsB,EAAOmX,EAAqBxjC,GAC5BgD,EAAOqpB,EAAKrpB,KAChB,OAAa,IAATA,EACKkQ,GAET2nB,GAAkB73B,GACdA,EAAO,GAAKA,EAAO8oB,GACd4X,GAAS,EAAG1gC,EAl/Fb,EAk/F0B,KAAM,IAAI2gC,GAAMtX,EAAKuF,YAEhD1e,EAAM8pB,eAAc,SAAU4G,GACnCA,EAAKC,QAAQ7gC,GACbqpB,EAAKvd,SAAQ,SAAUtV,EAAG6B,GAAK,OAAOuoC,EAAK/tB,IAAIxa,EAAG7B,UAkMtD,OA9LKgqC,IAAuBD,EAAKpV,UAAYqV,GAC7CD,EAAKrkC,UAAYwP,OAAOC,OAAQ60B,GAAwBA,EAAqBtkC,WAC7EqkC,EAAKrkC,UAAUkvB,YAAcmV,EAE7BA,EAAKhR,GAAK,WACR,OAAOt5B,KAAK4I,YAGd0hC,EAAKrkC,UAAU9B,SAAW,WACxB,OAAOnE,KAAKs4B,WAAW,SAAU,MAKnCgS,EAAKrkC,UAAU6W,IAAM,SAAc+D,EAAO8Y,GAExC,IADA9Y,EAAQ0S,GAAUvzB,KAAM6gB,KACX,GAAKA,EAAQ7gB,KAAK+J,KAAM,CAEnC,IAAI+O,EAAO+xB,GAAY7qC,KADvB6gB,GAAS7gB,KAAK8qC,SAEd,OAAOhyB,GAAQA,EAAK2gB,MAAM5Y,EAAQiS,IAEpC,OAAO6G,GAKT2Q,EAAKrkC,UAAU2W,IAAM,SAAciE,EAAO9Z,GACxC,OAkVJ,SAAoB4jC,EAAM9pB,EAAO9Z,GAG/B,IAFA8Z,EAAQ0S,GAAUoX,EAAM9pB,KAEVA,EACZ,OAAO8pB,EAGT,GAAI9pB,GAAS8pB,EAAK5gC,MAAQ8W,EAAQ,EAChC,OAAO8pB,EAAK5G,eAAc,SAAU4G,GAClC9pB,EAAQ,EACJkqB,GAAcJ,EAAM9pB,GAAOjE,IAAI,EAAG7V,GAClCgkC,GAAcJ,EAAM,EAAG9pB,EAAQ,GAAGjE,IAAIiE,EAAO9Z,MAIrD8Z,GAAS8pB,EAAKG,QAEd,IAAIE,EAAUL,EAAKM,MACfnB,EAAUa,EAAKpF,MACfiB,EAh3GG,CAAEz/B,OAAO,GAi3GZ8Z,GAASqqB,GAAcP,EAAKQ,WAC9BH,EAAUI,GAAYJ,EAASL,EAAK7G,UAAW,EAAGjjB,EAAO9Z,EAAOy/B,GAEhEsD,EAAUsB,GACRtB,EACAa,EAAK7G,UACL6G,EAAKU,OACLxqB,EACA9Z,EACAy/B,GAIJ,IAAKA,EAASz/B,MACZ,OAAO4jC,EAGT,GAAIA,EAAK7G,UAKP,OAJA6G,EAAKpF,MAAQuE,EACba,EAAKM,MAAQD,EACbL,EAAKjF,YAAS/tB,EACdgzB,EAAKvF,WAAY,EACVuF,EAET,OAAOF,GAASE,EAAKG,QAASH,EAAKQ,UAAWR,EAAKU,OAAQvB,EAASkB,GA9X3DM,CAAWtrC,KAAM6gB,EAAO9Z,IAGjCujC,EAAKrkC,UAAUg9B,OAAS,SAAiBpiB,GACvC,OAAQ7gB,KAAKuY,IAAIsI,GAEH,IAAVA,EACE7gB,KAAKyoB,QACL5H,IAAU7gB,KAAK+J,KAAO,EACpB/J,KAAK+d,MACL/d,KAAK8gB,OAAOD,EAAO,GALvB7gB,MAQNsqC,EAAKrkC,UAAU+S,OAAS,SAAiB6H,EAAO9Z,GAC9C,OAAO/G,KAAK8gB,OAAOD,EAAO,EAAG9Z,IAG/BujC,EAAKrkC,UAAUgY,MAAQ,WACrB,OAAkB,IAAdje,KAAK+J,KACA/J,KAELA,KAAK8jC,WACP9jC,KAAK+J,KAAO/J,KAAK8qC,QAAU9qC,KAAKmrC,UAAY,EAC5CnrC,KAAKqrC,OA5iGC,EA6iGNrrC,KAAKulC,MAAQvlC,KAAKirC,MAAQ,KAC1BjrC,KAAK0lC,YAAS/tB,EACd3X,KAAKolC,WAAY,EACVplC,MAEFwqC,MAGTF,EAAKrkC,UAAUJ,KAAO,WACpB,IAAI2c,EAAS5Z,UACT2iC,EAAUvrC,KAAK+J,KACnB,OAAO/J,KAAK+jC,eAAc,SAAU4G,GAClCI,GAAcJ,EAAM,EAAGY,EAAU/oB,EAAOjY,QACxC,IAAK,IAAIqvB,EAAK,EAAGA,EAAKpX,EAAOjY,OAAQqvB,IACnC+Q,EAAK/tB,IAAI2uB,EAAU3R,EAAIpX,EAAOoX,QAKpC0Q,EAAKrkC,UAAU8X,IAAM,WACnB,OAAOgtB,GAAc/qC,KAAM,GAAI,IAGjCsqC,EAAKrkC,UAAUulC,QAAU,WACvB,IAAIhpB,EAAS5Z,UACb,OAAO5I,KAAK+jC,eAAc,SAAU4G,GAClCI,GAAcJ,GAAOnoB,EAAOjY,QAC5B,IAAK,IAAIqvB,EAAK,EAAGA,EAAKpX,EAAOjY,OAAQqvB,IACnC+Q,EAAK/tB,IAAIgd,EAAIpX,EAAOoX,QAK1B0Q,EAAKrkC,UAAUwiB,MAAQ,WACrB,OAAOsiB,GAAc/qC,KAAM,IAK7BsqC,EAAKrkC,UAAUwC,OAAS,WAItB,IAHA,IAAIgjC,EAAc7iC,UAEd8iC,EAAO,GACFtpC,EAAI,EAAGA,EAAIwG,UAAU2B,OAAQnI,IAAK,CACzC,IAAIupC,EAAWF,EAAYrpC,GACvB61B,EAAMsS,EACY,iBAAboB,GAAyB5U,GAAY4U,GACxCA,EACA,CAACA,IAEU,IAAb1T,EAAIluB,MACN2hC,EAAK7lC,KAAKoyB,GAGd,OAAoB,IAAhByT,EAAKnhC,OACAvK,KAES,IAAdA,KAAK+J,MAAe/J,KAAK8jC,WAA6B,IAAhB4H,EAAKnhC,OAGxCvK,KAAK+jC,eAAc,SAAU4G,GAClCe,EAAK71B,SAAQ,SAAUoiB,GAAO,OAAOA,EAAIpiB,SAAQ,SAAU9O,GAAS,OAAO4jC,EAAK9kC,KAAKkB,YAH9E/G,KAAKm1B,YAAYuW,EAAK,KAOjCpB,EAAKrkC,UAAU2kC,QAAU,SAAkB7gC,GACzC,OAAOghC,GAAc/qC,KAAM,EAAG+J,IAGhCugC,EAAKrkC,UAAUsZ,IAAM,SAAcge,EAAQ5gB,GACzC,IAAIygB,EAASp9B,KAEb,OAAOA,KAAK+jC,eAAc,SAAU4G,GAClC,IAAK,IAAIvoC,EAAI,EAAGA,EAAIg7B,EAAOrzB,KAAM3H,IAC/BuoC,EAAK/tB,IAAIxa,EAAGm7B,EAAO50B,KAAKgU,EAASguB,EAAK7tB,IAAI1a,GAAIA,EAAGuoC,QAOvDL,EAAKrkC,UAAUyC,MAAQ,SAAgBirB,EAAOC,GAC5C,IAAI7pB,EAAO/J,KAAK+J,KAChB,OAAI2pB,GAAWC,EAAOC,EAAK7pB,GAClB/J,KAEF+qC,GACL/qC,KACA8zB,GAAaH,EAAO5pB,GACpBiqB,GAAWJ,EAAK7pB,KAIpBugC,EAAKrkC,UAAU8yB,WAAa,SAAqBnY,EAAMgY,GACrD,IAAI/X,EAAQ+X,EAAU54B,KAAK+J,KAAO,EAC9ByY,EAASopB,GAAY5rC,KAAM44B,GAC/B,OAAO,IAAInC,IAAS,WAClB,IAAI1vB,EAAQyb,IACZ,OAAOzb,IAAU8kC,GAt7Fd,CAAE9kC,WAAO4Q,EAAWkf,MAAM,GAw7FzBF,GAAc/V,EAAMgY,IAAY/X,EAAQA,IAAS9Z,OAIzDujC,EAAKrkC,UAAUotB,UAAY,SAAoB/qB,EAAIswB,GAIjD,IAHA,IAEI7xB,EAFA8Z,EAAQ+X,EAAU54B,KAAK+J,KAAO,EAC9ByY,EAASopB,GAAY5rC,KAAM44B,IAEvB7xB,EAAQyb,OAAcqpB,KACyB,IAAjDvjC,EAAGvB,EAAO6xB,IAAY/X,EAAQA,IAAS7gB,QAI7C,OAAO6gB,GAGTypB,EAAKrkC,UAAUi/B,cAAgB,SAAwBa,GACrD,OAAIA,IAAY/lC,KAAK8jC,UACZ9jC,KAEJ+lC,EAQE0E,GACLzqC,KAAK8qC,QACL9qC,KAAKmrC,UACLnrC,KAAKqrC,OACLrrC,KAAKulC,MACLvlC,KAAKirC,MACLlF,EACA/lC,KAAK0lC,QAda,IAAd1lC,KAAK+J,KACAygC,MAETxqC,KAAK8jC,UAAYiC,EACjB/lC,KAAKolC,WAAY,EACVplC,OAaJsqC,GACPlV,IAEFkV,GAAKF,OAASA,GAEd,IAAI0B,GAAgBxB,GAAKrkC,UACzB6lC,GAAc3B,KAAkB,EAChC2B,GAAoB,OAAIA,GAAc7I,OACtC6I,GAAcrH,MAAQqH,GAAcrjC,OACpCqjC,GAAczI,MAAQD,GACtB0I,GAAcxI,SAAWwI,GAAcvI,SAAWD,GAClDwI,GAAchuB,OAAS0lB,GACvBsI,GAAcxJ,SAAWmB,GACzBqI,GAAcjH,QAAUA,GACxBiH,GAAchH,YAAcA,GAC5BgH,GAAc/H,cAAgBA,GAC9B+H,GAAc7G,WAAaA,GAC3B6G,GAAc3G,YAAcA,GAC5B2G,GAAc,qBAAuBA,GAAc9G,UAAYA,GAC/D8G,GAAc,qBAAuB,SAAS5zB,EAAQopB,GACpD,OAAOppB,EAAOrS,KAAKy7B,IAErBwK,GAAc,uBAAyB,SAAS9qB,GAC9C,OAAOA,EAAImkB,eAGb,IAAIuF,GAAQ,SAAejR,EAAOsM,GAChC/lC,KAAKy5B,MAAQA,EACbz5B,KAAK+lC,QAAUA,GAKjB2E,GAAMzkC,UAAU8lC,aAAe,SAAuBhG,EAASj8B,EAAO+W,GACpE,GAAIA,IAAU/W,EAAQ,GAAKA,EAA8B,IAAtB9J,KAAKy5B,MAAMlvB,OAC5C,OAAOvK,KAET,IAAIgsC,EAAenrB,IAAU/W,EAASgpB,GACtC,GAAIkZ,GAAehsC,KAAKy5B,MAAMlvB,OAC5B,OAAO,IAAImgC,GAAM,GAAI3E,GAEvB,IACIkG,EADAC,EAAgC,IAAhBF,EAEpB,GAAIliC,EAAQ,EAAG,CACb,IAAIqiC,EAAWnsC,KAAKy5B,MAAMuS,GAG1B,IAFAC,EACEE,GAAYA,EAASJ,aAAahG,EAASj8B,EAtuGrC,EAsuGoD+W,MAC3CsrB,GAAYD,EAC3B,OAAOlsC,KAGX,GAAIksC,IAAkBD,EACpB,OAAOjsC,KAET,IAAIosC,EAAWC,GAAcrsC,KAAM+lC,GACnC,IAAKmG,EACH,IAAK,IAAItS,EAAK,EAAGA,EAAKoS,EAAapS,IACjCwS,EAAS3S,MAAMG,QAAMjiB,EAMzB,OAHIs0B,IACFG,EAAS3S,MAAMuS,GAAeC,GAEzBG,GAGT1B,GAAMzkC,UAAUqmC,YAAc,SAAsBvG,EAASj8B,EAAO+W,GAClE,GAAIA,KAAW/W,EAAQ,GAAKA,EAAQ,IAA4B,IAAtB9J,KAAKy5B,MAAMlvB,OACnD,OAAOvK,KAET,IAKIisC,EALAM,EAAc1rB,EAAQ,IAAO/W,EAASgpB,GAC1C,GAAIyZ,GAAavsC,KAAKy5B,MAAMlvB,OAC1B,OAAOvK,KAIT,GAAI8J,EAAQ,EAAG,CACb,IAAIqiC,EAAWnsC,KAAKy5B,MAAM8S,GAG1B,IAFAN,EACEE,GAAYA,EAASG,YAAYvG,EAASj8B,EAvwGpC,EAuwGmD+W,MAC1CsrB,GAAYI,IAAcvsC,KAAKy5B,MAAMlvB,OAAS,EAC7D,OAAOvK,KAIX,IAAIosC,EAAWC,GAAcrsC,KAAM+lC,GAKnC,OAJAqG,EAAS3S,MAAM3Y,OAAOyrB,EAAY,GAC9BN,IACFG,EAAS3S,MAAM8S,GAAaN,GAEvBG,GAGT,IA6EII,GA7EAX,GAAO,GAEX,SAASD,GAAYjB,EAAM/R,GACzB,IAAI6T,EAAO9B,EAAKG,QACZ4B,EAAQ/B,EAAKQ,UACbwB,EAAUzB,GAAcwB,GACxBE,EAAOjC,EAAKM,MAEhB,OAAO4B,EAAkBlC,EAAKpF,MAAOoF,EAAKU,OAAQ,GAElD,SAASwB,EAAkB/zB,EAAMhP,EAAOy3B,GACtC,OAAiB,IAAVz3B,EAKT,SAAqBgP,EAAMyoB,GACzB,IAAI9H,EAAQ8H,IAAWoL,EAAUC,GAAQA,EAAKnT,MAAQ3gB,GAAQA,EAAK2gB,MAC/Dxd,EAAOslB,EAASkL,EAAO,EAAIA,EAAOlL,EAClC5b,EAAK+mB,EAAQnL,EACb5b,EAAKkN,KACPlN,EAAKkN,IAEP,OAAO,WACL,GAAI5W,IAAS0J,EACX,OAAOkmB,GAET,IAAInF,EAAM9N,IAAYjT,EAAK1J,IAC3B,OAAOwd,GAASA,EAAMiN,IAhBpBoG,CAAYh0B,EAAMyoB,GAoBxB,SAAqBzoB,EAAMhP,EAAOy3B,GAChC,IAAI/e,EACAiX,EAAQ3gB,GAAQA,EAAK2gB,MACrBxd,EAAOslB,EAASkL,EAAO,EAAKA,EAAOlL,GAAWz3B,EAC9C6b,EAAmC,GAA5B+mB,EAAQnL,GAAWz3B,GAC1B6b,EAAKkN,KACPlN,EAAKkN,IAEP,OAAO,WACL,OAAa,CACX,GAAIrQ,EAAQ,CACV,IAAIzb,EAAQyb,IACZ,GAAIzb,IAAU8kC,GACZ,OAAO9kC,EAETyb,EAAS,KAEX,GAAIvG,IAAS0J,EACX,OAAOkmB,GAET,IAAInF,EAAM9N,IAAYjT,EAAK1J,IAC3BuG,EAASqqB,EACPpT,GAASA,EAAMiN,GACf58B,EA50GE,EA60GFy3B,GAAUmF,GAAO58B,MA3CnBijC,CAAYj0B,EAAMhP,EAAOy3B,IAkDjC,SAASkJ,GAAS/kB,EAAQsnB,EAAUljC,EAAO8/B,EAAMgD,EAAM7G,EAAS1d,GAC9D,IAAIsiB,EAAOl1B,OAAOC,OAAOo2B,IAUzB,OATAnB,EAAK5gC,KAAOijC,EAAWtnB,EACvBilB,EAAKG,QAAUplB,EACfilB,EAAKQ,UAAY6B,EACjBrC,EAAKU,OAASvhC,EACd6gC,EAAKpF,MAAQqE,EACbe,EAAKM,MAAQ2B,EACbjC,EAAK7G,UAAYiC,EACjB4E,EAAKjF,OAASrd,EACdsiB,EAAKvF,WAAY,EACVuF,EAIT,SAASH,KACP,OAAOgC,KAAeA,GAAa/B,GAAS,EAAG,EAp2GrC,IAs5GZ,SAASW,GAAYtyB,EAAMitB,EAASj8B,EAAO+W,EAAO9Z,EAAOy/B,GACvD,IAMIc,EANAZ,EAAO7lB,IAAU/W,EAASgpB,GAC1Bma,EAAUn0B,GAAQ4tB,EAAM5tB,EAAK2gB,MAAMlvB,OACvC,IAAK0iC,QAAqBt1B,IAAV5Q,EACd,OAAO+R,EAKT,GAAIhP,EAAQ,EAAG,CACb,IAAIojC,EAAYp0B,GAAQA,EAAK2gB,MAAMiN,GAC/ByG,EAAe/B,GACjB8B,EACAnH,EACAj8B,EAp6GM,EAq6GN+W,EACA9Z,EACAy/B,GAEF,OAAI2G,IAAiBD,EACZp0B,IAETwuB,EAAU+E,GAAcvzB,EAAMitB,IACtBtM,MAAMiN,GAAOyG,EACd7F,GAGT,OAAI2F,GAAWn0B,EAAK2gB,MAAMiN,KAAS3/B,EAC1B+R,GAGL0tB,GACFxT,GAAOwT,GAGTc,EAAU+E,GAAcvzB,EAAMitB,QAChBpuB,IAAV5Q,GAAuB2/B,IAAQY,EAAQ7N,MAAMlvB,OAAS,EACxD+8B,EAAQ7N,MAAM1b,MAEdupB,EAAQ7N,MAAMiN,GAAO3/B,EAEhBugC,GAGT,SAAS+E,GAAcvzB,EAAMitB,GAC3B,OAAIA,GAAWjtB,GAAQitB,IAAYjtB,EAAKitB,QAC/BjtB,EAEF,IAAI4xB,GAAM5xB,EAAOA,EAAK2gB,MAAM/wB,QAAU,GAAIq9B,GAGnD,SAAS8E,GAAYF,EAAMyC,GACzB,GAAIA,GAAYlC,GAAcP,EAAKQ,WACjC,OAAOR,EAAKM,MAEd,GAAImC,EAAW,GAAMzC,EAAKU,OA78GhB,EA68GiC,CAGzC,IAFA,IAAIvyB,EAAO6xB,EAAKpF,MACZz7B,EAAQ6gC,EAAKU,OACVvyB,GAAQhP,EAAQ,GACrBgP,EAAOA,EAAK2gB,MAAO2T,IAAatjC,EAASgpB,IACzChpB,GAl9GM,EAo9GR,OAAOgP,GAIX,SAASiyB,GAAcJ,EAAMhX,EAAOC,QAGpBjc,IAAVgc,IACFA,GAAS,QAEChc,IAARic,IACFA,GAAO,GAET,IAAIyZ,EAAQ1C,EAAK7G,WAAa,IAAI5Q,GAC9Boa,EAAY3C,EAAKG,QACjByC,EAAc5C,EAAKQ,UACnBqC,EAAYF,EAAY3Z,EACxB8Z,OACM91B,IAARic,EACI2Z,EACA3Z,EAAM,EACJ2Z,EAAc3Z,EACd0Z,EAAY1Z,EACpB,GAAI4Z,IAAcF,GAAaG,IAAgBF,EAC7C,OAAO5C,EAIT,GAAI6C,GAAaC,EACf,OAAO9C,EAAK1sB,QAQd,IALA,IAAIyvB,EAAW/C,EAAKU,OAChBvB,EAAUa,EAAKpF,MAGfoI,EAAc,EACXH,EAAYG,EAAc,GAC/B7D,EAAU,IAAIY,GACZZ,GAAWA,EAAQrQ,MAAMlvB,OAAS,MAACoN,EAAWmyB,GAAW,GACzDuD,GAGFM,GAAe,IADfD,GA9/GQ,GAigHNC,IACFH,GAAaG,EACbL,GAAaK,EACbF,GAAeE,EACfJ,GAAeI,GAOjB,IAJA,IAAIC,EAAgB1C,GAAcqC,GAC9BM,EAAgB3C,GAAcuC,GAG3BI,GAAiB,GAAMH,EA5gHpB,GA6gHR5D,EAAU,IAAIY,GACZZ,GAAWA,EAAQrQ,MAAMlvB,OAAS,CAACu/B,GAAW,GAC9CuD,GAEFK,GAjhHQ,EAqhHV,IAAII,EAAUnD,EAAKM,MACfD,EACF6C,EAAgBD,EACZ/C,GAAYF,EAAM8C,EAAc,GAChCI,EAAgBD,EACd,IAAIlD,GAAM,GAAI2C,GACdS,EAGR,GACEA,GACAD,EAAgBD,GAChBJ,EAAYD,GACZO,EAAQrU,MAAMlvB,OACd,CAGA,IADA,IAAIuO,EADJgxB,EAAUuC,GAAcvC,EAASuD,GAExBvjC,EAAQ4jC,EAAU5jC,EAtiHnB,EAsiHkCA,GAtiHlC,EAsiHkD,CACxD,IAAI48B,EAAOkH,IAAkB9jC,EAASgpB,GACtCha,EAAOA,EAAK2gB,MAAMiN,GAAO2F,GAAcvzB,EAAK2gB,MAAMiN,GAAM2G,GAE1Dv0B,EAAK2gB,MAAOmU,IA1iHJ,EA0iH+B9a,IAAQgb,EASjD,GALIL,EAAcF,IAChBvC,EAAUA,GAAWA,EAAQsB,YAAYe,EAAO,EAAGI,IAIjDD,GAAaK,EACfL,GAAaK,EACbJ,GAAeI,EACfH,EAtjHQ,EAujHR5D,EAAU,KACVkB,EAAUA,GAAWA,EAAQe,aAAasB,EAAO,EAAGG,QAG/C,GAAIA,EAAYF,GAAaO,EAAgBD,EAAe,CAIjE,IAHAD,EAAc,EAGP7D,GAAS,CACd,IAAIiE,EAAcP,IAAcE,EAAY5a,GAC5C,GAAKib,IAAeF,IAAkBH,EAAY5a,GAChD,MAEEib,IACFJ,IAAgB,GAAKD,GAAYK,GAEnCL,GAvkHM,EAwkHN5D,EAAUA,EAAQrQ,MAAMsU,GAItBjE,GAAW0D,EAAYF,IACzBxD,EAAUA,EAAQiC,aAAasB,EAAOK,EAAUF,EAAYG,IAE1D7D,GAAW+D,EAAgBD,IAC7B9D,EAAUA,EAAQwC,YAChBe,EACAK,EACAG,EAAgBF,IAGhBA,IACFH,GAAaG,EACbF,GAAeE,GAInB,OAAIhD,EAAK7G,WACP6G,EAAK5gC,KAAO0jC,EAAcD,EAC1B7C,EAAKG,QAAU0C,EACf7C,EAAKQ,UAAYsC,EACjB9C,EAAKU,OAASqC,EACd/C,EAAKpF,MAAQuE,EACba,EAAKM,MAAQD,EACbL,EAAKjF,YAAS/tB,EACdgzB,EAAKvF,WAAY,EACVuF,GAEFF,GAAS+C,EAAWC,EAAaC,EAAU5D,EAASkB,GAG7D,SAASE,GAAcnhC,GACrB,OAAOA,EAAO8oB,GAAO,EAAM9oB,EAAO,IA3mHxB,GAAA,EA8mHZ,IA4GIikC,GA5GArI,GAA2B,SAAUsI,GACvC,SAAStI,EAAW5+B,GAClB,OAAOA,MAAAA,EACHmnC,KACA1T,GAAazzB,GACXA,EACAmnC,KAAkBnK,eAAc,SAAUxkB,GACxC,IAAI6T,EAAO4B,GAAgBjuB,GAC3B66B,GAAkBxO,EAAKrpB,MACvBqpB,EAAKvd,SAAQ,SAAUtV,EAAG+U,GAAK,OAAOiK,EAAI3C,IAAItH,EAAG/U,SAiF3D,OA7EK0tC,IAAStI,EAAWzQ,UAAY+Y,GACrCtI,EAAW1/B,UAAYwP,OAAOC,OAAQu4B,GAAUA,EAAOhoC,WACvD0/B,EAAW1/B,UAAUkvB,YAAcwQ,EAEnCA,EAAWrM,GAAK,WACd,OAAOt5B,KAAK4I,YAGd+8B,EAAW1/B,UAAU9B,SAAW,WAC9B,OAAOnE,KAAKs4B,WAAW,eAAgB,MAKzCqN,EAAW1/B,UAAU6W,IAAM,SAAcxH,EAAGqkB,GAC1C,IAAI9Y,EAAQ7gB,KAAKmuC,KAAKrxB,IAAIxH,GAC1B,YAAiBqC,IAAVkJ,EAAsB7gB,KAAKouC,MAAMtxB,IAAI+D,GAAO,GAAK8Y,GAK1DgM,EAAW1/B,UAAUgY,MAAQ,WAC3B,OAAkB,IAAdje,KAAK+J,KACA/J,KAELA,KAAK8jC,WACP9jC,KAAK+J,KAAO,EACZ/J,KAAKmuC,KAAKlwB,QACVje,KAAKouC,MAAMnwB,QACJje,MAEFkuC,MAGTvI,EAAW1/B,UAAU2W,IAAM,SAActH,EAAG/U,GAC1C,OAAO8tC,GAAiBruC,KAAMsV,EAAG/U,IAGnColC,EAAW1/B,UAAUg9B,OAAS,SAAiB3tB,GAC7C,OAAO+4B,GAAiBruC,KAAMsV,EAAGyd,KAGnC4S,EAAW1/B,UAAUg/B,WAAa,WAChC,OAAOjlC,KAAKmuC,KAAKlJ,cAAgBjlC,KAAKouC,MAAMnJ,cAG9CU,EAAW1/B,UAAUotB,UAAY,SAAoB/qB,EAAIswB,GACvD,IAAIwE,EAASp9B,KAEb,OAAOA,KAAKouC,MAAM/a,WAChB,SAAUyF,GAAS,OAAOA,GAASxwB,EAAGwwB,EAAM,GAAIA,EAAM,GAAIsE,KAC1DxE,IAIJ+M,EAAW1/B,UAAU8yB,WAAa,SAAqBnY,EAAMgY,GAC3D,OAAO54B,KAAKouC,MAAMlV,eAAeH,WAAWnY,EAAMgY,IAGpD+M,EAAW1/B,UAAUi/B,cAAgB,SAAwBa,GAC3D,GAAIA,IAAY/lC,KAAK8jC,UACnB,OAAO9jC,KAET,IAAIsuC,EAAStuC,KAAKmuC,KAAKjJ,cAAca,GACjCwI,EAAUvuC,KAAKouC,MAAMlJ,cAAca,GACvC,OAAKA,EASEyI,GAAeF,EAAQC,EAASxI,EAAS/lC,KAAK0lC,QARjC,IAAd1lC,KAAK+J,KACAmkC,MAETluC,KAAK8jC,UAAYiC,EACjB/lC,KAAKmuC,KAAOG,EACZtuC,KAAKouC,MAAQG,EACNvuC,OAKJ2lC,GACP1lB,IAOF,SAASuuB,GAAejvB,EAAKorB,EAAM5E,EAAS1d,GAC1C,IAAIomB,EAAOh5B,OAAOC,OAAOiwB,GAAW1/B,WAMpC,OALAwoC,EAAK1kC,KAAOwV,EAAMA,EAAIxV,KAAO,EAC7B0kC,EAAKN,KAAO5uB,EACZkvB,EAAKL,MAAQzD,EACb8D,EAAK3K,UAAYiC,EACjB0I,EAAK/I,OAASrd,EACPomB,EAIT,SAASP,KACP,OACEF,KACCA,GAAoBQ,GAAerL,KAAYqH,OAIpD,SAAS6D,GAAiBI,EAAMn5B,EAAG/U,GACjC,IAII+tC,EACAC,EALAhvB,EAAMkvB,EAAKN,KACXxD,EAAO8D,EAAKL,MACZhsC,EAAImd,EAAIzC,IAAIxH,GACZiD,OAAYZ,IAANvV,EAGV,GAAI7B,IAAMwyB,GAAS,CAEjB,IAAKxa,EACH,OAAOk2B,EAEL9D,EAAK5gC,MAAQ8oB,IAAQ8X,EAAK5gC,MAAmB,EAAXwV,EAAIxV,MAExCukC,GADAC,EAAU5D,EAAKnrB,QAAO,SAAUsZ,EAAO4N,GAAO,YAAiB/uB,IAAVmhB,GAAuB12B,IAAMskC,MAE/EzN,aACA1Z,KAAI,SAAUuZ,GAAS,OAAOA,EAAM,MACpC/kB,OACA26B,QACCD,EAAK3K,YACPwK,EAAOxK,UAAYyK,EAAQzK,UAAY2K,EAAK3K,aAG9CwK,EAAS/uB,EAAI0jB,OAAO3tB,GACpBi5B,EAAUnsC,IAAMuoC,EAAK5gC,KAAO,EAAI4gC,EAAK5sB,MAAQ4sB,EAAK/tB,IAAIxa,OAAGuV,SAEtD,GAAIY,EAAK,CACd,GAAIhY,IAAMoqC,EAAK7tB,IAAI1a,GAAG,GACpB,OAAOqsC,EAETH,EAAS/uB,EACTgvB,EAAU5D,EAAK/tB,IAAIxa,EAAG,CAACkT,EAAG/U,SAE1B+tC,EAAS/uB,EAAI3C,IAAItH,EAAGq1B,EAAK5gC,MACzBwkC,EAAU5D,EAAK/tB,IAAI+tB,EAAK5gC,KAAM,CAACuL,EAAG/U,IAEpC,OAAIkuC,EAAK3K,WACP2K,EAAK1kC,KAAOukC,EAAOvkC,KACnB0kC,EAAKN,KAAOG,EACZG,EAAKL,MAAQG,EACbE,EAAK/I,YAAS/tB,EACP82B,GAEFD,GAAeF,EAAQC,GAlEhC5I,GAAWnL,aAAeA,GAE1BmL,GAAW1/B,UAAUgwB,KAAqB,EAC1C0P,GAAW1/B,UAAgB,OAAI0/B,GAAW1/B,UAAUg9B,OAkEpD,IAAI0L,GAAkB,0BAEtB,SAASC,GAAQC,GACf,OAAO5qB,QAAQ4qB,GAAcA,EAAWF,KAG1C,IAAIG,GAAsB,SAAUvE,GAClC,SAASuE,EAAM/nC,GACb,OAAOA,MAAAA,EACHgoC,KACAH,GAAQ7nC,GACNA,EACAgoC,KAAaC,QAAQjoC,GAsL7B,OAnLKwjC,IAAuBuE,EAAM5Z,UAAYqV,GAC9CuE,EAAM7oC,UAAYwP,OAAOC,OAAQ60B,GAAwBA,EAAqBtkC,WAC9E6oC,EAAM7oC,UAAUkvB,YAAc2Z,EAE9BA,EAAMxV,GAAK,WACT,OAAOt5B,KAAK4I,YAGdkmC,EAAM7oC,UAAU9B,SAAW,WACzB,OAAOnE,KAAKs4B,WAAW,UAAW,MAKpCwW,EAAM7oC,UAAU6W,IAAM,SAAc+D,EAAO8Y,GACzC,IAAIsV,EAAOjvC,KAAKkvC,MAEhB,IADAruB,EAAQ0S,GAAUvzB,KAAM6gB,GACjBouB,GAAQpuB,KACbouB,EAAOA,EAAKvY,KAEd,OAAOuY,EAAOA,EAAKloC,MAAQ4yB,GAG7BmV,EAAM7oC,UAAUkpC,KAAO,WACrB,OAAOnvC,KAAKkvC,OAASlvC,KAAKkvC,MAAMnoC,OAKlC+nC,EAAM7oC,UAAUJ,KAAO,WACrB,IAAI4lC,EAAc7iC,UAElB,GAAyB,IAArBA,UAAU2B,OACZ,OAAOvK,KAIT,IAFA,IAAI+pC,EAAU/pC,KAAK+J,KAAOnB,UAAU2B,OAChC0kC,EAAOjvC,KAAKkvC,MACPtV,EAAKhxB,UAAU2B,OAAS,EAAGqvB,GAAM,EAAGA,IAC3CqV,EAAO,CACLloC,MAAO0kC,EAAY7R,GACnBlD,KAAMuY,GAGV,OAAIjvC,KAAK8jC,WACP9jC,KAAK+J,KAAOggC,EACZ/pC,KAAKkvC,MAAQD,EACbjvC,KAAK0lC,YAAS/tB,EACd3X,KAAKolC,WAAY,EACVplC,MAEFovC,GAAUrF,EAASkF,IAG5BH,EAAM7oC,UAAU+oC,QAAU,SAAkB5b,GAE1C,GAAkB,KADlBA,EAAOmX,EAAqBnX,IACnBrpB,KACP,OAAO/J,KAET,GAAkB,IAAdA,KAAK+J,MAAc6kC,GAAQxb,GAC7B,OAAOA,EAETwO,GAAkBxO,EAAKrpB,MACvB,IAAIggC,EAAU/pC,KAAK+J,KACfklC,EAAOjvC,KAAKkvC,MAQhB,OAPA9b,EAAKC,WAAU,SAAUtsB,GACvBgjC,IACAkF,EAAO,CACLloC,MAAOA,EACP2vB,KAAMuY,MAEO,GACbjvC,KAAK8jC,WACP9jC,KAAK+J,KAAOggC,EACZ/pC,KAAKkvC,MAAQD,EACbjvC,KAAK0lC,YAAS/tB,EACd3X,KAAKolC,WAAY,EACVplC,MAEFovC,GAAUrF,EAASkF,IAG5BH,EAAM7oC,UAAU8X,IAAM,WACpB,OAAO/d,KAAK0I,MAAM,IAGpBomC,EAAM7oC,UAAUgY,MAAQ,WACtB,OAAkB,IAAdje,KAAK+J,KACA/J,KAELA,KAAK8jC,WACP9jC,KAAK+J,KAAO,EACZ/J,KAAKkvC,WAAQv3B,EACb3X,KAAK0lC,YAAS/tB,EACd3X,KAAKolC,WAAY,EACVplC,MAEF+uC,MAGTD,EAAM7oC,UAAUyC,MAAQ,SAAgBirB,EAAOC,GAC7C,GAAIF,GAAWC,EAAOC,EAAK5zB,KAAK+J,MAC9B,OAAO/J,KAET,IAAI2+B,EAAgB7K,GAAaH,EAAO3zB,KAAK+J,MAE7C,GADkBiqB,GAAWJ,EAAK5zB,KAAK+J,QACnB/J,KAAK+J,KAEvB,OAAOwgC,EAAqBtkC,UAAUyC,MAAMC,KAAK3I,KAAM2zB,EAAOC,GAIhE,IAFA,IAAImW,EAAU/pC,KAAK+J,KAAO40B,EACtBsQ,EAAOjvC,KAAKkvC,MACTvQ,KACLsQ,EAAOA,EAAKvY,KAEd,OAAI12B,KAAK8jC,WACP9jC,KAAK+J,KAAOggC,EACZ/pC,KAAKkvC,MAAQD,EACbjvC,KAAK0lC,YAAS/tB,EACd3X,KAAKolC,WAAY,EACVplC,MAEFovC,GAAUrF,EAASkF,IAK5BH,EAAM7oC,UAAUi/B,cAAgB,SAAwBa,GACtD,OAAIA,IAAY/lC,KAAK8jC,UACZ9jC,KAEJ+lC,EAQEqJ,GAAUpvC,KAAK+J,KAAM/J,KAAKkvC,MAAOnJ,EAAS/lC,KAAK0lC,QAPlC,IAAd1lC,KAAK+J,KACAglC,MAET/uC,KAAK8jC,UAAYiC,EACjB/lC,KAAKolC,WAAY,EACVplC,OAOX8uC,EAAM7oC,UAAUotB,UAAY,SAAoB/qB,EAAIswB,GAClD,IAAIwE,EAASp9B,KAEb,GAAI44B,EACF,OAAO,IAAIY,GAASx5B,KAAK24B,WAAWtF,WAClC,SAAU9yB,EAAG+U,GAAK,OAAOhN,EAAG/H,EAAG+U,EAAG8nB,KAClCxE,GAKJ,IAFA,IAAIrf,EAAa,EACbT,EAAO9Y,KAAKkvC,MACTp2B,IACsC,IAAvCxQ,EAAGwQ,EAAK/R,MAAOwS,IAAcvZ,OAGjC8Y,EAAOA,EAAK4d,KAEd,OAAOnd,GAGTu1B,EAAM7oC,UAAU8yB,WAAa,SAAqBnY,EAAMgY,GACtD,GAAIA,EACF,OAAO,IAAIY,GAASx5B,KAAK24B,WAAWI,WAAWnY,EAAMgY,GAEvD,IAAIrf,EAAa,EACbT,EAAO9Y,KAAKkvC,MAChB,OAAO,IAAIzY,IAAS,WAClB,GAAI3d,EAAM,CACR,IAAI/R,EAAQ+R,EAAK/R,MAEjB,OADA+R,EAAOA,EAAK4d,KACLC,GAAc/V,EAAMrH,IAAcxS,GAE3C,MArvHG,CAAEA,WAAO4Q,EAAWkf,MAAM,OAyvH1BiY,GACP1Z,IAEF0Z,GAAMF,QAAUA,GAEhB,IA0BIS,GA1BAC,GAAiBR,GAAM7oC,UAgB3B,SAASmpC,GAAUrlC,EAAMklC,EAAMlJ,EAAS1d,GACtC,IAAI9I,EAAM9J,OAAOC,OAAO45B,IAMxB,OALA/vB,EAAIxV,KAAOA,EACXwV,EAAI2vB,MAAQD,EACZ1vB,EAAIukB,UAAYiC,EAChBxmB,EAAImmB,OAASrd,EACb9I,EAAI6lB,WAAY,EACT7lB,EAIT,SAASwvB,KACP,OAAOM,KAAgBA,GAAcD,GAAU,IA3BjDE,GAAeX,KAAmB,EAClCW,GAAe7mB,MAAQ6mB,GAAevxB,IACtCuxB,GAAe9D,QAAU8D,GAAezpC,KACxCypC,GAAeC,WAAaD,GAAeN,QAC3CM,GAAevL,cAAgBA,GAC/BuL,GAAerK,WAAaA,GAC5BqK,GAAenK,YAAcA,GAC7BmK,GAAe,qBAAuBA,GAAetK,UAAYA,GACjEsK,GAAe,qBAAuB,SAASp3B,EAAQopB,GACrD,OAAOppB,EAAOszB,QAAQlK,IAExBgO,GAAe,uBAAyB,SAAStuB,GAC/C,OAAOA,EAAImkB,eAkBb,IAAIqK,GAAgB,wBAEpB,SAASC,GAAMC,GACb,OAAOzrB,QAAQyrB,GAAYA,EAASF,KAGtC,SAASG,GAAaC,GACpB,OAAOH,GAAMG,IAAoB1Z,GAAU0Z,GAG7C,SAASC,GAAUxvC,EAAGD,GACpB,GAAIC,IAAMD,EACR,OAAO,EAGT,IACGg0B,GAAah0B,SACFuX,IAAXtX,EAAE0J,WAAiC4N,IAAXvX,EAAE2J,MAAsB1J,EAAE0J,OAAS3J,EAAE2J,WAChD4N,IAAbtX,EAAEqlC,aACY/tB,IAAbvX,EAAEslC,QACFrlC,EAAEqlC,SAAWtlC,EAAEslC,QACjBnR,GAAQl0B,KAAOk0B,GAAQn0B,IACvBs0B,GAAUr0B,KAAOq0B,GAAUt0B,IAC3B81B,GAAU71B,KAAO61B,GAAU91B,GAE3B,OAAO,EAGT,GAAe,IAAXC,EAAE0J,MAAyB,IAAX3J,EAAE2J,KACpB,OAAO,EAGT,IAAI+lC,GAAkBlb,GAAcv0B,GAEpC,GAAI61B,GAAU71B,GAAI,CAChB,IAAIirB,EAAUjrB,EAAEirB,UAChB,OACElrB,EAAE6gC,OAAM,SAAU1gC,EAAG+U,GACnB,IAAIwjB,EAAQxN,EAAQoL,OAAO3vB,MAC3B,OAAO+xB,GAAS+B,GAAG/B,EAAM,GAAIv4B,KAAOuvC,GAAkBjV,GAAG/B,EAAM,GAAIxjB,QAC/DgW,EAAQoL,OAAOG,KAIzB,IAAI/iB,GAAU,EAEd,QAAe6D,IAAXtX,EAAE0J,KACJ,QAAe4N,IAAXvX,EAAE2J,KACyB,mBAAlB1J,EAAEk4B,aACXl4B,EAAEk4B,kBAEC,CACLzkB,GAAU,EACV,IAAIyC,EAAIlW,EACRA,EAAID,EACJA,EAAImW,EAIR,IAAIw5B,GAAW,EACXC,EAAQ5vC,EAAEizB,WAAU,SAAU9yB,EAAG+U,GACnC,GACEw6B,GACKzvC,EAAEkY,IAAIhY,GACPuT,GACG+mB,GAAGt6B,EAAGF,EAAEyc,IAAIxH,EAAGyd,MACf8H,GAAGx6B,EAAEyc,IAAIxH,EAAGyd,IAAUxyB,GAG7B,OADAwvC,GAAW,GACJ,KAIX,OAAOA,GAAY1vC,EAAE0J,OAASimC,EAMhC,SAASC,GAAMC,EAAMC,GACnB,IAAIC,EAAY,SAAUj1B,GACxB+0B,EAAKjqC,UAAUkV,GAAOg1B,EAAQh1B,IAKhC,OAHA1F,OAAO2C,KAAK+3B,GAASt6B,QAAQu6B,GAC7B36B,OAAO46B,uBACL56B,OAAO46B,sBAAsBF,GAASt6B,QAAQu6B,GACzCF,EAGT,SAASI,GAAKvpC,GACZ,IAAKA,GAA0B,iBAAVA,EACnB,OAAOA,EAET,IAAKqtB,GAAartB,GAAQ,CACxB,IAAKi7B,GAAgBj7B,GACnB,OAAOA,EAETA,EAAQguB,GAAIhuB,GAEd,GAAIwtB,GAAQxtB,GAAQ,CAClB,IAAIwpC,EAAW,GAIf,OAHAxpC,EAAMssB,WAAU,SAAU9yB,EAAG+U,GAC3Bi7B,EAASj7B,GAAKg7B,GAAK/vC,MAEdgwC,EAET,IAAIr4B,EAAS,GAIb,OAHAnR,EAAMssB,WAAU,SAAU9yB,GACxB2X,EAAOrS,KAAKyqC,GAAK/vC,OAEZ2X,EAGT,IAAII,GAAoB,SAAUk4B,GAChC,SAASl4B,EAAIvR,GACX,OAAOA,MAAAA,EACH0pC,KACAhB,GAAM1oC,KAAWmvB,GAAUnvB,GACzBA,EACA0pC,KAAW1M,eAAc,SAAUnnB,GACjC,IAAIwW,EAAOod,EAAiBzpC,GAC5B66B,GAAkBxO,EAAKrpB,MACvBqpB,EAAKvd,SAAQ,SAAUtV,GAAK,OAAOqc,EAAIoB,IAAIzd,SA8KrD,OA1KKiwC,IAAmBl4B,EAAI4c,UAAYsb,GACxCl4B,EAAIrS,UAAYwP,OAAOC,OAAQ86B,GAAoBA,EAAiBvqC,WACpEqS,EAAIrS,UAAUkvB,YAAc7c,EAE5BA,EAAIghB,GAAK,WACP,OAAOt5B,KAAK4I,YAGd0P,EAAIo4B,SAAW,SAAmB3pC,GAChC,OAAO/G,KAAKg1B,GAAgBjuB,GAAO4pC,WAGrCr4B,EAAIs4B,UAAY,SAAoBC,GAElC,OADAA,EAAO/b,GAAW+b,GAAMlY,WACZpuB,OACRumC,GAAaF,UAAUpoC,MAAM8P,EAAIu4B,EAAK9yB,OAAQ8yB,GAC9CJ,MAGNn4B,EAAIy4B,MAAQ,SAAgBF,GAE1B,OADAA,EAAO/b,GAAW+b,GAAMlY,WACZpuB,OACRumC,GAAaC,MAAMvoC,MAAM8P,EAAIu4B,EAAK9yB,OAAQ8yB,GAC1CJ,MAGNn4B,EAAIrS,UAAU9B,SAAW,WACvB,OAAOnE,KAAKs4B,WAAW,QAAS,MAKlChgB,EAAIrS,UAAUsS,IAAM,SAAcxR,GAChC,OAAO/G,KAAKmuC,KAAK51B,IAAIxR,IAKvBuR,EAAIrS,UAAU+X,IAAM,SAAcjX,GAChC,OAAOiqC,GAAUhxC,KAAMA,KAAKmuC,KAAKvxB,IAAI7V,EAAOA,KAG9CuR,EAAIrS,UAAUg9B,OAAS,SAAiBl8B,GACtC,OAAOiqC,GAAUhxC,KAAMA,KAAKmuC,KAAKlL,OAAOl8B,KAG1CuR,EAAIrS,UAAUgY,MAAQ,WACpB,OAAO+yB,GAAUhxC,KAAMA,KAAKmuC,KAAKlwB,UAKnC3F,EAAIrS,UAAUsZ,IAAM,SAAcge,EAAQ5gB,GACxC,IAAIygB,EAASp9B,KAETixC,EAAU,GACVC,EAAO,GAQX,OAPAlxC,KAAK6V,SAAQ,SAAU9O,GACrB,IAAIoqC,EAAS5T,EAAO50B,KAAKgU,EAAS5V,EAAOA,EAAOq2B,GAC5C+T,IAAWpqC,IACbkqC,EAAQprC,KAAKkB,GACbmqC,EAAKrrC,KAAKsrC,OAGPnxC,KAAK+jC,eAAc,SAAUnnB,GAClCq0B,EAAQp7B,SAAQ,SAAU9O,GAAS,OAAO6V,EAAIqmB,OAAOl8B,MACrDmqC,EAAKr7B,SAAQ,SAAU9O,GAAS,OAAO6V,EAAIoB,IAAIjX,UAInDuR,EAAIrS,UAAU8qC,MAAQ,WAEpB,IADA,IAAIxR,EAAQ,GAAI1nB,EAAMjP,UAAU2B,OACxBsN,KAAQ0nB,EAAO1nB,GAAQjP,UAAWiP,GAG1C,OAAqB,KADrB0nB,EAAQA,EAAM/f,QAAO,SAAU0qB,GAAK,OAAkB,IAAXA,EAAEngC,SACnCQ,OACDvK,KAES,IAAdA,KAAK+J,MAAe/J,KAAK8jC,WAA8B,IAAjBvE,EAAMh1B,OAGzCvK,KAAK+jC,eAAc,SAAUnnB,GAClC,IAAK,IAAIgd,EAAK,EAAGA,EAAK2F,EAAMh1B,OAAQqvB,IAClC4W,EAAiBjR,EAAM3F,IAAK/jB,SAAQ,SAAU9O,GAAS,OAAO6V,EAAIoB,IAAIjX,SAJjE/G,KAAKm1B,YAAYoK,EAAM,KASlCjnB,EAAIrS,UAAU2qC,UAAY,WAExB,IADA,IAAIrR,EAAQ,GAAI1nB,EAAMjP,UAAU2B,OACxBsN,KAAQ0nB,EAAO1nB,GAAQjP,UAAWiP,GAE1C,GAAqB,IAAjB0nB,EAAMh1B,OACR,OAAOvK,KAETu/B,EAAQA,EAAMhgB,KAAI,SAAU6T,GAAQ,OAAOod,EAAiBpd,MAC5D,IAAIge,EAAW,GAMf,OALApxC,KAAK6V,SAAQ,SAAU9O,GAChBw4B,EAAM0B,OAAM,SAAU7N,GAAQ,OAAOA,EAAKwK,SAAS72B,OACtDqqC,EAASvrC,KAAKkB,MAGX/G,KAAK+jC,eAAc,SAAUnnB,GAClCw0B,EAASv7B,SAAQ,SAAU9O,GACzB6V,EAAIqmB,OAAOl8B,UAKjBuR,EAAIrS,UAAUorC,SAAW,WAEvB,IADA,IAAI9R,EAAQ,GAAI1nB,EAAMjP,UAAU2B,OACxBsN,KAAQ0nB,EAAO1nB,GAAQjP,UAAWiP,GAE1C,GAAqB,IAAjB0nB,EAAMh1B,OACR,OAAOvK,KAETu/B,EAAQA,EAAMhgB,KAAI,SAAU6T,GAAQ,OAAOod,EAAiBpd,MAC5D,IAAIge,EAAW,GAMf,OALApxC,KAAK6V,SAAQ,SAAU9O,GACjBw4B,EAAM2B,MAAK,SAAU9N,GAAQ,OAAOA,EAAKwK,SAAS72B,OACpDqqC,EAASvrC,KAAKkB,MAGX/G,KAAK+jC,eAAc,SAAUnnB,GAClCw0B,EAASv7B,SAAQ,SAAU9O,GACzB6V,EAAIqmB,OAAOl8B,UAKjBuR,EAAIrS,UAAUuhB,KAAO,SAAe2Y,GAElC,OAAOmR,GAAWpR,GAAYlgC,KAAMmgC,KAGtC7nB,EAAIrS,UAAU2/B,OAAS,SAAiBrI,EAAQ4C,GAE9C,OAAOmR,GAAWpR,GAAYlgC,KAAMmgC,EAAY5C,KAGlDjlB,EAAIrS,UAAUg/B,WAAa,WACzB,OAAOjlC,KAAKmuC,KAAKlJ,cAGnB3sB,EAAIrS,UAAUotB,UAAY,SAAoB/qB,EAAIswB,GAChD,IAAIwE,EAASp9B,KAEb,OAAOA,KAAKmuC,KAAK9a,WAAU,SAAU/d,GAAK,OAAOhN,EAAGgN,EAAGA,EAAG8nB,KAAYxE,IAGxEtgB,EAAIrS,UAAU8yB,WAAa,SAAqBnY,EAAMgY,GACpD,OAAO54B,KAAKmuC,KAAKpV,WAAWnY,EAAMgY,IAGpCtgB,EAAIrS,UAAUi/B,cAAgB,SAAwBa,GACpD,GAAIA,IAAY/lC,KAAK8jC,UACnB,OAAO9jC,KAET,IAAIsuC,EAAStuC,KAAKmuC,KAAKjJ,cAAca,GACrC,OAAKA,EAQE/lC,KAAKuxC,OAAOjD,EAAQvI,GAPP,IAAd/lC,KAAK+J,KACA/J,KAAKwxC,WAEdxxC,KAAK8jC,UAAYiC,EACjB/lC,KAAKmuC,KAAOG,EACLtuC,OAKJsY,GACPgd,OAEEma,MAAQA,GAEZ,IAsCIgC,GAtCAX,GAAex4B,GAAIrS,UAiBvB,SAAS+qC,GAAUp0B,EAAK0xB,GACtB,OAAI1xB,EAAIknB,WACNlnB,EAAI7S,KAAOukC,EAAOvkC,KAClB6S,EAAIuxB,KAAOG,EACJ1xB,GAEF0xB,IAAW1xB,EAAIuxB,KAClBvxB,EACgB,IAAhB0xB,EAAOvkC,KACL6S,EAAI40B,UACJ50B,EAAI20B,OAAOjD,GAGnB,SAASoD,GAAQnyB,EAAKwmB,GACpB,IAAInpB,EAAMnH,OAAOC,OAAOo7B,IAIxB,OAHAl0B,EAAI7S,KAAOwV,EAAMA,EAAIxV,KAAO,EAC5B6S,EAAIuxB,KAAO5uB,EACX3C,EAAIknB,UAAYiC,EACTnpB,EAIT,SAAS6zB,KACP,OAAOgB,KAAcA,GAAYC,GAAQvO,OAvC3C2N,GAAatB,KAAiB,EAC9BsB,GAAmB,OAAIA,GAAa7N,OACpC6N,GAAarM,MAAQqM,GAAaroC,OAASqoC,GAAaC,MACxDD,GAAa/M,cAAgBA,GAC7B+M,GAAa3L,YAAcA,GAC3B2L,GAAa,qBAAuBA,GAAa9L,UAAYA,GAC7D8L,GAAa,qBAAuB,SAAS54B,EAAQopB,GACnD,OAAOppB,EAAO8F,IAAIsjB,IAEpBwP,GAAa,uBAAyB,SAAS9vB,GAC7C,OAAOA,EAAImkB,eAGb2L,GAAaU,QAAUf,GACvBK,GAAaS,OAASG,GAiCtB,IAkIIC,GAlIAC,GAAsB,SAAUjU,GAClC,SAASiU,EAAMnwB,EAAOmS,EAAKwG,GACzB,KAAMp6B,gBAAgB4xC,GACpB,OAAO,IAAIA,EAAMnwB,EAAOmS,EAAKwG,GAe/B,GAbAqH,GAAmB,IAATrH,EAAY,4BACtB3Y,EAAQA,GAAS,OACL9J,IAARic,IACFA,EAAMM,EAAAA,GAERkG,OAAgBziB,IAATyiB,EAAqB,EAAIn7B,KAAKuV,IAAI4lB,GACrCxG,EAAMnS,IACR2Y,GAAQA,GAEVp6B,KAAK6xC,OAASpwB,EACdzhB,KAAK8xC,KAAOle,EACZ5zB,KAAK+xC,MAAQ3X,EACbp6B,KAAK+J,KAAO9K,KAAKS,IAAI,EAAGT,KAAK+yC,MAAMpe,EAAMnS,GAAS2Y,EAAO,GAAK,GAC5C,IAAdp6B,KAAK+J,KAAY,CACnB,GAAI4nC,GACF,OAAOA,GAETA,GAAc3xC,MAyGlB,OArGK29B,IAAgBiU,EAAM1c,UAAYyI,GACvCiU,EAAM3rC,UAAYwP,OAAOC,OAAQioB,GAAiBA,EAAc13B,WAChE2rC,EAAM3rC,UAAUkvB,YAAcyc,EAE9BA,EAAM3rC,UAAU9B,SAAW,WACzB,OAAkB,IAAdnE,KAAK+J,KACA,WAGP,WACA/J,KAAK6xC,OACL,MACA7xC,KAAK8xC,MACW,IAAf9xC,KAAK+xC,MAAc,OAAS/xC,KAAK+xC,MAAQ,IAC1C,MAIJH,EAAM3rC,UAAU6W,IAAM,SAAc+D,EAAO8Y,GACzC,OAAO35B,KAAKuY,IAAIsI,GACZ7gB,KAAK6xC,OAASte,GAAUvzB,KAAM6gB,GAAS7gB,KAAK+xC,MAC5CpY,GAGNiY,EAAM3rC,UAAU23B,SAAW,SAAmBqU,GAC5C,IAAIC,GAAiBD,EAAcjyC,KAAK6xC,QAAU7xC,KAAK+xC,MACvD,OACEG,GAAiB,GACjBA,EAAgBlyC,KAAK+J,MACrBmoC,IAAkBjzC,KAAKoD,MAAM6vC,IAIjCN,EAAM3rC,UAAUyC,MAAQ,SAAgBirB,EAAOC,GAC7C,OAAIF,GAAWC,EAAOC,EAAK5zB,KAAK+J,MACvB/J,MAET2zB,EAAQG,GAAaH,EAAO3zB,KAAK+J,OACjC6pB,EAAMI,GAAWJ,EAAK5zB,KAAK+J,QAChB4pB,EACF,IAAIie,EAAM,EAAG,GAEf,IAAIA,EACT5xC,KAAK8c,IAAI6W,EAAO3zB,KAAK8xC,MACrB9xC,KAAK8c,IAAI8W,EAAK5zB,KAAK8xC,MACnB9xC,KAAK+xC,SAITH,EAAM3rC,UAAUkO,QAAU,SAAkB89B,GAC1C,IAAIE,EAAcF,EAAcjyC,KAAK6xC,OACrC,GAAIM,EAAcnyC,KAAK+xC,OAAU,EAAG,CAClC,IAAIlxB,EAAQsxB,EAAcnyC,KAAK+xC,MAC/B,GAAIlxB,GAAS,GAAKA,EAAQ7gB,KAAK+J,KAC7B,OAAO8W,EAGX,OAAQ,GAGV+wB,EAAM3rC,UAAUmsC,YAAc,SAAsBH,GAClD,OAAOjyC,KAAKmU,QAAQ89B,IAGtBL,EAAM3rC,UAAUotB,UAAY,SAAoB/qB,EAAIswB,GAKlD,IAJA,IAAI7uB,EAAO/J,KAAK+J,KACZqwB,EAAOp6B,KAAK+xC,MACZhrC,EAAQ6xB,EAAU54B,KAAK6xC,QAAU9nC,EAAO,GAAKqwB,EAAOp6B,KAAK6xC,OACzDzvC,EAAI,EACDA,IAAM2H,IACyC,IAAhDzB,EAAGvB,EAAO6xB,EAAU7uB,IAAS3H,EAAIA,IAAKpC,OAG1C+G,GAAS6xB,GAAWwB,EAAOA,EAE7B,OAAOh4B,GAGTwvC,EAAM3rC,UAAU8yB,WAAa,SAAqBnY,EAAMgY,GACtD,IAAI7uB,EAAO/J,KAAK+J,KACZqwB,EAAOp6B,KAAK+xC,MACZhrC,EAAQ6xB,EAAU54B,KAAK6xC,QAAU9nC,EAAO,GAAKqwB,EAAOp6B,KAAK6xC,OACzDzvC,EAAI,EACR,OAAO,IAAIq0B,IAAS,WAClB,GAAIr0B,IAAM2H,EACR,MAzuIC,CAAEhD,WAAO4Q,EAAWkf,MAAM,GA2uI7B,IAAIt2B,EAAIwG,EAER,OADAA,GAAS6xB,GAAWwB,EAAOA,EACpBzD,GAAc/V,EAAMgY,EAAU7uB,IAAS3H,EAAIA,IAAK7B,OAI3DqxC,EAAM3rC,UAAU+C,OAAS,SAAiBqpC,GACxC,OAAOA,aAAiBT,EACpB5xC,KAAK6xC,SAAWQ,EAAMR,QACpB7xC,KAAK8xC,OAASO,EAAMP,MACpB9xC,KAAK+xC,QAAUM,EAAMN,MACvBlC,GAAU7vC,KAAMqyC,IAGfT,GACPvc,IAIF,SAASid,GAAMpY,EAAYqY,EAAe5Y,GAGxC,IAFA,IAAImI,EAAUD,GAAc0Q,GACxBnwC,EAAI,EACDA,IAAM0/B,EAAQv3B,QAEnB,IADA2vB,EAAapd,GAAIod,EAAY4H,EAAQ1/B,KAAM2wB,OACxBA,GACjB,OAAO4G,EAGX,OAAOO,EAeT,SAASsY,KACP5Q,GAAkB5hC,KAAK+J,MACvB,IAAI8vB,EAAS,GAIb,OAHA75B,KAAKqzB,WAAU,SAAU9yB,EAAG+U,GAC1BukB,EAAOvkB,GAAK/U,KAEPs5B,EAIT/E,GAAW2d,WAAare,GACxBU,GAAWP,QAAUA,GACrBO,GAAWJ,UAAYA,GACvBI,GAAWF,cAAgBA,GAC3BE,GAAWoB,UAAYA,GAEvBpB,GAAW2B,SAAWA,GAEtBwZ,GAAMnb,GAAY,CAGhB6D,QAAS,WACPiJ,GAAkB5hC,KAAK+J,MACvB,IAAI0vB,EAAQ,IAAIzd,MAAMhc,KAAK+J,MAAQ,GAC/B2oC,EAAYne,GAAQv0B,MACpBoC,EAAI,EAKR,OAJApC,KAAKqzB,WAAU,SAAU9yB,EAAG+U,GAE1BmkB,EAAMr3B,KAAOswC,EAAY,CAACp9B,EAAG/U,GAAKA,KAE7Bk5B,GAGTL,aAAc,WACZ,OAAO,IAAIsE,GAAkB19B,OAG/BswC,KAAM,WACJ,OAAOA,GAAKtwC,OAGdi5B,WAAY,WACV,OAAO,IAAI4D,GAAgB78B,MAAM,IAGnC0uC,MAAO,WAEL,OAAOzuB,GAAIjgB,KAAKi5B,eAGlBuZ,SAAUA,GAEVG,aAAc,WAEZ,OAAOhN,GAAW3lC,KAAKi5B,eAGzB2Z,aAAc,WAEZ,OAAOtB,GAAW/c,GAAQv0B,MAAQA,KAAKm9B,WAAan9B,OAGtD6yC,MAAO,WAEL,OAAOv6B,GAAIic,GAAQv0B,MAAQA,KAAKm9B,WAAan9B,OAG/Cu5B,SAAU,WACR,OAAO,IAAIsE,GAAc79B,OAG3Bg4B,MAAO,WACL,OAAOtD,GAAU10B,MACbA,KAAKo5B,eACL7E,GAAQv0B,MACNA,KAAKi5B,aACLj5B,KAAKu5B,YAGbuZ,QAAS,WAEP,OAAOhE,GAAMva,GAAQv0B,MAAQA,KAAKm9B,WAAan9B,OAGjD+yC,OAAQ,WAEN,OAAOzI,GAAK/V,GAAQv0B,MAAQA,KAAKm9B,WAAan9B,OAKhDmE,SAAU,WACR,MAAO,gBAGTm0B,WAAY,SAAoB2W,EAAMrC,GACpC,OAAkB,IAAd5sC,KAAK+J,KACAklC,EAAOrC,EAGdqC,EACA,IACAjvC,KAAKg4B,QACFzY,IAAIvf,KAAKgzC,kBACT3uC,KAAK,MACR,IACAuoC,GAMJnkC,OAAQ,WAEN,IADA,IAAI+Z,EAAS,GAAI3K,EAAMjP,UAAU2B,OACzBsN,KAAQ2K,EAAQ3K,GAAQjP,UAAWiP,GAE3C,OAAOspB,GAAMnhC,KAAMq/B,GAAcr/B,KAAMwiB,KAGzCob,SAAU,SAAkBqU,GAC1B,OAAOjyC,KAAKkhC,MAAK,SAAUn6B,GAAS,OAAO8zB,GAAG9zB,EAAOkrC,OAGvD3mB,QAAS,WACP,OAAOtrB,KAAK+4B,WAx7IM,IA27IpBkI,MAAO,SAAe1C,EAAW5hB,GAC/BilB,GAAkB5hC,KAAK+J,MACvB,IAAIkpC,GAAc,EAOlB,OANAjzC,KAAKqzB,WAAU,SAAU9yB,EAAG+U,EAAGZ,GAC7B,IAAK6pB,EAAU51B,KAAKgU,EAASpc,EAAG+U,EAAGZ,GAEjC,OADAu+B,GAAc,GACP,KAGJA,GAGTzzB,OAAQ,SAAgB+e,EAAW5hB,GACjC,OAAOwkB,GAAMnhC,KAAMs+B,GAAct+B,KAAMu+B,EAAW5hB,GAAS,KAG7Du2B,KAAM,SAAc3U,EAAW5hB,EAASgd,GACtC,IAAIb,EAAQ94B,KAAKmzC,UAAU5U,EAAW5hB,GACtC,OAAOmc,EAAQA,EAAM,GAAKa,GAG5B9jB,QAAS,SAAiBu9B,EAAYz2B,GAEpC,OADAilB,GAAkB5hC,KAAK+J,MAChB/J,KAAKqzB,UAAU1W,EAAUy2B,EAAWC,KAAK12B,GAAWy2B,IAG7D/uC,KAAM,SAAcivC,GAClB1R,GAAkB5hC,KAAK+J,MACvBupC,OAA0B37B,IAAd27B,EAA0B,GAAKA,EAAY,IACvD,IAAIC,EAAS,GACTC,GAAU,EAKd,OAJAxzC,KAAKqzB,WAAU,SAAU9yB,GACvBizC,EAAWA,GAAU,EAAUD,GAAUD,EACzCC,GAAUhzC,MAAAA,EAAgCA,EAAE4D,WAAa,MAEpDovC,GAGTn7B,KAAM,WACJ,OAAOpY,KAAK+4B,WAp+IG,IAu+IjBxZ,IAAK,SAAage,EAAQ5gB,GACxB,OAAOwkB,GAAMnhC,KAAMy9B,GAAWz9B,KAAMu9B,EAAQ5gB,KAG9C8J,OAAQ,SAAkBgtB,EAASC,EAAkB/2B,GACnD,OAAO8J,GACLzmB,KACAyzC,EACAC,EACA/2B,EACA/T,UAAU2B,OAAS,GACnB,IAIJopC,YAAa,SAAqBF,EAASC,EAAkB/2B,GAC3D,OAAO8J,GACLzmB,KACAyzC,EACAC,EACA/2B,EACA/T,UAAU2B,OAAS,GACnB,IAIJquB,QAAS,WACP,OAAOuI,GAAMnhC,KAAMs9B,GAAet9B,MAAM,KAG1C0I,MAAO,SAAeirB,EAAOC,GAC3B,OAAOuN,GAAMnhC,KAAMy+B,GAAaz+B,KAAM2zB,EAAOC,GAAK,KAGpDsN,KAAM,SAAc3C,EAAW5hB,GAC7B,OAAQ3c,KAAKihC,MAAM2S,GAAIrV,GAAY5hB,IAGrC6K,KAAM,SAAc2Y,GAClB,OAAOgB,GAAMnhC,KAAMkgC,GAAYlgC,KAAMmgC,KAGvC3d,OAAQ,WACN,OAAOxiB,KAAK+4B,WAjhJK,IAshJnB8a,QAAS,WACP,OAAO7zC,KAAK0I,MAAM,GAAI,IAGxBorC,QAAS,WACP,YAAqBn8B,IAAd3X,KAAK+J,KAAmC,IAAd/J,KAAK+J,MAAc/J,KAAKkhC,MAAK,WAAc,OAAO,MAGrFwG,MAAO,SAAenJ,EAAW5hB,GAC/B,OAAOwW,GACLoL,EAAYv+B,KAAKg4B,QAAQxY,OAAO+e,EAAW5hB,GAAW3c,OAI1D+zC,QAAS,SAAiBC,EAASr3B,GACjC,OAx7GJ,SAAwBud,EAAY8Z,EAASr3B,GAC3C,IAAIs3B,EAASh0B,KAAM+kB,YAInB,OAHA9K,EAAW7G,WAAU,SAAU9yB,EAAG+U,GAChC2+B,EAAOn2B,OAAOk2B,EAAQrrC,KAAKgU,EAASpc,EAAG+U,EAAG4kB,GAAa,GAAG,SAAU75B,GAAK,OAAOA,EAAI,QAE/E4zC,EAAO9O,cAm7GL+O,CAAel0C,KAAMg0C,EAASr3B,IAGvC3T,OAAQ,SAAgBqpC,GACtB,OAAOxC,GAAU7vC,KAAMqyC,IAGzB3Z,SAAU,WACR,IAAIwB,EAAal6B,KACjB,GAAIk6B,EAAW1B,OAEb,OAAO,IAAIgB,GAASU,EAAW1B,QAEjC,IAAI2b,EAAkBja,EACnBlC,QACAzY,IAAI60B,IACJhb,eAEH,OADA+a,EAAgBjb,aAAe,WAAc,OAAOgB,EAAWlC,SACxDmc,GAGTE,UAAW,SAAmB9V,EAAW5hB,GACvC,OAAO3c,KAAKwf,OAAOo0B,GAAIrV,GAAY5hB,IAGrCw2B,UAAW,SAAmB5U,EAAW5hB,EAASgd,GAChD,IAAI2a,EAAQ3a,EAOZ,OANA35B,KAAKqzB,WAAU,SAAU9yB,EAAG+U,EAAGZ,GAC7B,GAAI6pB,EAAU51B,KAAKgU,EAASpc,EAAG+U,EAAGZ,GAEhC,OADA4/B,EAAQ,CAACh/B,EAAG/U,IACL,KAGJ+zC,GAGTC,QAAS,SAAiBhW,EAAW5hB,GACnC,IAAImc,EAAQ94B,KAAKmzC,UAAU5U,EAAW5hB,GACtC,OAAOmc,GAASA,EAAM,IAGxB0b,SAAU,SAAkBjW,EAAW5hB,EAASgd,GAC9C,OAAO35B,KAAKi5B,aACTL,UACAsa,KAAK3U,EAAW5hB,EAASgd,IAG9B8a,cAAe,SAAuBlW,EAAW5hB,EAASgd,GACxD,OAAO35B,KAAKi5B,aACTL,UACAua,UAAU5U,EAAW5hB,EAASgd,IAGnC+a,YAAa,SAAqBnW,EAAW5hB,GAC3C,OAAO3c,KAAKi5B,aACTL,UACA2b,QAAQhW,EAAW5hB,IAGxBg4B,MAAO,SAAehb,GACpB,OAAO35B,KAAKkzC,KAAK5f,GAAY,KAAMqG,IAGrCib,QAAS,SAAiBrX,EAAQ5gB,GAChC,OAAOwkB,GAAMnhC,KAxrGjB,SAAwBk6B,EAAYqD,EAAQ5gB,GAC1C,IAAIk4B,EAASzT,GAAgBlH,GAC7B,OAAOA,EACJlC,QACAzY,KAAI,SAAUhf,EAAG+U,GAAK,OAAOu/B,EAAOtX,EAAO50B,KAAKgU,EAASpc,EAAG+U,EAAG4kB,OAC/DwF,SAAQ,GAmrGUoV,CAAe90C,KAAMu9B,EAAQ5gB,KAGlD+iB,QAAS,SAAiBG,GACxB,OAAOsB,GAAMnhC,KAAM4/B,GAAe5/B,KAAM6/B,GAAO,KAGjD3G,aAAc,WACZ,OAAO,IAAI6E,GAAoB/9B,OAGjC8c,IAAK,SAAai4B,EAAWpb,GAC3B,OAAO35B,KAAKkzC,MAAK,SAAU38B,EAAG4E,GAAO,OAAO0f,GAAG1f,EAAK45B,UAAep9B,EAAWgiB,IAGhF2Y,MAnUF,SAAiBC,EAAe5Y,GAC9B,OAAO2Y,GAAMtyC,KAAMuyC,EAAe5Y,IAoUlCqb,QAAS,SAAiBhB,EAASr3B,GACjC,OAlgHJ,SAAwBud,EAAY8Z,EAASr3B,GAC3C,IAAIs4B,EAAc1gB,GAAQ2F,GACtB+Z,GAAU/d,GAAUgE,GAAcyL,KAAe1lB,MAAO+kB,YAC5D9K,EAAW7G,WAAU,SAAU9yB,EAAG+U,GAChC2+B,EAAOn2B,OACLk2B,EAAQrrC,KAAKgU,EAASpc,EAAG+U,EAAG4kB,IAC5B,SAAU75B,GAAK,OAASA,EAAIA,GAAK,IAAOwF,KAAKovC,EAAc,CAAC3/B,EAAG/U,GAAKA,GAAIF,QAG5E,IAAIw0C,EAASzT,GAAgBlH,GAC7B,OAAO+Z,EAAO10B,KAAI,SAAU+hB,GAAO,OAAOH,GAAMjH,EAAY2a,EAAOvT,OAAU6D,cAw/GpE+P,CAAel1C,KAAMg0C,EAASr3B,IAGvCpE,IAAK,SAAaw8B,GAChB,OAAO/0C,KAAK8c,IAAIi4B,EAAWhiB,MAAaA,IAG1CoiB,MArUF,SAAiB5C,GACf,OAJOD,GAIMtyC,KAAMuyC,EAJexf,MAAaA,IA0U/CqiB,SAAU,SAAkBhiB,GAE1B,OADAA,EAAgC,mBAAlBA,EAAKwK,SAA0BxK,EAAO0B,GAAW1B,GACxDpzB,KAAKihC,OAAM,SAAUl6B,GAAS,OAAOqsB,EAAKwK,SAAS72B,OAG5DsuC,WAAY,SAAoBjiB,GAE9B,OADAA,EAAgC,mBAAlBA,EAAKgiB,SAA0BhiB,EAAO0B,GAAW1B,IACnDgiB,SAASp1C,OAGvBs1C,MAAO,SAAerD,GACpB,OAAOjyC,KAAKu0C,SAAQ,SAAUxtC,GAAS,OAAO8zB,GAAG9zB,EAAOkrC,OAG1DtB,OAAQ,WACN,OAAO3wC,KAAKg4B,QACTzY,IAAIg2B,IACJnc,gBAGLoc,KAAM,SAAc7b,GAClB,OAAO35B,KAAKg4B,QACTY,UACA+b,MAAMhb,IAGX8b,UAAW,SAAmBxD,GAC5B,OAAOjyC,KAAKi5B,aACTL,UACA0c,MAAMrD,IAGXvyC,IAAK,SAAaygC,GAChB,OAAOE,GAAWrgC,KAAMmgC,IAG1BuV,MAAO,SAAenY,EAAQ4C,GAC5B,OAAOE,GAAWrgC,KAAMmgC,EAAY5C,IAGtC/9B,IAAK,SAAa2gC,GAChB,OAAOE,GACLrgC,KACAmgC,EAAawV,GAAIxV,GAAcyV,KAInCC,MAAO,SAAetY,EAAQ4C,GAC5B,OAAOE,GACLrgC,KACAmgC,EAAawV,GAAIxV,GAAcyV,GAC/BrY,IAIJllB,KAAM,WACJ,OAAOrY,KAAK0I,MAAM,IAGpBotC,KAAM,SAAcrxC,GAClB,OAAkB,IAAXA,EAAezE,KAAOA,KAAK0I,MAAMzJ,KAAKS,IAAI,EAAG+E,KAGtDsxC,SAAU,SAAkBtxC,GAC1B,OAAkB,IAAXA,EAAezE,KAAOA,KAAK0I,MAAM,GAAIzJ,KAAKS,IAAI,EAAG+E,KAG1DuxC,UAAW,SAAmBzX,EAAW5hB,GACvC,OAAOwkB,GAAMnhC,KAAMk/B,GAAiBl/B,KAAMu+B,EAAW5hB,GAAS,KAGhEs5B,UAAW,SAAmB1X,EAAW5hB,GACvC,OAAO3c,KAAKg2C,UAAUpC,GAAIrV,GAAY5hB,IAGxCipB,OAAQ,SAAgBrI,EAAQ4C,GAC9B,OAAOgB,GAAMnhC,KAAMkgC,GAAYlgC,KAAMmgC,EAAY5C,KAGnD2Y,KAAM,SAAczxC,GAClB,OAAOzE,KAAK0I,MAAM,EAAGzJ,KAAKS,IAAI,EAAG+E,KAGnC0xC,SAAU,SAAkB1xC,GAC1B,OAAOzE,KAAK0I,OAAOzJ,KAAKS,IAAI,EAAG+E,KAGjC2xC,UAAW,SAAmB7X,EAAW5hB,GACvC,OAAOwkB,GAAMnhC,KAn/GjB,SAA0Bk6B,EAAYqE,EAAW5hB,GAC/C,IAAI05B,EAAejY,GAAalE,GAuChC,OAtCAmc,EAAa5d,kBAAoB,SAASnwB,EAAIswB,GAC5C,IAAIwE,EAASp9B,KAEb,GAAI44B,EACF,OAAO54B,KAAKu4B,cAAclF,UAAU/qB,EAAIswB,GAE1C,IAAIrf,EAAa,EAIjB,OAHA2gB,EAAW7G,WACT,SAAU9yB,EAAG+U,EAAGZ,GAAK,OAAO6pB,EAAU51B,KAAKgU,EAASpc,EAAG+U,EAAGZ,MAAQ6E,GAAcjR,EAAG/H,EAAG+U,EAAG8nB,MAEpF7jB,GAET88B,EAAard,mBAAqB,SAASpY,EAAMgY,GAC/C,IAAIwE,EAASp9B,KAEb,GAAI44B,EACF,OAAO54B,KAAKu4B,cAAcQ,WAAWnY,EAAMgY,GAE7C,IAAItC,EAAW4D,EAAWnB,WAxvCR,EAwvCoCH,GAClD0d,GAAY,EAChB,OAAO,IAAI7f,IAAS,WAClB,IAAK6f,EACH,MAttCC,CAAEvvC,WAAO4Q,EAAWkf,MAAM,GAwtC7B,IAAIuD,EAAO9D,EAASI,OACpB,GAAI0D,EAAKvD,KACP,OAAOuD,EAET,IAAItB,EAAQsB,EAAKrzB,MACbuO,EAAIwjB,EAAM,GACVv4B,EAAIu4B,EAAM,GACd,OAAKyF,EAAU51B,KAAKgU,EAASpc,EAAG+U,EAAG8nB,GArwCnB,IAywCTxc,EAA2BwZ,EAAOzD,GAAc/V,EAAMtL,EAAG/U,EAAG65B,IAHjEkc,GAAY,EAhuCX,CAAEvvC,WAAO4Q,EAAWkf,MAAM,QAsuC1Bwf,EA28GcE,CAAiBv2C,KAAMu+B,EAAW5hB,KAGvD65B,UAAW,SAAmBjY,EAAW5hB,GACvC,OAAO3c,KAAKo2C,UAAUxC,GAAIrV,GAAY5hB,IAGxCmB,OAAQ,SAAgBxV,GACtB,OAAOA,EAAGtI,OAGZm9B,SAAU,WACR,OAAOn9B,KAAKo5B,gBAKdwB,SAAU,WACR,OAAO56B,KAAK0lC,SAAW1lC,KAAK0lC,OAwQhC,SAAwBxL,GACtB,GAAIA,EAAWnwB,OAASmqB,EAAAA,EACtB,OAAO,EAET,IAAIuiB,EAAUvgB,GAAUgE,GACpBwc,EAAQniB,GAAQ2F,GAChB94B,EAAIq1C,EAAU,EAAI,EAkBtB,OAGF,SAA0B1sC,EAAM3I,GAQ9B,OAPAA,EAAI65B,GAAK75B,EAAG,YACZA,EAAI65B,GAAM75B,GAAK,GAAOA,KAAO,GAAK,WAClCA,EAAI65B,GAAM75B,GAAK,GAAOA,KAAO,GAAK,GAElCA,EAAI65B,IADJ75B,GAAMA,EAAI,WAAc,GAAK2I,GACf3I,IAAM,GAAK,YAEzBA,EAAI85B,IADJ95B,EAAI65B,GAAK75B,EAAKA,IAAM,GAAK,aACZA,IAAM,IAVZu1C,CAjBIzc,EAAW7G,UACpBqjB,EACID,EACE,SAAUl2C,EAAG+U,GACXlU,EAAK,GAAKA,EAAIw1C,GAAUvuB,GAAK9nB,GAAI8nB,GAAK/S,IAAO,GAE/C,SAAU/U,EAAG+U,GACXlU,EAAKA,EAAIw1C,GAAUvuB,GAAK9nB,GAAI8nB,GAAK/S,IAAO,GAE5CmhC,EACE,SAAUl2C,GACRa,EAAK,GAAKA,EAAIinB,GAAK9nB,GAAM,GAE3B,SAAUA,GACRa,EAAKA,EAAIinB,GAAK9nB,GAAM,IAGAa,GAhSSy1C,CAAe72C,UAUxD,IAAI82C,GAAsBhiB,GAAW7uB,UACrC6wC,GAAoB3iB,KAAwB,EAC5C2iB,GAAoBtgB,IAAmBsgB,GAAoBt0B,OAC3Ds0B,GAAoBC,OAASD,GAAoBne,QACjDme,GAAoB9D,iBAAmB/Q,GACvC6U,GAAoBpf,QAAUof,GAAoBnf,SAAW,WAC3D,OAAO33B,KAAKmE,YAEd2yC,GAAoBE,MAAQF,GAAoBlC,QAChDkC,GAAoBG,SAAWH,GAAoBlZ,SAEnDqS,GAAMjb,GAAiB,CAGrBjhB,KAAM,WACJ,OAAOotB,GAAMnhC,KAAMk+B,GAAYl+B,QAGjCk3C,WAAY,SAAoB3Z,EAAQ5gB,GACtC,IAAIygB,EAASp9B,KAETuZ,EAAa,EACjB,OAAO4nB,GACLnhC,KACAA,KAAKg4B,QACFzY,KAAI,SAAUhf,EAAG+U,GAAK,OAAOioB,EAAO50B,KAAKgU,EAAS,CAACrH,EAAG/U,GAAIgZ,IAAc6jB,MACxElE,iBAIPie,QAAS,SAAiB5Z,EAAQ5gB,GAChC,IAAIygB,EAASp9B,KAEb,OAAOmhC,GACLnhC,KACAA,KAAKg4B,QACFjkB,OACAwL,KAAI,SAAUjK,EAAG/U,GAAK,OAAOg9B,EAAO50B,KAAKgU,EAASrH,EAAG/U,EAAG68B,MACxDrpB,WAKT,IAAIqjC,GAA2BpiB,GAAgB/uB,UAC/CmxC,GAAyB9iB,KAAmB,EAC5C8iB,GAAyB5gB,IAAmBsgB,GAAoBxrB,QAChE8rB,GAAyBL,OAASvE,GAClC4E,GAAyBpE,iBAAmB,SAAUzyC,EAAG+U,GAAK,OAAO2sB,GAAY3sB,GAAK,KAAO2sB,GAAY1hC,IAEzG0vC,GAAM7a,GAAmB,CAGvB6D,WAAY,WACV,OAAO,IAAI4D,GAAgB78B,MAAM,IAKnCwf,OAAQ,SAAgB+e,EAAW5hB,GACjC,OAAOwkB,GAAMnhC,KAAMs+B,GAAct+B,KAAMu+B,EAAW5hB,GAAS,KAG7D06B,UAAW,SAAmB9Y,EAAW5hB,GACvC,IAAImc,EAAQ94B,KAAKmzC,UAAU5U,EAAW5hB,GACtC,OAAOmc,EAAQA,EAAM,IAAM,GAG7B3kB,QAAS,SAAiB89B,GACxB,IAAI92B,EAAMnb,KAAKs1C,MAAMrD,GACrB,YAAet6B,IAARwD,GAAqB,EAAIA,GAGlCi3B,YAAa,SAAqBH,GAChC,IAAI92B,EAAMnb,KAAKy1C,UAAUxD,GACzB,YAAet6B,IAARwD,GAAqB,EAAIA,GAGlCyd,QAAS,WACP,OAAOuI,GAAMnhC,KAAMs9B,GAAet9B,MAAM,KAG1C0I,MAAO,SAAeirB,EAAOC,GAC3B,OAAOuN,GAAMnhC,KAAMy+B,GAAaz+B,KAAM2zB,EAAOC,GAAK,KAGpD9S,OAAQ,SAAgBD,EAAOy2B,GAC7B,IAAIC,EAAU3uC,UAAU2B,OAExB,GADA+sC,EAAYr4C,KAAKS,IAAI43C,GAAa,EAAG,GACrB,IAAZC,GAA8B,IAAZA,IAAkBD,EACtC,OAAOt3C,KAKT6gB,EAAQiT,GAAajT,EAAOA,EAAQ,EAAI7gB,KAAK0nC,QAAU1nC,KAAK+J,MAC5D,IAAIytC,EAAUx3C,KAAK0I,MAAM,EAAGmY,GAC5B,OAAOsgB,GACLnhC,KACY,IAAZu3C,EACIC,EACAA,EAAQ/uC,OAAO44B,GAAQz4B,UAAW,GAAI5I,KAAK0I,MAAMmY,EAAQy2B,MAMjEG,cAAe,SAAuBlZ,EAAW5hB,GAC/C,IAAImc,EAAQ94B,KAAKy0C,cAAclW,EAAW5hB,GAC1C,OAAOmc,EAAQA,EAAM,IAAM,GAG7B6b,MAAO,SAAehb,GACpB,OAAO35B,KAAK8c,IAAI,EAAG6c,IAGrB+F,QAAS,SAAiBG,GACxB,OAAOsB,GAAMnhC,KAAM4/B,GAAe5/B,KAAM6/B,GAAO,KAGjD/iB,IAAK,SAAa+D,EAAO8Y,GAEvB,OADA9Y,EAAQ0S,GAAUvzB,KAAM6gB,IACT,GACZ7gB,KAAK+J,OAASmqB,EAAAA,QAA2Bvc,IAAd3X,KAAK+J,MAAsB8W,EAAQ7gB,KAAK+J,KAClE4vB,EACA35B,KAAKkzC,MAAK,SAAU38B,EAAG4E,GAAO,OAAOA,IAAQ0F,SAAUlJ,EAAWgiB,IAGxEphB,IAAK,SAAasI,GAEhB,OADAA,EAAQ0S,GAAUvzB,KAAM6gB,KAEb,SACMlJ,IAAd3X,KAAK+J,KACF/J,KAAK+J,OAASmqB,EAAAA,GAAYrT,EAAQ7gB,KAAK+J,MACd,IAAzB/J,KAAKmU,QAAQ0M,KAIrB62B,UAAW,SAAmBpE,GAC5B,OAAOnS,GAAMnhC,KAz8GjB,SAA0Bk6B,EAAYoZ,GACpC,IAAIqE,EAAqBvZ,GAAalE,GA6BtC,OA5BAyd,EAAmB5tC,KAAOmwB,EAAWnwB,MAA0B,EAAlBmwB,EAAWnwB,KAAW,EACnE4tC,EAAmBlf,kBAAoB,SAASnwB,EAAIswB,GAClD,IAAIwE,EAASp9B,KAETuZ,EAAa,EAMjB,OALA2gB,EAAW7G,WACT,SAAU9yB,GAAK,QAASgZ,IAAsD,IAAxCjR,EAAGgrC,EAAW/5B,IAAc6jB,MAChC,IAAhC90B,EAAG/H,EAAGgZ,IAAc6jB,KACtBxE,GAEKrf,GAETo+B,EAAmB3e,mBAAqB,SAASpY,EAAMgY,GACrD,IAEIwB,EAFA9D,EAAW4D,EAAWnB,WAp8CT,EAo8CoCH,GACjDrf,EAAa,EAEjB,OAAO,IAAIkd,IAAS,WAClB,QAAK2D,GAAQ7gB,EAAa,KACxB6gB,EAAO9D,EAASI,QACPG,KACAuD,EAGJ7gB,EAAa,EAChBod,GAAc/V,EAAMrH,IAAc+5B,GAClC3c,GAAc/V,EAAMrH,IAAc6gB,EAAKrzB,MAAOqzB,OAG/Cud,EA26GcC,CAAiB53C,KAAMszC,KAG5CuE,WAAY,WACV,IAAIlU,EAAc,CAAC3jC,MAAMyI,OAAO44B,GAAQz4B,YACpCkvC,EAAStX,GAAexgC,KAAKg4B,QAAS3C,GAAWiE,GAAIqK,GACrDoU,EAAcD,EAAOpY,SAAQ,GAIjC,OAHIoY,EAAO/tC,OACTguC,EAAYhuC,KAAO+tC,EAAO/tC,KAAO45B,EAAYp5B,QAExC42B,GAAMnhC,KAAM+3C,IAGrBpH,OAAQ,WACN,OAAOiB,GAAM,EAAG5xC,KAAK+J,OAGvByrC,KAAM,SAAc7b,GAClB,OAAO35B,KAAK8c,KAAK,EAAG6c,IAGtBqc,UAAW,SAAmBzX,EAAW5hB,GACvC,OAAOwkB,GAAMnhC,KAAMk/B,GAAiBl/B,KAAMu+B,EAAW5hB,GAAS,KAGhEq7B,IAAK,WACH,IAAIrU,EAAc,CAAC3jC,MAAMyI,OAAO44B,GAAQz4B,YACxC,OAAOu4B,GAAMnhC,KAAMwgC,GAAexgC,KAAMi4C,GAAetU,KAGzDhD,OAAQ,WACN,IAAIgD,EAAc,CAAC3jC,MAAMyI,OAAO44B,GAAQz4B,YACxC,OAAOu4B,GAAMnhC,KAAMwgC,GAAexgC,KAAMi4C,GAAetU,GAAa,KAGtEuU,QAAS,SAAiBxX,GACxB,IAAIiD,EAActC,GAAQz4B,WAE1B,OADA+6B,EAAY,GAAK3jC,KACVmhC,GAAMnhC,KAAMwgC,GAAexgC,KAAM0gC,EAAQiD,OAIpD,IAAIwU,GAA6B/iB,GAAkBnvB,UAiCnD,SAASwgB,GAAOyT,EAAYuZ,EAAS2E,EAAWz7B,EAAS07B,EAAUzf,GAUjE,OATAgJ,GAAkB1H,EAAWnwB,MAC7BmwB,EAAW7G,WAAU,SAAU9yB,EAAG+U,EAAGZ,GAC/B2jC,GACFA,GAAW,EACXD,EAAY73C,GAEZ63C,EAAY3E,EAAQ9qC,KAAKgU,EAASy7B,EAAW73C,EAAG+U,EAAGZ,KAEpDkkB,GACIwf,EAGT,SAAS7C,GAAUh1C,EAAG+U,GACpB,OAAOA,EAGT,SAAS8+B,GAAY7zC,EAAG+U,GACtB,MAAO,CAACA,EAAG/U,GAGb,SAASqzC,GAAIrV,GACX,OAAO,WACL,OAAQA,EAAU/1B,MAAMxI,KAAM4I,YAIlC,SAAS+sC,GAAIpX,GACX,OAAO,WACL,OAAQA,EAAU/1B,MAAMxI,KAAM4I,YAIlC,SAASqvC,KACP,OAAO5W,GAAQz4B,WAGjB,SAASgtC,GAAqBv1C,EAAGD,GAC/B,OAAOC,EAAID,EAAI,EAAIC,EAAID,GAAK,EAAI,EAyClC,SAASw2C,GAAUv2C,EAAGD,GACpB,OAAQC,EAAKD,EAAI,YAAcC,GAAK,IAAMA,GAAK,GAAO,EAhHxD83C,GAA2B1jB,KAAqB,EAChD0jB,GAA2BliB,KAAqB,EAEhDga,GAAM3a,GAAe,CAGnBxY,IAAK,SAAa/V,EAAO4yB,GACvB,OAAO35B,KAAKuY,IAAIxR,GAASA,EAAQ4yB,GAGnCiE,SAAU,SAAkB72B,GAC1B,OAAO/G,KAAKuY,IAAIxR,IAKlB4pC,OAAQ,WACN,OAAO3wC,KAAKm9B,cAIhB7H,GAAcrvB,UAAUsS,IAAMu+B,GAAoBlZ,SAClDtI,GAAcrvB,UAAUgxC,SAAW3hB,GAAcrvB,UAAU23B,SAI3DqS,GAAMhb,GAAUD,GAAgB/uB,WAChCgqC,GAAM5a,GAAYD,GAAkBnvB,WACpCgqC,GAAM1a,GAAQD,GAAcrvB,WAuF5B,IAAIqrC,GAA2B,SAAUgH,GACvC,SAAShH,EAAWvqC,GAClB,OAAOA,MAAAA,EACHwxC,KACA5I,GAAa5oC,GACXA,EACAwxC,KAAkBxU,eAAc,SAAUnnB,GACxC,IAAIwW,EAAOkC,GAAcvuB,GACzB66B,GAAkBxO,EAAKrpB,MACvBqpB,EAAKvd,SAAQ,SAAUtV,GAAK,OAAOqc,EAAIoB,IAAIzd,SAoBrD,OAhBK+3C,IAAShH,EAAWpc,UAAYojB,GACrChH,EAAWrrC,UAAYwP,OAAOC,OAAQ4iC,GAAUA,EAAOryC,WACvDqrC,EAAWrrC,UAAUkvB,YAAcmc,EAEnCA,EAAWhY,GAAK,WACd,OAAOt5B,KAAK4I,YAGd0oC,EAAWZ,SAAW,SAAmB3pC,GACvC,OAAO/G,KAAKg1B,GAAgBjuB,GAAO4pC,WAGrCW,EAAWrrC,UAAU9B,SAAW,WAC9B,OAAOnE,KAAKs4B,WAAW,eAAgB,MAGlCgZ,GACPh5B,IAEFg5B,GAAW3B,aAAeA,GAE1B,IAgBI6I,GAhBAC,GAAsBnH,GAAWrrC,UAQrC,SAASyyC,GAAen5B,EAAKwmB,GAC3B,IAAInpB,EAAMnH,OAAOC,OAAO+iC,IAIxB,OAHA77B,EAAI7S,KAAOwV,EAAMA,EAAIxV,KAAO,EAC5B6S,EAAIuxB,KAAO5uB,EACX3C,EAAIknB,UAAYiC,EACTnpB,EAIT,SAAS27B,KACP,OACEC,KAAsBA,GAAoBE,GAAexK,OAqU7D,SAASyK,GAAO5xC,EAAO6xC,GACrB,OAAOC,GACL,GACAD,GAAaE,GACb/xC,EACA,GACA6xC,GAAaA,EAAUruC,OAAS,EAAI,QAAKoN,EACzC,CAAE,GAAI5Q,IAIV,SAAS8xC,GAAWxtB,EAAOutB,EAAW7xC,EAAOoU,EAAK2mB,EAASiX,GACzD,IAAI/gB,EAAQhc,MAAMoG,QAAQrb,GACtBsuB,GACA0M,GAAWh7B,GACTkuB,GACA,KACN,GAAI+C,EAAO,CACT,IAAK3M,EAAMlX,QAAQpN,GACjB,MAAM,IAAIqxB,UAAU,kDAEtB/M,EAAMxlB,KAAKkB,GACX+6B,GAAmB,KAAR3mB,GAAc2mB,EAAQj8B,KAAKsV,GACtC,IAAI69B,EAAYJ,EAAUjwC,KACxBowC,EACA59B,EACA6c,EAAMjxB,GAAOwY,KAAI,SAAUhf,EAAG+U,GAAK,OAAOujC,GAAWxtB,EAAOutB,EAAWr4C,EAAG+U,EAAGwsB,EAAS/6B,MAEtF+6B,GAAWA,EAAQp5B,SAIrB,OAFA2iB,EAAMtN,MACN+jB,GAAWA,EAAQ/jB,MACZi7B,EAET,OAAOjyC,EAGT,SAAS+xC,GAAiBxjC,EAAG/U,GAC3B,OAAOg0B,GAAQh0B,GAAKA,EAAEmuC,QAAUnuC,EAAEwyC,SA7XpC0F,GAAoBxiB,KAAqB,EACzCwiB,GAAoBT,IAAMG,GAA2BH,IACrDS,GAAoBP,QAAUC,GAA2BD,QAEzDO,GAAoBjH,QAAU+G,GAC9BE,GAAoBlH,OAASmH,GA2LL5B,GAAoB3B,MAe1C2B,GAAoBtE,SCv8KtB,IAAIyG,GAAK,CACPC,WAAY,EACZC,cAAe,EACfC,cAAe,EACfC,SAAU,GACVC,UAAW,CAAC,EAAG,IAGjB,MAAMpjC,GAAQsL,GAASm3B,GAAOM,uICqJZliC,mDAPNA,sBACIA,wBACEA,wBACAA,2CAIAA,oDDnJlB9B,OAAOskC,OAASN,OCCVC,GAAa,IACbG,GAAW,0BAHXG,EACAziC,EAGA0iC,UAbOC,aACAC,iBACAC,IAAc1P,EAAG2P,KAAM,eACvBC,IAAW5P,EAAG2P,wBACdE,IAAe7P,EAAG2P,sBAClBG,IAAa9P,EAAG2P,wBAChBI,IAAe/P,EAAG2P,qBAClBK,GAAW,KAOlBC,MAAqBC,gBAAe9uB,IACtCmuB,EAAOD,EAAOa,oCA0DPC,EAAWngC,OAEdpQ,GADa0vC,EAAKc,MACGrB,IAAcQ,SAC/Bz6C,KAAKoD,MAAM8X,EAAMqgC,QAAUzwC,GAC3B9K,KAAKoD,MAAM8X,EAAMsgC,QAAU1wC,aA+BrB2wC,EAAShB,EAAQC,EAAQO,QACvCnjC,EAAI4jC,UAAY,WAChB5jC,EAAI6jC,SAAS,EAAG,EAAG7jC,EAAIyiC,OAAOe,MAAOxjC,EAAIyiC,OAAOqB,aAE9C9jC,EAAI4jC,UADHT,EACe,OAEA,WAGTnjC,EAAIyiC,OAAOe,MACXxjC,EAAIyiC,OAAOqB,WAIhBN,EAAQlB,GAAWK,EAASR,GAC5B2B,EAASxB,GAAWM,EAAST,aA1CdqB,EAAOM,GAC1B9jC,EAAI6jC,SACF,EACA,EACA1B,GACA2B,GAEF9jC,EAAI6jC,SACFL,EACA,EACArB,GACA2B,GAEF9jC,EAAI6jC,SACF,EACA,EACAL,EACArB,IAEFniC,EAAI6jC,SACF,EACAC,EACAN,EAAQrB,GACRA,IAoBF4B,CAAYP,EAAOM,WAEXz4C,EAAI,EAAGA,EAAIs3C,EAAQt3C,IACzB2U,EAAI6jC,SAASx4C,EAAIi3C,GAAWH,KAAkB,EAAGA,GAAY2B,WAEvDz4C,EAAI,EAAGA,EAAIu3C,EAAQv3C,IACzB2U,EAAI6jC,SAAS,EAAGx4C,EAAIi3C,GAAWH,KAAkBqB,EAAOrB,YAIlD92C,EAAI,EAAGA,EAAIs3C,EAAQt3C,YACjB24C,EAAI,EAAGA,EAAIpB,EAAQoB,IACtBnB,EAAWmB,EAAG34C,IACf2U,EAAI6jC,SACFx4C,EAAIi3C,GAAW2B,EAAwB9B,GACvC6B,EAAI1B,GAAW2B,EAAwB9B,GACvCG,GACAA,WA9GV98B,aACExF,EAAMyiC,EAAO38B,WAAW,OACxBs9B,EAAec,QAAQzB,MAGzB/8B,QACE09B,EAAee,UAAU1B,iVAjBtBziC,YAoByB2iC,EAAQC,OAClCH,EAAOe,MAAQlB,GAAWK,EAAS,SACnCF,EAAOqB,OAASxB,GAAWM,EAAS,KArBpCwB,CAAqBzB,EAAQC,qBAK5B5iC,GACD2jC,EAAShB,EAAQC,EAAQO,kBAkBF//B,OACrB+/B,OACEkB,EAAUd,EAAWngC,GACzB4/B,KAAeqB,EAASjhC,cAIDA,OACrB+/B,OACEkB,EAAUd,EAAWngC,GACzB8/B,KAAemB,EAASjhC,oBAKtB+/B,OACEkB,EAAUd,EAAWngC,OACzB6/B,KAAaoB,EAASjhC,wBAKpB+/B,OACEkB,EAAUd,EAAWngC,OACzB2/B,KAAWsB,EAASjhC,mEAqFbq/B,kOC3JbvkC,OAAO0jC,OAASA,GAChB1jC,OAAOq1B,KAAOA,GACd,IAAI+Q,GAAQ,GACZ,GAAGpmC,OAAOqmC,aAAaC,QAAQ,SAC7BF,GAAQnZ,KAAKsZ,MAAMF,aAAaC,QAAQ,cACnC,CACLF,GAAQ,CACNI,UAAW,GACXC,UAAW,GACXC,WAAY,IAAI3/B,MAAM,IAAIoE,KAAK,GAC/Bw7B,WAAY,IAAI5/B,MAAM,IAAIoE,KAAK,GAC/By7B,MAAO,CACL,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,IAElBC,WAAY,EACZC,aAAc,EACdC,UAAW,GACXC,UAAW,GACXC,KAAM,CACJ,CACExiC,KAAM,aACN5Z,MAAO,CAAEI,EAAG,GAAKC,EAAG,GAAKC,EAAG,KAE9B,CACEsZ,KAAM,aACN5Z,MAAO,CAAEI,EAAG,GAAKC,EAAG,EAAKC,EAAG,MAKlC,IAAI,IAAIgC,EAAI,EAAGA,EAAIi5C,GAAMW,UAAW55C,IAClCi5C,GAAMK,UAAU71C,KAAKzD,EAAI,GAG3B,IAAI,IAAIA,EAAI,EAAGA,EAAIi5C,GAAMY,UAAW75C,IAClCi5C,GAAMI,UAAU51C,KAAK,EAAM,GAO/B,MAAMqQ,GAAQsL,GAASm3B,GAAO0C,KAG9B,IAAIx3C,MACEoS,WAAUlP,IACd,IAAIxG,EAAIwG,EAAMupC,OACdr7B,OAAO6E,KAAOvZ,EACdsD,GAAItD,EACJ+6C,aAAaa,QAAQ,QAASja,KAAKC,UAAU5hC,OAI/C0U,OAAO6I,OAAS,WACdw9B,aAAaa,QAAQ,QAASja,KAAKC,UAAUt+B,MAG/CoR,OAAOmnC,KAAO,WACZd,aAAae,WAAW,iBCmCX,IAnGf,MACE1gC,eAGAA,2BAA2B0/B,EAAOS,EAAYC,GAC5C,IAAIF,EAAQ,IAAI7/B,MAAM8/B,GACtB,IAAI,IAAI15C,EAAI,EAAGA,EAAI05C,EAAY15C,IAC7By5C,EAAMz5C,GAAK,IAAI4Z,MAAM+/B,GAGvB,IAAI,IAAI35C,EAAI,EAAGA,EAAI05C,EAAY15C,IAC7B,IAAI,IAAI24C,EAAI,EAAGA,EAAIgB,EAAchB,SACEpjC,IAA9B0jC,EAAM/I,MAAM,CAAC,QAASlwC,UAAsDuV,IAAjC0jC,EAAM/I,MAAM,CAAC,QAASlwC,EAAG24C,IACrEc,EAAMz5C,GAAG24C,GAAKM,EAAM/I,MAAM,CAAC,QAASlwC,EAAG24C,IAEvCc,EAAMz5C,GAAG24C,GAAK,EAKpB,OAAOM,EAAMtX,eAAelgC,IAC1BA,EAAE+Y,IAAI,aAAck/B,GACpBj4C,EAAE+Y,IAAI,eAAgBm/B,GACtBl4C,EAAE+Y,IAAI,QAAS+7B,GAAOkD,IACfh4C,KAIX8X,gBAAgB0/B,EAAOW,GACrB,IAAIM,EAAcN,EAAYX,EAAMv+B,IAAI,aACxC,OAAmB,IAAhBw/B,EACMjB,EAEFA,EAAMtX,eAAelgC,IAC1BA,EAAE+Y,IAAI,YAAao/B,GACnB,IAAIL,EAAa37C,KAAKu8C,gBAAgB14C,EAAEiZ,IAAI,cAAew/B,GAC3Dz4C,EAAE+Y,IAAI,aAAc++B,GACpB,IAAID,EAAY17C,KAAKu8C,gBAAgB14C,EAAEiZ,IAAI,aAAcw/B,GACzDz4C,EAAE+Y,IAAI,YAAa8+B,MAIvB//B,gBAAgB0/B,EAAOY,GACrB,IAAIK,EAAcL,EAAYZ,EAAMv+B,IAAI,aACxC,OAAmB,IAAhBw/B,EACMjB,EAGFA,EAAMtX,eAAelgC,IAC1BA,EAAE+Y,IAAI,YAAaq/B,GACnB,IAAIL,EAAa57C,KAAKu8C,gBAAgB14C,EAAEiZ,IAAI,cAAew/B,GAC3Dz4C,EAAE+Y,IAAI,aAAcg/B,MAIxBjgC,aAAa0/B,EAAOmB,EAASC,EAAYC,GACvC,IAAIC,EAAWtB,EAAM/K,OACjB/lC,EAAwB,SAAfkyC,EAAwBE,EAASX,UAAYW,EAASV,UAEjD,SAAfQ,GACDD,EAAQ5jB,UAEV,IAAIa,EAAQ,IAAIzd,MAAMzR,GAClBg3B,EAAS,EACb,IAAI,IAAIn/B,EAAI,EAAGA,EAAImI,EAAQnI,IAAK,CAC3Bs6C,GAAyB,IAANt6C,GAAYA,GAAKo6C,EAAQjyC,OAAS,IAAQ,IAC9Dg3B,GAAU,GAEZ,IAAIwZ,EAAI34C,EAAIm/B,EACRhhC,EAAIw6C,EAAKyB,EAAc,OACxBE,GAAmBz9C,KAAKoD,MAAM04C,EAAIyB,EAAQjyC,QAAU,GAAO,IAC5DhK,EAAIi8C,EAAQjyC,OAAUwwC,EAAIyB,EAAQjyC,OAAU,GAE9CkvB,EAAMr3B,GAAKo6C,EAAQj8C,GASrB,MANkB,SAAfk8C,EACDE,EAASjB,UAAYjiB,EAErBkjB,EAASlB,UAAYhiB,EAGhBkf,GAAOgE,GAGhBhhC,gBAAgB8d,EAAO6iB,EAAaM,EAAe,GAUjD,OATenjB,EAAMsK,eAAc8Y,IACjC,GAAGP,EAAc,EACf,IAAI,IAAIl6C,EAAI,EAAGA,EAAIk6C,EAAal6C,IAC9By6C,EAAGh3C,KAAK+2C,QAGVC,EAAKA,EAAG/7B,OAAO+7B,EAAG9yC,KAAOuyC,q9BCzDqBvlC,6CAIEA,6CAIHA,6CAIAA,gHAfpCA,yCAGqCA,UAAAA,wBAIEA,UAAAA,wBAIHA,UAAAA,wBAIAA,UAAAA,2FA3C/C+kC,EAAagB,EAAOhgC,IAAI,cACxBi/B,EAAee,EAAOhgC,IAAI,gBAC1Bk/B,EAAYc,EAAOhgC,IAAI,aACvBm/B,EAAYa,EAAOhgC,IAAI,qCACX3C,GACdA,EAAMuY,qBACFiqB,EAAWG,EACXC,GAAU,EAEZD,EAAOhgC,IAAI,gBAAkBg/B,GAC7BgB,EAAOhgC,IAAI,kBAAoBi/B,IAC/BgB,GAAU,EACVJ,EAAWK,GAAUC,2BAA2BN,EAAUb,EAAYC,IAErEe,EAAOhgC,IAAI,eAAiBk/B,IAC7Be,GAAU,EACVJ,EAAWK,GAAUE,gBAAgBP,EAAUX,IAE9Cc,EAAOhgC,IAAI,eAAiBm/B,IAC7Bc,GAAU,EACVJ,EAAWK,GAAUG,gBAAgBR,EAAUV,IAE9Cc,GACD1B,GAAMv9B,QAAQ/W,GAAU41C,IAE1B1D,GAAGn7B,QAAOs/B,GAAKA,EAAExgC,IAAI,gBAAiB,iBAMYk/B,mCAIEC,mCAIHC,mCAIAC,2FChDtC,MAAMoB,GACnB1hC,YAAY2hC,EAAIC,EAAYC,EAAWC,EAAOC,EAAWJ,EAAGK,WAC1D39C,KAAKs9C,GAAKA,EACNC,aAAsBK,aACxB59C,KAAKu9C,WAAaA,EAElBv9C,KAAKu9C,WAAa,IAAIK,aAAaL,GAGjCC,aAAqBK,YACvB79C,KAAKw9C,UAAYA,EAEjBx9C,KAAKw9C,UAAY,IAAIK,YAAYL,GAGnCx9C,KAAK09C,SAAWA,EAChB19C,KAAKy9C,MAAQA,EACbz9C,KAAK89C,WAAWR,GAGlB3hC,WAAW2hC,GACTt9C,KAAK+9C,QAAUT,EAAGU,eAClBV,EAAGW,WAAWX,EAAGY,aAAcl+C,KAAK+9C,SACpCT,EAAGa,WAAWb,EAAGY,aAAcl+C,KAAKu9C,WAAYD,EAAGc,kBAC5BzmC,IAAnB3X,KAAKw9C,YACPx9C,KAAKq+C,SAAWf,EAAGU,eACnBV,EAAGW,WAAWX,EAAGgB,qBAAsBt+C,KAAKq+C,UAC5Cf,EAAGa,WAAWb,EAAGgB,qBAAsBt+C,KAAKw9C,UAAWF,EAAGc,cAE5Dp+C,KAAKu+C,eAAgB,EAGvB5iC,OACE,IAA2B,IAAvB3b,KAAKu+C,cAEP,YADAp4B,QAAQwb,MAAM,2CAGhB,MAAM6c,EAAUx+C,KAAKy9C,MAAMh3B,QAAO,CAACpmB,EAAGD,IAAMC,EAAID,IAChDJ,KAAKs9C,GAAGW,WAAWj+C,KAAKs9C,GAAGY,aAAcl+C,KAAK+9C,cACvBpmC,IAAnB3X,KAAKw9C,WACPx9C,KAAKs9C,GAAGW,WAAWj+C,KAAKs9C,GAAGgB,qBAAsBt+C,KAAKq+C,UAExD,IAAII,EAAU,EACd,IAAK,IAAIr8C,EAAI,EAAGA,EAAIpC,KAAKy9C,MAAMlzC,OAAQnI,IACrCpC,KAAKs9C,GAAGoB,oBAAoBt8C,EAAGpC,KAAKy9C,MAAMr7C,GAAIpC,KAAKs9C,GAAGqB,OAAO,EAAiB,EAAVH,EAAuB,EAAVC,GACjFz+C,KAAKs9C,GAAGsB,wBAAwBx8C,GAChCq8C,GAAWz+C,KAAKy9C,MAAMr7C,GAI1BuZ,OACE3b,KAAKs9C,GAAGuB,aAAa7+C,KAAK09C,SAAU19C,KAAKw9C,UAAUjzC,OAAQvK,KAAKs9C,GAAGwB,eAAgB,GAGrFnjC,SACE,IAAK,IAAIvZ,EAAI,EAAGA,EAAIpC,KAAKy9C,MAAMlzC,OAAQnI,IACrCpC,KAAKs9C,GAAGyB,yBAAyB38C,QAEZuV,IAAnB3X,KAAKw9C,WACPx9C,KAAKs9C,GAAGW,WAAWj+C,KAAKs9C,GAAGgB,qBAAsB,MAEnDt+C,KAAKs9C,GAAGW,WAAWj+C,KAAKs9C,GAAGY,aAAc,MAG3CviC,OACE3b,KAAKs9C,GAAG0B,aAAah/C,KAAK+9C,SACvB/9C,KAAKq+C,UACNr+C,KAAKs9C,GAAG0B,aAAah/C,KAAKq+C,WCnEjB,MAAMY,GACnBtjC,YAAYtG,GACVrV,KAAKk/C,KAAO7pC,EAAI6pC,KAChBl/C,KAAK2oB,KAAOtT,EAAIsT,KAChB3oB,KAAKm/C,WAAan/C,KAAKo/C,cAAc/pC,EAAI6pC,MAG3CvjC,cAAcsO,GACZ,OAAOjqB,KAAKk/C,KACTl7B,MAAM,MACNxE,QAAO6/B,GAAOA,EAAIzhB,SAAS,eAC3Bre,KAAIlf,GAAKA,EAAE6qB,UAAU7qB,EAAE+xC,YAAY,KAAO,EAAG/xC,EAAEkK,OAAS,KAG7DoR,OACE,IAAI3b,KAAKs/C,SACP,MAAM,IAAIhjC,MAAM,gCAElBtc,KAAKs9C,GAAGiC,WAAWv/C,KAAKw/C,SAG1B7jC,QAAQ2hC,GAEN,GADAt9C,KAAKs9C,GAAKA,GACLt9C,KAAKs/C,SAAU,CAClBt/C,KAAKy/C,SAAW,GAChB,MAAMC,EAAc1/C,KAAK2/C,cAAc3/C,KAAKs9C,GAAIt9C,KAAKk/C,KAAM5B,EAAGsC,eACxDC,EAAc7/C,KAAK2/C,cAAc3/C,KAAKs9C,GAAIt9C,KAAK2oB,KAAM20B,EAAGwC,iBAC9D9/C,KAAKw/C,QAAUx/C,KAAK+/C,oBAAoB//C,KAAKs9C,GAAIoC,EAAaG,GAC9D7/C,KAAKs/C,UAAW,GAIpB3jC,aACE,OAAO3b,KAAKs/C,SAGd3jC,cAAc2hC,EAAIjoC,EAAKuL,GACrB,MAAMo/B,EAAS1C,EAAG2C,aAAar/B,GAG/B,OAFA08B,EAAG4C,aAAaF,EAAQ3qC,GACxBioC,EAAGqC,cAAcK,GACZ1C,EAAG6C,mBAAmBH,EAAQ1C,EAAG8C,gBAO/BJ,GANL75B,QAAQwb,MAAM,gCAAgC2b,EAAG+C,iBAAiBL,MAClE75B,QAAQm6B,eAAe,iBACvBn6B,QAAQo6B,IAAIlrC,GACZ8Q,QAAQq6B,WACD,MAKX7kC,oBAAoB2hC,EAAImD,EAAcC,GACpC,MAAMC,EAAgBrD,EAAGsD,gBACzBtD,EAAGuD,aAAaF,EAAeF,GAC/BnD,EAAGuD,aAAaF,EAAeD,GAE/B,IAAI,IAAIt+C,EAAI,EAAGA,EAAIpC,KAAKm/C,WAAW50C,OAAQnI,IACzCk7C,EAAGwD,mBAAmBH,EAAev+C,EAAGpC,KAAKm/C,WAAW/8C,IAI1D,GADAk7C,EAAGyD,YAAYJ,IACVrD,EAAG0D,oBAAoBL,EAAerD,EAAG2D,aAAc,CAC1D,IAAIC,EAAO5D,EAAG6D,kBAAkBR,GAChCx6B,QAAQwb,MAAM,+BAA+Buf,KAG/C,OADA5D,EAAGiC,WAAWoB,GACPA,EAIThlC,iBAAiBylC,GACf,QAAkCzpC,IAA/B3X,KAAKy/C,SAAS2B,GAA4B,CAC3C,IAAIC,EAASrhD,KAAKs9C,GAAGgE,mBAAmBthD,KAAKw/C,QAAS4B,GACtDphD,KAAKy/C,SAAS2B,GAAeC,EAE/B,OAAOrhD,KAAKy/C,SAAS2B,GAGvBzlC,QAAQylC,EAAar6C,GACnB,IAAIw6C,EAAgBvhD,KAAKwhD,iBAAiBJ,GAC1CphD,KAAKs9C,GAAGmE,UAAUF,EAAex6C,EAAM,EAAE,GAG3C4U,OAAOylC,EAAar6C,GAClB,IAAIw6C,EAAgBvhD,KAAKwhD,iBAAiBJ,GAC1CphD,KAAKs9C,GAAGmE,UAAUF,EAAex6C,GAGnC4U,SAASylC,EAAar6C,GACpB,IAAIw6C,EAAgBvhD,KAAKwhD,iBAAiBJ,GAC1CphD,KAAKs9C,GAAGoE,UAAUH,EAAex6C,GAGnC4U,QAAQylC,EAAar6C,GACnB,IAAIw6C,EAAgBvhD,KAAKwhD,iBAAiBJ,GAC1CphD,KAAKs9C,GAAGqE,WAAWJ,EAAex6C,GAGpC4U,QAAQylC,EAAar6C,GACnB,IAAIw6C,EAAgBvhD,KAAKwhD,iBAAiBJ,GAC1CphD,KAAKs9C,GAAGsE,WAAWL,EAAex6C,GAGpC4U,QAAQylC,EAAar6C,GACnB,IAAIw6C,EAAgBvhD,KAAKwhD,iBAAiBJ,GAC1CphD,KAAKs9C,GAAGuE,WAAWN,EAAex6C,GAGpC4U,QAAQylC,EAAar6C,GACnB,IAAIw6C,EAAgBvhD,KAAKwhD,iBAAiBJ,GAC1CphD,KAAKs9C,GAAGwE,iBAAiBP,GAAe,EAAOx6C,GAGjD4U,QAAQylC,EAAar6C,GACnB,IAAIw6C,EAAgBvhD,KAAKwhD,iBAAiBJ,GAC1CphD,KAAKs9C,GAAGyE,iBAAiBR,GAAe,EAAOx6C,GAGjD4U,aAAaylC,EAAar6C,GACxB/G,KAAKgiD,OAAOZ,EAAar6C,GAG3B4U,SACE3b,KAAKs9C,GAAGiC,WAAW,WCrHZ0C,GAAU,KACVC,GAAqC,oBAAjBtE,aAA+BA,aAAe5hC,MCMtE,SAAStG,KACd,IAAI9L,EAAM,IAAIu4C,GAAoB,IAqBlC,OAnBIA,IAAuBvE,eACzBh0C,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,GAGZA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,EAmJF,SAASw4C,GAASx4C,GAiBvB,OAhBAA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,EA2QF,SAASy4C,GAAUz4C,EAAKvJ,EAAGE,GAChC,IAGI+hD,EAAKC,EAAKC,EAAKC,EACfC,EAAKC,EAAKC,EAAKC,EACfC,EAAKC,EAAKC,EAAKC,EALf/Y,EAAI3pC,EAAE,GACNs5C,EAAIt5C,EAAE,GACN2iD,EAAI3iD,EAAE,GAyCV,OApCIF,IAAMuJ,GACRA,EAAI,IAAMvJ,EAAE,GAAK6pC,EAAI7pC,EAAE,GAAKw5C,EAAIx5C,EAAE,GAAK6iD,EAAI7iD,EAAE,IAC7CuJ,EAAI,IAAMvJ,EAAE,GAAK6pC,EAAI7pC,EAAE,GAAKw5C,EAAIx5C,EAAE,GAAK6iD,EAAI7iD,EAAE,IAC7CuJ,EAAI,IAAMvJ,EAAE,GAAK6pC,EAAI7pC,EAAE,GAAKw5C,EAAIx5C,EAAE,IAAM6iD,EAAI7iD,EAAE,IAC9CuJ,EAAI,IAAMvJ,EAAE,GAAK6pC,EAAI7pC,EAAE,GAAKw5C,EAAIx5C,EAAE,IAAM6iD,EAAI7iD,EAAE,MAE9CiiD,EAAMjiD,EAAE,GACRkiD,EAAMliD,EAAE,GACRmiD,EAAMniD,EAAE,GACRoiD,EAAMpiD,EAAE,GACRqiD,EAAMriD,EAAE,GACRsiD,EAAMtiD,EAAE,GACRuiD,EAAMviD,EAAE,GACRwiD,EAAMxiD,EAAE,GACRyiD,EAAMziD,EAAE,GACR0iD,EAAM1iD,EAAE,GACR2iD,EAAM3iD,EAAE,IACR4iD,EAAM5iD,EAAE,IACRuJ,EAAI,GAAK04C,EACT14C,EAAI,GAAK24C,EACT34C,EAAI,GAAK44C,EACT54C,EAAI,GAAK64C,EACT74C,EAAI,GAAK84C,EACT94C,EAAI,GAAK+4C,EACT/4C,EAAI,GAAKg5C,EACTh5C,EAAI,GAAKi5C,EACTj5C,EAAI,GAAKk5C,EACTl5C,EAAI,GAAKm5C,EACTn5C,EAAI,IAAMo5C,EACVp5C,EAAI,IAAMq5C,EACVr5C,EAAI,IAAM04C,EAAMpY,EAAIwY,EAAM7I,EAAIiJ,EAAMI,EAAI7iD,EAAE,IAC1CuJ,EAAI,IAAM24C,EAAMrY,EAAIyY,EAAM9I,EAAIkJ,EAAMG,EAAI7iD,EAAE,IAC1CuJ,EAAI,IAAM44C,EAAMtY,EAAI0Y,EAAM/I,EAAImJ,EAAME,EAAI7iD,EAAE,IAC1CuJ,EAAI,IAAM64C,EAAMvY,EAAI2Y,EAAMhJ,EAAIoJ,EAAMC,EAAI7iD,EAAE,KAGrCuJ,EAWF,SAASu5C,GAAMv5C,EAAKvJ,EAAGE,GAC5B,IAAI2pC,EAAI3pC,EAAE,GACNs5C,EAAIt5C,EAAE,GACN2iD,EAAI3iD,EAAE,GAiBV,OAhBAqJ,EAAI,GAAKvJ,EAAE,GAAK6pC,EAChBtgC,EAAI,GAAKvJ,EAAE,GAAK6pC,EAChBtgC,EAAI,GAAKvJ,EAAE,GAAK6pC,EAChBtgC,EAAI,GAAKvJ,EAAE,GAAK6pC,EAChBtgC,EAAI,GAAKvJ,EAAE,GAAKw5C,EAChBjwC,EAAI,GAAKvJ,EAAE,GAAKw5C,EAChBjwC,EAAI,GAAKvJ,EAAE,GAAKw5C,EAChBjwC,EAAI,GAAKvJ,EAAE,GAAKw5C,EAChBjwC,EAAI,GAAKvJ,EAAE,GAAK6iD,EAChBt5C,EAAI,GAAKvJ,EAAE,GAAK6iD,EAChBt5C,EAAI,IAAMvJ,EAAE,IAAM6iD,EAClBt5C,EAAI,IAAMvJ,EAAE,IAAM6iD,EAClBt5C,EAAI,IAAMvJ,EAAE,IACZuJ,EAAI,IAAMvJ,EAAE,IACZuJ,EAAI,IAAMvJ,EAAE,IACZuJ,EAAI,IAAMvJ,EAAE,IACLuJ,EAqnBF,SAASw5C,GAA6Bx5C,EAAKpH,EAAGjC,EAAGD,GAEtD,IAAI4pC,EAAI1nC,EAAE,GACNq3C,EAAIr3C,EAAE,GACN0gD,EAAI1gD,EAAE,GACN6gD,EAAI7gD,EAAE,GACN8gD,EAAKpZ,EAAIA,EACTqZ,EAAK1J,EAAIA,EACT2J,EAAKN,EAAIA,EACTO,EAAKvZ,EAAIoZ,EACTI,EAAKxZ,EAAIqZ,EACTI,EAAKzZ,EAAIsZ,EACTI,EAAK/J,EAAI0J,EACTM,EAAKhK,EAAI2J,EACTM,EAAKZ,EAAIM,EACTO,EAAKV,EAAIC,EACTU,EAAKX,EAAIE,EACTU,EAAKZ,EAAIG,EACTU,EAAK5jD,EAAE,GACP6jD,EAAK7jD,EAAE,GACP8jD,EAAK9jD,EAAE,GAiBX,OAhBAsJ,EAAI,IAAM,GAAKg6C,EAAKE,IAAOI,EAC3Bt6C,EAAI,IAAM85C,EAAKO,GAAMC,EACrBt6C,EAAI,IAAM+5C,EAAKK,GAAME,EACrBt6C,EAAI,GAAK,EACTA,EAAI,IAAM85C,EAAKO,GAAME,EACrBv6C,EAAI,IAAM,GAAK65C,EAAKK,IAAOK,EAC3Bv6C,EAAI,IAAMi6C,EAAKE,GAAMI,EACrBv6C,EAAI,GAAK,EACTA,EAAI,IAAM+5C,EAAKK,GAAMI,EACrBx6C,EAAI,IAAMi6C,EAAKE,GAAMK,EACrBx6C,EAAI,KAAO,GAAK65C,EAAKG,IAAOQ,EAC5Bx6C,EAAI,IAAM,EACVA,EAAI,IAAMrJ,EAAE,GACZqJ,EAAI,IAAMrJ,EAAE,GACZqJ,EAAI,IAAMrJ,EAAE,GACZqJ,EAAI,IAAM,EACHA,EC1qCF,SAAS8L,KACd,IAAI9L,EAAM,IAAIu4C,GAAoB,GAQlC,OANIA,IAAuBvE,eACzBh0C,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,GAGJA,EAsCF,SAASy6C,GAAWna,EAAG2P,EAAGqJ,GAC/B,IAAIt5C,EAAM,IAAIu4C,GAAoB,GAIlC,OAHAv4C,EAAI,GAAKsgC,EACTtgC,EAAI,GAAKiwC,EACTjwC,EAAI,GAAKs5C,EACFt5C,EAoTF,SAAS06C,GAAM16C,EAAKvJ,EAAGD,GAC5B,IAAImkD,EAAKlkD,EAAE,GACPmkD,EAAKnkD,EAAE,GACPokD,EAAKpkD,EAAE,GACPqkD,EAAKtkD,EAAE,GACPukD,EAAKvkD,EAAE,GACPwkD,EAAKxkD,EAAE,GAIX,OAHAwJ,EAAI,GAAK46C,EAAKI,EAAKH,EAAKE,EACxB/6C,EAAI,GAAK66C,EAAKC,EAAKH,EAAKK,EACxBh7C,EAAI,GAAK26C,EAAKI,EAAKH,EAAKE,EACjB96C,EFtVJ3K,KAAK4lD,QAAO5lD,KAAK4lD,MAAQ,WAI5B,IAHA,IAAIhL,EAAI,EACJz3C,EAAIwG,UAAU2B,OAEXnI,KACLy3C,GAAKjxC,UAAUxG,GAAKwG,UAAUxG,GAGhC,OAAOnD,KAAK6lD,KAAKjL,KE+qBZ,IAqBDkL,GArBKltC,GAnrBJ,SAAgBxX,GACrB,IAAI6pC,EAAI7pC,EAAE,GACNw5C,EAAIx5C,EAAE,GACN6iD,EAAI7iD,EAAE,GACV,OAAOpB,KAAK4lD,MAAM3a,EAAG2P,EAAGqJ,IAosBpB6B,GAAMrvC,MC/HS,WACnB,IAzmBI9L,EAymBAm7C,GAzmBAn7C,EAAM,IAAIu4C,GAAoB,GAE9BA,IAAuBvE,eACzBh0C,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,GAGJA,GA+lBY,GCtmBd,SAAS8L,KACd,IAAI9L,EAAM,IAAIu4C,GAAoB,GASlC,OAPIA,IAAuBvE,eACzBh0C,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,GAGXA,EAAI,GAAK,EACFA,EA0BF,SAASo7C,GAAap7C,EAAKq7C,EAAMC,GACtCA,GAAY,GACZ,IAAI5kD,EAAIrB,KAAKkmD,IAAID,GAKjB,OAJAt7C,EAAI,GAAKtJ,EAAI2kD,EAAK,GAClBr7C,EAAI,GAAKtJ,EAAI2kD,EAAK,GAClBr7C,EAAI,GAAKtJ,EAAI2kD,EAAK,GAClBr7C,EAAI,GAAK3K,KAAKmmD,IAAIF,GACXt7C,EAkOF,SAASy7C,GAAMz7C,EAAKvJ,EAAGD,EAAGqC,GAG/B,IAQI6iD,EAAOC,EAAOC,EAAOC,EAAQC,EAR7BnB,EAAKlkD,EAAE,GACPmkD,EAAKnkD,EAAE,GACPokD,EAAKpkD,EAAE,GACPslD,EAAKtlD,EAAE,GACPqkD,EAAKtkD,EAAE,GACPukD,EAAKvkD,EAAE,GACPwkD,EAAKxkD,EAAE,GACPwlD,EAAKxlD,EAAE,GAgCX,OA7BAmlD,EAAQhB,EAAKG,EAAKF,EAAKG,EAAKF,EAAKG,EAAKe,EAAKC,GAE/B,IACVL,GAASA,EACTb,GAAMA,EACNC,GAAMA,EACNC,GAAMA,EACNgB,GAAMA,GAIJ,EAAML,EAAQM,IAEhBP,EAAQrmD,KAAK6mD,KAAKP,GAClBC,EAAQvmD,KAAKkmD,IAAIG,GACjBG,EAASxmD,KAAKkmD,KAAK,EAAM1iD,GAAK6iD,GAASE,EACvCE,EAASzmD,KAAKkmD,IAAI1iD,EAAI6iD,GAASE,IAI/BC,EAAS,EAAMhjD,EACfijD,EAASjjD,GAIXmH,EAAI,GAAK67C,EAASlB,EAAKmB,EAAShB,EAChC96C,EAAI,GAAK67C,EAASjB,EAAKkB,EAASf,EAChC/6C,EAAI,GAAK67C,EAAShB,EAAKiB,EAASd,EAChCh7C,EAAI,GAAK67C,EAASE,EAAKD,EAASE,EACzBh8C,EAoRF,IAgCDm8C,GACAC,GACAC,GAuCAC,GACAC,GCvpBAv8C,GD2qBAw8C,GA9FKC,GDlPJ,SAAmBz8C,EAAKvJ,GAC7B,IAAI6pC,EAAI7pC,EAAE,GACNw5C,EAAIx5C,EAAE,GACN6iD,EAAI7iD,EAAE,GACNgjD,EAAIhjD,EAAE,GACNwX,EAAMqyB,EAAIA,EAAI2P,EAAIA,EAAIqJ,EAAIA,EAAIG,EAAIA,EAUtC,OARIxrC,EAAM,IACRA,EAAM,EAAI5Y,KAAK6lD,KAAKjtC,IAGtBjO,EAAI,GAAKsgC,EAAIryB,EACbjO,EAAI,GAAKiwC,EAAIhiC,EACbjO,EAAI,GAAKs5C,EAAIrrC,EACbjO,EAAI,GAAKy5C,EAAIxrC,EACNjO,GCmQHm8C,GAAUO,KACVN,GAAYO,GAAgB,EAAG,EAAG,GAClCN,GAAYM,GAAgB,EAAG,EAAG,GAuClCL,GAAQxwC,KACRywC,GAAQzwC,KCvpBR9L,GAAM,IAAIu4C,GAAoB,GAE9BA,IAAuBvE,eACzBh0C,GAAI,GAAK,EACTA,GAAI,GAAK,EACTA,GAAI,GAAK,EACTA,GAAI,GAAK,EACTA,GAAI,GAAK,EACTA,GAAI,GAAK,GAGXA,GAAI,GAAK,EACTA,GAAI,GAAK,EACTA,GAAI,GAAK,ED8pBLw8C,GC7pBGx8C,GCfF,SAAS8L,KACd,IAAI9L,EAAM,IAAIu4C,GAAoB,GAOlC,OALIA,IAAuBvE,eACzBh0C,EAAI,GAAK,EACTA,EAAI,GAAK,GAGJA,EAiEF,SAASoU,GAAIpU,EAAKvJ,EAAGD,GAG1B,OAFAwJ,EAAI,GAAKvJ,EAAE,GAAKD,EAAE,GAClBwJ,EAAI,GAAKvJ,EAAE,GAAKD,EAAE,GACXwJ,EAgOF,SAASy8C,GAAUz8C,EAAKvJ,GAC7B,IAAI6pC,EAAI7pC,EAAE,GACNw5C,EAAIx5C,EAAE,GACNwX,EAAMqyB,EAAIA,EAAI2P,EAAIA,EAStB,OAPIhiC,EAAM,IAERA,EAAM,EAAI5Y,KAAK6lD,KAAKjtC,IAGtBjO,EAAI,GAAKvJ,EAAE,GAAKwX,EAChBjO,EAAI,GAAKvJ,EAAE,GAAKwX,EACTjO,EAUF,SAAS48C,GAAInmD,EAAGD,GACrB,OAAOC,EAAE,GAAKD,EAAE,GAAKC,EAAE,GAAKD,EAAE,GA8GzB,SAASqmD,GAAc78C,EAAKvJ,EAAGgf,GACpC,IAAI6qB,EAAI7pC,EAAE,GACNw5C,EAAIx5C,EAAE,GAGV,OAFAuJ,EAAI,GAAKyV,EAAE,GAAK6qB,EAAI7qB,EAAE,GAAKw6B,EAAIx6B,EAAE,IACjCzV,EAAI,GAAKyV,EAAE,GAAK6qB,EAAI7qB,EAAE,GAAKw6B,EAAIx6B,EAAE,IAC1BzV,EA8FF,IAAIiO,GA3RJ,SAAgBxX,GACrB,IAAI6pC,EAAI7pC,EAAE,GACNw5C,EAAIx5C,EAAE,GACV,OAAOpB,KAAK4lD,MAAM3a,EAAG2P,IA8RZ6M,GAncJ,SAAkB98C,EAAKvJ,EAAGD,GAG/B,OAFAwJ,EAAI,GAAKvJ,EAAE,GAAKD,EAAE,GAClBwJ,EAAI,GAAKvJ,EAAE,GAAKD,EAAE,GACXwJ,GAscE+8C,GA3bJ,SAAkB/8C,EAAKvJ,EAAGD,GAG/B,OAFAwJ,EAAI,GAAKvJ,EAAE,GAAKD,EAAE,GAClBwJ,EAAI,GAAKvJ,EAAE,GAAKD,EAAE,GACXwJ,IA8dY,WACnB,IAAIm7C,EAAMrvC,KADS,0NC7IKqB,KAAM3Q,UAAY,QAAU,kBACvC2Q,uHAPqBA,+HALgBA,gBAAiBA,wGAD1CA,4BAA6BA,kBActC6vC,gBACAA,6CAHQ7vC,KAAM3Q,UAAY,QAAU,0CACvC2Q,eAAAA,yCAPqBA,6CALgBA,gBAAiBA,gGA3a/DyiC,GAAS7/B,SAASC,cAAc,UAChCgwB,GAAOjwB,SAASktC,KACpBrN,GAAO5+B,aAAa,QAAS,sBAC7B4+B,GAAOe,MAAQ,IACff,GAAOqB,OAAS,QAOZ/vB,GANAwyB,GAAK9D,GAAO38B,WAAW,SACzBiqC,oBAAoB,EACpBC,uBAAuB,IAEzBzJ,GAAG0J,WAAW,EAAG,EAAG,EAAG,OAGnB1+B,MACA2+B,IAAY,EACZC,IAAmB,EACnBC,IAAiB,EAEjBC,OAAuBnI,IAASt2B,+4BAAsBu2B,kPAC1DkI,GAAiBC,QAAQ/J,QACrBgK,OAAmBrI,IAASt2B,8bAAkBu2B,8NAClDoI,GAAaD,QAAQ/J,QACjBiK,OAAkBtI,IAASt2B,0GAAiBu2B,kJAChDqI,GAAYF,QAAQ/J,QAEhBkK,OAAWnK,GACbC,IAEE,EAAG,GACF,EAAG,GACH,GAAI,EACL,GAAI,IAEL,EAAG,EAAG,EACL,EAAG,EAAG,IACP,IAEC76C,KACD,EAAG,IACH,mBAAqB,MACpB,mBAAqB,KAErBglD,GAAOhlD,GACPilD,IACFC,KACAA,KACAA,MAEEC,KACD,EAAK,EAAK,IACV,EAAK,EAAK,IACV,EAAK,EAAK,IAGTC,OAAexK,GACjBC,IAEE76C,GAAE,GAAG,GAAIA,GAAE,GAAG,GAAImlD,GAAG,GAAG,GAAIA,GAAG,GAAG,GAAIA,GAAG,GAAG,GAC5CnlD,GAAE,GAAG,GAAIA,GAAE,GAAG,GAAImlD,GAAG,GAAG,GAAIA,GAAG,GAAG,GAAIA,GAAG,GAAG,GAC5CnlD,GAAE,GAAG,GAAIA,GAAE,GAAG,GAAImlD,GAAG,GAAG,GAAIA,GAAG,GAAG,GAAIA,GAAG,GAAG,KAE7C,EAAG,EAAG,IACN,EAAG,IAEFE,OC/CS,cC/BA,MACbnsC,KAAK2hC,GACHt9C,KAAK+nD,SAAS1U,KAAKiK,GAGrB3hC,OAAO2hC,GACLt9C,KAAK+nD,SAAS1U,KAAKiK,GAGrB3hC,KAAK2hC,GACHt9C,KAAK+nD,SAASC,KAAK1K,KDsBrB3hC,YAAY2hC,EAAI2K,EAAS,EAAGC,EAAc,IACxCC,QACAnoD,KAAKioD,OAASA,EACdjoD,KAAK+nD,SAhCT,SAA0BzK,EAAI8K,EAAWF,GACvC,IAAID,EAAS,CAAC,EAAG,EAAG,GAChB7M,EAAU,GACd,IAAI,IAAIh5C,EAAI,EAAGA,EAAsB,GAAjBgmD,EAAY,GAAQhmD,IAAK,CAC3C,IAAI8iD,EAAOjmD,KAAKopD,GAAKD,EAAahmD,EAC9BkmD,EAAU,EACV,EAAMJ,GAAe,EAAKjpD,KAAKkmD,IAAID,IACpC,EAAMgD,GAAe,EAAIjpD,KAAKmmD,IAAIF,IAGlC9iD,EAAI,GAAM,GACX6lD,EAAOpiD,KAAK5G,KAAKkmD,IAAID,GAAOoD,EAAQ,IACpCL,EAAOpiD,KAAK5G,KAAKmmD,IAAIF,GAAOoD,EAAQ,MAEpCL,EAAOpiD,KAAK5G,KAAKkmD,IAAID,GAAOgD,EAAcI,EAAQ,IAClDL,EAAOpiD,KAAK5G,KAAKmmD,IAAIF,GAAOgD,EAAcI,EAAQ,KAEpDL,EAAOpiD,KAAK,GAGd,IAAI,IAAIzD,EAAI,EAAGA,EAAIgmD,EAAWhmD,IAC5B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GACbmd,KAAIrL,GAAKA,EAAM,EAAF9R,IACbyT,SAAQ3B,GAAKknC,EAAQv1C,KAAKqO,KAE/B,OAAO,IAAImpC,GAAYC,EAAI2K,EAAQ7M,EAAS,CAAC,GAAIkC,EAAGK,WAOlC4K,CAAiBjL,EAAI2K,EAAQC,KD2C3B5K,GAAI,GAAI,IACxBkL,GAAgBC,cAGX7B,GAAiBzsC,OACpBwJ,EAAMxJ,EAAMtB,OAAO9R,MACnBjH,EAAQD,MAAc8jB,QACR,IAAfA,EAAIpZ,QAAgBzK,EAAMuG,eACvB/E,EAAMxB,EAAMiG,QAChB2iD,GACEpnD,EAAIF,EAAI,IACRE,EAAIhB,EACJgB,EAAIf,aAmBDooD,GAAkBxuC,MACzBA,EAAMuY,kBACW,IAAdu0B,IAAwC,IAAlB9sC,EAAMyuC,eAC7B3B,IAAY,EACZC,IAAmB,EACnBC,IAAiB,OACjBvd,GAAKrvB,oBAAoB,YAAaouC,OAGrC1B,QACGxN,EAAOD,GAAOa,wBACdwO,GACF,IAAQ1uC,EAAM2uC,QAAUrP,EAAKvP,GAAKuP,EAAKc,MAAQ,IAC/C,KAASpgC,EAAM4uC,QAAUtP,EAAKI,GAAKJ,EAAKoB,OAAS,UAE7C11C,EAAG6jD,WAAEA,EAAUjiD,MAAEA,GAAUkiD,GAAYJ,GAC7CH,GAAYvjD,EAAK6jD,EAAYjiD,aAYxBkiD,GAAYJ,WACb1jD,EAAG6jD,WAAEA,EAAUjiD,MAAEA,GAAUuhB,GAC7B4gC,WAgHsB3mD,OAEtB4mD,GDjBiB9oD,ECiBIkC,EDjBDnC,GCgBV,EAAG,GDff8pC,EAAI9pC,EAAE,GAAKC,EAAE,GACbw5C,EAAIz5C,EAAE,GAAKC,EAAE,GACVpB,KAAK4lD,MAAM3a,EAAG2P,IAHhB,IAAkBx5C,EAAGD,EACtB8pC,EACA2P,MCgBEsN,KAAmBD,IAAoBiC,EAAO,IAAOA,EAAO,UG5P7D,SAAkBC,EAAIC,GAC3B,IAAIC,EAAMC,GAAe5B,KAAeyB,GACpCI,EAAMD,GAAe5B,KAAe0B,GACpC7C,EAAMiD,GAASH,EAAKE,GACpBE,EAAMJ,EAAI,GAAGE,EAAI,GAAKF,EAAI,GAAGE,EAAI,GACjCtE,EAAMjmD,KAAK0qD,MAAMD,EAAKlD,GAI1B,OAHGtB,EAAM,IACPA,GAAO,EAAEjmD,KAAKopD,IAETnD,EHoPI0E,EAAU,EAAG,GAAIrnD,IAAM,EAAMtD,KAAKopD,WApHrBwB,CAAmBhB,QAClBlxC,IAApBuxC,IACD/jD,EAAM+jD,EACNhC,IAAmB,OAEjB4C,EAAqBC,GAAsBlB,WACpBlxC,IAAvBmyC,OACEE,EAAMF,GACPE,EAAI3G,EAAI2G,EAAIzpD,EAAI,GAAOypD,EAAIzpD,EAAI,GAAKypD,EAAI3G,EAAI,KAC7C2G,WA8E6BA,EAAKnB,OAClC5sC,EACA0J,EACDqkC,EAAI3G,EAAI2G,EAAIzpD,EAAI,GACjB0b,EAAOyrC,GAAM,GACb/hC,EAAK+hC,GAAM,IACHsC,EAAIzpD,EAAI,GAChB0b,EAAOyrC,GAAM,GACb/hC,EAAK+hC,GAAM,IACHsC,EAAI3G,EAAI,IAChBpnC,EAAOyrC,GAAM,GACb/hC,EAAK+hC,GAAM,QAETuC,EAAOC,GAASvC,KAAe1rC,EAAM0J,GACrC9N,EAAMsyC,GAASF,GAEnBV,GAAeU,EAAMA,OAGjBpmD,EAAI4lD,GADAS,GAASvC,KAAekB,EAAQljC,GACpBskC,UACpBpmD,EAAI5E,KAAKS,IAAI,EAAGT,KAAKO,IAAIqY,EAAKhU,IAEvBkmD,GDzBJ,SAAqBngD,EAAKvJ,EAAGD,EAAG+iD,GAGrC,OAFAv5C,EAAI,GAAKvJ,EAAE,GAAKD,EAAE,GAAK+iD,EACvBv5C,EAAI,GAAKvJ,EAAE,GAAKD,EAAE,GAAK+iD,EAChBv5C,ECqBKwgD,CAAiBzC,KAAehiC,EAAIskC,EAAMpmD,IAnG1CwmD,CAA0BL,EAAKnB,IAGvC9hD,EAAQ9H,KAAKS,IAAI,EAAGT,KAAKO,IAAI,EAAK,EAAMwqD,EAAI3G,IAC5C2F,EAAa/pD,KAAKS,IAAI,EAAGT,KAAKO,IAAI,EAAKwqD,EAAI5M,EAAIr2C,IAE5CqlB,OAAOnY,MAAM+0C,KACdA,EAAa,GAEf7B,IAAiB,SAEVhiD,IAAAA,EAAK6jD,WAAAA,EAAYjiD,MAAAA,YAGnB2hD,GAAYvjD,EAAK6jD,EAAYjiD,EAAOujD,GAAY,OACnDvhD,EAAWlJ,EAAUiJ,WACvB1H,EAAG+D,EACH7E,EAAG0oD,EACHzoD,EAAGwG,IAELwjD,IACEplD,IAAAA,EACA6jD,WAAAA,EACAjiD,MAAAA,QAEE9G,EAAM8I,EAAS/D,QACfwlD,GACFtqD,EAAGD,EAAIC,EAAI,IACXC,EAAGF,EAAIE,EAAI,IACXC,EAAGH,EAAIG,EAAI,IACXC,EAAGJ,EAAII,GAGNiqD,GAiLHx/B,GAhLO0/B,YAIAT,GAAsBU,OACzBpqD,EAAIqnD,GAAM,GAEVtnD,EAAI8pD,GAASvC,KAAeD,GAAM,GAAIrnD,GACtCqU,EAAIw1C,GAASvC,KAAeD,GAAM,GAAIrnD,GACtCkC,EAAI2nD,GAASvC,KAAe8C,EAAOpqD,GAEnCwD,EAAIzD,EAAE,GAAGsU,EAAE,GAAKA,EAAE,GAAGtU,EAAE,GACvBg9C,GAAK76C,EAAE,IAAInC,EAAE,GAAGsU,EAAE,IAAMnS,EAAE,IAAImS,EAAE,GAAGtU,EAAE,IAAMA,EAAE,GAAGsU,EAAE,GAAKA,EAAE,GAAGtU,EAAE,IAAIyD,EAClEtD,GAAKgC,EAAE,GAAGmS,EAAE,GAAKnS,EAAE,GAAGmS,EAAE,IAAI7Q,EAC5Bw/C,GAAK9gD,EAAE,GAAGnC,EAAE,GAAGmC,EAAE,GAAGnC,EAAE,IAAIyD,MAE1BqjD,KAAqBC,IAAmB/J,EAAI,GAAOA,EAAI,GACzD78C,EAAI,GAAOA,EAAI,GACf8iD,EAAI,GAAOA,EAAI,UAEbjG,EAAAA,EAAG78C,EAAAA,EAAG8iD,EAAAA,YA0DHqH,SACH5qD,EAAQD,EAAUiJ,WACpB1H,EAAGknB,GAAMnjB,IACT7E,EAAGgoB,GAAM0gC,WACTzoD,EAAG+nB,GAAMvhB,QAGXu2C,GAAGr/B,MAAMq/B,GAAGqN,kBACZnD,GAAKnU,WAEDuX,GACFpR,GAAO7+B,aAAa,SACpB6+B,GAAO7+B,aAAa,WAEtBysC,GAAiB/T,OACjB+T,GAAiByD,QAAQ,aAAcD,GACvCpD,GAAKQ,OACLR,GAAKsD,SACL1D,GAAiB0D,SAEjBxD,GAAajU,OACbwU,GAASxU,OAETmV,GAAgBC,SACZsC,EAAMziC,GAAMnjB,IAAMlG,KAAKopD,GAAK,EAAMppD,KAAKopD,GAAG,EAC1C2C,EAASC,GACXC,MACC,EAAG,EAAG,GACPH,GAEFI,GACE3C,GACAwC,EACA1E,MACC,GAAK,GAAK,KAEb8E,GAAmB1D,GAAM,GAAID,GAAK,GAAIe,IACtC4C,GAAmB1D,GAAM,GAAID,GAAK,GAAIe,IACtC4C,GAAmB1D,GAAM,GAAID,GAAK,GAAIe,QAElC6C,EAAO5C,KACX6C,GAAeD,EAAMA,GAAO,GAAK,GAAK,IN2PnC,SAAgBzhD,EAAKvJ,EAAG6kD,EAAKD,GAClC,IAII3kD,EAAGoU,EAAGjS,EACN6/C,EAAKC,EAAKC,EAAKC,EACfC,EAAKC,EAAKC,EAAKC,EACfC,EAAKC,EAAKC,EAAKC,EACfsI,EAAKC,EAAKC,EACVC,EAAKC,EAAKC,EACVC,EAAKC,EAAKC,EAVV7hB,EAAI+a,EAAK,GACTpL,EAAIoL,EAAK,GACT/B,EAAI+B,EAAK,GACTptC,EAAM5Y,KAAK4lD,MAAM3a,EAAG2P,EAAGqJ,GASvBrrC,EAAMguC,KAKV3b,GADAryB,EAAM,EAAIA,EAEVgiC,GAAKhiC,EACLqrC,GAAKrrC,EACLvX,EAAIrB,KAAKkmD,IAAID,GAEbziD,EAAI,GADJiS,EAAIzV,KAAKmmD,IAAIF,IAEb5C,EAAMjiD,EAAE,GACRkiD,EAAMliD,EAAE,GACRmiD,EAAMniD,EAAE,GACRoiD,EAAMpiD,EAAE,GACRqiD,EAAMriD,EAAE,GACRsiD,EAAMtiD,EAAE,GACRuiD,EAAMviD,EAAE,GACRwiD,EAAMxiD,EAAE,GACRyiD,EAAMziD,EAAE,GACR0iD,EAAM1iD,EAAE,GACR2iD,EAAM3iD,EAAE,IACR4iD,EAAM5iD,EAAE,IAERkrD,EAAMrhB,EAAIA,EAAIznC,EAAIiS,EAClB82C,EAAM3R,EAAI3P,EAAIznC,EAAIygD,EAAI5iD,EACtBmrD,EAAMvI,EAAIhZ,EAAIznC,EAAIo3C,EAAIv5C,EACtBorD,EAAMxhB,EAAI2P,EAAIp3C,EAAIygD,EAAI5iD,EACtBqrD,EAAM9R,EAAIA,EAAIp3C,EAAIiS,EAClBk3C,EAAM1I,EAAIrJ,EAAIp3C,EAAIynC,EAAI5pC,EACtBurD,EAAM3hB,EAAIgZ,EAAIzgD,EAAIo3C,EAAIv5C,EACtBwrD,EAAMjS,EAAIqJ,EAAIzgD,EAAIynC,EAAI5pC,EACtByrD,EAAM7I,EAAIA,EAAIzgD,EAAIiS,EAElB9K,EAAI,GAAK04C,EAAMiJ,EAAM7I,EAAM8I,EAAM1I,EAAM2I,EACvC7hD,EAAI,GAAK24C,EAAMgJ,EAAM5I,EAAM6I,EAAMzI,EAAM0I,EACvC7hD,EAAI,GAAK44C,EAAM+I,EAAM3I,EAAM4I,EAAMxI,EAAMyI,EACvC7hD,EAAI,GAAK64C,EAAM8I,EAAM1I,EAAM2I,EAAMvI,EAAMwI,EACvC7hD,EAAI,GAAK04C,EAAMoJ,EAAMhJ,EAAMiJ,EAAM7I,EAAM8I,EACvChiD,EAAI,GAAK24C,EAAMmJ,EAAM/I,EAAMgJ,EAAM5I,EAAM6I,EACvChiD,EAAI,GAAK44C,EAAMkJ,EAAM9I,EAAM+I,EAAM3I,EAAM4I,EACvChiD,EAAI,GAAK64C,EAAMiJ,EAAM7I,EAAM8I,EAAM1I,EAAM2I,EACvChiD,EAAI,GAAK04C,EAAMuJ,EAAMnJ,EAAMoJ,EAAMhJ,EAAMiJ,EACvCniD,EAAI,GAAK24C,EAAMsJ,EAAMlJ,EAAMmJ,EAAM/I,EAAMgJ,EACvCniD,EAAI,IAAM44C,EAAMqJ,EAAMjJ,EAAMkJ,EAAM9I,EAAM+I,EACxCniD,EAAI,IAAM64C,EAAMoJ,EAAMhJ,EAAMiJ,EAAM7I,EAAM8I,EAEpC1rD,IAAMuJ,IAERA,EAAI,IAAMvJ,EAAE,IACZuJ,EAAI,IAAMvJ,EAAE,IACZuJ,EAAI,IAAMvJ,EAAE,IACZuJ,EAAI,IAAMvJ,EAAE,MM3TZ2rD,CAAYX,EAAMA,EAAMN,GAAM,EAAG,EAAG,IACpCkB,GAAWZ,EAAMA,GAAO,GAAK,GAAK,KAElC/D,GAAa4E,QAAQ,MAAO1D,IAC5BlB,GAAa6E,SAAS,MAAO7jC,GAAMnjB,KACnC0iD,GAASG,OACTH,GAASiD,SACTxD,GAAawD,SAEbvD,GAAYlU,OACZyU,GAAKzU,WACD2W,WAzGkClqD,OAClCS,EAAI,EAAMT,EAAMiH,MAChBzG,GAAK,EAAMR,EAAMkpD,YAAclpD,EAAMiH,MAErC1G,EAAIqnD,GAAM,GACVtnD,EAAIsnD,GAAM,GACVhzC,EAAIgzC,GAAM,GAEV0B,EAAKc,GAASvC,KAAevnD,EAAGC,GAChCgpD,EAAKa,GAASvC,KAAejzC,EAAGrU,GAEhC+rD,EAAKC,GAAS1E,KAAeyB,GAAK9oD,EAAGA,IACrCgsD,EAAKD,GAAS1E,KAAe0B,GAAK9oD,EAAGA,IACrCgsD,EAAMC,GAAS7E,KAAeyE,EAAIE,UACtCE,GAASD,EAAKA,EAAKlsD,GACZksD,EA0FGE,CAA+BnkC,IACrCokC,EAAgB5sD,EAAMsG,WAAY,EAAK,EAAK,EAAK,IAAQ,EAAK,EAAK,EAAK,GAE5EmhD,GAAYoF,QAAQ,QAASD,GAC7BnF,GAAY2E,QAAQ,MAAOf,GACzB1C,KACAyC,MACClB,EAAI,GAAIA,EAAI,GAAI,IAChB,IAAM,IAAM,KAGflC,GAAKE,OACLF,GAAKgD,aAOD8B,EALM/sD,EAAUiJ,WAClB1H,EAAGknB,GAAMnjB,IACT7E,EAAG,EACHC,EAAG,IAEoB6F,WAAY,EAAK,EAAK,EAAK,IAAQ,EAAK,EAAK,EAAK,GACvEymD,EAAkBpE,MNuEnB,SAAkB7+C,EAAKvJ,EAAGD,GAC/B,IAAIkiD,EAAMjiD,EAAE,GACRkiD,EAAMliD,EAAE,GACRmiD,EAAMniD,EAAE,GACRoiD,EAAMpiD,EAAE,GACRqiD,EAAMriD,EAAE,GACRsiD,EAAMtiD,EAAE,GACRuiD,EAAMviD,EAAE,GACRwiD,EAAMxiD,EAAE,GACRyiD,EAAMziD,EAAE,GACR0iD,EAAM1iD,EAAE,GACR2iD,EAAM3iD,EAAE,IACR4iD,EAAM5iD,EAAE,IACRysD,EAAMzsD,EAAE,IACR0sD,EAAM1sD,EAAE,IACR2sD,EAAM3sD,EAAE,IACR4sD,EAAM5sD,EAAE,IAER6sD,EAAK9sD,EAAE,GACP+sD,EAAK/sD,EAAE,GACPgtD,EAAKhtD,EAAE,GACPitD,EAAKjtD,EAAE,GACXwJ,EAAI,GAAKsjD,EAAK5K,EAAM6K,EAAKzK,EAAM0K,EAAKtK,EAAMuK,EAAKP,EAC/CljD,EAAI,GAAKsjD,EAAK3K,EAAM4K,EAAKxK,EAAMyK,EAAKrK,EAAMsK,EAAKN,EAC/CnjD,EAAI,GAAKsjD,EAAK1K,EAAM2K,EAAKvK,EAAMwK,EAAKpK,EAAMqK,EAAKL,EAC/CpjD,EAAI,GAAKsjD,EAAKzK,EAAM0K,EAAKtK,EAAMuK,EAAKnK,EAAMoK,EAAKJ,EAC/CC,EAAK9sD,EAAE,GACP+sD,EAAK/sD,EAAE,GACPgtD,EAAKhtD,EAAE,GACPitD,EAAKjtD,EAAE,GACPwJ,EAAI,GAAKsjD,EAAK5K,EAAM6K,EAAKzK,EAAM0K,EAAKtK,EAAMuK,EAAKP,EAC/CljD,EAAI,GAAKsjD,EAAK3K,EAAM4K,EAAKxK,EAAMyK,EAAKrK,EAAMsK,EAAKN,EAC/CnjD,EAAI,GAAKsjD,EAAK1K,EAAM2K,EAAKvK,EAAMwK,EAAKpK,EAAMqK,EAAKL,EAC/CpjD,EAAI,GAAKsjD,EAAKzK,EAAM0K,EAAKtK,EAAMuK,EAAKnK,EAAMoK,EAAKJ,EAC/CC,EAAK9sD,EAAE,GACP+sD,EAAK/sD,EAAE,GACPgtD,EAAKhtD,EAAE,IACPitD,EAAKjtD,EAAE,IACPwJ,EAAI,GAAKsjD,EAAK5K,EAAM6K,EAAKzK,EAAM0K,EAAKtK,EAAMuK,EAAKP,EAC/CljD,EAAI,GAAKsjD,EAAK3K,EAAM4K,EAAKxK,EAAMyK,EAAKrK,EAAMsK,EAAKN,EAC/CnjD,EAAI,IAAMsjD,EAAK1K,EAAM2K,EAAKvK,EAAMwK,EAAKpK,EAAMqK,EAAKL,EAChDpjD,EAAI,IAAMsjD,EAAKzK,EAAM0K,EAAKtK,EAAMuK,EAAKnK,EAAMoK,EAAKJ,EAChDC,EAAK9sD,EAAE,IACP+sD,EAAK/sD,EAAE,IACPgtD,EAAKhtD,EAAE,IACPitD,EAAKjtD,EAAE,IACPwJ,EAAI,IAAMsjD,EAAK5K,EAAM6K,EAAKzK,EAAM0K,EAAKtK,EAAMuK,EAAKP,EAChDljD,EAAI,IAAMsjD,EAAK3K,EAAM4K,EAAKxK,EAAMyK,EAAKrK,EAAMsK,EAAKN,EAChDnjD,EAAI,IAAMsjD,EAAK1K,EAAM2K,EAAKvK,EAAMwK,EAAKpK,EAAMqK,EAAKL,EAChDpjD,EAAI,IAAMsjD,EAAKzK,EAAM0K,EAAKtK,EAAMuK,EAAKnK,EAAMoK,EAAKJ,EMtH9CK,CAAcT,EAAiBA,EN07B5B,SAAkBjjD,EAAKpH,GAC5B,IAAI0nC,EAAI1nC,EAAE,GACNq3C,EAAIr3C,EAAE,GACN0gD,EAAI1gD,EAAE,GACN6gD,EAAI7gD,EAAE,GACN8gD,EAAKpZ,EAAIA,EACTqZ,EAAK1J,EAAIA,EACT2J,EAAKN,EAAIA,EACTO,EAAKvZ,EAAIoZ,EACTiK,EAAK1T,EAAIyJ,EACTM,EAAK/J,EAAI0J,EACTiK,EAAKtK,EAAII,EACTmK,EAAKvK,EAAIK,EACTO,EAAKZ,EAAIM,EACTO,EAAKV,EAAIC,EACTU,EAAKX,EAAIE,EACTU,EAAKZ,EAAIG,EAiBb,OAhBA55C,EAAI,GAAK,EAAIg6C,EAAKE,EAClBl6C,EAAI,GAAK2jD,EAAKtJ,EACdr6C,EAAI,GAAK4jD,EAAKxJ,EACdp6C,EAAI,GAAK,EACTA,EAAI,GAAK2jD,EAAKtJ,EACdr6C,EAAI,GAAK,EAAI65C,EAAKK,EAClBl6C,EAAI,GAAK6jD,EAAK1J,EACdn6C,EAAI,GAAK,EACTA,EAAI,GAAK4jD,EAAKxJ,EACdp6C,EAAI,GAAK6jD,EAAK1J,EACdn6C,EAAI,IAAM,EAAI65C,EAAKG,EACnBh6C,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,EM59BS8jD,CAAcjF,KAAeuC,IAE3CM,GAAeuB,EAAiBA,GAAkB,EAAG,GAAK,IAC1DZ,GAAWY,EAAiBA,GAAkB,KAAO,GAAK,IAC1DrF,GAAKnU,OACLkU,GAAYoF,QAAQ,QAASC,GAC7BrF,GAAY2E,QAAQ,MAAOW,GAC3BrF,GAAKQ,OACLR,GAAKsD,SACLvD,GAAYuD,kBAkBLP,GAASoD,GAChBrlC,GAAQqlC,EACRjD,4BAeEkD,EACAC,EAiBAC,EACAC,SAzBOhnD,eACAinD,sBACAC,iBACA/jB,QACA2P,KAuBP/5C,EAAQD,EAAUiJ,UAAU/B,GAC5BzF,EAAMxB,EAAMiG,QACZmoD,EAAYpuD,EAAMoH,iBAUbinD,EAAkBC,OACzBtuD,EAAQD,EAAUiJ,UAAUslD,QAC5BF,EAAYpuD,EAAMoH,SAClB8mD,EAASI,UALX7D,IANEplD,IAAK7D,EAAIF,EAAI,IACb2F,MAAOzF,EAAIf,EACXyoD,WAAY1nD,EAAIhB,IAYlBic,QACEuxC,EAAI50C,aAAasgC,GAAQuU,GACzBjjC,GAAWqjC,EACXzD,sMAvCW/yC,IAARm2C,OACGrU,EAAOqU,EAAIO,cAAchU,wBACzBnQ,EAAIuP,EAAKc,MAAStlC,OAAOq5C,eAC3BV,EAAQ1jB,EAAIuP,EAAKc,MAAQ,QAEzBqT,EAAQ1jB,EAAIuP,EAAKc,MAAQ,GAEvBV,EAAIJ,EAAKoB,OAAU5lC,OAAOs5C,gBAC5BV,EAAQhU,EAAIJ,EAAKoB,OAAS,QAE1BgT,EAAQhU,2BAgCS1/B,OACjBs/B,EAAOqU,EAAIzT,wBACXmU,EAAU/U,EAAKvP,EAAKuP,EAAKc,MAAQ,EACjCkU,EAAUhV,EAAKI,EAAKJ,EAAKoB,OAAS,EAClC6T,EAAexE,GAASvC,MAAgBxtC,EAAM2uC,QAAS3uC,EAAM4uC,UAAWyF,EAASC,KAClFxvD,KAAKuV,IAAIk6C,EAAa,IAAM,KAAOzvD,KAAKuV,IAAIk6C,EAAa,IAAM,MAChET,cAImB9zC,GACL2zC,EAAIO,cACNpX,SAAS98B,EAAMtB,SAC3Bo1C,uDASWF,uDAFsBD,gBA7EnCtU,GAAOl/B,iBAAiB,sBA/QCH,GACzBA,EAAMuY,iBACNkX,GAAKtvB,iBAAiB,YAAaquC,IACnC1B,IAAY,MACRxN,EAAOD,GAAOa,wBACdwO,GACF,IAAQ1uC,EAAM2uC,QAAUrP,EAAKvP,GAAKuP,EAAKc,MAAQ,IAC/C,KAASpgC,EAAM4uC,QAAUtP,EAAKI,GAAKJ,EAAKoB,OAAS,UAE7C11C,EAAG6jD,WAAEA,EAAUjiD,MAAEA,GAAUkiD,GAAYJ,GAC7CH,GAAYvjD,EAAK6jD,EAAYjiD,MAsQ7ByyC,GAAOl/B,iBAAiB,oBA9ODH,GACvBA,EAAMuY,iBACNkX,GAAKrvB,oBAAoB,YAAaouC,IACtC1B,IAAY,EACZC,IAAmB,EACnBC,IAAiB,qNIrCQpwC,MAAK2C,0LADuB3C,KAAOA,OAAG5P,qGAHzC4P,OAA0BA,mIAGKA,KAAOA,OAAG5P,8CACtC4P,MAAK2C,qCAJR3C,OAA0BA,oGAqBkCA,KAAajX,QAAUiX,OAAiBA,4HAAxCA,KAAajX,kBAAUiX,iBAAiBA,mMAvBjHA,KAAO+F,IAAI,QAAQwzB,4BAAxB/lC,sCAsBoB,IAAvBwM,onBAR4CA,KAAa2C,8IAIM3C,KAAc5P,qUAtB9C4P,2EAsB0EA,8CAlBjGA,KAAO+F,IAAI,QAAQwzB,eAAxB/lC,+HAAAA,wBAcyCwM,KAAa2C,yEAIM3C,KAAc5P,oCAItD,IAAvB4P,+NAvFM0V,GAAMqhC,GACbA,EAAIrhC,qCAlBFkiC,4BAWAC,EACAC,EAJAC,EAAwB,EAExBC,GAAqB,WAmBhBC,EAA0B70C,EAAO/X,OACxC0sD,EAAwB1sD,GACrBA,IAAM06C,EAAOhgC,IAAI,QAAQ/S,MACX+yC,EAAOxK,OAAO,OAAQlwC,EAAG,UAAUkuC,gBAoB7C2e,EAAWC,EAASC,GAC3B9T,GAAMv9B,QAAOja,GAAKA,EAAEw/B,OAAO,OAAQ8rB,EAAQ,QAASD,cAG7CE,EAAYrmD,EAAUomD,GAC7B9T,GAAMv9B,QAAOja,GAAKA,EAAEw/B,OAAO,OAAQ8rB,EAAQ,SAAUxW,GAAO5vC,eAGrDsmD,EAAYxuC,GACnBw6B,GAAMv9B,QAAQ/W,GACLA,EAAM+W,OAAO,QAAQ6sB,GAAQA,EAAK7pB,OAAOD,EAAO,WAEzDiuC,EAAwBjuC,EAAQ,6CA9DhC8tC,EAAS7R,EAAOhgC,IAAI,QAAQyC,KAAIs6B,GAAKA,EAAE/8B,IAAI,WAAUwzB,OAAO/wB,KAAI7K,GAAK7U,EAAUiJ,UAAU4L,wBAYxF46C,EAAexS,EAAOxK,OAAO,OAAQwc,IAAwBxe,0BAC7D8I,EAAgBv5C,EAAUiJ,UAAUwmD,EAAaxvD,mCAM7Bqa,GACrBA,EAAMuY,iBACN2oB,GAAMv9B,QAAQ/W,GACZA,EAAM+W,OAAO,QAAQ+7B,GACnBA,EAAEh0C,KAAK8yC,IAASj/B,KAAM,OAAQ5Z,OAASI,EAAG,EAAKC,EAAG,EAAKC,EAAG,cAC9D0uD,EAAwBhS,EAAOhgC,IAAI,QAAQ/S,KAAO,qBAyC3BoQ,GACvBA,EAAMuY,qBACNq8B,GAAqB,OACrBH,EAAez0C,EAAM2uC,aACrB+F,EAAe10C,EAAM4uC,cAQoBsG,EAAYP,MAOpClzC,IAAMozC,EAA0BpzC,EAAGxZ,GAUuBwZ,GAAMqzC,EAAWrzC,EAAE/C,OAAO9R,MAAO+nD,GAStF/nD,GAAUqoD,EAAYroD,EAAO+nD,WAAmGC,GAAqB,+7BClHxK,SAAS9E,GAAKsF,EAAIC,EAAIC,EAAIC,GAC/B,IAAIzH,EAAS,GAET0H,EAAK1wD,KAAKuV,IAAIi7C,EAAKF,GACnBrL,EAAKqL,EAAKE,EAAK,GAAK,EACpBG,GAAM3wD,KAAKuV,IAAIk7C,EAAKF,GACpBrL,EAAKqL,EAAKE,EAAK,GAAK,EACpBG,EAAMF,EAAKC,EACf,KACE3H,EAAOpiD,KAAK,CAAC0pD,EAAIC,IACdD,IAAOE,GAAMD,IAAOE,GAFb,CAKV,IAAII,EAAK,EAAID,EACVC,GAAMF,IACPC,GAAOD,EACPL,GAAMrL,GAEL4L,GAAMH,IACPE,GAAOF,EACPH,GAAMrL,GAGV,OAAO8D,mECsIOlxC,YACAA,gBACIA,cACHA,iBACIA,eACFA,kBACEA,oBACYY,IAAfZ,6WAVF,UAAYA,2TAkBiBA,+CANnBA,kBACAA,sCAQJA,+CAlBNA,qBACAA,4BAMiBY,IAAfZ,mCAVF,UAAYA,0DAkBiBA,qNAnBvBY,IAAfZ,wVAduCY,IAAfZ,qeACLA,8BACUg5C,iDAQVh5C,8BACUg5C,6HAVVh5C,gCADoBY,IAAfZ,kCAULA,WAIJY,IAAfZ,4QAlDIi5C,GAAUvjB,EAAMC,OACnB9mC,MAAU8mC,WACNtqC,EAAI,EAAGA,EAAIqqC,EAAKliC,OAAQnI,SACfuV,IAAZ80B,EAAKrqC,KACNwD,EAAIxD,GAAKqqC,EAAKrqC,WAGXwD,6BAtGLqqD,EAEAC,oDACAxW,EAASoD,EAAOhgC,IAAI,gBACpB68B,EAASmD,EAAOhgC,IAAI,cACpB4/B,GAAiB,EACjByT,MAAen0C,MAAM09B,GACzByW,GAAY,EAAE,EAAE,EAAE,OAIdC,EAHA3T,EAAa,OAEb4T,GAAa,EAEbC,iDAGC7T,IAAewT,OACZM,EAAO7W,MACXA,EAASC,OACTA,EAAS4W,QACTN,EAAiBxT,2BAMD,SAAfA,MACD/C,OACuB,SAAf+C,OACR9C,mBAKgB,SAAf8C,MACD/C,OACuB,SAAf+C,OACR9C,uBAKE6W,EAAaC,GAAUC,aAAa5T,EAAQqT,EAAU1T,EAAYC,GACtErB,GAAMv9B,QAAO/W,GAASypD,IlCoF1B,SAAyBt6C,EAAOtQ,EAAKmB,EAAQnB,GACzCsQ,EAAM0G,IAAI7V,OkCpFV4pD,EAAIxX,cAAgB,eAGD/2C,EAAG24C,GACnBsV,IAGe,SAAf5T,EACD0T,EAAS/tD,GAAK24C,EACS,SAAf0B,IACR0T,EAASpV,GAAK34C,GAEhB8tD,EAAKxV,SAAShB,EAAQC,GAAQ,cAGPv3C,EAAG24C,EAAG5gC,GAC7Bi2C,GAAWhuD,EAAG24C,GACduV,IAAeluD,EAAG24C,cAGK34C,EAAG24C,EAAG5gC,MACR,IAAlBA,EAAMyuC,eACPwH,OAAUz4C,OACV04C,GAAa,GAGK,EAAhBl2C,EAAMyuC,UAAsC,IAApBzuC,EAAMy2C,WAAyC,IAApBz2C,EAAM02C,aAC3DR,GAAa,OAEXS,EAAK7G,MAAQmG,EAAShuD,EAAG24C,GAC7BuV,KACAQ,EAAGj7C,SAAQtT,IACS,SAAfk6C,EACD6T,EAAW/tD,EAAE,IAAMA,EAAE,GACE,SAAfk6C,IACR6T,EAAW/tD,EAAE,IAAMA,EAAE,OAGzB+tD,EAAaN,GAAUM,EAAYH,GACnCD,EAAKxV,SAAShB,EAAQC,GAAQ,aAGTv3C,EAAG24C,EAAG5gC,GACxBk2C,IACDF,EAAWH,GAAUM,EAAYH,GACjCC,OAAUz4C,EACV24C,OAAa34C,EACb04C,GAAa,EACbH,EAAKxV,SAAShB,EAAQC,GAAQ,cAcdv3C,EAAG24C,OACjB7Q,EAAG2P,QACW,SAAf4C,GACDvS,EAAI6Q,EACJlB,EAAIz3C,GACmB,SAAfq6C,IACRvS,EAAI9nC,EACJy3C,EAAIkB,GAGHsV,EACMC,EAAWpmB,KAAO2P,EAElBsW,EAASjmB,KAAO2P,gBAcH4C,uCASAA,+DAOPyT,0BAgB0BxT,uLC5H1B3lC,KAAKg6C,0FADN,w1CA4BgBh6C,KAAMA,KAAI+F,IAAI,iBAAiBrG,mPAFbM,qHAElBA,KAAMA,KAAI+F,IAAI,iBAAiBrG,gLAFbM,8KADd,IAA7BA,KAAI+F,IAAI,kBA3BJ/F,0BAALxM,knBAAKwM,aAALxM,4HAAAA,kIA2B8B,IAA7BwM,KAAI+F,IAAI,+VA9BA,mSAXXk0C,EACAC,EAlBAC,IAEAH,o4FACAxlC,MAAO,iBACP9U,UAAW06C,KAGXJ,i6DACAxlC,MAAO,QACP9U,UAAW26C,KAGXL,q7BACAxlC,MAAO,oBACP9U,UAAW46C,cASNC,EAAWzwC,GAClBo4B,GAAGn7B,QAAOs/B,GAAKA,EAAEt/B,OAAO,gBAAgBxd,GAAKA,IAAMugB,GAAS,EAAIA,MALlEtE,YACEy0C,EAAeC,EAAQ5W,wBAAwBE,8BAYC+W,EAAWlvD,2CAF3B6uD,mBAiCSK,GAAY,+UCvD1C,MAAMC,GACnB51C,YAAY2hC,GACVt9C,KAAKs9C,GAAKA,EACVt9C,KAAKwxD,YAAc,GAGrB71C,UAAU81C,GACR,IAAIzR,EAAShgD,KAAKwxD,YAAYC,GAC9B,QAAc95C,IAAXqoC,EAAsB,CAEvB,GADAA,EArBN,SAAqBtmC,GACnB,OAAOA,GACL,IAAK,UAAW,OAAO,IAAIulC,GAAO,CAAEt2B,uMAAmBu2B,KAAMwS,KAC7D,IAAK,QAAS,OAAO,IAAIzS,GAAO,CAAEt2B,oKAAiBu2B,KAAMwS,KACzD,IAAK,QAAS,OAAO,IAAIzS,GAAO,CAAEt2B,qmDAAiBu2B,KAAMwS,KACzD,IAAK,OAAQ,OAAO,IAAIzS,GAAO,CAAEt2B,quCAAgBu2B,KAAMwS,KACvD,IAAK,QAAS,OAAO,IAAIzS,GAAO,CAAEt2B,+5BAAiBu2B,KAAMwS,KACzD,IAAK,WAAY,OAAO,IAAIzS,GAAO,CAAEt2B,ypCAAoBu2B,KAAMwS,KAC/D,QAAS,QAaEC,CAAYF,QACP95C,IAAXqoC,EACD,MAAM,IAAI1jC,MAAM,uBAAuBm1C,KAEzCzR,EAAOqH,QAAQrnD,KAAKs9C,IACpBt9C,KAAKwxD,YAAYC,GAAczR,EAEjC,OAAOA,GCtCI,MAAM4R,GACnBj2C,YAAY2hC,EAAI/C,EAAOM,EAAQ/gC,GAE7B,GADA9Z,KAAKs9C,GAAKA,OACG3lC,IAAV4iC,QAAkC5iC,IAAXkjC,EACxB,MAAM,IAAIv+B,MAAM,qCAMlB,GAJAtc,KAAKu6C,MAAQA,EACbv6C,KAAK66C,OAASA,EAGV/gC,aAAgB+3C,WAClB7xD,KAAKF,MAAQga,MACR,CACL9Z,KAAKF,MAAQ,IAAI+xD,WAAyB,EAAd/3C,EAAKvP,QACjC,IAAI,IAAInI,EAAI,EAAGA,EAAI0X,EAAKvP,OAAQnI,IAAK,CACnC,IAAIyB,EAAIiW,EAAK1X,GACT8R,EAAQ,EAAJ9R,EACRpC,KAAKF,MAAMoU,EAAI,GAAY,IAAPrQ,EAAE,GACtB7D,KAAKF,MAAMoU,EAAI,GAAY,IAAPrQ,EAAE,GACtB7D,KAAKF,MAAMoU,EAAI,GAAY,IAAPrQ,EAAE,GACtB7D,KAAKF,MAAMoU,EAAI,GAAY,IAAPrQ,EAAE,IAI1B7D,KAAKqnD,QAAQrnD,KAAKs9C,IAGpB3hC,UACE3b,KAAK8xD,QAAU9xD,KAAKs9C,GAAGyU,gBAEvB/xD,KAAKs9C,GAAG0U,YAAYhyD,KAAKs9C,GAAG2U,WAAYjyD,KAAK8xD,SAC7C9xD,KAAKs9C,GAAG4U,WAAWlyD,KAAKs9C,GAAG2U,WACzB,EACAjyD,KAAKs9C,GAAG6U,KACRnyD,KAAKu6C,MACLv6C,KAAK66C,OACL,EACA76C,KAAKs9C,GAAG6U,KACRnyD,KAAKs9C,GAAG8U,cACRpyD,KAAKF,OACPE,KAAKs9C,GAAG+U,cAAcryD,KAAKs9C,GAAG2U,WAAYjyD,KAAKs9C,GAAGgV,mBAAoBtyD,KAAKs9C,GAAGiV,SAC9EvyD,KAAKs9C,GAAG+U,cAAcryD,KAAKs9C,GAAG2U,WAAYjyD,KAAKs9C,GAAGkV,mBAAoBxyD,KAAKs9C,GAAGiV,SAChFvyD,KAAKs9C,GAAG+U,cAAcryD,KAAKs9C,GAAG2U,WAAYjyD,KAAKs9C,GAAGmV,eAAgBzyD,KAAKs9C,GAAGoV,eAC1E1yD,KAAKs9C,GAAG+U,cAAcryD,KAAKs9C,GAAG2U,WAAYjyD,KAAKs9C,GAAGqV,eAAgB3yD,KAAKs9C,GAAGoV,eACxE1yD,KAAKs9C,GAAG0U,YAAYhyD,KAAKs9C,GAAG2U,WAAY,MAG1Ct2C,SACE3b,KAAKs9C,GAAGsV,cAAc5yD,KAAK8xD,SAG7Bn2C,KAAKk3C,GACH7yD,KAAKs9C,GAAGwV,cAAc9yD,KAAKs9C,GAAGyV,SAAWF,GACzC7yD,KAAKs9C,GAAG0U,YAAYhyD,KAAKs9C,GAAG2U,WAAYjyD,KAAK8xD,SAG/Cn2C,SAASuuB,EAAG2P,EAAG/5C,GACbE,KAAKgzD,aAAa9oB,EAAG2P,EAAG,EAAG,EAAG/5C,GAGhC6b,aAAauuB,EAAG2P,EAAGU,EAAOM,EAAQ/6C,GAChCE,KAAKF,MAAQ,IAAI+xD,WAAW,CACf,IAAX/xD,EAAM,GACK,IAAXA,EAAM,GACK,IAAXA,EAAM,GACK,IAAXA,EAAM,KAERE,KAAKs9C,GAAG0U,YAAYhyD,KAAKs9C,GAAG2U,WAAYjyD,KAAK8xD,SAC7C9xD,KAAKs9C,GAAG2V,cACNjzD,KAAKs9C,GAAG2U,WACR,EACA/nB,EACA2P,EACAU,EACAM,EACA76C,KAAKs9C,GAAG6U,KACRnyD,KAAKs9C,GAAG8U,cACRpyD,KAAKF,OACPE,KAAKs9C,GAAG0U,YAAYhyD,KAAKs9C,GAAG2U,WAAY,MAG1Ct2C,SACE3b,KAAKs9C,GAAG0U,YAAYhyD,KAAKs9C,GAAG2U,WAAY,OC7E7B,MAAMiB,GACnBv3C,eAAiB,GACjBA,qBAAuB,GACvBA,mBAAqB,GACrBA,qBAAuB,GAEvBA,YAAY2hC,EAAI6V,GACdnzD,KAAKs9C,GAAKA,EACVt9C,KAAKunD,YAAc4L,EAAQC,UAAU,SACrCpzD,KAAKqzD,WAAa,IAAIhW,GAAYr9C,KAAKs9C,GAAI,EACxC,GAAK,GACN,GAAK,GACL,IAAM,IACL,IAAM,IACN,CACD,EAAG,EAAG,EACN,EAAG,EAAG,GACL,CAAC,IACJt9C,KAAKwnD,KAAO,IAAInK,GAAYr9C,KAAKs9C,GAAI,CACnC,EAAK,EACL,EAAK,EACL,EAAK,EACL,EAAK,GACJ,CACD,EAAG,EAAG,EACN,EAAG,EAAG,GACL,CAAC,IAGN3hC,aAAaquC,GACX,IAAI3Q,SAAEA,EAAQK,OAAEA,EAAMC,OAAEA,GAAW35C,KAAKwiB,OAEpC6gC,EAAIrjD,KAAKs9C,GAAG9D,OAAOe,MACnBn5C,EAAIpB,KAAKs9C,GAAG9D,OAAOqB,OAEnB3Q,GAAKmZ,EAAIlpC,MAAMqgC,SAAW6I,EAAI,EAC9BxJ,GAAKz4C,EAAI+Y,MAAMsgC,SAAWr5C,EAAI,EAC9BkyD,EAAStzD,KAAKuzD,YAAY,IAAOla,EAAWgK,GAC5CmQ,EAASxzD,KAAKuzD,YAAY,IAAOla,EAAWj4C,GAGhD,OACE8oC,EAAIopB,GACJzZ,EAAI2Z,GACJtpB,EAAKopB,EALM5Z,EAASL,EAAYgK,GAMhCxJ,EAAK2Z,EALM7Z,EAASN,EAAYj4C,EASpCua,aAAaquC,GACX,IAAI3Q,SAAEA,EAAQK,OAAEA,EAAMC,OAAEA,EAAML,UAAEA,EAAS0C,UAAEA,EAASC,UAAEA,GAAcj8C,KAAKwiB,OACrEixC,EAAUzzD,KAAKyzD,QAAU,EAAM,EAC/BC,EAAU1zD,KAAK0zD,QAAU,EAAM,EAC/BrQ,EAAIrjD,KAAKs9C,GAAG9D,OAAOe,MACnBn5C,EAAIpB,KAAKs9C,GAAG9D,OAAOqB,OACnB8Y,EAAUF,GAAWna,EAAUx8B,IAAI,GAAKu8B,GACxCua,EAAUF,GAAWpa,EAAUx8B,IAAI,GAAKu8B,GACxCwa,EAAQ50D,KAAKoD,OAAOghD,EAAI2G,EAAI,KAAO3Q,EAAW,GAAOsa,GACrDG,EAAQ70D,KAAKoD,OAAOjB,EAAI4oD,EAAI,KAAO3Q,EAAW,GAAOua,GAGzD,MAAO,CAFCC,EAAQ7zD,KAAKuzD,YAAY,GACzBO,EAAQ9zD,KAAKuzD,YAAY,IAInC53C,sBAAsBM,EAAM0J,GAC1B,IAAIouC,EAAW/zD,KAAKg0D,aAAa/3C,GAC7Bg4C,EAASj0D,KAAKg0D,aAAaruC,GAC3B2qC,EAAarG,GAAK8J,EAAS,GAAIA,EAAS,GAAIE,EAAO,GAAIA,EAAO,KAC9Dva,OAACA,EAAMC,OAAEA,GAAU35C,KAAKwiB,OAC5B,OAAO8tC,EAAW9wC,QAAOjd,GACvBA,EAAE,IAAM,GAAKA,EAAE,GAAKm3C,GACpBn3C,EAAE,IAAM,GAAKA,EAAE,GAAKo3C,KCvEnB,MAAMua,WAAsBhB,GACjCv3C,YAAY2hC,EAAI6V,EAASgB,EAAiB,MAAM,GAAOC,EAAiB,GAAIC,EAAW,CAACrZ,gBAAiB,KACvGmN,MAAM7K,EAAI6V,GACVnzD,KAAKggD,OAASmT,EAAQC,UAAU,SAChCpzD,KAAKs0D,IAAM7L,KAEXzoD,KAAKq0D,SAAWA,EAEhBr0D,KAAKu0D,YAAc9L,KACnBwD,GAAWjsD,KAAKu0D,YAAav0D,KAAKu0D,YAAa,EAC1C,EACD,EACA,IAEJjJ,GAAetrD,KAAKu0D,YAAav0D,KAAKu0D,YAAa,EAChD,GACA,EACD,IAEFv0D,KAAKw0D,KAAO/L,KACZzoD,KAAKs0D,IAAM7L,KAGb9sC,aAAassC,GACXjoD,KAAK0qD,SACL,IAAIhR,OACFA,EAAMC,OACNA,EAAMN,SACNA,EAAQC,UACRA,GACEt5C,KAAKwiB,OACTxiB,KAAKunD,YAAYlU,OACjBrzC,KAAKqzD,WAAWhgB,OAChB,IAEIohB,EAAKpb,EAFDr5C,KAAKs9C,GAAG9D,OAAOe,MAGnBma,EAAKrb,EAFDr5C,KAAKs9C,GAAG9D,OAAOqB,OAOnByZ,GAJUt0D,KAAKyzD,QACLzzD,KAAK0zD,QAGTiB,GAAc30D,KAAKs0D,MACzBE,EAAOlJ,GAAeqJ,GAAc30D,KAAKw0D,MAAOx0D,KAAKu0D,YAAa,CACjEv0D,KAAKuzD,YAAY,GAAMkB,EACvBz0D,KAAKuzD,YAAY,GAAMmB,EACxB,IAEJpJ,GAAekJ,EAAMA,EACnB,CACEC,EAAG,EACHC,EAAG,EACH,IAGJzI,GAAWuI,EAAMA,EACf,CACEC,EACAC,EACA,IAIJ,IAAI,IAAItyD,EAAI,EAAGA,EAAIs3C,EAAQt3C,IACzB,IAAI,IAAI24C,EAAI,EAAGA,EAAIpB,EAAQoB,IACtBkN,EAAO/mB,MAAK3+B,GAAKA,EAAE,KAAOH,GAAKG,EAAE,KAAOw4C,MACzC/6C,KAAKunD,YAAYoF,QAAQ,QAAS,CAAC,EAAK,EAAK,EAAK,IAIpDrB,GAAegJ,EAAKE,EAAM,CAAEpyD,EAAG24C,EAAG,IAClCkR,GAAWqI,EAAKA,EAAK,CAAE,GAAM,GAAM,IACnCt0D,KAAKunD,YAAY2E,QAAQ,MAAOoI,GAChCt0D,KAAKqzD,WAAWrL,QAGpBhoD,KAAKqzD,WAAWvI,SAChB9qD,KAAKunD,YAAYuD,SAInBnvC,YAAYxB,GACV,IAAIk/B,SAAEA,EAAQK,OAAEA,EAAMC,OAAEA,GAAW35C,KAAKwiB,OACpC6gC,EAAIrjD,KAAKs9C,GAAG9D,OAAOe,MACnBn5C,EAAIpB,KAAKs9C,GAAG9D,OAAOqB,OACnB3Q,GAAKmZ,EAAIlpC,EAAMqgC,SAAW6I,EAAI,EAC9BxJ,GAAKz4C,EAAI+Y,EAAMsgC,SAAWr5C,EAAI,EAE9BkyD,EAAStzD,KAAKuzD,YAAY,IAAOla,EAAWgK,GAC5CmQ,EAASxzD,KAAKuzD,YAAY,IAAOla,EAAWj4C,GAC5CwzD,EAASlb,EAASL,EAAYgK,EAC9BwR,EAASlb,EAASN,EAAYj4C,EAClC,GACE8oC,EAAIopB,GACJzZ,EAAI2Z,GACJtpB,EAAKopB,EAAQsB,GACb/a,EAAK2Z,EAAQqB,EACb,CAGA,MAAO,CAFC51D,KAAKoD,OAAQ6nC,EAAIopB,GAASsB,EAASlb,GACnCz6C,KAAKoD,OAAQw3C,EAAI2Z,GAASqB,EAASlb,GAC7Bx/B,IAKlBwB,aAAa6G,GACXxiB,KAAKwiB,OAASA,EAGhB7G,oBAAoB29B,GAClBt5C,KAAKuzD,YAAcja,EAGrB39B,qBAAqBm5C,GACnB90D,KAAK80D,kBAAoBA,EAG3Bn5C,SACE,QAAmBhE,IAAhB3X,KAAKwiB,OAAsB,OAC9B,IAAIy2B,GAAEA,EAAES,OAAEA,EAAMC,OAAEA,EAAMN,SAAEA,EAAQH,WAAEA,GAAel5C,KAAKwiB,OAEpD6gC,EAAIrjD,KAAKs9C,GAAG9D,OAAOe,MACnBn5C,EAAIpB,KAAKs9C,GAAG9D,OAAOqB,OAEvB76C,KAAKggD,OAAO3M,OACZrzC,KAAKwnD,KAAKnU,OAEV,IAAIohB,EAAKpb,EAAWgK,EAChBqR,EAAKrb,EAAWj4C,EAChBkzD,EAAMK,GAAc30D,KAAKs0D,KAM7BrI,GAAWqI,EALAhJ,GAAeqJ,GAAc30D,KAAKw0D,MAAOx0D,KAAKu0D,YAAa,CACjEv0D,KAAKuzD,YAAY,GAAMkB,EACvBz0D,KAAKuzD,YAAY,GAAMmB,EACxB,IAGF,CACGrb,EAAWK,EAAU2J,EACrBhK,EAAWM,EAAUv4C,EACtB,IAIJpB,KAAK80D,kBAAkBzhB,KAAK,GAC5BrzC,KAAKggD,OAAO+U,aAAa,oBAAqB,GAE9C/0D,KAAKggD,OAAO6K,QAAQ,YAAa,CAAE,EAAE,IAErC7qD,KAAKggD,OAAO6K,QAAQ,WAAY,CAC9B4J,GAAMA,EAAK/a,GACXgb,GAAMA,EAAK/a,KAGb35C,KAAKggD,OAAOkM,QAAQ,MAAOoI,GAC3Bt0D,KAAKwnD,KAAKQ,OACVhoD,KAAKwnD,KAAKsD,SACV9qD,KAAKggD,OAAO8K,UC3JT,MAAMkK,WAAqB9B,GAChCv3C,YAAY2hC,EAAI6V,EAAS8B,EAAUxB,EAASC,GAC1CvL,MAAM7K,EAAI6V,GACVnzD,KAAKs9C,GAAKA,EACVt9C,KAAKggD,OAASmT,EAAQC,UAAU,QAChCpzD,KAAKi1D,SAAWA,EAChBj1D,KAAK0Z,KAAOA,KACZ1Z,KAAKyzD,QAAUA,EACfzzD,KAAK0zD,QAAUA,EAEf1zD,KAAKs0D,IAAM7L,KAEXzoD,KAAKu0D,YAAc9L,KACnBwD,GAAWjsD,KAAKu0D,YAAav0D,KAAKu0D,YAAa,EAC1C,EACD,EACA,IAEJjJ,GAAetrD,KAAKu0D,YAAav0D,KAAKu0D,YAAa,EAChD,GACA,EACD,IAEFv0D,KAAKw0D,KAAO/L,KACZzoD,KAAKs0D,IAAM7L,KAGb9sC,aAAa6G,GACXxiB,KAAKwiB,OAASA,EAGhB7G,oBAAoB29B,GAClBt5C,KAAKuzD,YAAcja,EAGrB39B,qBAAqBm5C,GACnB90D,KAAK80D,kBAAoBA,EAG3Bn5C,aAAassC,GACXjoD,KAAK0qD,SACL,IAAIhR,OACFA,EAAMC,OACNA,EAAMN,SACNA,EAAQ2C,UACRA,EAASC,UACTA,EAAS3C,UACTA,GACEt5C,KAAKwiB,OACTxiB,KAAKunD,YAAYlU,OACjBrzC,KAAKqzD,WAAWhgB,OAChB,IAEIohB,EAAKpb,EAFDr5C,KAAKs9C,GAAG9D,OAAOe,MAGnBma,EAAKrb,EAFDr5C,KAAKs9C,GAAG9D,OAAOqB,OAGnB4Y,EAAUzzD,KAAKyzD,QAAU,EAAM,EAC/BC,EAAU1zD,KAAK0zD,QAAU,EAAM,EAE/BY,EAAMK,GAAc30D,KAAKs0D,KACzBE,EAAOlJ,GAAeqJ,GAAc30D,KAAKw0D,MAAOx0D,KAAKu0D,YAAa,CACjEv0D,KAAKuzD,YAAY,GAAMkB,EACvBz0D,KAAKuzD,YAAY,GAAMmB,EACxB,IAEJpJ,GAAekJ,EAAMA,EACnB,CACEC,EAAG,EACHC,EAAG,EACH,IAGJzI,GAAWuI,EAAMA,EACf,CACEC,EACAC,EACA,IAGJ,IAAIQ,EAAYj2D,KAAKO,IAAIk6C,EAAQC,GACjC,IAAI,IAAIv3C,EAAI,EAAGA,EAAI6lD,EAAO19C,OAAQnI,IAChC,IAAI,IAAI24C,EAAI,EAAGA,EAAIma,EAAWna,IAAK,CACjC,IAAI7Q,EAAG2P,EACJF,EAASD,GACVxP,EAAI9nC,EACJy3C,EAAIkB,IAEJ7Q,EAAI6Q,EACJlB,EAAIz3C,GAGNkpD,GAAegJ,EAAKE,EAAM,EACtBlb,EAAUx8B,IAAI,GAAKu8B,EAAYoa,GAC/Bna,EAAUx8B,IAAI,GAAKu8B,EAAYqa,EACjC,IAEFpI,GAAegJ,EAAKA,EAAK,CAAEpqB,EAAG2P,EAAG,SAChBliC,IAAdswC,EAAO7lD,KAEA6lD,EAAO7lD,KAAO24C,GACtB/6C,KAAKunD,YAAYoF,QAAQ,QAAS,CAAC,IAAM,GAAK,IAAM,IACpDV,GAAWqI,EAAKA,EAAK,CAAE,IAAM,IAAM,MAEnCt0D,KAAKunD,YAAYoF,QAAQ,QAAS,CAAC,EAAK,EAAK,EAAK,IAClDV,GAAWqI,EAAKA,EAAK,CAAE,GAAM,GAAM,KAErCt0D,KAAKunD,YAAY2E,QAAQ,MAAOoI,GAChCt0D,KAAKqzD,WAAWrL,QAGpBhoD,KAAKqzD,WAAWvI,SAChB9qD,KAAKunD,YAAYuD,SAGnBnvC,SACE,QAAmBhE,IAAhB3X,KAAKwiB,OAAsB,OAC9B,IAAIk3B,OACFA,EAAMC,OACNA,EAAMN,SACNA,EAAQH,WACRA,EAAU8C,UACVA,EAASC,UACTA,EAAS3C,UACTA,GACEt5C,KAAKwiB,OACLixC,EAAUzzD,KAAKyzD,QAAU,EAAM,EAC/BC,EAAU1zD,KAAK0zD,QAAU,EAAM,EAE/BrQ,EAAIrjD,KAAKs9C,GAAG9D,OAAOe,MACnBn5C,EAAIpB,KAAKs9C,GAAG9D,OAAOqB,OAEvB76C,KAAKggD,OAAO3M,OACZrzC,KAAKwnD,KAAKnU,OAEV,IAAIohB,EAAKpb,EAAWgK,EAChBqR,EAAKrb,EAAWj4C,EAChBkzD,EAAMK,GAAc30D,KAAKs0D,KAM7BrI,GAAWqI,EALAhJ,GAAeqJ,GAAc30D,KAAKw0D,MAAOx0D,KAAKu0D,YAAa,CACjEv0D,KAAKuzD,YAAY,GAAMkB,EACvBz0D,KAAKuzD,YAAY,GAAMmB,EACxB,IAGF,CACGrb,EAAWK,EAAU2J,EACrBhK,EAAWM,EAAUv4C,EACtB,IAIJpB,KAAK80D,kBAAkBzhB,KAAK,GAC5BrzC,KAAKggD,OAAO+U,aAAa,oBAAqB,GAC9C/0D,KAAKggD,OAAO6K,QAAQ,YAAa,CAC/BvR,EAAUx8B,IAAI,IAAMk/B,EAAY3C,GAAYoa,EAC5Cna,EAAUx8B,IAAI,IAAMm/B,EAAY5C,GAAYqa,IAG9C1zD,KAAKggD,OAAOmM,SAAS,OAAQxS,EAASD,EAAS,EAAM,GAErD15C,KAAKggD,OAAOmM,SAAS,MAAO,KAC5BnsD,KAAKggD,OAAO6K,QAAQ,WAAY,CAC9B4J,GAAMA,EAAK/a,GACXgb,GAAMA,EAAK/a,KAGb35C,KAAKggD,OAAOkM,QAAQ,MAAOoI,GAC3Bt0D,KAAKwnD,KAAKQ,OACVhoD,KAAKwnD,KAAKsD,SACV9qD,KAAKggD,OAAO8K,UCrKT,MAAMqK,WAAsBjC,GACjCv3C,YAAY2hC,EAAI6V,GACdhL,MAAM7K,EAAI6V,GACVnzD,KAAKs9C,GAAKA,EACVt9C,KAAKo1D,YAAcjC,EAAQC,UAAU,SAErCpzD,KAAKu0D,YAAc9L,KACnBwD,GAAWjsD,KAAKu0D,YAAav0D,KAAKu0D,YAAa,EAC1C,EACD,EACA,IAEJjJ,GAAetrD,KAAKu0D,YAAav0D,KAAKu0D,YAAa,EAChD,GACA,EACD,IAEFv0D,KAAKw0D,KAAO/L,KACZzoD,KAAKs0D,IAAM7L,KAGb9sC,aAAa6G,GACXxiB,KAAKwiB,OAASA,EAGhB7G,YAAY+/B,EAAWD,EAAWI,EAAOwZ,EAAaC,GACpDt1D,KAAK07C,UAAYA,EACjB17C,KAAKy7C,UAAYA,EACjBz7C,KAAK67C,MAAQA,EACb77C,KAAKq1D,YAAcA,EACnBr1D,KAAKs1D,YAAcA,EAGrB35C,oBAAoB29B,GAClBt5C,KAAKuzD,YAAcja,EAGrB39B,SAEE,GADAwK,QAAQo6B,IAAI,qBACO5oC,IAAhB3X,KAAKwiB,OAAsB,OAC9B,IAAIk3B,OAAEA,EAAMC,OAAEA,EAAML,UAAEA,EAASD,SAAEA,EAAQyC,WAAEA,EAAUC,aAAEA,GAAiB/7C,KAAKwiB,OAEzE6gC,EAAIrjD,KAAKs9C,GAAG9D,OAAOe,MACnBn5C,EAAIpB,KAAKs9C,GAAG9D,OAAOqB,OAGnB4Z,EAAKpb,EAAWgK,EAChBqR,EAAKrb,EAAWj4C,EAChBkzD,EAAMK,GAAc30D,KAAKs0D,KAM7BrI,GAAWqI,EALAhJ,GAAeqJ,GAAc30D,KAAKw0D,MAAOx0D,KAAKu0D,YAAa,CAClEv0D,KAAKuzD,YAAY,GAAKkB,EACtBz0D,KAAKuzD,YAAY,GAAKmB,EACtB,IAGF,CACGrb,EAAWK,EAAU2J,EACrBhK,EAAWM,EAAUv4C,EACtB,IAIJpB,KAAKo1D,YAAY/hB,OACjBrzC,KAAKwnD,KAAKnU,OACVrzC,KAAKo1D,YAAYlJ,QAAQ,MAAOoI,GAEhCt0D,KAAKq1D,YAAYhiB,KAAK,GACtBrzC,KAAKo1D,YAAYL,aAAa,cAAe,GAE7C/0D,KAAKs1D,YAAYjiB,KAAK,GACtBrzC,KAAKo1D,YAAYL,aAAa,cAAe,GAE7C/0D,KAAK07C,UAAUrI,KAAK,GACpBrzC,KAAKo1D,YAAYL,aAAa,YAAa,GAE3C/0D,KAAKy7C,UAAUpI,KAAK,GACpBrzC,KAAKo1D,YAAYL,aAAa,YAAa,GAE3C/0D,KAAK67C,MAAMxI,KAAK,GAChBrzC,KAAKo1D,YAAYL,aAAa,QAAS,GAEvC/0D,KAAKo1D,YAAYjJ,SAAS,aAAcrQ,GACxC97C,KAAKo1D,YAAYjJ,SAAS,eAAgBpQ,GAE1C/7C,KAAKo1D,YAAYvK,QAAQ,WAAY,CACnC4J,GAAMA,EAAK/a,GACXgb,GAAMA,EAAK/a,KAGb35C,KAAKo1D,YAAYvK,QAAQ,YAAa,CACpCvR,EAAUx8B,IAAI,IAAM48B,EAASL,GAC7BC,EAAUx8B,IAAI,IAAM68B,EAASN,KAG/Br5C,KAAKwnD,KAAKQ,OACVhoD,KAAKwnD,KAAKsD,SACV9qD,KAAKo1D,YAAYtK,UClGd,MAAMyK,WAAyBrC,GACpCv3C,YAAY2hC,EAAI6V,EAASM,EAASC,GAChCvL,MAAM7K,EAAI6V,GACVnzD,KAAKggD,OAASmT,EAAQC,UAAU,YAChCpzD,KAAKyzD,QAAUA,EACfzzD,KAAK0zD,QAAUA,EAEf1zD,KAAKu0D,YAAc9L,KACnBwD,GAAWjsD,KAAKu0D,YAAav0D,KAAKu0D,YAAa,EAC1C,EACD,EACA,IAEJjJ,GAAetrD,KAAKu0D,YAAav0D,KAAKu0D,YAAa,EAChD,GACA,EACD,IAEFv0D,KAAKw0D,KAAO/L,KACZzoD,KAAKs0D,IAAM7L,KAGb9sC,sBAAsBM,EAAM0J,GAC1B,IAAIouC,EAAW/zD,KAAKg0D,aAAa/3C,GAC7Bg4C,EAASj0D,KAAKg0D,aAAaruC,GAE/B,OADW3lB,KAAKwiB,OAAOm3B,OAAS35C,KAAKwiB,OAAOk3B,OAInC,CAACqa,EAAS,GAAIE,EAAO,IAFrB,CAACF,EAAS,GAAIE,EAAO,IAMhCt4C,aAAaM,EAAM0J,EAAI7lB,GACrBE,KAAK0qD,SACL,IAAIhR,OACFA,EAAMC,OACNA,EAAMN,SACNA,EAAQC,UACRA,GACEt5C,KAAKwiB,OACTxiB,KAAKunD,YAAYlU,OACjBrzC,KAAKqzD,WAAWhgB,OACb1tB,EAAK1J,KACLA,EAAM0J,GAAM,CAACA,EAAI1J,IAEpB,IAEIw4C,EAAKpb,EAFDr5C,KAAKs9C,GAAG9D,OAAOe,MAGnBma,EAAKrb,EAFDr5C,KAAKs9C,GAAG9D,OAAOqB,OAGnB4Y,EAAUzzD,KAAKyzD,QAAU,EAAM,EAC/BC,EAAU1zD,KAAK0zD,QAAU,EAAM,EAE/BY,EAAMK,GAAc30D,KAAKs0D,KACzBE,EAAOlJ,GAAeqJ,GAAc30D,KAAKw0D,MAAOx0D,KAAKu0D,YAAa,CACjEv0D,KAAKuzD,YAAY,GAAMkB,EACvBz0D,KAAKuzD,YAAY,GAAMmB,EACxB,IAEJpJ,GAAekJ,EAAMA,EACnB,CACEC,EAAG,EACHC,EAAG,EACH,IAGJzI,GAAWuI,EAAMA,EACf,CACEC,EACAC,EACA,IAIJ,IAAI,IAAItyD,EAAI,EAAGA,EAAKujB,EAAK1J,EAAQ,EAAG7Z,IAAK,CACvC,IAAI8nC,EAAG2P,EACJH,EAASC,GACVzP,EAAIjuB,EAAO7Z,EACXy3C,EAAI,IAEJ3P,EAAI,EACJ2P,EAAI59B,EAAO7Z,GAEbpC,KAAKunD,YAAYoF,QAAQ,QAAS,CAAC7sD,EAAMI,EAAGJ,EAAMK,EAAGL,EAAMM,EAAG,IAC9DkrD,GAAegJ,EAAKE,EAAM,EACtBlb,EAAUx8B,IAAI,GAAKu8B,EAAYoa,GAC/Bna,EAAUx8B,IAAI,GAAKu8B,EAAYqa,EACjC,IAEFpI,GAAegJ,EAAKA,EAAK,CAAEpqB,EAAG2P,EAAG,IACjCoS,GAAWqI,EAAKA,EAAK,CAAE,IAAM,IAAM,IACnCt0D,KAAKunD,YAAY2E,QAAQ,MAAOoI,GAChCt0D,KAAKqzD,WAAWrL,OAElBhoD,KAAKqzD,WAAWvI,SAChB9qD,KAAKunD,YAAYuD,SAInBnvC,YAAYxB,GACV,IAAIk/B,SAAEA,EAAQK,OAAEA,EAAMC,OAAEA,EAAML,UAAEA,EAAS0C,UAAEA,EAASC,UAAEA,GAAcj8C,KAAKwiB,OACrE6gC,EAAIrjD,KAAKs9C,GAAG9D,OAAOe,MACnBn5C,EAAIpB,KAAKs9C,GAAG9D,OAAOqB,OAGnB3Q,GAAKmZ,EAAIlpC,EAAMqgC,SAAW6I,EAAI,EAC9BxJ,GAAKz4C,EAAI+Y,EAAMsgC,SAAWr5C,EAAI,EAC9BkyD,EAAStzD,KAAKuzD,YAAY,IAAOla,EAAWgK,GAC5CmQ,EAASxzD,KAAKuzD,YAAY,IAAOla,EAAWj4C,GAC5CwzD,EAASlb,EAASL,EAAYgK,EAC9BwR,EAASlb,EAASN,EAAYj4C,EAClC,GACE8oC,EAAIopB,GACJzZ,EAAI2Z,GACJtpB,EAAKopB,EAAQsB,GACb/a,EAAK2Z,EAAQqB,EACb,CAGA,MAAO,CAFC51D,KAAKoD,OAAQ6nC,EAAIopB,GAASsB,EAASlb,EAASJ,EAAUx8B,IAAI,GAAKu8B,GAC/Dp6C,KAAKoD,OAAQw3C,EAAI2Z,GAASqB,EAASlb,EAASL,EAAUx8B,IAAI,GAAKu8B,GACzDl/B,IAKlBwB,aAAa6G,GACXxiB,KAAKwiB,OAASA,EAGhB7G,oBAAoB29B,GAClBt5C,KAAKuzD,YAAcja,EAGrB39B,gBAAgB65C,GACdx1D,KAAKw1D,aAAeA,EAGtB75C,SACE,QAAmBhE,IAAhB3X,KAAKwiB,OAAsB,OAC9B,IAAI82B,UACFA,EAASI,OACTA,EAAMC,OACNA,EAAMN,SACNA,EAAQH,WACRA,EAAU8C,UACVA,EAASC,UACTA,GACEj8C,KAAKwiB,OACLixC,EAAUzzD,KAAKyzD,QAAU,EAAM,EAC/BC,EAAU1zD,KAAK0zD,QAAU,EAAM,EAE/BrQ,EAAIrjD,KAAKs9C,GAAG9D,OAAOe,MACnBn5C,EAAIpB,KAAKs9C,GAAG9D,OAAOqB,OAEvB76C,KAAKggD,OAAO3M,OACZrzC,KAAKwnD,KAAKnU,OAEV,IAAIohB,EAAKpb,EAAWgK,EAChBqR,EAAKrb,EAAWj4C,EAChBkzD,EAAMK,GAAc30D,KAAKs0D,KAM7BrI,GAAWqI,EALAhJ,GAAeqJ,GAAc30D,KAAKw0D,MAAOx0D,KAAKu0D,YAAa,CACjEv0D,KAAKuzD,YAAY,GAAMkB,EACvBz0D,KAAKuzD,YAAY,GAAMmB,EACxB,IAGF,CACGrb,EAAWK,EAAU2J,EACrBhK,EAAWM,EAAUv4C,EACtB,IAIJpB,KAAKw1D,aAAaniB,KAAK,GACvBrzC,KAAKggD,OAAO+U,aAAa,eAAgB,GACzC/0D,KAAKggD,OAAO6K,QAAQ,YAAa,CAC/BvR,EAAUx8B,IAAI,IAAMk/B,EAAY3C,GAAYoa,EAC5Cna,EAAUx8B,IAAI,IAAMm/B,EAAY5C,GAAYqa,IAI9C1zD,KAAKggD,OAAOmM,SAAS,OAAQxS,EAASD,EAAS,EAAM,GAErD15C,KAAKggD,OAAO6K,QAAQ,WAAY,CAC9B4J,GAAMA,EAAK/a,GACXgb,GAAMA,EAAK/a,KAGb35C,KAAKggD,OAAOkM,QAAQ,MAAOoI,GAC3Bt0D,KAAKwnD,KAAKQ,OACVhoD,KAAKwnD,KAAKsD,SACV9qD,KAAKggD,OAAO8K,UClMT,SAAS2K,GAAoBnY,EAAIxjC,EAAM47C,EAAQnrD,GACpD,IAAIorD,EAAc,IAAI9D,WAAoB,EAATtnD,GACjC,IAAI,IAAInI,EAAI,EAAGA,EAAImI,EAAQnI,IAAK,CAC9B,IAAI8R,EAAQ,EAAJ9R,EACJ2E,EAAS+S,EAAKgD,IAAI1a,GAAKszD,EAAU,IACjCE,EAAU,IACK,OAAhB97C,EAAKgD,IAAI1a,SAA+BuV,IAAhBmC,EAAKgD,IAAI1a,KAAqC,IAAjB0X,EAAKgD,IAAI1a,KAC/DwzD,EAAU,GAEZD,EAAYzhD,EAAI,GAAKnN,EACrB4uD,EAAYzhD,EAAI,GAAK0hD,EACrBD,EAAYzhD,EAAI,GAAKnN,EACrB4uD,EAAYzhD,EAAI,GAAKnN,EAEvB,OAAO,IAAI6qD,GAAQtU,EAAI/yC,EAAQ,EAAGorD,GAmC7B,SAASE,GAAmBvY,EAAIqR,EAAQtL,EAAGjiD,EAAG00D,GACnD,IAAIh8C,EAAO,IAAI+3C,WAAyB,EAAdlD,EAAO5kD,MACjC,IAAI,IAAI3H,EAAI,EAAGA,EAAIusD,EAAO5kD,KAAM3H,IAAK,CACnC,IAAI8R,EAAQ,EAAJ9R,EACJsS,EAAIohD,EAAMxjB,MAAM,CAACqc,EAAO7xC,IAAI1a,GAAI,UAAUkuC,OAC9Cx2B,EAAK5F,EAAI,GAAW,IAANQ,EAAExU,EAChB4Z,EAAK5F,EAAI,GAAW,IAANQ,EAAEvU,EAChB2Z,EAAK5F,EAAI,GAAW,IAANQ,EAAEtU,EAChB0Z,EAAK5F,EAAI,GAAK,IAEhB,OAAO,IAAI09C,GACTtU,EACA+F,EACAjiD,EACA0Y,GCnDG,MAAMi8C,GACXp6C,UAAYg9B,GAAO,IACnBh9B,OAASg9B,GAAO,IAEhBh9B,YAAY69B,GACVx5C,KAAKs9C,GAAK9D,EAAO38B,WAAW,QAAS,CACnCiqC,oBAAoB,EACpBC,uBAAuB,IAEzB/mD,KAAKs9C,GAAG0J,WAAW,EAAG,EAAG,EAAG,GAC5BhnD,KAAKs9C,GAAG0Y,QAAQh2D,KAAKs9C,GAAG2Y,WACxBj2D,KAAKmzD,QAAU,IAAI5B,GAAcvxD,KAAKs9C,IAGtCt9C,KAAKs9C,GAAG0Y,QAAQh2D,KAAKs9C,GAAG4Y,YAExB,IAAIC,EAAiBn2D,KAAKs9C,GAAG8Y,aAAap2D,KAAKs9C,GAAG+Y,kBAClDlwC,QAAQo6B,IAAI,mBAAoB4V,GAEhCn2D,KAAKs2D,iBAAmB,IAAI1E,GAAQ5xD,KAAKs9C,GAAI,EAAG,EAAG,CAAC,CAAC,EAAG,EAAG,EAAG,KAC9Dt9C,KAAKu2D,iBAAmB,IAAI3E,GAAQ5xD,KAAKs9C,GAAI,EAAG,EAAG,CAAC,CAAC,EAAG,EAAG,EAAG,KAC9Dt9C,KAAKw2D,aAAe,IAAI5E,GAAQ5xD,KAAKs9C,GAAI,EAAG,EAAG,CAAC,CAAC,EAAG,EAAG,EAAG,KAC1Dt9C,KAAKq1D,YAAc,IAAIzD,GAAQ5xD,KAAKs9C,GAAI,EAAG,EAAG,CAAC,CAAC,EAAG,EAAG,EAAG,KACzDt9C,KAAKs1D,YAAc,IAAI1D,GAAQ5xD,KAAKs9C,GAAI,EAAG,EAAG,CAAC,CAAC,EAAG,EAAG,EAAG,KAEzDt9C,KAAKy2D,eACLxhD,OAAOqF,iBAAiB,gBAAgB,KACtC,IAAIo8C,EAAY12D,KAAKs9C,GAAGqZ,aAAa,sBAClCD,IACDvwC,QAAQo6B,IAAI,gCACZmW,EAAUE,kBAGd52D,KAAK67C,MAAQ,IAAIqY,GAAcl0D,KAAKs9C,GAAIt9C,KAAKmzD,SAC7CnzD,KAAK07C,UAAY,IAAIsZ,GAAah1D,KAAKs9C,GAAIt9C,KAAKmzD,SAAS,GAAO,GAAM,GACtEnzD,KAAKy7C,UAAY,IAAIuZ,GAAah1D,KAAKs9C,GAAIt9C,KAAKmzD,SAAS,GAAM,GAAO,GACtEnzD,KAAK27C,WAAY,IAAI4Z,GAAiBv1D,KAAKs9C,GAAIt9C,KAAKmzD,SAAS,GAAM,GACnEnzD,KAAK47C,WAAa,IAAI2Z,GAAiBv1D,KAAKs9C,GAAIt9C,KAAKmzD,SAAS,GAAO,GACrEnzD,KAAK62D,MAAQ,IAAI1B,GAAcn1D,KAAKs9C,GAAIt9C,KAAKmzD,SAE7CnzD,KAAK82D,UAAY,CACf,CACEC,SAAU/2D,KAAK67C,MACfniC,KAAM,QACNpC,OAAO,GAET,CACEy/C,SAAU/2D,KAAK07C,UACfhiC,KAAM,YACNpC,OAAO,GAET,CACEy/C,SAAU/2D,KAAKy7C,UACf/hC,KAAM,YACNpC,OAAO,GAET,CACEy/C,SAAU/2D,KAAK27C,WACfjiC,KAAM,aACNpC,OAAO,GAET,CACEy/C,SAAU/2D,KAAK47C,WACfliC,KAAM,aACNpC,OAAO,GAET,CACEy/C,SAAU/2D,KAAK62D,MACfn9C,KAAM,QACNpC,OAAO,IAIX,IAAIozC,EAAS,KACR1qD,KAAKg3D,kBACNh3D,KAAKs9C,GAAGr/B,MAAMje,KAAKs9C,GAAGqN,kBACtB3qD,KAAK82D,UACFt3C,QAAOtf,GAAKA,EAAEoX,QACdzB,SAAQ3V,IAEPA,EAAE62D,SAASrM,YAEf1qD,KAAKg3D,iBAAkB,GAEzBC,sBAAsBvM,IAExBuM,sBAAsBvM,GAGxB/uC,oBAAoB0/B,GAClB,IAAIU,EAAeV,EAAMv+B,IAAI,gBACzBg/B,EAAaT,EAAMv+B,IAAI,cAC3B9c,KAAK67C,MAAMqb,oBAAoB,CAAC,EAAG,IACnCl3D,KAAK07C,UAAUwb,oBAAoB,CAACnb,EAAe,EAAG,IACtD/7C,KAAKy7C,UAAUyb,oBAAoB,CAAC,EAAGpb,EAAa,IACpD97C,KAAK47C,WAAWsb,oBAAoB,CAAC,EAAGpb,EAAa,IACrD97C,KAAK27C,WAAWub,oBAAoB,CAACnb,EAAe,EAAG,IACvD/7C,KAAK62D,MAAMK,oBAAoB,CAC7Bnb,EAAe,EACfD,EAAa,IAIjBngC,YAAY0/B,EAAO8b,KAAc5uD,GAC/B,OAAOA,EAAK24B,MAAK7gC,GAAKg7C,EAAMv+B,IAAIzc,KAAO82D,EAAUr6C,IAAIzc,KAGvDsb,OAAO0/B,EAAOpC,GACZ,IAAIke,EAAYn3D,KAAKm3D,UACjBC,EAASp3D,KAAKo3D,OAEfp3D,KAAKq3D,YAAYpe,EAAIme,EAAQ,aAC9Bp3D,KAAKie,QAGPje,KAAKs3D,eAAejc,GACpBr7C,KAAK62D,MAAMU,YACTv3D,KAAKs2D,iBACLt2D,KAAKu2D,iBACLv2D,KAAKw2D,aACLx2D,KAAKq1D,YACLr1D,KAAKs1D,cAEJt1D,KAAKq3D,YAAYhc,EAAO8b,EACzB,eACA,aACA,UACAn3D,KAAKq3D,YAAYpe,EAAIme,EAAQ,eAE7Bp3D,KAAK67C,MAAM2b,aAAa,CACtB9d,OAAQ2B,EAAMv+B,IAAI,gBAClB68B,OAAQ0B,EAAMv+B,IAAI,cAClBu8B,SAAUJ,EAAGn8B,IAAI,YACjBo8B,WAAYD,EAAGn8B,IAAI,cACnBw8B,UAAWL,EAAGn8B,IAAI,eAEpB9c,KAAK82D,UAAU,GAAGx/C,OAAQ,EAC1BtX,KAAK67C,MAAM4b,qBAAqBz3D,KAAKw2D,gBAGpCx2D,KAAKq3D,YAAYhc,EAAO8b,EACzB,YACA,aACA,YACA,cACAle,EAAG3G,MAAM,CAAC,YAAa,MAAQ8kB,EAAO9kB,MAAM,CAAC,YAAa,KAC1DtyC,KAAKq3D,YAAYpe,EAAIme,EAAQ,eAE7Bp3D,KAAK07C,UAAU8b,aAAa,CAC1B9d,OAAQ2B,EAAMv+B,IAAI,aAClB68B,OAAQ0B,EAAMv+B,IAAI,cAClBm/B,UAAWZ,EAAMv+B,IAAI,aACrBk/B,UAAWX,EAAMv+B,IAAI,aACrBu8B,SAAUJ,EAAGn8B,IAAI,YACjBw8B,UAAWL,EAAGn8B,IAAI,eAEpB9c,KAAK82D,UAAU,GAAGx/C,OAAQ,EAC1BtX,KAAK07C,UAAU+b,qBAAqBz3D,KAAKs2D,oBAIzCt2D,KAAKq3D,YAAYhc,EAAO8b,EACxB,eACA,YACA,YACA,cACAle,EAAG3G,MAAM,CAAC,YAAa,MAAQ8kB,EAAO9kB,MAAM,CAAC,YAAa,KAC1DtyC,KAAKq3D,YAAYpe,EAAIme,EAAQ,eAE7Bp3D,KAAKy7C,UAAU+b,aAAa,CAC1B9d,OAAQ2B,EAAMv+B,IAAI,gBAClB68B,OAAQ0B,EAAMv+B,IAAI,aAClBm/B,UAAWZ,EAAMv+B,IAAI,aACrBk/B,UAAWX,EAAMv+B,IAAI,aACrBu8B,SAAUJ,EAAGn8B,IAAI,YACjBo8B,WAAYD,EAAGn8B,IAAI,cACnBw8B,UAAWL,EAAGn8B,IAAI,eAEpB9c,KAAK82D,UAAU,GAAGx/C,OAAQ,EAC1BtX,KAAKy7C,UAAUgc,qBAAqBz3D,KAAKu2D,oBAIzCv2D,KAAKq3D,YAAYhc,EAAO8b,EACtB,YACA,YACA,eACFle,EAAG3G,MAAM,CAAC,YAAa,MAAQ8kB,EAAO9kB,MAAM,CAAC,YAAa,KAC1DtyC,KAAKq3D,YAAYpe,EAAIme,EAAQ,eAE7Bp3D,KAAK27C,WAAW6b,aAAa,CAC3B9d,OAAQ2B,EAAMv+B,IAAI,aAClB68B,OAAQ,EACRsC,UAAWZ,EAAMv+B,IAAI,aACrBk/B,UAAWX,EAAMv+B,IAAI,aACrBu8B,SAAUJ,EAAGn8B,IAAI,YACjBo8B,WAAYD,EAAGn8B,IAAI,cACnBw8B,UAAWL,EAAGn8B,IAAI,eAEpB9c,KAAK82D,UAAU,GAAGx/C,OAAQ,EAC1BtX,KAAK27C,WAAW+b,gBAAgB13D,KAAKq1D,eAIrCr1D,KAAKq3D,YAAYhc,EAAO8b,EACxB,YACA,YACA,eACAle,EAAG3G,MAAM,CAAC,YAAa,MAAQ8kB,EAAO9kB,MAAM,CAAC,YAAa,KAC1DtyC,KAAKq3D,YAAYpe,EAAIme,EAAQ,eAE7Bp3D,KAAK47C,WAAW4b,aAAa,CAC3B9d,OAAQ,EACRC,OAAQ0B,EAAMv+B,IAAI,aAClBm/B,UAAWZ,EAAMv+B,IAAI,aACrBk/B,UAAWX,EAAMv+B,IAAI,aACrBu8B,SAAUJ,EAAGn8B,IAAI,YACjBo8B,WAAYD,EAAGn8B,IAAI,cACnBw8B,UAAWL,EAAGn8B,IAAI,eAEpB9c,KAAK82D,UAAU,GAAGx/C,OAAQ,EAC1BtX,KAAK47C,WAAW8b,gBAAgB13D,KAAKs1D,cAIrCja,IAAU8b,GACVC,IAAWne,IAEXj5C,KAAK62D,MAAMW,aAAa,CACtB9d,OAAQ2B,EAAMv+B,IAAI,aAClB68B,OAAQ0B,EAAMv+B,IAAI,aAClBg/B,WAAYT,EAAMv+B,IAAI,cACtBi/B,aAAcV,EAAMv+B,IAAI,gBACxBu8B,SAAUJ,EAAGn8B,IAAI,YACjBw8B,UAAWL,EAAGn8B,IAAI,eAEpB9c,KAAK82D,UAAU,GAAGx/C,OAAQ,GAI5BtX,KAAKm3D,UAAY9b,EACjBr7C,KAAKo3D,OAASne,EAGhBt9B,eAAe0/B,GACb,IAAI8b,EAAYn3D,KAAKm3D,UAClBn3D,KAAKq3D,YAAYhc,EAAO8b,EAAW,YAAa,aAAc,eAC/Dn3D,KAAKs2D,iBAAiB13C,SACtB5e,KAAKs2D,iBAAmBb,GAAoBz1D,KAAKs9C,GAC/CjC,EAAMv+B,IAAI,aACVu+B,EAAMv+B,IAAI,cACVu+B,EAAMv+B,IAAI,eAGX9c,KAAKq3D,YAAYhc,EAAO8b,EAAW,YAAa,eAAgB,eACjEn3D,KAAKu2D,iBAAiB33C,SACtB5e,KAAKu2D,iBAAmBd,GAAoBz1D,KAAKs9C,GAC/CjC,EAAMv+B,IAAI,aACVu+B,EAAMv+B,IAAI,gBACVu+B,EAAMv+B,IAAI,eAGX9c,KAAKq3D,YAAYhc,EAAO8b,EAAW,QAAS,gBAC7Cn3D,KAAKw2D,aAAa53C,SAClB5e,KAAKw2D,aDlQJ,SAA2BlZ,EAAIxjC,EAAMygC,EAAOM,GACjD,IAAI8a,EAAc,IAAI9D,WAAWtX,EAAQM,EAAS,GAC9C8c,EAAM,EACV,IAAI,IAAIv1D,EAAI,EAAGA,EAAIy4C,EAAQz4C,IACzB,IAAI,IAAI24C,EAAI,EAAGA,EAAIR,EAAOQ,IACxB,GAA0B,IAAvBjhC,EAAKw4B,MAAM,CAAClwC,EAAG24C,IAAW,CAC3B4c,IAEA,IAAIzjD,EAAsB,GAAjB9R,EAAIm4C,EAAQQ,GACrB4a,EAAYzhD,EAAI,GAAK,IACrByhD,EAAYzhD,EAAI,GAAK,IACrByhD,EAAYzhD,EAAI,GAAK,IACrByhD,EAAYzhD,EAAI,GAAK,IAK3BiS,QAAQo6B,IAAI,MAAOoX,GACnB,IAAIr3D,EAAI,GACR,IAAI,IAAI8B,EAAI,EAAGA,EAAIy4C,EAAQz4C,IAAK,CAC9B,IAAI,IAAI24C,EAAI,EAAGA,EAAIR,EAAOQ,IAExBz6C,IAAyB,MAAnBq1D,EADoB,GAAjBvzD,EAAIm4C,EAAQQ,IACU,EAAI,GAAK,IAE1Cz6C,GAAK,KAIP,OAFA6lB,QAAQo6B,IAAIjgD,GAEL,IAAIsxD,GAAQtU,EAAI/C,EAAOM,EAAQ8a,GCsOdiC,CAAkB53D,KAAKs9C,GACzCjC,EAAMv+B,IAAI,SACVu+B,EAAMv+B,IAAI,gBACVu+B,EAAMv+B,IAAI,gBAGX9c,KAAKq3D,YAAYhc,EAAO8b,EAAW,aAAc,UAClDn3D,KAAKq1D,YAAYz2C,SACjB5e,KAAKq1D,YAAcQ,GAAmB71D,KAAKs9C,GACzCjC,EAAMv+B,IAAI,cACVu+B,EAAMv+B,IAAI,cAAc/S,KACxB,EACAsxC,EAAMv+B,IAAI,UAGX9c,KAAKq3D,YAAYhc,EAAO8b,EAAW,aAAc,UAClDn3D,KAAKs1D,YAAY12C,SACjB5e,KAAKs1D,YAAcO,GAAmB71D,KAAKs9C,GACzCjC,EAAMv+B,IAAI,cACV,EACAu+B,EAAMv+B,IAAI,cAAc/S,KACxBsxC,EAAMv+B,IAAI,UAIhBnB,eACE3b,KAAKu6C,MAAQv6C,KAAKs9C,GAAG9D,OAAOe,MAC5Bv6C,KAAK66C,OAAS76C,KAAKs9C,GAAG9D,OAAOqB,OAC7B76C,KAAKs9C,GAAGua,SAAS,EAAG,EAAG73D,KAAKu6C,MAAOv6C,KAAK66C,QAG1Cl/B,iBAAiBjC,EAAMo+C,GACrB93D,KAAKs9C,GAAG9D,OAAOl/B,iBAAiBZ,EAAMo+C,GAGxCn8C,SACE3b,KAAKg3D,iBAAkB,EAGzBr7C,QACE3b,KAAKs9C,GAAGr/B,MAAMje,KAAKs9C,GAAGqN,kBACtB3qD,KAAK82D,UAAUjhD,SAAQ3V,GAAKA,EAAEoX,OAAQ,IACtCtX,KAAK0qD,mHCrTa3zC,gBAAiBA,uIANzB+lC,EAAOhgC,IAAI,aAAe6zC,EAAI7zC,IAAI,YACjCggC,EAAOhgC,IAAI,aAAe6zC,EAAI7zC,IAAI,kPC+LtCi7C,GAAkBtrB,EAAMC,MAC5BD,EAAKliC,SAAWmiC,EAAMniC,cAChB,UAEDnI,EAAI,EAAGA,EAAIqqC,EAAKliC,OAAQnI,OAC3BqqC,EAAKrqC,KAAOsqC,EAAMtqC,UACZ,SAGJ,6BApML20D,EACAvd,EAEAwe,EACA1H,kDAIA2H,EACAC,EACAC,EALAC,KACAC,KAkBAC,cAsHKC,EAAW7+C,EAAMmH,EAAO9Z,GAC/Bs0C,GAAMv9B,QAAOja,GAAKA,EAAEy+B,UAAU5oB,EAAMmH,IAAQnM,GAAKA,IAAM3N,GAAS,EAAIA,eAe7D2hD,EAAYhvC,EAAM8+C,EAAYC,EAAUrf,GAC5Cqf,EAAWD,KACXA,EAAYC,IAAaA,EAAUD,QAGlCjqB,EAAUuO,EAAOhgC,IAAIpD,GAAMqqB,eAAcvjC,YACnC4B,EAAI,EAAGA,EAAKq2D,EAAWD,EAAc,EAAGp2D,IAC9C5B,EAAEoc,IAAI47C,EAAap2D,EAAGg3C,MAI1BiC,GAAMv9B,QAAOja,GAAKA,EAAE+Y,IAAIlD,EAAM60B,cA8BvBmqB,EAAc5H,OACjBlrD,YACJkrD,EAAGj7C,SAAQtT,IACG,UAATy1D,IACiB,cAATA,EACTpyD,EAAIrD,EAAE,IAAMA,EAAE,GACG,cAATy1D,IACRpyD,EAAIrD,EAAE,IAAMA,EAAE,QAGXqD,WAGOu1C,QACd3B,EAAOe,MAAQf,EAAOmf,mBACtBnf,EAAOqB,OAASrB,EAAOof,gBACvB7B,EAASN,eACTM,EAASrM,gBAlLXnuC,YACEw6C,MAAehB,GAASvc,IACxB2B,IAEA4b,EAASz8C,iBAAiB,eAAgBsB,IACxCq8C,GAAYr8C,EAAE4+B,QAAS5+B,EAAE6+B,SACzB0d,EAAcxH,EAAI7zC,IAAI,aAAawzB,UAGrCymB,EAASz8C,iBAAiB,eAAgBsB,YAC5BjE,IAATqgD,GAAoC,IAAdp8C,EAAEgtC,cACzBoP,OAAOrgD,GACPo/C,EAASiB,GAAMtN,eAGL/yC,IAATqgD,IAAkC,EAAZp8C,EAAEgtC,UAAsC,IAAhBhtC,EAAEg1C,WAAmC,IAAhBh1C,EAAEi1C,gBAClE3wD,EAAI62D,EAASD,UAAU5jB,MAAKhzC,GAAKA,EAAE62D,SAAS8B,aAAaZ,UACpDtgD,IAANzX,OACD83D,EAAO93D,EAAEwZ,cAID/B,IAATqgD,OACG3e,EAAWsX,EAAI7zC,IAAI,YACnBg8C,EAASnI,EAAI7zC,IAAI,aAAawzB,OAClC4nB,GAAUt8C,EAAE4+B,QAAUse,EAAO,GAAKzf,EAAUz9B,EAAE6+B,QAAUqe,EAAO,GAAKzf,OAChE0f,GACFd,EAAS,IAAMa,EAAO,GAAKX,EAAY,IAAM,EAC7CF,EAAS,IAAMa,EAAO,GAAKX,EAAY,IAAM,UAG/C7H,EAAayG,EAASiB,GAAMgB,sBAAsBD,EAAgBb,IAC9DF,EAAKp6B,SAAS,aAcbm6B,GAAkBzH,EAAY8H,QAC3Bt4D,EAAQg9C,EAAOxK,OAAO,OAAQqe,EAAI7zC,IAAI,iBAAkB,UAAUwzB,OACtEymB,EAASiB,GAAMiB,gBAAgB3I,EAAYxwD,GAE7Cs4D,EAAgB9H,UAjBJ,UAAT0H,EACED,GAAkBzH,EAAY8H,IAC/BrB,EAASiB,GAAMiB,aAAa3I,GAE9B8H,EAAgB9H,WAEZ/tD,EAAIm2D,EAAcpI,GACnByH,GAAkBx1D,EAAG81D,IACtBtB,EAASiB,GAAMiB,aAAa12D,GAE9B81D,EAAO91D,OAYfw0D,EAASz8C,iBAAiB,aAAcsB,YAC1BjE,IAATqgD,UACMA,OACA,iBACA,aACHtP,EAAYsP,EAAM1H,EAAW,GAAIA,EAAW,GAAIK,EAAI7zC,IAAI,kBACxDi6C,EAAS94C,kBAEN,gBACA,gBACC6yC,EAAK4H,EAAcpI,aAqEL52C,EAAMo3C,GACxBhU,EAAOhgC,IAAI,gBACXggC,EAAOhgC,IAAI,cAEnBu+B,GAAMv9B,QAAOja,GAAKA,EAAEia,OAAOpE,GAAMixB,GAAQA,EAAK5G,eAAcvjC,IAC1DswD,EAAGj7C,UAAStT,EAAGH,IAAM5B,EAAEoc,IAAIxa,EAAGG,YAzExB22D,CAAmBlB,EAAMlH,aAEtB,kBAwCkBR,GACrBxT,EAAOhgC,IAAI,gBACXggC,EAAOhgC,IAAI,cACnBu+B,GAAMv9B,QAAOja,QACPw3C,EAAQx3C,SACZysD,EAAWz6C,SAAQtT,IACjB84C,EAAQA,EAAMhY,OAAO,QAAS9gC,EAAE,GAAIA,EAAE,IAAK,MAEtC84C,KA/CD8d,CAAsB7I,GAI1ByG,EAASiB,GAAMtN,aACfsN,OAAOrgD,YAEHqyC,GAAOpuC,EAAE4+B,QAAS5+B,EAAE6+B,SACpBv6C,EAAI62D,EAASD,UAAU5jB,MAAKhzC,GAAKA,EAAE62D,SAAS8B,aAAa7O,aACpDryC,IAANzX,aAGCwZ,EAAOxZ,EAAEwZ,KACT0/C,EAAOrC,EAASr9C,GAAMs6C,aAAahK,UAChCtwC,OACA,aACHgvC,EAAYhvC,EAAM0/C,EAAK,GAAIA,EAAK,GAAIzI,EAAI7zC,IAAI,4BAEzC,aACH4rC,EAAYhvC,EAAM0/C,EAAK,GAAIA,EAAK,GAAIzI,EAAI7zC,IAAI,4BAEzC,YACHy7C,EAAW7+C,EAAM0/C,EAAK,GAAIA,EAAK,cAE5B,YACHb,EAAW7+C,EAAM0/C,EAAK,GAAIA,EAAK,cAE5B,kBA+CQlvB,EAAG2P,GACdiD,EAAOhgC,IAAI,gBACXggC,EAAOhgC,IAAI,cACnBu+B,GAAMv9B,QAAOja,GAAKA,EAAEy+B,UAAU,QAAS4H,EAAG2P,IAAIt5C,GAAW,IAANA,EAAU,EAAI,MAjDzD84D,CAAYD,EAAK,GAAIA,EAAK,gDA1H/BrC,GACDA,EAASj5C,OAAOg/B,EAAQ6T,GACxBoG,EAASG,oBAAoBpa,OAE3Bia,EAASrM,eACF9uC,GACPuK,QAAQwb,MAAM/lB,2BAOdk9C,EAASnI,EAAI7zC,IAAI,aAAawzB,eAClB34B,IAAbo/C,QAAoCp/C,IAATqgD,IAAuBc,EAAO,KAAOR,EAAU,IAAMQ,EAAO,KAAOR,EAAU,OACtGN,EAAKp6B,SAAS,cACX99B,EAAQg9C,EAAOxK,OAAO,OAAQqe,EAAI7zC,IAAI,iBAAkB,UAAUwzB,OACtEymB,EAASiB,GAAMiB,gBAAgB3I,EAAYxwD,QAE3Ci3D,EAASiB,GAAMiB,aAAa3I,OAGhCgI,EAAYQ,mBAwLgBl9C,GAC5B49B,EAAO8f,cAAc19C,wDAIgB49B,+tBCtL5BziC,KAAO+F,IAAI,QAAQwzB,4BAAxB/lC,+MAAKwM,KAAO+F,IAAI,QAAQwzB,eAAxB/lC,+HAAAA,iJACgC1K,EAAUiJ,UAAUiO,KAAKjX,OAAOqH,wIAAhCtH,EAAUiJ,UAAUiO,KAAKjX,OAAOqH,wHAV7C,IAAd4P,gCAOQ,IAAdA,gLAhB2BA,KAAM5P,yFAMtB4P,KAAM7Q,SAAW,QAAU,2BAC7B6Q,KAAM3Q,UAAY,QAAU,sQAPV2Q,KAAM5P,mIAMtB4P,KAAM7Q,SAAW,QAAU,2BAC7B6Q,KAAM3Q,UAAY,QAAU,uCASvB,IAAd2Q,0LA1CDwiD,GAAY,EACZz5D,EAAQD,EAAU,kBAYb25D,EAAS34C,GAChBo4B,GAAGn7B,QAAOs/B,GAAKA,EAAExgC,IAAI,gBAAiBiE,SACtC04C,GAAY,iDAZRngB,EAAgBuX,EAAI7zC,IAAI,iBACxBpI,EAAIooC,EAAOxK,OACb,OACA8G,EACA,UACC9I,WACHxwC,EAAQD,EAAUiJ,UAAU4L,yBAcZ6kD,GAAaA,MAsBwEC,EAASp3D,+YCwCtE2U,uDACCA,gUAMgCA,+BAX7DA,kBAWiCA,yIAPLA,uDACCA,yEAMgCA,+PA9ClE0iD,GAAiB//C,EAAMkC,cACnB89C,WAAWhgD,GACpBovC,QAASltC,EAAEktC,QACXC,QAASntC,EAAEmtC,QACXH,QAAShtC,EAAEgtC,QACXgI,UAAWh1C,EAAEg1C,UACbC,UAAWj1C,EAAEi1C,4DAjDK9/B,SAElB4oC,EACAC,EAIAC,EAEA1f,EALA2f,EAAcnJ,EAAI7zC,IAAI,YAEtBi9C,EAAiB,YAmDZC,EAAe7/C,GAGLy/C,EAAgBvf,wBACtBsf,EAAgBtf,4BACvB4f,EAAgBN,EAAgBO,YAAcP,EAAgBQ,YAC9DC,EAAeT,EAAgBU,aAAeV,EAAgBW,aAC9DpwB,EAAI+vB,EAAgBN,EAAgBY,WACpC1gB,EAAIugB,EAAeT,EAAgBa,UAEvCvhB,GAAGn7B,QAAOs/B,GACDA,EAAExgC,IAAI,YAAa0tB,IAAMJ,EAAG2P,cAzDvCt9B,YACEw9C,EAAiBJ,EAAgBhB,YAAcgB,EAAgBQ,aAC/DR,EAAgBr/C,iBAAiB,SAAU0/C,OACvCC,EAAgBN,EAAgBO,YAAcP,EAAgBQ,YAC9DC,EAAeT,EAAgBU,aAAeV,EAAgBW,aAClEX,EAAgBc,SACdR,EACAG,GAEFjgB,MAAqBC,gBAAe9uB,IAClCuuC,EAAa1e,0BAEfhB,EAAec,QAAQ2e,GAEvBD,EAAgBr/C,iBAAiB,eAAesB,QAC1C8+C,EAAMjB,GAAiB,cAAe79C,GAC1Ci+C,EAAaP,cAAcoB,MAE7Bf,EAAgBr/C,iBAAiB,aAAasB,QACxC8+C,EAAMjB,GAAiB,YAAa79C,GACxCi+C,EAAaP,cAAcoB,MAE7Bf,EAAgBr/C,iBAAiB,eAAesB,QAC1C8+C,EAAMjB,GAAiB,cAAe79C,GAC1Ci+C,EAAaP,cAAcoB,MAE7Bf,EAAgBr/C,iBAAiB,SAASsB,QACpC8+C,EAAMjB,GAAiB,QAAS79C,GACpCi+C,EAAaP,cAAcoB,SAc/Bj+C,QACEk9C,EAAgBp/C,oBAAoB,SAAUy/C,8BAmBjCrJ,EAAI7zC,IAAI,aACrBm8B,GAAGn7B,QAAOs/B,GAAKA,EAAExgC,IAAI,WAAYk9C,8CAWRD,uDAJXD,uDAHyBD,0BAWkCG,kvBChGrD/oC,qKCaY4pC,0CACJC,ybAJlB7jD,iJAAAA,+JAHD8R,2DCPPgyC,GAAM,yEAAQ,CAClBhiD,OAAQc,SAASktC,KACjB5uC,MAAO,CACL4Q,IAAKT,SAASjE,SAASjiB,OAAOkmB,SAASjE,SAASiuB,YAAY,gBAIhEn9B,OAAOpV,UAAYA"}